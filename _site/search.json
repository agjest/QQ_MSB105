[
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#relational-data-chap.-13",
    "href": "wrangle-data/relational-data/relational-data.html#relational-data-chap.-13",
    "title": "Joins",
    "section": "Relational data (chap. 13)",
    "text": "Relational data (chap. 13)\n\nData spread over files/tables and some key existing, or possible to generate, that we can use to tie them together\nMutating joins: add new variable(s) to a tibble/dataframe taken from other tibbles/dataframes\nFiltering joins: filter observations, hence affect observations not variables.\nSet observations: Think Venn-diagrams, union, intersection, set differences\nPackage dplyr: “simplified” SQL"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#example-data",
    "href": "wrangle-data/relational-data/relational-data.html#example-data",
    "title": "Joins",
    "section": "Example data",
    "text": "Example data\n\npackage nycflights13\n\nairlines\nairports\nweather\nplanes\nflights\n\nhelp(flights) “On-time data for all flights that departed NYC”\ndep_time, arr_time: Actual departure and arrival times (format HHMM or HMM), local tz."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#example-data-1",
    "href": "wrangle-data/relational-data/relational-data.html#example-data-1",
    "title": "Joins",
    "section": "Example data",
    "text": "Example data\n\n\nCode\nhead(airlines, n = 3)\n\n\n# A tibble: 3 × 2\n  carrier name                  \n  &lt;chr&gt;   &lt;chr&gt;                 \n1 9E      Endeavor Air Inc.     \n2 AA      American Airlines Inc.\n3 AS      Alaska Airlines Inc.  \n\n\n\n\nCode\nflights %&gt;% \n  select(year:day, carrier, everything()) %&gt;% \n  group_by(carrier) %&gt;% \n  summarise(first(dep_time)) %&gt;% \n  head(, n= 3)\n\n\n# A tibble: 3 × 2\n  carrier `first(dep_time)`\n  &lt;chr&gt;               &lt;int&gt;\n1 9E                    810\n2 AA                    542\n3 AS                    724\n\n\n\nCarrier possible key to get airlines names into the flights dataframe."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#example-data-2",
    "href": "wrangle-data/relational-data/relational-data.html#example-data-2",
    "title": "Joins",
    "section": "Example data",
    "text": "Example data\n\nFrom help(weather): Hourly meterological data for LGA, JFK and EWR.\n\n\n\n\nCode\nhead(weather, n = 3)\n\n\n# A tibble: 3 × 15\n  origin  year month   day  hour  temp  dewp humid wind_dir wind_speed wind_gust\n  &lt;chr&gt;  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;     &lt;dbl&gt;\n1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4         NA\n2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06        NA\n3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5         NA\n# ℹ 4 more variables: precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;,\n#   time_hour &lt;dttm&gt;\n\n\n\nOrigin possible key to match airport and weather, but not enough. We also have to match on year, month, day and hour."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#example-data-3",
    "href": "wrangle-data/relational-data/relational-data.html#example-data-3",
    "title": "Joins",
    "section": "Example data",
    "text": "Example data\n\n\nCode\nplanes %&gt;%\n  head(n = 3)\n\n\n# A tibble: 3 × 9\n  tailnum  year type               manufacturer model engines seats speed engine\n  &lt;chr&gt;   &lt;int&gt; &lt;chr&gt;              &lt;chr&gt;        &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; \n1 N10156   2004 Fixed wing multi … EMBRAER      EMB-…       2    55    NA Turbo…\n2 N102UW   1998 Fixed wing multi … AIRBUS INDU… A320…       2   182    NA Turbo…\n3 N103US   1999 Fixed wing multi … AIRBUS INDU… A320…       2   182    NA Turbo…"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#example-data-4",
    "href": "wrangle-data/relational-data/relational-data.html#example-data-4",
    "title": "Joins",
    "section": "Example data",
    "text": "Example data\n\n\nCode\nflights %&gt;% \n  select(tailnum, everything()) %&gt;% \n  head(n = 3)\n\n\n# A tibble: 3 × 19\n  tailnum  year month   day dep_time sched_dep_time dep_delay arr_time\n  &lt;chr&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n1 N14228   2013     1     1      517            515         2      830\n2 N24211   2013     1     1      533            529         4      850\n3 N619AA   2013     1     1      542            540         2      923\n# ℹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;,\n#   flight &lt;int&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;\n\n\n\nProbably enough with tailnum as key."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#example-data-5",
    "href": "wrangle-data/relational-data/relational-data.html#example-data-5",
    "title": "Joins",
    "section": "Example data",
    "text": "Example data\n\n\nCode\nairports %&gt;% \n  filter(faa %in% c('JFK', 'LGA', 'EWR'))\n\n\n# A tibble: 3 × 8\n  faa   name                  lat   lon   alt    tz dst   tzone           \n  &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;           \n1 EWR   Newark Liberty Intl  40.7 -74.2    18    -5 A     America/New_York\n2 JFK   John F Kennedy Intl  40.6 -73.8    13    -5 A     America/New_York\n3 LGA   La Guardia           40.8 -73.9    22    -5 A     America/New_York\n\n\n\nfaa seems to be the same code we have in flights$origin. Check the variables or documentation."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-flights-and-airline",
    "href": "wrangle-data/relational-data/relational-data.html#join-flights-and-airline",
    "title": "Joins",
    "section": "Join flights and airline",
    "text": "Join flights and airline\n\nleft_join(): includes all rows in x, see help(left_join) for alternatives\nnote that key is the same (carrier) in both tables.\n\n\n\n\nCode\nmy_flights &lt;- flights \nmy_flights &lt;- my_flights%&gt;% \n  left_join(airlines, by = \"carrier\")\n\nmy_flights %&gt;% \n  select(carrier, name, everything()) %&gt;% \n  head(3)\n\n\n# A tibble: 3 × 20\n  carrier name       year month   day dep_time sched_dep_time dep_delay arr_time\n  &lt;chr&gt;   &lt;chr&gt;     &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n1 UA      United A…  2013     1     1      517            515         2      830\n2 UA      United A…  2013     1     1      533            529         4      850\n3 AA      American…  2013     1     1      542            540         2      923\n# ℹ 11 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;, flight &lt;int&gt;,\n#   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,\n#   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-flights-and-planes",
    "href": "wrangle-data/relational-data/relational-data.html#join-flights-and-planes",
    "title": "Joins",
    "section": "Join flights and planes",
    "text": "Join flights and planes\n\ncheck names\n\n\n\n\nCode\nnmf &lt;- names(my_flights)\nnmf[nmf %in% names(planes)]\n\n\n[1] \"year\"    \"tailnum\"\n\n\n\n“year” has two different meanings, year of the flight and the year the plane was built. We have to keep them apart (suffix option)."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-flights-and-planes-1",
    "href": "wrangle-data/relational-data/relational-data.html#join-flights-and-planes-1",
    "title": "Joins",
    "section": "Join flights and planes",
    "text": "Join flights and planes\n\n\nCode\nmy_flights &lt;- my_flights %&gt;% \n  left_join(planes, by = \"tailnum\", \n            suffix = c(\"\", \"_plane\"))\n\nmy_flights %&gt;% \n  select(tailnum, model, \n         year_plane, year, everything()) %&gt;% \n  head(n = 3)\n\n\n# A tibble: 3 × 28\n  tailnum model   year_plane  year month   day dep_time sched_dep_time dep_delay\n  &lt;chr&gt;   &lt;chr&gt;        &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;\n1 N14228  737-824       1999  2013     1     1      517            515         2\n2 N24211  737-824       1998  2013     1     1      533            529         4\n3 N619AA  757-223       1990  2013     1     1      542            540         2\n# ℹ 19 more variables: arr_time &lt;int&gt;, sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;,\n#   distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, name &lt;chr&gt;,\n#   type &lt;chr&gt;, manufacturer &lt;chr&gt;, engines &lt;int&gt;, seats &lt;int&gt;, speed &lt;int&gt;,\n#   engine &lt;chr&gt;"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-and-dest-with-airport-data",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-and-dest-with-airport-data",
    "title": "Joins",
    "section": "Join origin and dest with airport data",
    "text": "Join origin and dest with airport data\n\norigin is just the three NYC airports (faa code). Check with (unique(flights$origin))\ndest is the destination, about 100 different airports (faa code)\nfaa airport code in airports tibble"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-and-dest-with-airport-data-1",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-and-dest-with-airport-data-1",
    "title": "Joins",
    "section": "Join origin and dest with airport data",
    "text": "Join origin and dest with airport data\n\ncheck names\n\n\n\n\nCode\nnmf &lt;- names(my_flights)\nnmf[nmf %in% names(airports)]\n\n\n[1] \"name\"\n\n\n\n\nCode\nhead(my_flights$name, n = 4)\n\n\n[1] \"United Air Lines Inc.\"  \"United Air Lines Inc.\"  \"American Airlines Inc.\"\n[4] \"JetBlue Airways\"       \n\n\n\n\nCode\nhead(airports$name, n = 4)\n\n\n[1] \"Lansdowne Airport\"             \"Moton Field Municipal Airport\"\n[3] \"Schaumburg Regional\"           \"Randall Airport\""
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-with-airport-data",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-with-airport-data",
    "title": "Joins",
    "section": "Join origin with airport data",
    "text": "Join origin with airport data\n\n\nCode\nmy_flights &lt;- my_flights %&gt;% \n  left_join(airports, \n            by = c(\"origin\" = \"faa\"), \n            suffix = c(\"_airline\", \"_origin_airport\"), \n            keep = TRUE\n            ) %&gt;% \n  select(year:day, name_airline, name_origin_airport, everything())\nhead(my_flights, n = 3)\n\n\n# A tibble: 3 × 36\n   year month   day name_airline     name_origin_airport dep_time sched_dep_time\n  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;            &lt;chr&gt;                  &lt;int&gt;          &lt;int&gt;\n1  2013     1     1 United Air Line… Newark Liberty Intl      517            515\n2  2013     1     1 United Air Line… La Guardia               533            529\n3  2013     1     1 American Airlin… John F Kennedy Intl      542            540\n# ℹ 29 more variables: dep_delay &lt;dbl&gt;, arr_time &lt;int&gt;, sched_arr_time &lt;int&gt;,\n#   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,\n#   time_hour &lt;dttm&gt;, year_plane &lt;int&gt;, type &lt;chr&gt;, manufacturer &lt;chr&gt;,\n#   model &lt;chr&gt;, engines &lt;int&gt;, seats &lt;int&gt;, speed &lt;int&gt;, engine &lt;chr&gt;,\n#   faa &lt;chr&gt;, lat &lt;dbl&gt;, lon &lt;dbl&gt;, alt &lt;dbl&gt;, tz &lt;dbl&gt;, dst &lt;chr&gt;,\n#   tzone &lt;chr&gt;"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-dest-with-airport-data",
    "href": "wrangle-data/relational-data/relational-data.html#join-dest-with-airport-data",
    "title": "Joins",
    "section": "Join dest with airport data",
    "text": "Join dest with airport data\n\nNow we have to be really careful with names.\ncheck names\n\n\n\n\nCode\nnmf &lt;- names(my_flights)\nnmf[nmf %in% names(airports)]\n\n\n[1] \"faa\"   \"lat\"   \"lon\"   \"alt\"   \"tz\"    \"dst\"   \"tzone\"\n\n\n\nWe are going to use faa as key and can set keep = FALSE to get rid of the one in airports.\nThe others we will suffix with “_origin” and “_dest”."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-dest-with-airport-data-1",
    "href": "wrangle-data/relational-data/relational-data.html#join-dest-with-airport-data-1",
    "title": "Joins",
    "section": "Join dest with airport data",
    "text": "Join dest with airport data\n\n\nCode\n#work with tmp until correct then \n#change to my_flights\nmy_flights &lt;- my_flights %&gt;% \n  left_join(airports, \n            by = c(\"dest\" = \"faa\"),\n            suffix = c(\"_origin\", \"_dest\"),\n            keep = FALSE\n            ) %&gt;% \n  rename(name_dest_airport = name) %&gt;% \n  select(faa, origin, dest, lat_origin, lat_dest, everything())\n#View(my_flights[1:50,])\n\n\n\nwe had to use a rename on the name variable since no variable called name in my_flights, hence it didn’t get any suffix."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather",
    "title": "Joins",
    "section": "Join origin airport and weather",
    "text": "Join origin airport and weather\n\nLuckily we only have weather data for the origin (NYC) airport ;-)\nWe want to know the weather conditions on departure\nWeather has data for every date and every hour\ndep_time: Actual departure and arrival times (format HHMM or HMM), local tz.\nWe have to get the hour out of dep_time, ex. 513 should be 5 while 1309 should be 13\nMany solutions, convert to datetime object etc.\nWe will pad with 0 in front to get 4 characters, then str_sub the two first characters and convert to integer."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-fix-dep_time",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-fix-dep_time",
    "title": "Joins",
    "section": "Join origin airport and weather, fix dep_time",
    "text": "Join origin airport and weather, fix dep_time\n\nWe first develop our solution with less data. No need to use 336776 observations while we develop our solution.\n\n\n\n\nCode\nset.seed(666)\n(x &lt;- sample(my_flights$dep_time, size = 30))\n\n\n [1] 1353 1635  909 1458 1853  801 1323  624 1510  826   29 1953   NA  944 1154\n[16]  830 1443  725  752  610 1545  822 1905 1356  848 2024  744  911  820 1156\n\n\n\nGood mix, NA, 29, 826, 1156"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-fix-dep_time-1",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-fix-dep_time-1",
    "title": "Joins",
    "section": "Join origin airport and weather, fix dep_time",
    "text": "Join origin airport and weather, fix dep_time\n\n\nCode\nx &lt;- str_pad(x, width = 4, side = \"left\", pad = \"0\")\nx\n\n\n [1] \"1353\" \"1635\" \"0909\" \"1458\" \"1853\" \"0801\" \"1323\" \"0624\" \"1510\" \"0826\"\n[11] \"0029\" \"1953\" NA     \"0944\" \"1154\" \"0830\" \"1443\" \"0725\" \"0752\" \"0610\"\n[21] \"1545\" \"0822\" \"1905\" \"1356\" \"0848\" \"2024\" \"0744\" \"0911\" \"0820\" \"1156\""
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-fix-dep_time-2",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-fix-dep_time-2",
    "title": "Joins",
    "section": "Join origin airport and weather, fix dep_time",
    "text": "Join origin airport and weather, fix dep_time\n\n\nCode\n(x &lt;- as.numeric(str_sub(x, start = 1, end = 2)))\n\n\n [1] 13 16  9 14 18  8 13  6 15  8  0 19 NA  9 11  8 14  7  7  6 15  8 19 13  8\n[26] 20  7  9  8 11"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-fix_dep_time",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-fix_dep_time",
    "title": "Joins",
    "section": "Join origin airport and weather; fix_dep_time",
    "text": "Join origin airport and weather; fix_dep_time\n\n\nCode\nfix_dep_time &lt;- function(x) {\n  x = str_pad(x, width = 4, side = \"left\", pad = \"0\")\n  x = str_sub(x, start = 1, end = 2)\n  x = as.integer(x)\n  return(x)\n  }"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-dep_time_hour",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-dep_time_hour",
    "title": "Joins",
    "section": "Join origin airport and weather; dep_time_hour",
    "text": "Join origin airport and weather; dep_time_hour\n\n\nCode\nmy_flights &lt;- my_flights %&gt;% \n  mutate(\n    dep_time_hour = fix_dep_time(dep_time)\n  )"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-1",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-1",
    "title": "Joins",
    "section": "Join origin airport and weather",
    "text": "Join origin airport and weather\n\ncheck names\n\n\n\n\nCode\nnmf &lt;- names(my_flights)\nnmf[nmf %in% names(weather)]\n\n\n[1] \"origin\"    \"year\"      \"month\"     \"day\"       \"hour\"      \"time_hour\"\n\n\n\nfirst 5 we use as key, drop “y version” with keep = FALSE. Change name om time_hour to time_hour_weather with suffix."
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-2",
    "href": "wrangle-data/relational-data/relational-data.html#join-origin-airport-and-weather-2",
    "title": "Joins",
    "section": "Join origin airport and weather",
    "text": "Join origin airport and weather\n\n\nCode\nmy_flights &lt;- my_flights %&gt;% \n  left_join(weather, \n            by = c(\"origin\", \"year\", \"month\", \"day\", \"dep_time_hour\" = \"hour\"),\n            suffix = c(\"\", \"_weather\"), \n            keep = FALSE\n            )\n\n\n\nWe also ought to group the variables a bit better with select().\n\n\n\n\nCode\nmy_flights &lt;- my_flights %&gt;% \n  select(year, month, day, dep_time, everything()) %&gt;% \n  print()\n\n\n\n\nCode\n#View(my_flights)"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#the-other-joins",
    "href": "wrangle-data/relational-data/relational-data.html#the-other-joins",
    "title": "Joins",
    "section": "The other joins",
    "text": "The other joins\n\n“The left join should be your default join\n\nuse it unless you have a strong reason to prefer one of the others.”\n\nIf you really think you need them, you will find them all in Chap. 13"
  },
  {
    "objectID": "wrangle-data/relational-data/relational-data.html#references",
    "href": "wrangle-data/relational-data/relational-data.html#references",
    "title": "Joins",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nWickham, Hadley. 2021. Nycflights13: Flights That Departed NYC in 2013. https://github.com/hadley/nycflights13.\n\n\n———. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "wrangle-data/data-import-cont/data-import-cont.html#data-import",
    "href": "wrangle-data/data-import-cont/data-import-cont.html#data-import",
    "title": "Data Import cont.",
    "section": "Data Import",
    "text": "Data Import\n\nWe have covered some of this before\nNow we will concentrate on the From Text (readr)… menu-item from the Import Dataset menu in the Environment pane\n\n\n\n\n\nSelect readr import."
  },
  {
    "objectID": "wrangle-data/data-import-cont/data-import-cont.html#data-import-1",
    "href": "wrangle-data/data-import-cont/data-import-cont.html#data-import-1",
    "title": "Data Import cont.",
    "section": "Data Import",
    "text": "Data Import\n\nImport Text Data dialogue box"
  },
  {
    "objectID": "wrangle-data/data-import-cont/data-import-cont.html#data-import-2",
    "href": "wrangle-data/data-import-cont/data-import-cont.html#data-import-2",
    "title": "Data Import cont.",
    "section": "Data Import",
    "text": "Data Import\n\nSelect the command in bottom left corner. Copy it and then click Cancel. Then start a new code-chunk and paste the command into the code- chunk. Then you maintain reproducibility.\n\n\n\nCode\ng_c &lt;- read_csv(\"~/Dev/Assignment2/gap/\n            Data/ddf--gapminder--systema_globalis/\n            ddf--entities--geo--country.csv\")\n\n\n\nIf you get into problems that can’t be handled by the choices in the dialogue box, check out the parse_ functions in chapter 11.3 and 11.4."
  },
  {
    "objectID": "wrangle-data/data-import-cont/data-import-cont.html#data-import-other-formats",
    "href": "wrangle-data/data-import-cont/data-import-cont.html#data-import-other-formats",
    "title": "Data Import cont.",
    "section": "Data Import other formats",
    "text": "Data Import other formats\n\nPackage haven: reads SPSS, Stata and SAS files (package foreign was used before haven became available)\nPackage readxl: reads excel files. Others exists, but this is the best and part of the extended Tidyverse.\nPackage DBI: queries against databases"
  },
  {
    "objectID": "wrangle-data/data-import-cont/data-import-cont.html#data-export",
    "href": "wrangle-data/data-import-cont/data-import-cont.html#data-export",
    "title": "Data Import cont.",
    "section": "Data export",
    "text": "Data export\n\nPackage readr: write_csv() (faster and better that classic write.csv()).\nImportant note: If you are going to read the .csv file into Excel use write_excel_csv().\n\nPuts a special character at start of file so that Excel will use UTF-8.\nCan save you from a lot of hurt concerning character encoding.\n\nPackage writexl writes Excel files, but for reproducibility we should write .csv files.\n\n\n\nMSB105"
  },
  {
    "objectID": "wrangle-data/factors/factors.html#load-tidyverse",
    "href": "wrangle-data/factors/factors.html#load-tidyverse",
    "title": "Factors",
    "section": "Load tidyverse",
    "text": "Load tidyverse\n\n\nCode\nlibrary(tidyverse)\n\n\n\n\nCode\n# create a bib file for the R packages\n# used in this document\n# Note! Needs to do a touch(ag_factors.bib) in terminal before first run\n# else stops when bibliography: \"ag_factors.bib\" not found in YAML\nknitr::write_bib(\n  c(\n    \"tidyverse\",\n    \"forcats\"\n    ),\n  file = \"ag_factors.bib\"\n  )"
  },
  {
    "objectID": "wrangle-data/factors/factors.html#factors",
    "href": "wrangle-data/factors/factors.html#factors",
    "title": "Factors",
    "section": "Factors",
    "text": "Factors\n\nWe have already encountered factors\nRs way of representing category variables\nEfficent alternative to making a lot of dummy variables\nR is perhaps a bit to eager, hence smart to remember the option stringsAsFactors for many functions.\n\nSet this option to FALSE, default is TRUE\nThen convert the character vector manually to a factor with var &lt;- factor(var) or better with the tidyverse alternative from forcats (var &lt;- parse_factor(var))\n\nThe tidyverse functions will not convert to factor unless you ask for it."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#factors-1",
    "href": "wrangle-data/factors/factors.html#factors-1",
    "title": "Factors",
    "section": "Factors",
    "text": "Factors\n\nIf you end up with a factor and want a numeric vector see R FAQ: 7.10 How do I convert factors to numeric?\n\nv = as.numeric(levels(f))[as.integer(f)]\n\nTo make a factor manually you do my_df$variable_name &lt;- factor(my_df$variable_name) or use parse_factor() which is a safer alternative."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#factors-in-tidyverse-forcats",
    "href": "wrangle-data/factors/factors.html#factors-in-tidyverse-forcats",
    "title": "Factors",
    "section": "Factors in tidyverse; forcats",
    "text": "Factors in tidyverse; forcats\n\nPart of core tidyverse (i.e. library(tidyverse) will load forecats)\nHow to make a factor variable?\n\n\n\n\nCode\n# Some alternatives Long Abbreviations for Days\nx &lt;- c(\"Mon\", \"Tue\", \"Tues\", \"Wed\", \"Thu\", \"Thur\", \"Thurs\", \"Fri\", \"Sat\", \"Sun\")\nset.seed(1234)\ndf_days &lt;- tibble(\n  days = sample(x, size = 100, replace = TRUE)\n  )\ndf_days %&gt;% table()\n\n\ndays\n  Fri   Mon   Sat   Sun   Thu  Thur Thurs   Tue  Tues   Wed \n   11     7     8    11    10    17     6     6    11    13 \n\n\n\nThursday is abbreviated in three different ways, while Tuesday are abbreviated in two different ways."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#how-to-fix-this",
    "href": "wrangle-data/factors/factors.html#how-to-fix-this",
    "title": "Factors",
    "section": "How to fix this",
    "text": "How to fix this\n\nChange the values\n\n\n\n\nCode\ndf_days &lt;- df_days %&gt;% \n  mutate(\n    days = case_when(\n      days %in% c(\"Tues\") ~ \"Tue\",\n      days %in% c(\"Thur\") ~ \"Thu\",\n      TRUE ~ days\n    )\n  )\ndf_days %&gt;% table()\n\n\ndays\n  Fri   Mon   Sat   Sun   Thu Thurs   Tue   Wed \n   11     7     8    11    27     6    17    13"
  },
  {
    "objectID": "wrangle-data/factors/factors.html#how-to-fix-this-cont.",
    "href": "wrangle-data/factors/factors.html#how-to-fix-this-cont.",
    "title": "Factors",
    "section": "How to fix this, cont.",
    "text": "How to fix this, cont.\n\n\nCode\n# US standard; Sunday first day of the week\nday_levels &lt;- c(\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\")\ntmp_days &lt;- df_days %&gt;% \n  mutate(\n    days_fixed = factor(days, levels = day_levels)\n  ) %&gt;%\n  select(days_fixed) \n\n\n\n\nCode\ntmp_days %&gt;% \n  table() \n\n\ndays_fixed\nSun Mon Tue Wed Thu Fri Sat \n 11   7  17  13  27  11   8 \n\n\n\n\nCode\n# Need a table before sum \ntmp_days %&gt;% \n  table() %&gt;% \n  sum()\n\n\n[1] 94\n\n\n\n94?"
  },
  {
    "objectID": "wrangle-data/factors/factors.html#how-to-fix-this-cont.-1",
    "href": "wrangle-data/factors/factors.html#how-to-fix-this-cont.-1",
    "title": "Factors",
    "section": "How to fix this, cont.",
    "text": "How to fix this, cont.\n\n6 days have disappeared. What happend?\n\nWe forgot to change “Thurs” to “Thu”, so 6 of the 100 days did not match any level.\nThis is quietly ignored without any warning by factor().\n\nThis is dangerous!\n\n\nMuch better to use parse_factor() from tidyverse (package: forcats)."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#how-to-fix-this-cont.-2",
    "href": "wrangle-data/factors/factors.html#how-to-fix-this-cont.-2",
    "title": "Factors",
    "section": "How to fix this, cont.",
    "text": "How to fix this, cont.\n\n\nCode\ndf_days &lt;- df_days %&gt;% \n  mutate(\n    days_fixed = parse_factor(days, levels = day_levels)\n  )\n\n\n\nGives the following warnings.\n\n\nWarning: 6 parsing failures.\nrow col           expected actual\n  9  -- value in level set  Thurs\n 29  -- value in level set  Thurs\n 59  -- value in level set  Thurs\n 69  -- value in level set  Thurs\n 73  -- value in level set  Thurs\n... ... .................. ......\nSee problems(...) for more details."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#how-to-fix-this-cont.-3",
    "href": "wrangle-data/factors/factors.html#how-to-fix-this-cont.-3",
    "title": "Factors",
    "section": "How to fix this, cont.",
    "text": "How to fix this, cont.\n\nparse_factor() gives us proper warnings.\nAfter the warnings we can table again with the option useNA = \"always\".\n\n\n\n\nCode\ntable(df_days$days_fixed, useNA = \"always\")\n\n\n\n Sun  Mon  Tue  Wed  Thu  Fri  Sat &lt;NA&gt; \n  11    7   17   13   27   11    8    6"
  },
  {
    "objectID": "wrangle-data/factors/factors.html#how-to-fix-this-cont",
    "href": "wrangle-data/factors/factors.html#how-to-fix-this-cont",
    "title": "Factors",
    "section": "How to fix this, cont",
    "text": "How to fix this, cont\n\nThen we can fix our problem (add “Thurs”)\n\n\n\n\nCode\ndf_days &lt;- df_days %&gt;%\n  mutate(\n    days_fixed = parse_factor(\n      case_when(\n        days %in% c(\"Tues\") ~ \"Tue\",\n        days %in% c(\"Thur\", \"Thurs\") ~ \"Thu\",\n        # the others just like days\n        TRUE ~ days\n      ),\n      levels = day_levels\n    )\n  )\ndf_days %&gt;%\n  select(days_fixed) %&gt;%\n  table(useNA = \"always\")\n\n\ndays_fixed\n Sun  Mon  Tue  Wed  Thu  Fri  Sat &lt;NA&gt; \n  11    7   17   13   33   11    8    0"
  },
  {
    "objectID": "wrangle-data/factors/factors.html#automatic-levels",
    "href": "wrangle-data/factors/factors.html#automatic-levels",
    "title": "Factors",
    "section": "Automatic levels",
    "text": "Automatic levels\n\nNote! The order of the levels is mainly of significance in visualisations, i.e. when we present our results\nAbove we specified the levels explicitly\nAutomatic levels:\n\nAlphabetic order\nWhen they first occur levels = unique(variable_name)\nFix it after creation with fct_inorder() that gives the order in which they first occur or\nfct_infreq() according to frequency or\nfct_inseq() according to value (numeric values) in combination with fct_rev() or\nfct_reorder() for more general reorder, se r4ds 15.4 for example."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#automatic-levels-cont.",
    "href": "wrangle-data/factors/factors.html#automatic-levels-cont.",
    "title": "Factors",
    "section": "Automatic levels cont.",
    "text": "Automatic levels cont.\n\n\nCode\nhead(df_days$days_fixed, n = 5)\n\n\n[1] Sun Thu Thu Sat Thu\nLevels: Sun Mon Tue Wed Thu Fri Sat\n\n\nCode\ndf_days &lt;- df_days %&gt;%\n  mutate(\n    day_of_the_week = as.numeric(days_fixed)\n  )\nhead(df_days$day_of_the_week, n = 5)\n\n\n[1] 1 5 5 7 5"
  },
  {
    "objectID": "wrangle-data/factors/factors.html#automatic-levels-cont.-1",
    "href": "wrangle-data/factors/factors.html#automatic-levels-cont.-1",
    "title": "Factors",
    "section": "Automatic levels cont.",
    "text": "Automatic levels cont.\n\n\nCode\ndf_days &lt;- df_days %&gt;% \n  mutate(\n    # first convert day_of_the_week to character\n    day_of_the_week = as.character(day_of_the_week),\n    # then convert day_of_the_week to factor\n    day_of_the_week = parse_factor(day_of_the_week)\n  )\ndf_days[1:6,]\n\n\n# A tibble: 6 × 3\n  days  days_fixed day_of_the_week\n  &lt;chr&gt; &lt;fct&gt;      &lt;fct&gt;          \n1 Sun   Sun        1              \n2 Thu   Thu        5              \n3 Thu   Thu        5              \n4 Sat   Sat        7              \n5 Thu   Thu        5              \n6 Thu   Thu        5"
  },
  {
    "objectID": "wrangle-data/factors/factors.html#automatic-levels-cont.-2",
    "href": "wrangle-data/factors/factors.html#automatic-levels-cont.-2",
    "title": "Factors",
    "section": "Automatic levels cont.",
    "text": "Automatic levels cont.\n\n\nCode\nlevels(df_days$day_of_the_week)\n\n\n[1] \"1\" \"5\" \"7\" \"4\" \"3\" \"6\" \"2\"\n\n\n\nThe ordering of the levels is determined by when a value occurs."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#automatic-levels-cont.-3",
    "href": "wrangle-data/factors/factors.html#automatic-levels-cont.-3",
    "title": "Factors",
    "section": "Automatic levels cont.",
    "text": "Automatic levels cont.\n\n\nCode\ndf_days$day_of_the_week &lt;- fct_inseq(df_days$day_of_the_week)\nlevels(df_days$day_of_the_week)\n\n\n[1] \"1\" \"2\" \"3\" \"4\" \"5\" \"6\" \"7\"\n\n\n\n\nCode\ndf_days %&gt;% \n  filter(days_fixed == \"Thu\") %&gt;% \n  head(n = 5)\n\n\n# A tibble: 5 × 3\n  days  days_fixed day_of_the_week\n  &lt;chr&gt; &lt;fct&gt;      &lt;fct&gt;          \n1 Thu   Thu        5              \n2 Thu   Thu        5              \n3 Thu   Thu        5              \n4 Thu   Thu        5              \n5 Thurs Thu        5              \n\n\n\nLevels are ordered after number."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#fct_infreq",
    "href": "wrangle-data/factors/factors.html#fct_infreq",
    "title": "Factors",
    "section": "fct_infreq()",
    "text": "fct_infreq()\n\n\nCode\ndf_days$day_of_the_week &lt;- fct_infreq(df_days$day_of_the_week)\nlevels(df_days$day_of_the_week)\n\n\n[1] \"5\" \"3\" \"4\" \"1\" \"6\" \"7\" \"2\"\n\n\n\nLevels are ordered after how often they occur."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#fct_inorder",
    "href": "wrangle-data/factors/factors.html#fct_inorder",
    "title": "Factors",
    "section": "fct_inorder()",
    "text": "fct_inorder()\n\nsame as levels = unique(&lt;factor_variable_name&gt;)\n\n\n\n\nCode\ndf_days$day_of_the_week &lt;- fct_inorder(df_days$day_of_the_week)\nlevels(df_days$day_of_the_week)\n\n\n[1] \"1\" \"5\" \"7\" \"4\" \"3\" \"6\" \"2\"\n\n\n\nLevels are ordered by the order in which they first appear."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#recoding-factors",
    "href": "wrangle-data/factors/factors.html#recoding-factors",
    "title": "Factors",
    "section": "Recoding factors",
    "text": "Recoding factors\n\nPerhaps we want to change the names of the different levels\nfct_recode() can help\nfct_relevel() change the ordering of the levels\n\n\n\n\nCode\n# Norwegian abbreviations \ndf_days &lt;- df_days %&gt;%\n  mutate(\n    days_nor = days_fixed,\n    days_nor = fct_recode(days_nor,\n      \"søn\" = \"Sun\",\n      \"man\" = \"Mon\",\n      \"tir\" = \"Tue\",\n      \"ons\" = \"Wed\",\n      \"tor\" = \"Thu\",\n      \"fre\" = \"Fri\",\n      \"lør\" = \"Sat\",\n    ),\n    # monday first day of week\n    days_nor = fct_relevel(days_nor, \"søn\", after = 6)\n  )\nlevels(df_days$days_nor)\n\n\n[1] \"man\" \"tir\" \"ons\" \"tor\" \"fre\" \"lør\" \"søn\""
  },
  {
    "objectID": "wrangle-data/factors/factors.html#day_of_the_week_nor",
    "href": "wrangle-data/factors/factors.html#day_of_the_week_nor",
    "title": "Factors",
    "section": "day_of_the_week_nor",
    "text": "day_of_the_week_nor\n\n\nCode\n# day of the week Norwegian standard, monday day 1\ndf_days &lt;- df_days %&gt;%\n  mutate(\n    # get the numeric values of the nor days, mon = 1 etc\n    d_o_t_w_nor = as.numeric(days_nor),\n    # convert to character to make categories\n    d_o_t_w_nor = as.character(d_o_t_w_nor),\n    # make a factor of it\n    d_o_t_w_nor = parse_factor(d_o_t_w_nor),\n    # sort the levels, \"1\", \"2\" ... \"7\"\n    d_o_t_w_nor = fct_inseq(d_o_t_w_nor)\n  )\nlevels(df_days$d_o_t_w_nor)\n\n\n[1] \"1\" \"2\" \"3\" \"4\" \"5\" \"6\" \"7\""
  },
  {
    "objectID": "wrangle-data/factors/factors.html#other-functions",
    "href": "wrangle-data/factors/factors.html#other-functions",
    "title": "Factors",
    "section": "Other functions",
    "text": "Other functions\n\nfct_rev(): used together with fct_infreq(). Reverses the ordering of the levels, i.e. “7”, “6” … “1”\nfct_collapse(): collapses levels, several old levels into a new level (or into an old level)\nfct_lump_min(): lumps levels that appear fewer than min. times.\nfct_lump_prop(): lumps levels that appear in fewer prop * n times, for instance less than 3%\nfct_lump_n(): lumps all levels except for the n most frequent (or least frequent if n &lt; 0)\nfct_lump_lowfreq(): lumps together the least frequent levels, ensuring that “other” is still the smallest level.\nsee ?fct_lump for examples\nfct_other(): keep some levels, put the rest in an “other” category."
  },
  {
    "objectID": "wrangle-data/factors/factors.html#references",
    "href": "wrangle-data/factors/factors.html#references",
    "title": "Factors",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nWickham, Hadley. 2023a. Forcats: Tools for Working with Categorical Variables (Factors). https://CRAN.R-project.org/package=forcats.\n\n\n———. 2023b. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "wrangle-data/wrangle-data.html",
    "href": "wrangle-data/wrangle-data.html",
    "title": "Data Wrangling",
    "section": "",
    "text": "wrangle | ˈraŋɡ(ə)l |\nnoun\na dispute or argument, typically one that is long and complicated: an insurance wrangle is holding up compensation payments.\nverb\n1 [no object] have a long, complicated dispute or argument: the bureaucrats continue wrangling over the fine print.\n2 [with object] North American round up, herd, or take charge of (livestock): the horses were wrangled early."
  },
  {
    "objectID": "wrangle-data/wrangle-data.html#wrangle",
    "href": "wrangle-data/wrangle-data.html#wrangle",
    "title": "Data Wrangling",
    "section": "",
    "text": "wrangle | ˈraŋɡ(ə)l |\nnoun\na dispute or argument, typically one that is long and complicated: an insurance wrangle is holding up compensation payments.\nverb\n1 [no object] have a long, complicated dispute or argument: the bureaucrats continue wrangling over the fine print.\n2 [with object] North American round up, herd, or take charge of (livestock): the horses were wrangled early."
  },
  {
    "objectID": "wrangle-data/wrangle-data.html#presentations",
    "href": "wrangle-data/wrangle-data.html#presentations",
    "title": "Data Wrangling",
    "section": "Presentations",
    "text": "Presentations\nIntroduction (r4ds chap. 9)\nTibbles (r4ds chap. 10)\nData Import cont. (r4ds chap. 11)\nTidy data (r4ds chap. 12) Essential chapter\nRelational data (r4ds chap. 13)\nStrings (r4ds chap. 14)\nFactors (r4ds chap. 15)\nDates and time (r4ds chap. 16)"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#load-tidyverse-and-lubridate",
    "href": "wrangle-data/time-data/time-data.html#load-tidyverse-and-lubridate",
    "title": "Time Data",
    "section": "Load tidyverse and lubridate",
    "text": "Load tidyverse and lubridate\n\n\nCode\nlibrary(tidyverse)\nlibrary(lubridate)\n\n\n\n\nCode\n# create a bib file for the R packages\n# used in this document\n# Note! Needs to do a touch ag_date.bib in terminal before first run\n# else stops when bibliography: \"ag_date.bib\" not found in YAML\n# first time run\nknitr::write_bib(\n  c(\n    \"tidyverse\",\n    \"lubridate\"\n    ),\n  file = \"ag_date.bib\"\n  )"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#introduction",
    "href": "wrangle-data/time-data/time-data.html#introduction",
    "title": "Time Data",
    "section": "Introduction",
    "text": "Introduction\n\nDate and Times in R are complex\nIn the tidyverse the package lubridate support dates and time.\nlubridate is not part of core tidyverse so we have to load it with library(lubridate).\nSince time probably will be of less importance for the data that you will handle we will concentrate on dates"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#creating-datetimes",
    "href": "wrangle-data/time-data/time-data.html#creating-datetimes",
    "title": "Time Data",
    "section": "Creating date/times",
    "text": "Creating date/times\nTibbles prints them as:\n\nDate: &lt;date&gt;\nTime within a day: &lt;time&gt;\ndate-time: &lt;dttm&gt;\n\nunique instance of time (to nearest second)\nsometimes we need even more precision (micro data stock trading).\n\nUse the simplest possible type,\n\nreduces complexity\n\ntime is complex because it must handle time zones"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#how-to-create-a-datetime-object",
    "href": "wrangle-data/time-data/time-data.html#how-to-create-a-datetime-object",
    "title": "Time Data",
    "section": "How to create a date/time object",
    "text": "How to create a date/time object\n\nFrom a string\nBy combining date-time components\nFrom an existing date/time object"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#example",
    "href": "wrangle-data/time-data/time-data.html#example",
    "title": "Time Data",
    "section": "Example",
    "text": "Example\n\n\nCode\n# nine eleven\nus_date &lt;- \"9-11-2001\"\nno_date &lt;- \"11/9/2001\"\ntypeof(us_date)\n\n\n[1] \"character\"\n\n\nCode\ntypeof(no_date)\n\n\n[1] \"character\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#to-date-object-us",
    "href": "wrangle-data/time-data/time-data.html#to-date-object-us",
    "title": "Time Data",
    "section": "To date object; us",
    "text": "To date object; us\n\n\nCode\n# us date\nus_date\n\n\n[1] \"9-11-2001\"\n\n\nCode\nus_d &lt;- mdy(us_date) # note mdy\ntypeof(us_d)\n\n\n[1] \"double\"\n\n\nCode\nclass(us_d)\n\n\n[1] \"Date\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#to-date-object-no",
    "href": "wrangle-data/time-data/time-data.html#to-date-object-no",
    "title": "Time Data",
    "section": "To date object; no",
    "text": "To date object; no\n\n\nCode\n# no date\nno_date\n\n\n[1] \"11/9/2001\"\n\n\nCode\nno_d &lt;- dmy(no_date) #note dmy\ntypeof(no_d)\n\n\n[1] \"double\"\n\n\nCode\nclass(no_d)\n\n\n[1] \"Date\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#some-important-years",
    "href": "wrangle-data/time-data/time-data.html#some-important-years",
    "title": "Time Data",
    "section": "Some important years",
    "text": "Some important years\n\n\nCode\n# some important years \nas.numeric(dmy(\"01-01-1970\"))\n\n\n[1] 0\n\n\nCode\nas.numeric(dmy(\"01-01-1971\"))\n\n\n[1] 365\n\n\nCode\nas.numeric(dmy(\"01-01-1900\"))\n\n\n[1] -25567\n\n\nCode\nas.numeric(dmy(\"01-01-0001\"))\n\n\n[1] -719162"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#to-date-object",
    "href": "wrangle-data/time-data/time-data.html#to-date-object",
    "title": "Time Data",
    "section": "To date object",
    "text": "To date object\n\n\nCode\nstr(no_d)\n\n\n Date[1:1], format: \"2001-09-11\"\n\n\nCode\nstr(us_d)\n\n\n Date[1:1], format: \"2001-09-11\"\n\n\nCode\nas.numeric(no_d)\n\n\n[1] 11576\n\n\nCode\nas.numeric(us_d)\n\n\n[1] 11576"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#to-date-object-cont.",
    "href": "wrangle-data/time-data/time-data.html#to-date-object-cont.",
    "title": "Time Data",
    "section": "To date object cont.",
    "text": "To date object cont.\n\n\nCode\nus_d - no_d\n\n\nTime difference of 0 days\n\n\nCode\nmonth(us_d)\n\n\n[1] 9\n\n\nCode\nmonth(us_d, label = TRUE)\n\n\n[1] Sep\n12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec\n\n\nCode\nmonth(us_d, label = TRUE, abbr = TRUE)\n\n\n[1] Sep\n12 Levels: Jan &lt; Feb &lt; Mar &lt; Apr &lt; May &lt; Jun &lt; Jul &lt; Aug &lt; Sep &lt; ... &lt; Dec"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#to-date-object-cont.-1",
    "href": "wrangle-data/time-data/time-data.html#to-date-object-cont.-1",
    "title": "Time Data",
    "section": "To date object cont.",
    "text": "To date object cont.\n\n\nCode\nmonth(us_d, label = TRUE, abbr = FALSE)\n\n\n[1] September\n12 Levels: January &lt; February &lt; March &lt; April &lt; May &lt; June &lt; ... &lt; December\n\n\n\n\nCode\n# Get code for locale with command \n# locale -a \n# in Terminal\nmonth(no_d, label = TRUE, abbr = FALSE, locale = \"no_NO\")\n\n\n[1] september\n12 Levels: januar &lt; februar &lt; mars &lt; april &lt; mai &lt; juni &lt; juli &lt; ... &lt; desember\n\n\n\n\nCode\nmonth(no_d, label = TRUE, abbr = TRUE, locale = \"no_NO\")\n\n\n[1] sep\n12 Levels: jan &lt; feb &lt; mar &lt; apr &lt; mai &lt; jun &lt; jul &lt; aug &lt; sep &lt; ... &lt; des"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#date-object-math",
    "href": "wrangle-data/time-data/time-data.html#date-object-math",
    "title": "Time Data",
    "section": "Date object math",
    "text": "Date object math\n\n\nCode\nno_d == us_d\n\n\n[1] TRUE\n\n\nCode\nas.numeric(no_d) == as.numeric(us_d)\n\n\n[1] TRUE"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#date-time",
    "href": "wrangle-data/time-data/time-data.html#date-time",
    "title": "Time Data",
    "section": "date-time",
    "text": "date-time\n\n\nCode\nus_date_time &lt;- 09112001202020\nno_date_time &lt;- \"11/9/2001 20:20:20\"\nmdy_hms(us_date_time)\n\n\n[1] \"2001-09-11 20:20:20 UTC\"\n\n\nCode\ndmy_hms(no_date_time)\n\n\n[1] \"2001-09-11 20:20:20 UTC\"\n\n\nCode\nas.numeric(mdy_hms(us_date_time))\n\n\n[1] 1000239620\n\n\nCode\nas.numeric(dmy_hms(no_date_time))\n\n\n[1] 1000239620"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#date-time-cont.",
    "href": "wrangle-data/time-data/time-data.html#date-time-cont.",
    "title": "Time Data",
    "section": "date-time cont.",
    "text": "date-time cont.\n\n\nCode\nas.numeric(dmy_hms(01011970000001))\n\n\n[1] 1\n\n\n\n\n“UTC” standard not a real time zone,\nsuccessor to Greenwich Mean Time (GMT),\ntime in different time zones determined from UTC.\nNever daylight saving time, leap seconds."
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#date-from-combining-elements",
    "href": "wrangle-data/time-data/time-data.html#date-from-combining-elements",
    "title": "Time Data",
    "section": "Date from combining elements",
    "text": "Date from combining elements\n\n\nCode\nset.seed(1234)\nmy_dates &lt;- tibble(\n  y = 1999:2008,\n  m = sample(1:12, size = 10, replace = TRUE),\n  # make it simple, seed 1234 gives no impossible date\n  d = sample(1:31, size = 10, replace = TRUE)\n)\nmy_dates\n\n\n# A tibble: 10 × 3\n       y     m     d\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;\n 1  1999    12     7\n 2  2000    10    22\n 3  2001     6    26\n 4  2002     5     6\n 5  2003    12    15\n 6  2004     9    14\n 7  2005     5    20\n 8  2006     6    14\n 9  2007     4    30\n10  2008     2    24"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#date-from-combining-elements-1",
    "href": "wrangle-data/time-data/time-data.html#date-from-combining-elements-1",
    "title": "Time Data",
    "section": "Date from combining elements",
    "text": "Date from combining elements\n\n\nCode\nmy_dates &lt;- my_dates %&gt;% \n  mutate(\n    date = make_date(year = y, month = m, day = d),\n    # order do not matter\n    rev_date = make_date(day = d,  month = m, year = y),\n    rev_date2 = format(date, \"%d-%m-%y\") # now &lt;chr&gt; not date\n    )\nmy_dates\n\n\n# A tibble: 10 × 6\n       y     m     d date       rev_date   rev_date2\n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;    \n 1  1999    12     7 1999-12-07 1999-12-07 07-12-99 \n 2  2000    10    22 2000-10-22 2000-10-22 22-10-00 \n 3  2001     6    26 2001-06-26 2001-06-26 26-06-01 \n 4  2002     5     6 2002-05-06 2002-05-06 06-05-02 \n 5  2003    12    15 2003-12-15 2003-12-15 15-12-03 \n 6  2004     9    14 2004-09-14 2004-09-14 14-09-04 \n 7  2005     5    20 2005-05-20 2005-05-20 20-05-05 \n 8  2006     6    14 2006-06-14 2006-06-14 14-06-06 \n 9  2007     4    30 2007-04-30 2007-04-30 30-04-07 \n10  2008     2    24 2008-02-24 2008-02-24 24-02-08 \n\n\nCode\n#clean up\nmy_dates &lt;- my_dates %&gt;% \n  select(-rev_date, -rev_date2)"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#change-type",
    "href": "wrangle-data/time-data/time-data.html#change-type",
    "title": "Time Data",
    "section": "Change type",
    "text": "Change type\n\n\nCode\ntoday() # date\n\n\n[1] \"2023-08-24\"\n\n\nCode\nnow() # date time\n\n\n[1] \"2023-08-24 11:53:21 CEST\"\n\n\nCode\n# change type\nas_date(now())\n\n\n[1] \"2023-08-24\"\n\n\nCode\nas_datetime(today())\n\n\n[1] \"2023-08-24 UTC\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#different-inputs",
    "href": "wrangle-data/time-data/time-data.html#different-inputs",
    "title": "Time Data",
    "section": "Different inputs",
    "text": "Different inputs\n\nYou never know what you have to deal with\ndmy() and friends are quite smart\n\n\n\n\nCode\nmy_dato &lt;- \"11_9_01\"\ndmy(my_dato)\n\n\n[1] \"2001-09-11\"\n\n\nCode\nmy_dato &lt;- \"11:9:01\"\ndmy(my_dato)\n\n\n[1] \"2001-09-11\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#what-lubridate-cant-help-us-with",
    "href": "wrangle-data/time-data/time-data.html#what-lubridate-cant-help-us-with",
    "title": "Time Data",
    "section": "What lubridate can’t help us with",
    "text": "What lubridate can’t help us with\n\n\nCode\nmy_dates &lt;- my_dates %&gt;% \n  mutate(\n    DMY_rubbish = paste(d, m, str_sub(y,3,4), sep = \"\")\n  )\nmy_dates\n\n\n# A tibble: 10 × 5\n       y     m     d date       DMY_rubbish\n   &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;date&gt;     &lt;chr&gt;      \n 1  1999    12     7 1999-12-07 71299      \n 2  2000    10    22 2000-10-22 221000     \n 3  2001     6    26 2001-06-26 26601      \n 4  2002     5     6 2002-05-06 6502       \n 5  2003    12    15 2003-12-15 151203     \n 6  2004     9    14 2004-09-14 14904      \n 7  2005     5    20 2005-05-20 20505      \n 8  2006     6    14 2006-06-14 14606      \n 9  2007     4    30 2007-04-30 30407      \n10  2008     2    24 2008-02-24 24208"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#what-lubridate-cant-help-us-with-1",
    "href": "wrangle-data/time-data/time-data.html#what-lubridate-cant-help-us-with-1",
    "title": "Time Data",
    "section": "What lubridate can’t help us with",
    "text": "What lubridate can’t help us with\n\n\nCode\nmy_dates %&gt;% select(DMY_rubbish) %&gt;% dmy()\n\n\n[1] NA\n\n\n\nThe dates in my_dates we could resolve with some reasoning, but values like 11201 are impossible to convert to a date.\nIt could be 1. Dec. 01 (d=1, m=12; y=01) or 11. Feb. 01 (d=11, m=2, y=01)."
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#rounding-dates",
    "href": "wrangle-data/time-data/time-data.html#rounding-dates",
    "title": "Time Data",
    "section": "Rounding dates",
    "text": "Rounding dates\n\nNice to have for plotting\nfloor_date() rounds down, ceiling_date() rounds up\n\nyear: nearest year,\nmonth: nearest_month\n\nThe following does not work\n\n\n\n\nCode\nmy_dates[1:5,]\nmy_dates %&gt;% \n  select(date) %&gt;% \n  floor_date(\"month\")\n\n\n\nReturns: Error in update.default(x, mdays = 1, hours = 0, minutes = 0, seconds = 0) : need an object with call component"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#floor_date-ceiling_date-etc.",
    "href": "wrangle-data/time-data/time-data.html#floor_date-ceiling_date-etc.",
    "title": "Time Data",
    "section": "floor_date(), ceiling_date() etc.",
    "text": "floor_date(), ceiling_date() etc.\n\nThe following works\n\n\n\n\nCode\nmy_dates %&gt;%\n  mutate(\n    date_dt = as_datetime(date, tz = \"UTC\"),\n    date_dt_fl_y = floor_date(date_dt, \"year\"),\n    date_dt_fl_m = floor_date(date_dt, \"month\"),\n    date_dt_cl_m = ceiling_date(date_dt, \"month\")\n  ) %&gt;% \n  select(date_dt, date_dt_fl_y,\n         date_dt_fl_m, date_dt_cl_m) %&gt;% \n  glimpse()\n\n\nRows: 10\nColumns: 4\n$ date_dt      &lt;dttm&gt; 1999-12-07, 2000-10-22, 2001-06-26, 2002-05-06, 2003-12-…\n$ date_dt_fl_y &lt;dttm&gt; 1999-01-01, 2000-01-01, 2001-01-01, 2002-01-01, 2003-01-…\n$ date_dt_fl_m &lt;dttm&gt; 1999-12-01, 2000-10-01, 2001-06-01, 2002-05-01, 2003-12-…\n$ date_dt_cl_m &lt;dttm&gt; 2000-01-01, 2000-11-01, 2001-07-01, 2002-06-01, 2004-01-…"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#floor_date-ceiling_date-etc.-cont.",
    "href": "wrangle-data/time-data/time-data.html#floor_date-ceiling_date-etc.-cont.",
    "title": "Time Data",
    "section": "floor_date(), ceiling_date() etc. cont.",
    "text": "floor_date(), ceiling_date() etc. cont.\n\ndate_dt_fl_y “rounded” to start of year\ndate_dt_fl_y “rounded” to start of month\ndate_dt_fl_y “rounded” to start of next month"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#important-option",
    "href": "wrangle-data/time-data/time-data.html#important-option",
    "title": "Time Data",
    "section": "Important option",
    "text": "Important option\n\nSunday start of week:\n\nweek_start = getOption(\"lubridate.week.start\", 7)\n\nMonday start of week:\n\nweek_start = getOption(\"lubridate.week.start\", 1)\n\n\n\n\n\nCode\nmy_dates %&gt;%\n  mutate(\n    date_dt = as_datetime(date, tz = \"UTC\"),\n    # round to start of week Sunday\n    date_dt_fl_w_s = floor_date(date_dt, \"week\", week_start = getOption(\"lubridate.week.start\", 7)),\n    # round to start of week Monday\n    date_dt_fl_w_m = floor_date(date_dt, \"week\", week_start = getOption(\"lubridate.week.start\", 1))\n  ) %&gt;%\n  select(date_dt, date_dt_fl_w_s, date_dt_fl_w_m) %&gt;%\n  head(n = 4)\n\n\n# A tibble: 4 × 3\n  date_dt             date_dt_fl_w_s      date_dt_fl_w_m     \n  &lt;dttm&gt;              &lt;dttm&gt;              &lt;dttm&gt;             \n1 1999-12-07 00:00:00 1999-12-05 00:00:00 1999-12-06 00:00:00\n2 2000-10-22 00:00:00 2000-10-22 00:00:00 2000-10-16 00:00:00\n3 2001-06-26 00:00:00 2001-06-24 00:00:00 2001-06-25 00:00:00\n4 2002-05-06 00:00:00 2002-05-05 00:00:00 2002-05-06 00:00:00\n\n\n\nNote! Not necessarily 1 day difference (se line 2)"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#setting-components",
    "href": "wrangle-data/time-data/time-data.html#setting-components",
    "title": "Time Data",
    "section": "Setting components",
    "text": "Setting components\n\nWe can set individual components of datetime objects (and date) with year(), month() and day().\nNote! We need datetime objects, date objects must be converted to datetime.\n\n\n\n\nCode\n# Does not work\nmy_dates %&gt;% \n  select(date) %&gt;%\n  update(year = year(my_dates$date) + 10, month = 11)"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#setting-components-1",
    "href": "wrangle-data/time-data/time-data.html#setting-components-1",
    "title": "Time Data",
    "section": "Setting components",
    "text": "Setting components\n\n\nCode\n# This does work\nmy_dates &lt;- my_dates %&gt;% \n  mutate(\n    date_dt = as_datetime(date, tz = \"Europe/Oslo\"),\n    date_dt_new = update(date_dt, year = 2015)\n  )\n\nmy_dates %&gt;% \n  select(date, date_dt, date_dt_new) %&gt;% \n  head(n = 3)\n\n\n# A tibble: 3 × 3\n  date       date_dt             date_dt_new        \n  &lt;date&gt;     &lt;dttm&gt;              &lt;dttm&gt;             \n1 1999-12-07 1999-12-07 00:00:00 2015-12-07 00:00:00\n2 2000-10-22 2000-10-22 00:00:00 2015-10-22 00:00:00\n3 2001-06-26 2001-06-26 00:00:00 2015-06-26 00:00:00\n\n\n\nWhy 01:00:00 and 02:00:00 in third column?\n\nDay light saving time"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#summertime",
    "href": "wrangle-data/time-data/time-data.html#summertime",
    "title": "Time Data",
    "section": "Summertime",
    "text": "Summertime\n\nMore examples of Day light saving time\n\n\n\n\nCode\nmy_dates %&gt;% \n  select(date, date_dt)\n\n\n# A tibble: 10 × 2\n   date       date_dt            \n   &lt;date&gt;     &lt;dttm&gt;             \n 1 1999-12-07 1999-12-07 00:00:00\n 2 2000-10-22 2000-10-22 00:00:00\n 3 2001-06-26 2001-06-26 00:00:00\n 4 2002-05-06 2002-05-06 00:00:00\n 5 2003-12-15 2003-12-15 00:00:00\n 6 2004-09-14 2004-09-14 00:00:00\n 7 2005-05-20 2005-05-20 00:00:00\n 8 2006-06-14 2006-06-14 00:00:00\n 9 2007-04-30 2007-04-30 00:00:00\n10 2008-02-24 2008-02-24 00:00:00"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#time-spans",
    "href": "wrangle-data/time-data/time-data.html#time-spans",
    "title": "Time Data",
    "section": "Time spans",
    "text": "Time spans\n\nDuration, number of seconds\nPeriods, weeks, months etc.\nIntervals, starting and endpoints\nSubtract two dates and you get a difftime object\nFor details about time zones see 16.5 in r4ds."
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#an-example-my_life",
    "href": "wrangle-data/time-data/time-data.html#an-example-my_life",
    "title": "Time Data",
    "section": "An example: my_life",
    "text": "An example: my_life\n\nPlaying with time and writing a function\n\n\n\n\nCode\nmy_life &lt;- function(birthday = \"25121964\", unit = \"weeks\") {\n# find the difference between today and birthday measured in unit\nlife = as.numeric(difftime(today(), dmy(birthday), units = unit))\n# one case for each unit\ncase_when(\n unit == \"weeks\" ~ paste(\"You are about\", life, \"weeks old.\"),\n unit == \"days\" ~ paste(\"You are about\", life , \"days old.\"),\n unit == \"hours\" ~ paste(\"You are about\", life, \"hours old.\"),\n unit == \"mins\" ~ paste(\"You are about\", life, \"minutes old.\"),\n unit == \"secs\" ~ paste(\"You are about\", life, \"seconds old.\")\n  )\n}\nmy_life() # with default values\n\n\n[1] \"You are about 3060.85714285714 weeks old.\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#an-example-my_life-1",
    "href": "wrangle-data/time-data/time-data.html#an-example-my_life-1",
    "title": "Time Data",
    "section": "An example: my_life",
    "text": "An example: my_life\n\nsome are just too young to play with R\n\n\n\n\nCode\nmy_life &lt;- function(birthday = \"25121964\", unit = \"weeks\") {\n# too young to play with R, week as unit\nif (as.numeric(difftime(today(), dmy(birthday), units = \"weeks\"))/52.25 &lt; 5) {\nreturn(\"You are far too young to play with R!\")\n}\n# find the difference between today and birthday measured in unit\nlife = as.numeric(difftime(today(), dmy(birthday), units = unit))\n# one case for each unit\ncase_when(\n unit == \"weeks\" ~ paste(\"You are about\", life, \"weeks old.\"),\n unit == \"days\" ~ paste(\"You are about\", life , \"days old.\"),\n unit == \"hours\" ~ paste(\"You are about\", life, \"hours old.\"),\n unit == \"mins\" ~ paste(\"You are about\", life, \"minutes old.\"),\n unit == \"secs\" ~ paste(\"You are about\", life, \"seconds old.\")\n  )\n}\n\n\n\n\nCode\nmy_life(\"25-12-1964\", unit = \"weeks\")\n\n\n[1] \"You are about 3060.85714285714 weeks old.\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#an-example-my_life-2",
    "href": "wrangle-data/time-data/time-data.html#an-example-my_life-2",
    "title": "Time Data",
    "section": "An example: my_life",
    "text": "An example: my_life\n\nPerhaps we should round off our answer.\n\n\n\n\nCode\nmy_life &lt;- function(birthday = \"01012020\", unit = \"weeks\") {\n  # find the difference between today and birthday with week as unit\n  life_w &lt;- as.numeric(difftime(today(), dmy(birthday), units = \"weeks\"))\n  # too young to play with R, week as unit\n  if (life_w / 52.25 &lt; 5) {\n    return(\"You are far too young to play with R!\")\n  } else {\n    # find the difference between today and birthday measured in unit\n    life = round(as.numeric(difftime(today(), dmy(birthday), units = unit)), 0)\n    # one case for each unit\n    case_when(\n      unit == \"weeks\" ~ paste(\"You are about\", life, \"weeks old.\"),\n      unit == \"days\" ~ paste(\"You are about\", life, \"days old.\"),\n      unit == \"hours\" ~ paste(\"You are about\", life, \"hours old.\"),\n      unit == \"mins\" ~ paste(\"You are about\", life, \"minutes old.\"),\n      unit == \"secs\" ~ paste(\"You are about\", life, \"seconds old.\")\n    )\n  }\n}\nmy_life(01032016)\n\n\n[1] \"You are about 390 weeks old.\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#testing-my_life",
    "href": "wrangle-data/time-data/time-data.html#testing-my_life",
    "title": "Time Data",
    "section": "Testing my_life()",
    "text": "Testing my_life()\n\n\nCode\nmy_life(\"01032005\", unit = \"weeks\")\n\n\n[1] \"You are about 964 weeks old.\"\n\n\nCode\nmy_life(\"01032005\", unit = \"days\")\n\n\n[1] \"You are about 6750 days old.\"\n\n\nCode\nmy_life(\"01032005\", unit = \"mins\")\n\n\n[1] \"You are about 9720000 minutes old.\"\n\n\nCode\nmy_life(\"01032005\", unit = \"secs\")\n\n\n[1] \"You are about 583200000 seconds old.\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#an-example-my_life-3",
    "href": "wrangle-data/time-data/time-data.html#an-example-my_life-3",
    "title": "Time Data",
    "section": "An example my_life",
    "text": "An example my_life\n\nWhat about years and months\ndifftime() does not do months and years\nWe can get an approximation"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#full-function",
    "href": "wrangle-data/time-data/time-data.html#full-function",
    "title": "Time Data",
    "section": "Full function",
    "text": "Full function\n\n\nCode\nmy_life &lt;- function(birthday = today(), unit = \"years\") {\n  stopifnot(unit %in% c(\"years\", \"months\", \"weeks\", \"days\", \"hours\", \"mins\", \"secs\"))\n  life_w = difftime(today(), dmy(birthday), units = \"weeks\")\nif (as.numeric(life_w)/52.25 &lt; 5) {\nreturn(\"You are far too young to learn R!\")\n} else if (unit %in% c(\"years\", \"months\")) {\n  case_when(\n unit == \"years\" ~ paste(\"You are about\", round(as.numeric(life_w)/52.25, 2), \"years old.\"),\n unit == \"months\" ~ paste(\"You are about\", round(as.numeric(life_w)/(52.25/12), 2), \"months old.\")\n)\n} else {\nlife = round(as.numeric(difftime(today(), dmy(birthday), units = unit)), 0)\ncase_when(\n unit == \"weeks\" ~ paste(\"You are about\", life, \"weeks old.\"),\n unit == \"days\" ~ paste(\"You are about\", life , \"days old.\"),\n unit == \"hours\" ~ paste(\"You are about\", life, \"hours old.\"),\n unit == \"mins\" ~ paste(\n   \"You are about\", \n   formatC(life, format = \"f\", big.mark = \".\",\n           digits = 0, decimal.mark = \",\"),\n   \"minutes old.\"),\n unit == \"secs\" ~ paste(\n   \"You are about\",\n   formatC(life, format = \"f\", big.mark = \".\",\n           digits = 0, decimal.mark = \",\"),\n   \"seconds old.\")\n  )\n}\n}"
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#final-testing",
    "href": "wrangle-data/time-data/time-data.html#final-testing",
    "title": "Time Data",
    "section": "Final testing",
    "text": "Final testing\n\n\nCode\nmy_life(\"25-12-1964\", unit = \"years\")\n\n\n[1] \"You are about 58.58 years old.\"\n\n\nCode\nmy_life(\"25-12-1964\", unit = \"months\")\n\n\n[1] \"You are about 702.97 months old.\"\n\n\nCode\nmy_life(\"25-12-1964\", unit = \"weeks\")\n\n\n[1] \"You are about 3061 weeks old.\"\n\n\nCode\nmy_life(\"25-12-1964\", unit = \"days\")\n\n\n[1] \"You are about 21426 days old.\"\n\n\nCode\nmy_life(\"25-12-1964\", unit = \"hours\")\n\n\n[1] \"You are about 514224 hours old.\"\n\n\nCode\nmy_life(\"25-12-1964\", unit = \"mins\")\n\n\n[1] \"You are about 30.853.440 minutes old.\"\n\n\nCode\nmy_life(\"25-12-1964\", unit = \"secs\")\n\n\n[1] \"You are about 1.851.206.400 seconds old.\""
  },
  {
    "objectID": "wrangle-data/time-data/time-data.html#references",
    "href": "wrangle-data/time-data/time-data.html#references",
    "title": "Time Data",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nGrolemund, Garrett, and Hadley Wickham. 2011. “Dates and Times Made Easy with lubridate.” Journal of Statistical Software 40 (3): 1–25. https://www.jstatsoft.org/v40/i03/.\n\n\nSpinu, Vitalie, Garrett Grolemund, and Hadley Wickham. 2023. Lubridate: Make Dealing with Dates a Little Easier. https://CRAN.R-project.org/package=lubridate.\n\n\nWickham, Hadley. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#tibbles-chap.-10",
    "href": "wrangle-data/tibbles/tibbles.html#tibbles-chap.-10",
    "title": "Tibbles",
    "section": "Tibbles (chap. 10)",
    "text": "Tibbles (chap. 10)\n\nlibrary(tidyverse) or library(tibble) needed\nMake tibble from dataframe\n\nmy_tibble &lt;- as_tibble(my_dataframe)\n\nMake dataframe from tibble\n\nmy_dataframe &lt;- as.data.frame(my_tibble)\nsome older R functions don’t like tibbles.\n\nA tibble will never automatically change character vector to factor when you create it\nWhen you create dataframes this might happen and it can be a pain"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#parts-of-a-tibble",
    "href": "wrangle-data/tibbles/tibbles.html#parts-of-a-tibble",
    "title": "Tibbles",
    "section": "Parts of a tibble",
    "text": "Parts of a tibble\n\nPick part of tibble (i.e. a variable) with [[ or $.\n\n[[ can pick by position or by name. Remember to put name in quotes, i.e. [[\"var1\"]] or [[c(\"var1\", \"var10\"]]\n$ can only pick by name, i.e. $var1\n\nIf used in a pipe they must be preceded by a dot ., i.e. .[[\"var1\"]] or .$var1."
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#creating-a-tibble",
    "href": "wrangle-data/tibbles/tibbles.html#creating-a-tibble",
    "title": "Tibbles",
    "section": "Creating a tibble",
    "text": "Creating a tibble\n\n\nCode\ntib &lt;- tibble(\n  x = 1:5,\n  y = seq(from = 2.5, by = 0.12, length.out = 5),\n  z = x + y^0.5,\n  # What does the next one do?\n  d = LETTERS[seq_along(y) + 10]\n)\n\n\n\n\nCode\ntib\n\n\n# A tibble: 5 × 4\n      x     y     z d    \n  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;\n1     1  2.5   2.58 K    \n2     2  2.62  3.62 L    \n3     3  2.74  4.66 M    \n4     4  2.86  5.69 N    \n5     5  2.98  6.73 O"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#r-rule-variable-names-cant-start-with-a-number",
    "href": "wrangle-data/tibbles/tibbles.html#r-rule-variable-names-cant-start-with-a-number",
    "title": "Tibbles",
    "section": "R rule: variable names can’t start with a number",
    "text": "R rule: variable names can’t start with a number\n\nThe following will not work\n\n\n\n\nCode\ndf &lt;- data.frame(\n  2002 = 23.22,\n  2003 = 12.02,\n  2004 = 27.61\n)"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#r-rule-variable-names-cant-start-with-a-number-1",
    "href": "wrangle-data/tibbles/tibbles.html#r-rule-variable-names-cant-start-with-a-number-1",
    "title": "Tibbles",
    "section": "R rule: variable names can’t start with a number",
    "text": "R rule: variable names can’t start with a number\n\nThe following will work\n\n\n\n\nCode\ndf_1 &lt;- data.frame(\n  x2002 = 23.22,\n  x2003 = 12.02,\n  x2004 = 27.61\n)\ndf_1\n\n\n  x2002 x2003 x2004\n1 23.22 12.02 27.61"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#r-rule-variable-names-cant-start-with-a-number-2",
    "href": "wrangle-data/tibbles/tibbles.html#r-rule-variable-names-cant-start-with-a-number-2",
    "title": "Tibbles",
    "section": "R rule: variable names can’t start with a number",
    "text": "R rule: variable names can’t start with a number\n\nThe following will also work\nNote the automatic change of variable names\n\n\n\n\nCode\ndf_2 &lt;- data.frame(\n  `2002` = 23.22,\n  `2003` = 12.02,\n  `2004` = 27.61\n)\ndf_2\n\n\n  X2002 X2003 X2004\n1 23.22 12.02 27.61"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#tibble-and-variable-names-that-start-with-number",
    "href": "wrangle-data/tibbles/tibbles.html#tibble-and-variable-names-that-start-with-number",
    "title": "Tibbles",
    "section": "Tibble and variable names that start with number",
    "text": "Tibble and variable names that start with number\n\n\nCode\ntib_1 &lt;- tibble(\n  `2002` = 23.22,\n  `2003` = 12.02,\n  `2004` = 27.61\n)\ntib_1\n\n\n# A tibble: 1 × 3\n  `2002` `2003` `2004`\n   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1   23.2   12.0   27.6\n\n\n\nTry to avoid such variable names\nThey only create problems"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#difference-between-dataframes-and-tibbles",
    "href": "wrangle-data/tibbles/tibbles.html#difference-between-dataframes-and-tibbles",
    "title": "Tibbles",
    "section": "Difference between Dataframes and Tibbles",
    "text": "Difference between Dataframes and Tibbles\n\nTibbles never changes type of input, ex. character/string to factor variable\nTibbles never changes variable names\nTibbles never creates row names"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#printing-to-console-large-tibbles",
    "href": "wrangle-data/tibbles/tibbles.html#printing-to-console-large-tibbles",
    "title": "Tibbles",
    "section": "Printing to console large tibbles",
    "text": "Printing to console large tibbles\n\n\nCode\nclass(mtcars)\n\n\n[1] \"data.frame\"\n\n\n\n\nCode\nas_tibble(mtcars)\n\n\n# A tibble: 32 × 11\n     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb\n   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n 1  21       6  160    110  3.9   2.62  16.5     0     1     4     4\n 2  21       6  160    110  3.9   2.88  17.0     0     1     4     4\n 3  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1\n 4  21.4     6  258    110  3.08  3.22  19.4     1     0     3     1\n 5  18.7     8  360    175  3.15  3.44  17.0     0     0     3     2\n 6  18.1     6  225    105  2.76  3.46  20.2     1     0     3     1\n 7  14.3     8  360    245  3.21  3.57  15.8     0     0     3     4\n 8  24.4     4  147.    62  3.69  3.19  20       1     0     4     2\n 9  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2\n10  19.2     6  168.   123  3.92  3.44  18.3     1     0     4     4\n# ℹ 22 more rows"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#picking-values-from-tibble-in-a-pipe",
    "href": "wrangle-data/tibbles/tibbles.html#picking-values-from-tibble-in-a-pipe",
    "title": "Tibbles",
    "section": "Picking values from tibble in a pipe",
    "text": "Picking values from tibble in a pipe\n\n\nCode\nnames(mtcars)\n\n\n [1] \"mpg\"  \"cyl\"  \"disp\" \"hp\"   \"drat\" \"wt\"   \"qsec\" \"vs\"   \"am\"   \"gear\"\n[11] \"carb\"\n\n\n\n\nCode\nmtcars %&gt;%\n  .$cyl %&gt;% \n  table()\n\n\n.\n 4  6  8 \n11  7 14 \n\n\n\n\nCode\nmtcars %&gt;%\n  .[[\"cyl\"]] %&gt;% \n  table()\n\n\n.\n 4  6  8 \n11  7 14 \n\n\n\nNote the use of “.”"
  },
  {
    "objectID": "wrangle-data/tibbles/tibbles.html#printing-to-console-large-tibbles-1",
    "href": "wrangle-data/tibbles/tibbles.html#printing-to-console-large-tibbles-1",
    "title": "Tibbles",
    "section": "Printing to console large tibbles",
    "text": "Printing to console large tibbles\n\nTibbles try to only print as much as will fit in console\nTo many variables to fit:\n\nPrints top of the variables that fit and list the rest and their type\n\nWe will find type under the variable names\nTibbles are generally nicer to use than dataframes\nEasy to change from data.frame to tibble and back again\n\nas_tibble() (from tibble package)\nas.data.frame() (from base package)\n\n\n\n\nMSB105"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#strings-chapter-14",
    "href": "wrangle-data/string-data/string-data.html#strings-chapter-14",
    "title": "Strings and regular expressions",
    "section": "Strings; chapter 14",
    "text": "Strings; chapter 14\n\npackage stringr part of core tidyverse\n“string” or ‘string’, but “This is a ‘string’”\nEscape is your best friend!\n\\n is newline and \\t is tab\n\n\n\n\nCode\nstring1 &lt;- \"test1\"\nstring2 &lt;- 'test2'\nstring3 &lt;- \"\\'test3\\'\"\nstring4 &lt;- \"'test4'\"\nstring5 &lt;- \"first\\nsecond\"\nwriteLines(string1)\n\n\ntest1\n\n\nCode\nwriteLines(string2)\n\n\ntest2"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#strings",
    "href": "wrangle-data/string-data/string-data.html#strings",
    "title": "Strings and regular expressions",
    "section": "Strings",
    "text": "Strings\n\n\nCode\nwriteLines(string3)\n\n\n'test3'\n\n\nCode\nwriteLines(string4)\n\n\n'test4'\n\n\nCode\nwriteLines(string5)\n\n\nfirst\nsecond"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#string-functions",
    "href": "wrangle-data/string-data/string-data.html#string-functions",
    "title": "Strings and regular expressions",
    "section": "String functions",
    "text": "String functions\n\nHow to find them?\n\ntidyverse str_\n\nSome important ones\n\nstr_length()\nstr_pad()\nstr_replace()\nstr_extract()\nstr_extract_all()\nstr_match()\nstr_match_all()\nstr_c(); combine strings"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#string-functions-cont.",
    "href": "wrangle-data/string-data/string-data.html#string-functions-cont.",
    "title": "Strings and regular expressions",
    "section": "String functions cont.",
    "text": "String functions cont.\n\nSome important ones cont.\n\nstr_sub()\n\nex. str_sub(“string”, 2, 4)\n\nreturns “tri”,\n\nstr_sub(“string”, -4, -2)\n\nreturns “rin”\n\n\nstr_to_lower()\nstr_to_upper()\nstr_to_title()"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regular-expressions",
    "href": "wrangle-data/string-data/string-data.html#regular-expressions",
    "title": "Strings and regular expressions",
    "section": "Regular expressions",
    "text": "Regular expressions\n\nIncredibly powerful\nHard to master\n\n\n\n\nCode\nx &lt;- c(\"apple\", \"banana\", \"pear\")\nstr_view(x, \"an\")\n\n\n[2] │ b&lt;an&gt;&lt;an&gt;a"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regular-expressions-cont.",
    "href": "wrangle-data/string-data/string-data.html#regular-expressions-cont.",
    "title": "Strings and regular expressions",
    "section": "Regular expressions cont.",
    "text": "Regular expressions cont.\n\n\nCode\nstr_view(x, \"a\")\n\n\n[1] │ &lt;a&gt;pple\n[2] │ b&lt;a&gt;n&lt;a&gt;n&lt;a&gt;\n[3] │ pe&lt;a&gt;r"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regular-expressions-cont.-1",
    "href": "wrangle-data/string-data/string-data.html#regular-expressions-cont.-1",
    "title": "Strings and regular expressions",
    "section": "Regular expressions cont.",
    "text": "Regular expressions cont.\n\n\nCode\n# . matches everything except newline\nstr_view(x, \".a.\") # Why not apple?\n\n\n[2] │ &lt;ban&gt;ana\n[3] │ p&lt;ear&gt;"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regular-expressions-cont.-2",
    "href": "wrangle-data/string-data/string-data.html#regular-expressions-cont.-2",
    "title": "Strings and regular expressions",
    "section": "Regular expressions cont.",
    "text": "Regular expressions cont.\n\n\nCode\nx &lt;- c(\"ap\\\\ple\", \"bana.na\", \"pe.ar\")"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regular-expressions-cont.-3",
    "href": "wrangle-data/string-data/string-data.html#regular-expressions-cont.-3",
    "title": "Strings and regular expressions",
    "section": "Regular expressions cont.",
    "text": "Regular expressions cont.\n\n\nCode\n# explicit .\nstr_view(x, \"a\\\\.\")\n\n\n[2] │ ban&lt;a.&gt;na"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regular-expressions-cont.-4",
    "href": "wrangle-data/string-data/string-data.html#regular-expressions-cont.-4",
    "title": "Strings and regular expressions",
    "section": "Regular expressions cont.",
    "text": "Regular expressions cont.\n\n\nCode\n# explicit \\\nstr_view(x, \"\\\\\\\\\")\n\n\n[1] │ ap&lt;\\&gt;ple"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#more-regexp",
    "href": "wrangle-data/string-data/string-data.html#more-regexp",
    "title": "Strings and regular expressions",
    "section": "More regexp",
    "text": "More regexp\n\n. match everything except newline (\\n)\nAnchors:\n\n^ start of line\n$ end of line\n\n\n\n\n\nCode\nx &lt;- c(\"apple pie\", \"apple\", \"apple cake\")\nstr_view(x, \"^a\")\n\n\n[1] │ &lt;a&gt;pple pie\n[2] │ &lt;a&gt;pple\n[3] │ &lt;a&gt;pple cake"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#more-regexp-cont.",
    "href": "wrangle-data/string-data/string-data.html#more-regexp-cont.",
    "title": "Strings and regular expressions",
    "section": "More regexp cont.",
    "text": "More regexp cont.\n\n\nCode\nx &lt;- c(\"apple pie\", \"apple\", \"apple cake\")\nstr_view(x, \"e$\")\n\n\n[1] │ apple pi&lt;e&gt;\n[2] │ appl&lt;e&gt;\n[3] │ apple cak&lt;e&gt;"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#more-regexp-cont.-1",
    "href": "wrangle-data/string-data/string-data.html#more-regexp-cont.-1",
    "title": "Strings and regular expressions",
    "section": "More regexp cont.",
    "text": "More regexp cont.\n\n\nCode\nx &lt;- c(\"apple pie\", \"apple\", \"apple cake\")\nstr_view(x, \"apple\")\n\n\n[1] │ &lt;apple&gt; pie\n[2] │ &lt;apple&gt;\n[3] │ &lt;apple&gt; cake"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#more-regexp-cont.-2",
    "href": "wrangle-data/string-data/string-data.html#more-regexp-cont.-2",
    "title": "Strings and regular expressions",
    "section": "More regexp cont.",
    "text": "More regexp cont.\n\n\nCode\nx &lt;- c(\"apple pie\", \"apple\", \"apple cake\")\nstr_view(x, \"^apple$\")\n\n\n[2] │ &lt;apple&gt;"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regexp-character-classes",
    "href": "wrangle-data/string-data/string-data.html#regexp-character-classes",
    "title": "Strings and regular expressions",
    "section": "regexp; Character classes",
    "text": "regexp; Character classes\n\n\\d: matches any digit.\n\\s: matches any whitespace (e.g. space, tab, newline).\n\\S: matches any whitespace except newline\n[abc]: matches a, b, or c.\n[^abc]: matches anything except a, b, or c.\n\n\n\n\nCode\nx &lt;- c(\"apple pie\", \"apple tart\", \"apple cake\")\nstr_view(x, \"\\\\s[cp]\")\n\n\n[1] │ apple&lt; p&gt;ie\n[3] │ apple&lt; c&gt;ake"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regexp-character-classes-cont.",
    "href": "wrangle-data/string-data/string-data.html#regexp-character-classes-cont.",
    "title": "Strings and regular expressions",
    "section": "regexp; Character classes cont.",
    "text": "regexp; Character classes cont.\n\n\nCode\nx &lt;- c(\"apple pie\", \"apple tart\", \"apple cake\")\nstr_view(x, \"\\\\s[^c]\")\n\n\n[1] │ apple&lt; p&gt;ie\n[2] │ apple&lt; t&gt;art"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#regexp-repetition",
    "href": "wrangle-data/string-data/string-data.html#regexp-repetition",
    "title": "Strings and regular expressions",
    "section": "regexp; repetition",
    "text": "regexp; repetition\n\n?: 0 or 1\n+: 1 or more\n*: 0 or more\nHandy tool: devtools::install_github(\"gadenbuie/regexplain\")\n\nTo have it appear in the Addins menu you might have to close your project and then open it again\nWorks best with not too long strings"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#number-of-matches",
    "href": "wrangle-data/string-data/string-data.html#number-of-matches",
    "title": "Strings and regular expressions",
    "section": "Number of matches",
    "text": "Number of matches\n\n{n}: exactly n\n{n,}: n or more\n{,m}: at most m\n{n,m}: between n and m"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#grouped-matches",
    "href": "wrangle-data/string-data/string-data.html#grouped-matches",
    "title": "Strings and regular expressions",
    "section": "Grouped matches",
    "text": "Grouped matches\n\n() extracts part of a match\nIt’s possible to have multiple groups\nrecall the groups by \\\\1, \\\\2 etc.\nstr_match_all() will report the different matched groups"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#example",
    "href": "wrangle-data/string-data/string-data.html#example",
    "title": "Strings and regular expressions",
    "section": "Example",
    "text": "Example\n\nSay you get a sudden urge to find out how many times Hamsun mentions sult (eng. hunger) in his famous first novel Sult.\nWhat can you do to quell your thirst for knowledge?\n\nDownload the plain text version of the text from Project Guthenberg\nHastily learn some rudimentary regexp"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#get-hold-of-sult",
    "href": "wrangle-data/string-data/string-data.html#get-hold-of-sult",
    "title": "Strings and regular expressions",
    "section": "Get hold of Sult",
    "text": "Get hold of Sult\nSee www.gutenberg.org/ebooks/30027/ for copyright information and license information.\n\n\n\nCode\nurl &lt;- \"https://www.gutenberg.org/files/30027/30027-0.txt\"\n# read line by line\n#\ncon &lt;- file(url, encoding = \"UTF-8\")\nsult &lt;- readLines(con)\nclose(con)\n# get rid of header stuff and licence at end\nsult &lt;- sult[63:(length(sult) - 354)]\n# combine to string, each line separated by \\n\nsult &lt;- str_c(sult, collapse = \"\\n\")\n# save to file\ncat(sult, file = \"sult.txt\", sep = \"\")"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#the-beginning-of-sult",
    "href": "wrangle-data/string-data/string-data.html#the-beginning-of-sult",
    "title": "Strings and regular expressions",
    "section": "The beginning of Sult",
    "text": "The beginning of Sult\n\n\nCode\n# number of characters\nnchar(sult)\n\n\n[1] 329322\n\n\nCode\n# the beginning of Sult\nstr_sub(sult, start = 1, end = 250)\n\n\n[1] \"\\nFØRSTE STYKKE\\n\\n\\nDet var i den Tid, jeg gik omkring og sulted i Kristiania, denne\\nforunderlige By, som ingen forlader, før han har fået Mærker af den . . . .\\n\\nJeg ligger vågen på min Kvist og hører en Klokke nedenunder mig slå seks\\nSlag; det var alle\""
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#searching-for-sult",
    "href": "wrangle-data/string-data/string-data.html#searching-for-sult",
    "title": "Strings and regular expressions",
    "section": "Searching for sult",
    "text": "Searching for sult\nWe start simply by searching for the string “sult”.\n\n\n\nCode\n# ss short for search string\nss &lt;- \"sult\"\n\n\n\nThen we count occurrences.\n\n\n\n\n\nCode\n# how many times does \"sult\" occur *Sult*\nstr_count(sult, ss)\n\n\n[1] 33"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#refining-match-first-letter-capital",
    "href": "wrangle-data/string-data/string-data.html#refining-match-first-letter-capital",
    "title": "Strings and regular expressions",
    "section": "Refining match, first letter capital",
    "text": "Refining match, first letter capital\n\nWe realise that this approach was far to simplistic.\nFor instance Hamsun might have started a sentence with sult and we would then have a capital s.\nIn addition at the time Sult was written Norwegian texts adhered to the German tradition of capitalising nouns.\nHence we have to allow for a capital s at the start of “sult”.\n\n\n\n\nCode\n# [sS]{1}, one of s or S, {1} not necessary\nss &lt;- \"[sS]{1}ult\"\nstr_count(sult, ss)\n\n\n[1] 54"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#result-of-simple-match",
    "href": "wrangle-data/string-data/string-data.html#result-of-simple-match",
    "title": "Strings and regular expressions",
    "section": "Result of simple match",
    "text": "Result of simple match\n\n\nCode\n# what we found\nstr_extract_all(sult, ss) %&gt;% table()\n\n\n.\nsult Sult \n  33   21 \n\n\n\nWe have 33 occurrences of “sult” and 21 of “Sult”."
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#refined-match",
    "href": "wrangle-data/string-data/string-data.html#refined-match",
    "title": "Strings and regular expressions",
    "section": "Refined match",
    "text": "Refined match\nThen we realise that this is still too simplistic because sult might be part of a word and this word might have nothing to do with sult (hunger)."
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#refined-match-1",
    "href": "wrangle-data/string-data/string-data.html#refined-match-1",
    "title": "Strings and regular expressions",
    "section": "Refined match",
    "text": "Refined match\n\n\nCode\nss &lt;- \"\\\\s[^\\\\s]*[sS]ult[^\\\\s]*\\\\s\"\n\n\n\nExplanation:\n\n“\\s[^\\\\s]*” before “[sS]ult”:\n\nwe start with a whitespace and between this whitespace and “[sS]ult” we can have whatever except whitespace 0 or more times.\n\n“[^\\\\s]*\\s” after “[sS]ult”:\n\nmeans whatever except whitespace up to first whitespace.\n\n\n\n\n\n\nCode\nstr_count(sult, ss)\n\n\n[1] 54"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#result-of-refined-match",
    "href": "wrangle-data/string-data/string-data.html#result-of-refined-match",
    "title": "Strings and regular expressions",
    "section": "Result of refined match",
    "text": "Result of refined match\n\n\nCode\nstr_extract_all(sult, ss) %&gt;% table()\n\n\n.\n   \\nSult.     \\nsulte   \\nsulted.   \\nSulten.   Resultat.        Sult  \n          1           1           1           1           1           3 \n    Sult,\\n      Sult,       Sult;       Sult!     Sultan,      sulte\\n \n          1           2           1           1           1           1 \n    sulted     sulted,     Sulten\\n     sulten      Sulten     sulten,  \n          8           1           1           3           7           7 \n   sulten;     Sultens      sulter     sulter!     sultet\\n     sultet  \n          2           1           1           1           1           2 \n   sultet,    Sultetid      sultne  \n          1           1           2 \n\n\n\nWe get one Resultat and one Sultan that we don’t want."
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#refining-our-match",
    "href": "wrangle-data/string-data/string-data.html#refining-our-match",
    "title": "Strings and regular expressions",
    "section": "Refining our match",
    "text": "Refining our match\nWe might get rid of Resultat by demanding a whitespace before sult. Sultan we can get rid of by demanding that the first character after sult can’t be an “a”.\n\n\n\nCode\nss &lt;- \"\\\\s{1}([sS]ult[^a\\\\s.,;!]*)(\\\\s?|[^\\\\s.,;]*|[:punct:])?\\\\s\"\n\n\n\n\n\n\nCode\nstr_count(sult, ss)\n\n\n[1] 52\n\n\n\nHamsun mentions some form of sult (hunger) 52 times in his novel."
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#what-forms-of-sult-occurce",
    "href": "wrangle-data/string-data/string-data.html#what-forms-of-sult-occurce",
    "title": "Strings and regular expressions",
    "section": "What forms of “sult” occurce?",
    "text": "What forms of “sult” occurce?\n\n\nCode\n#str_extract_all(sult, ss) %&gt;% table()\n# just the word, not punctuation \nstr_match_all(sult, ss)[[1]][,2] %&gt;% table()\n\n\n.\n    Sult    sulte   sulted   sulten   Sulten  Sultens   sulter   sultet \n       9        2       10       12        9        1        2        4 \nSultetid   sultne \n       1        2 \n\n\n\nIn total 10 different “versions” of sult."
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#where-does-sult-occur",
    "href": "wrangle-data/string-data/string-data.html#where-does-sult-occur",
    "title": "Strings and regular expressions",
    "section": "Where does “sult” occur",
    "text": "Where does “sult” occur\n\nIf we are of the inquisitive sort me might wonder where exactly in the text some form of sult occurs. The answers is:\n\n\n\n\nCode\n# the first 5 occurrences \ntmp &lt;- str_locate_all(sult, ss)\ntmp\n\n\n[[1]]\n       start    end\n [1,]     55     62\n [2,]  27762  27769\n [3,]  54800  54807\n [4,]  66793  66801\n [5,]  70676  70683\n [6,]  76311  76319\n [7,]  88391  88399\n [8,]  88405  88413\n [9,]  90187  90194\n[10,]  91179  91185\n[11,]  92854  92859\n[12,]  95786  95793\n[13,]  96267  96274\n[14,]  97348  97355\n[15,]  97793  97802\n[16,]  98697  98705\n[17,] 101059 101067\n[18,] 101085 101093\n[19,] 101301 101306\n[20,] 107928 107936\n[21,] 116916 116923\n[22,] 128100 128108\n[23,] 133854 133860\n[24,] 137071 137079\n[25,] 139494 139502\n[26,] 144019 144025\n[27,] 146030 146036\n[28,] 146278 146285\n[29,] 146481 146488\n[30,] 150040 150047\n[31,] 151345 151353\n[32,] 151570 151576\n[33,] 152111 152116\n[34,] 158436 158443\n[35,] 158973 158980\n[36,] 166092 166099\n[37,] 166316 166322\n[38,] 179690 179697\n[39,] 187656 187663\n[40,] 199163 199169\n[41,] 201139 201147\n[42,] 204967 204974\n[43,] 220179 220187\n[44,] 222618 222625\n[45,] 233194 233201\n[46,] 233597 233604\n[47,] 250287 250294\n[48,] 299629 299637\n[49,] 308292 308298\n[50,] 312845 312852\n[51,] 320039 320046\n[52,] 326770 326777\n\n\nFirst mention of sult in some form start 53 characters into the file."
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#making-a-new-master-piece",
    "href": "wrangle-data/string-data/string-data.html#making-a-new-master-piece",
    "title": "Strings and regular expressions",
    "section": "Making a new master piece",
    "text": "Making a new master piece\n\nchange “sult” (hunger) to “tørst” (thirst)\na whole new meaning ;-)\n\n\n\n\nCode\ntørst &lt;- sult %&gt;% \n  str_replace_all(\n    c(\n    \"sulten\" = \"tørst\",\n    \"Sult\" = \"Tørst\",\n    \"sult\" = \"tørst\",\n    \"Sulten\" = \"Tørsten\"\n    )\n    ) %&gt;% \n  str_replace_all(\n    c(\n      \"Tørstan\" = \"Sultan\",\n      \"Restørstat\" = \"Resultat\"\n      )\n    )\n\ncat(tørst, file = \"tørst.txt\", sep = \"\")"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#the-result",
    "href": "wrangle-data/string-data/string-data.html#the-result",
    "title": "Strings and regular expressions",
    "section": "The result",
    "text": "The result\n\nOur new sentences\n\nSentence 2 is a false match (“største”), hence dropped.\nSix first sentences\n\n\n\n\n\nCode\ntt &lt;- \"(\\\\.|\\\\n)(.*[tT]ørst.*)(\\\\.|\\\\n)\"\nstr_match_all(tørst, tt)[[1]][c(1,3:7),3]\n\n\n[1] \"Det var i den Tid, jeg gik omkring og tørsted i Kristiania, denne\"           \n[2] \"om. Jeg havde så tydelig mærket, at når jeg tørsted lidt længe ad Gangen,\"   \n[3] \"ingen Frygt for at gå tørst tilsengs den Dag; de Tider var Gudskelov over!\"  \n[4] \"Kold og tørst, mer og mer uhyggelig tilmode, drev jeg opad Karl Johan; jeg\"  \n[5] \"Klokken var tre. Tørsten begyndte at blive noget slem med mig, jeg var mat\"  \n[6] \"fordømte Årstal mig? Nu gik jeg her og tørsted, så mine Tarmer krøb sammen i\""
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#a-new-master-piece",
    "href": "wrangle-data/string-data/string-data.html#a-new-master-piece",
    "title": "Strings and regular expressions",
    "section": "A new master piece!",
    "text": "A new master piece!\n\nA new master piece is born!\nJust a pity that someone has already taken our title.\n\n\n\n\n\nTørst Jo Nesbø"
  },
  {
    "objectID": "wrangle-data/string-data/string-data.html#references",
    "href": "wrangle-data/string-data/string-data.html#references",
    "title": "Strings and regular expressions",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nBenoit, Kenneth, and Adam Obeng. 2023. Readtext: Import and Handling for Plain and Formatted Text Files. https://github.com/quanteda/readtext.\n\n\nWickham, Hadley. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#load-tidyverse",
    "href": "wrangle-data/tidy-data/tidy-data.html#load-tidyverse",
    "title": "Tidy Data",
    "section": "Load tidyverse",
    "text": "Load tidyverse\n\n\nCode\nlibrary(tidyverse)\n\n\n\nNote the 8 packages that are loaded by tidyverse (taken from tidyverse.tidyverse.org)\n\nggplot2, for data visualisation.\ndplyr, for data manipulation.\ntidyr, for data tidying.\nreadr, for data import.\npurrr, for functional programming.\ntibble, for tibbles, a modern re-imagining of data frames.\nstringr, for strings.\nforcats, for factors."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#load-tidyverse-cont.",
    "href": "wrangle-data/tidy-data/tidy-data.html#load-tidyverse-cont.",
    "title": "Tidy Data",
    "section": "Load tidyverse cont.",
    "text": "Load tidyverse cont.\n\nNote that dplyr mask the two functions filter() and lag().\nHence calling filter() will give us the dplyr version.\nIf we need the original\n\n\n\n\nCode\nbase::Filter\n\n\n\n\nCode\nstats::lag"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#tidy-data",
    "href": "wrangle-data/tidy-data/tidy-data.html#tidy-data",
    "title": "Tidy Data",
    "section": "Tidy data",
    "text": "Tidy data\n\n“Happy families are all alike; every unhappy family is unhappy in its own way.” (Leo Tolstoy)\n“Tidy datasets are all alike, but every messy dataset is messy in its own way.” (Hadley Wickham)\nTidy Data\n\nEach variable must have its own column.\nEach observation must have its own row.\nEach value must have its own cell.\n\nIf two of the conditions above are satisfied then the third will also be satisfied\nRemember our definition from chapter 7 of an observation:\nObservation: a set of measurements of the underlying phenomenon\n\nat the same time\nof the same object"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#tidy-data-examples",
    "href": "wrangle-data/tidy-data/tidy-data.html#tidy-data-examples",
    "title": "Tidy Data",
    "section": "Tidy Data; examples",
    "text": "Tidy Data; examples\nThe tidyverse package comes with four example tables already defined"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#tidy-data-table3",
    "href": "wrangle-data/tidy-data/tidy-data.html#tidy-data-table3",
    "title": "Tidy Data",
    "section": "Tidy Data; table3",
    "text": "Tidy Data; table3\n\n\nCode\ntable3\n\n\n# A tibble: 6 × 3\n  country      year rate             \n  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            \n1 Afghanistan  1999 745/19987071     \n2 Afghanistan  2000 2666/20595360    \n3 Brazil       1999 37737/172006362  \n4 Brazil       2000 80488/174504898  \n5 China        1999 212258/1272915272\n6 China        2000 213766/1280428583\n\n\n\nIs table3 Tidy?\n\nNo!\n\nWhy not?\n\nRate: two values in one cell"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#tidy-data-table2",
    "href": "wrangle-data/tidy-data/tidy-data.html#tidy-data-table2",
    "title": "Tidy Data",
    "section": "Tidy Data; table2",
    "text": "Tidy Data; table2\n\n\nCode\ntable2\n\n\n# A tibble: 12 × 4\n   country      year type            count\n   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;\n 1 Afghanistan  1999 cases             745\n 2 Afghanistan  1999 population   19987071\n 3 Afghanistan  2000 cases            2666\n 4 Afghanistan  2000 population   20595360\n 5 Brazil       1999 cases           37737\n 6 Brazil       1999 population  172006362\n 7 Brazil       2000 cases           80488\n 8 Brazil       2000 population  174504898\n 9 China        1999 cases          212258\n10 China        1999 population 1272915272\n11 China        2000 cases          213766\n12 China        2000 population 1280428583\n\n\n\nIs table2 Tidy?\n\nNo!\n\nWhy not?\n\nEach observation is spread over two rows"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#tidy-data-table4",
    "href": "wrangle-data/tidy-data/tidy-data.html#tidy-data-table4",
    "title": "Tidy Data",
    "section": "Tidy Data; table4",
    "text": "Tidy Data; table4\n\n\nCode\ntable4a\n\n\n# A tibble: 3 × 3\n  country     `1999` `2000`\n  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;\n1 Afghanistan    745   2666\n2 Brazil       37737  80488\n3 China       212258 213766\n\n\nCode\ntable4b\n\n\n# A tibble: 3 × 3\n  country         `1999`     `2000`\n  &lt;chr&gt;            &lt;dbl&gt;      &lt;dbl&gt;\n1 Afghanistan   19987071   20595360\n2 Brazil       172006362  174504898\n3 China       1272915272 1280428583\n\n\n\nIs table4a and table4b Tidy?\n\nNo!\n\nWhy not?\n\nTwo observations in one row.\nThe observations are also spread over two tables."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#tidy-data-table1",
    "href": "wrangle-data/tidy-data/tidy-data.html#tidy-data-table1",
    "title": "Tidy Data",
    "section": "Tidy Data; table1",
    "text": "Tidy Data; table1\n\n\nCode\ntable1\n\n\n# A tibble: 6 × 4\n  country      year  cases population\n  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;\n1 Afghanistan  1999    745   19987071\n2 Afghanistan  2000   2666   20595360\n3 Brazil       1999  37737  172006362\n4 Brazil       2000  80488  174504898\n5 China        1999 212258 1272915272\n6 China        2000 213766 1280428583\n\n\n\nIs table1 Tidy?\n\nYes!\n\nWhy?\n\nObservation: same time, same object\n\nEach variable is in a column\neach observation is in a row\neach cell contains one value.\n\n\nThe table is tidy"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#are-untidy-data-bad",
    "href": "wrangle-data/tidy-data/tidy-data.html#are-untidy-data-bad",
    "title": "Tidy Data",
    "section": "Are untidy data bad?",
    "text": "Are untidy data bad?\n\nAre untidy data bad?\n\nThey are bad if you are going to do some statistical analysis.\n\nWhy?\n\nMost statistical routines expect the data to be tidy.\nWhy?\n\nMy guess: historic reasons, easier to scroll vertically than horizontally.\nMore observations than variables.\n\n\nFor other purposes untidy data might be good.\n\nPresentation\nData entering"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#why-tidy-data",
    "href": "wrangle-data/tidy-data/tidy-data.html#why-tidy-data",
    "title": "Tidy Data",
    "section": "Why tidy data?",
    "text": "Why tidy data?\n\nWicham give the following two reasons:\n\nAdvantage to have one consistent way of storing data. Easier to learn new tools because they behave similar to the tools you already know (hence: Embrace pipes and the tidyverse)\nThe whole tidyverse is designed to work well with tidy data\n\nVariables in columns fits well with R ability to handle vectors."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#some-ex.-of-working-with-tidy-data-1",
    "href": "wrangle-data/tidy-data/tidy-data.html#some-ex.-of-working-with-tidy-data-1",
    "title": "Tidy Data",
    "section": "Some ex. of working with tidy data; 1",
    "text": "Some ex. of working with tidy data; 1\n\n\nCode\n# cases per 100.000\ntable1 &lt;- table1 %&gt;% \n  mutate(\n    rate = round((cases/population) * 100000,\n                 digits = 3)\n    )\n\n\n\nvery easy to make a new variable"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#some-ex.-of-working-with-tidy-data-2",
    "href": "wrangle-data/tidy-data/tidy-data.html#some-ex.-of-working-with-tidy-data-2",
    "title": "Tidy Data",
    "section": "Some ex. of working with tidy data; 2",
    "text": "Some ex. of working with tidy data; 2\n\n\nCode\ntable1 %&gt;% \n  count(year, wt = cases)\n\n\n# A tibble: 2 × 2\n   year      n\n  &lt;dbl&gt;  &lt;dbl&gt;\n1  1999 250740\n2  2000 296920\n\n\n\nWhat is wt?\n\nThe answer is in help:\n\nwt Frequency weights.\nCan be NULL or a variable:\n\nIf NULL (the default), counts the number of rows in each group.\nIf a variable, computes sum(wt) for each group.\n\n\nHere cases is a variable and we get the total sum of cases in the two years."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#some-ex.-of-working-with-tidy-data-3-code",
    "href": "wrangle-data/tidy-data/tidy-data.html#some-ex.-of-working-with-tidy-data-3-code",
    "title": "Tidy Data",
    "section": "Some ex. of working with tidy data; 3 code",
    "text": "Some ex. of working with tidy data; 3 code\n\n\nCode\n# Some changes from Wicham\n# embrace the pipe!\ntable1 %&gt;% \nggplot(mapping = aes(\n  x = parse_date(\n    as.character(year),\n    format = \"%Y\"\n    ),\n  y = rate,\n  colour = country\n  )\n  ) + \n  geom_line(mapping = aes(group = country)) + \n  geom_point() + \n  xlab(\"Time\") +\n  ylab(\"Rate per 100000\") +\n  theme(legend.position = \"bottom\")"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#some-examples-of-working-with-tidy-data-3-plot",
    "href": "wrangle-data/tidy-data/tidy-data.html#some-examples-of-working-with-tidy-data-3-plot",
    "title": "Tidy Data",
    "section": "Some examples of working with tidy data; 3 plot",
    "text": "Some examples of working with tidy data; 3 plot"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#how-to-get-tidy-data",
    "href": "wrangle-data/tidy-data/tidy-data.html#how-to-get-tidy-data",
    "title": "Tidy Data",
    "section": "How to get tidy data?",
    "text": "How to get tidy data?\n\nMost common problems\n\nOne variable might be spread across multiple columns.\nOne observation might be scattered across multiple rows.\n\nFour verbs\n\npivot_longer() (previously gather())\npivot_wider() (previously spread())\nseparate\nunite"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#pivot_longer",
    "href": "wrangle-data/tidy-data/tidy-data.html#pivot_longer",
    "title": "Tidy Data",
    "section": "pivot_longer()",
    "text": "pivot_longer()\n\nMost important arguments:\n\ndata: A data frame to pivot.\ncols: Columns to pivot into longer format.\nnames_to: A string specifying the name of the column to create from the data stored in the column names of data.\nvalues_to: A string specifying the name of the column to create from the data stored in cell values."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#pivot_longer-example-problem",
    "href": "wrangle-data/tidy-data/tidy-data.html#pivot_longer-example-problem",
    "title": "Tidy Data",
    "section": "pivot_longer() example; problem",
    "text": "pivot_longer() example; problem\n\n\nCode\ntable4a\n\n\n# A tibble: 3 × 3\n  country     `1999` `2000`\n  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;\n1 Afghanistan    745   2666\n2 Brazil       37737  80488\n3 China       212258 213766\n\n\n\nProblem: Each observation is spread out over two columns (two points of time)\nRemember definition of observation\nObservation: a set of measurements of the underlying phenomenon\n\nat the same time\nof the same object"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#pivot_longer-example-how-to-fix-it",
    "href": "wrangle-data/tidy-data/tidy-data.html#pivot_longer-example-how-to-fix-it",
    "title": "Tidy Data",
    "section": "pivot_longer() example; how to fix it",
    "text": "pivot_longer() example; how to fix it\n\n\nCode\ntidy4a &lt;- table4a %&gt;% \n  pivot_longer(cols = -country,\n               names_to = \"year\", \n               values_to = \"cases\")\ntidy4a\n\n\n# A tibble: 6 × 3\n  country     year   cases\n  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;\n1 Afghanistan 1999     745\n2 Afghanistan 2000    2666\n3 Brazil      1999   37737\n4 Brazil      2000   80488\n5 China       1999  212258\n6 China       2000  213766\n\n\n\nNote: col = c(`1999`, `2000`) would also work, or cols = 2:3. The important thing is that the variable country is not to be included.\nThe new variables year and cases do not yet exist, hence they must be enclosed by quotes."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#pivot_longer-example.fix-table4b",
    "href": "wrangle-data/tidy-data/tidy-data.html#pivot_longer-example.fix-table4b",
    "title": "Tidy Data",
    "section": "pivot_longer() example.fix table4b",
    "text": "pivot_longer() example.fix table4b\n\n\nCode\ntidy4b &lt;- table4b %&gt;% \n  pivot_longer(\n    cols = -country,\n    names_to = \"year\",\n    values_to = \"pop\"\n  )\ntidy4b\n\n\n# A tibble: 6 × 3\n  country     year         pop\n  &lt;chr&gt;       &lt;chr&gt;      &lt;dbl&gt;\n1 Afghanistan 1999    19987071\n2 Afghanistan 2000    20595360\n3 Brazil      1999   172006362\n4 Brazil      2000   174504898\n5 China       1999  1272915272\n6 China       2000  1280428583"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#make-tidy4-join",
    "href": "wrangle-data/tidy-data/tidy-data.html#make-tidy4-join",
    "title": "Tidy Data",
    "section": "Make tidy4 (join)",
    "text": "Make tidy4 (join)\n\n\nCode\ntidy4 &lt;- tidy4a %&gt;% \n  left_join(tidy4b, by = c(\"country\", \"year\"))\ntidy4\n\n\n# A tibble: 6 × 4\n  country     year   cases        pop\n  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;      &lt;dbl&gt;\n1 Afghanistan 1999     745   19987071\n2 Afghanistan 2000    2666   20595360\n3 Brazil      1999   37737  172006362\n4 Brazil      2000   80488  174504898\n5 China       1999  212258 1272915272\n6 China       2000  213766 1280428583"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#pivot_wider",
    "href": "wrangle-data/tidy-data/tidy-data.html#pivot_wider",
    "title": "Tidy Data",
    "section": "pivot_wider()",
    "text": "pivot_wider()\n\nWe use pivot_wider() when one observation is spread over multiple rows\ntable2 is a table with this problem\nImportant parameters\n\ndata: A data frame to pivot.\nnames_from: the name of the output column\nnames_sep: names_sep = “_”\nvalues_from: get the cell values"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#pivot_longer-example.-fix-table2",
    "href": "wrangle-data/tidy-data/tidy-data.html#pivot_longer-example.-fix-table2",
    "title": "Tidy Data",
    "section": "pivot_longer() example. Fix table2",
    "text": "pivot_longer() example. Fix table2\n\n\nCode\ntable2[1:3,]\n\n\n# A tibble: 3 × 4\n  country      year type          count\n  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 Afghanistan  1999 cases           745\n2 Afghanistan  1999 population 19987071\n3 Afghanistan  2000 cases          2666\n\n\nCode\n(tidy2 &lt;- table2 %&gt;% \n  pivot_wider(names_from = type,\n              values_from = count))\n\n\n# A tibble: 6 × 4\n  country      year  cases population\n  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;\n1 Afghanistan  1999    745   19987071\n2 Afghanistan  2000   2666   20595360\n3 Brazil       1999  37737  172006362\n4 Brazil       2000  80488  174504898\n5 China        1999 212258 1272915272\n6 China        2000 213766 1280428583"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#separate",
    "href": "wrangle-data/tidy-data/tidy-data.html#separate",
    "title": "Tidy Data",
    "section": "separate()",
    "text": "separate()\n\nWe use separate() when one cell contains more than one value\nseparate() pulls apart a column\ntable3 is a table with this problem\nImportant parameters\n\ndata: A data frame.\ncol: Column name or position.\ninto: Names of new variables to create as character vector. Use NA to omit the variable in the output.\nsep: Separator between columns.\n\nIf character, sep is interpreted as a regular expression.\n\nThe default value is a regular expression that matches any sequence of non-alphanumeric values.\n\nIf numeric, sep is interpreted as character positions to split at.\n\nPositive values start at 1 at the far-left of the string;\nnegative value start at -1 at the far-right of the string.\nThe length of sep should be one less than into."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#separate-example.-fix-table3",
    "href": "wrangle-data/tidy-data/tidy-data.html#separate-example.-fix-table3",
    "title": "Tidy Data",
    "section": "separate() example. Fix table3",
    "text": "separate() example. Fix table3\n\n\nCode\ntable3[1:3,] \n\n\n# A tibble: 3 × 3\n  country      year rate           \n  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;          \n1 Afghanistan  1999 745/19987071   \n2 Afghanistan  2000 2666/20595360  \n3 Brazil       1999 37737/172006362\n\n\nCode\ntidy3 &lt;- table3 %&gt;% \n  separate(col = rate,\n           into = c(\"cases\", \"pop\"),\n           sep = \"/\"\n           )\ntidy3[1:5,]\n\n\n# A tibble: 5 × 4\n  country      year cases  pop       \n  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     \n1 Afghanistan  1999 745    19987071  \n2 Afghanistan  2000 2666   20595360  \n3 Brazil       1999 37737  172006362 \n4 Brazil       2000 80488  174504898 \n5 China        1999 212258 1272915272"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#separate-example.-fix-table3-convert-true",
    "href": "wrangle-data/tidy-data/tidy-data.html#separate-example.-fix-table3-convert-true",
    "title": "Tidy Data",
    "section": "separate() example. Fix table3, convert = TRUE",
    "text": "separate() example. Fix table3, convert = TRUE\n\n\nCode\ntable3[1:3,] \n\n\n# A tibble: 3 × 3\n  country      year rate           \n  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;          \n1 Afghanistan  1999 745/19987071   \n2 Afghanistan  2000 2666/20595360  \n3 Brazil       1999 37737/172006362\n\n\nCode\ntidy3 &lt;- table3 %&gt;% \n  separate(col = rate,\n           into = c(\"cases\", \"pop\"),\n           sep = \"/\",\n           convert = TRUE\n           )\n# cases and pop now int, not chr\ntidy3[1:3,]\n\n\n# A tibble: 3 × 4\n  country      year cases       pop\n  &lt;chr&gt;       &lt;dbl&gt; &lt;int&gt;     &lt;int&gt;\n1 Afghanistan  1999   745  19987071\n2 Afghanistan  2000  2666  20595360\n3 Brazil       1999 37737 172006362"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#separate-example.-fix-table3-sep-number",
    "href": "wrangle-data/tidy-data/tidy-data.html#separate-example.-fix-table3-sep-number",
    "title": "Tidy Data",
    "section": "separate() example. Fix table3, sep number",
    "text": "separate() example. Fix table3, sep number\n\n\nCode\ntidy3century &lt;- tidy3 %&gt;% \n  separate(col = year,\n           into = c(\"century\", \"year\"),\n           sep = 2\n           )\ntidy3century\n\n\n# A tibble: 6 × 5\n  country     century year   cases        pop\n  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;  &lt;int&gt;      &lt;int&gt;\n1 Afghanistan 19      99       745   19987071\n2 Afghanistan 20      00      2666   20595360\n3 Brazil      19      99     37737  172006362\n4 Brazil      20      00     80488  174504898\n5 China       19      99    212258 1272915272\n6 China       20      00    213766 1280428583\n\n\n\nsep = 2, separate after 2 char from left\nWhat would sep = -2 do?\n\nseparate before 2 char from right"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#unite",
    "href": "wrangle-data/tidy-data/tidy-data.html#unite",
    "title": "Tidy Data",
    "section": "unite()",
    "text": "unite()\n\nreverse of separate()\ncombines multiple columns into a single column\nImportant parameters\n\ndata: A data frame.\ncol: The name of the new column, as a string or symbol.\n\n…: We list the variables we want to unite. Separate the names with comma.\n\nsep: Separator to use between values."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#unite-example.-fix-tidy3century",
    "href": "wrangle-data/tidy-data/tidy-data.html#unite-example.-fix-tidy3century",
    "title": "Tidy Data",
    "section": "unite() example. Fix tidy3century",
    "text": "unite() example. Fix tidy3century\n\n\nCode\ntidy3century[1:3,]\n\n\n# A tibble: 3 × 5\n  country     century year  cases       pop\n  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;int&gt;     &lt;int&gt;\n1 Afghanistan 19      99      745  19987071\n2 Afghanistan 20      00     2666  20595360\n3 Brazil      19      99    37737 172006362\n\n\nCode\ntidy3century %&gt;% \n  unite(\n    col = \"year\",\n    century, year, # the columns we want to unite\n    sep = \"\" # what happens witout sep?\n  )\n\n\n# A tibble: 6 × 4\n  country     year   cases        pop\n  &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;      &lt;int&gt;\n1 Afghanistan 1999     745   19987071\n2 Afghanistan 2000    2666   20595360\n3 Brazil      1999   37737  172006362\n4 Brazil      2000   80488  174504898\n5 China       1999  212258 1272915272\n6 China       2000  213766 1280428583"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#missing-values",
    "href": "wrangle-data/tidy-data/tidy-data.html#missing-values",
    "title": "Tidy Data",
    "section": "Missing values",
    "text": "Missing values\n\nValues can be missing in two ways\n\nExplicitly, i.e. flagged with NA\nImplicitly, i.e. simply not present in the data."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#missing-values-example",
    "href": "wrangle-data/tidy-data/tidy-data.html#missing-values-example",
    "title": "Tidy Data",
    "section": "Missing values; example",
    "text": "Missing values; example\n\n\nCode\nstocks &lt;- tibble(\n  year   = c(2015, 2015, 2015, \n             2015, 2016, 2016, 2016),\n  qtr    = c(   1,    2,    3,    \n                4,    2,    3,    4),\n  return = c(1.88, 0.59, 0.35,\n             NA, 0.92, 0.17, 2.66)\n)\nstocks\n\n\n# A tibble: 7 × 3\n   year   qtr return\n  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n1  2015     1   1.88\n2  2015     2   0.59\n3  2015     3   0.35\n4  2015     4  NA   \n5  2016     2   0.92\n6  2016     3   0.17\n7  2016     4   2.66\n\n\n\nFirst quarter 2016 is missing"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#implecitly-missing-becomes-explicitly-missing",
    "href": "wrangle-data/tidy-data/tidy-data.html#implecitly-missing-becomes-explicitly-missing",
    "title": "Tidy Data",
    "section": "Implecitly missing becomes explicitly missing",
    "text": "Implecitly missing becomes explicitly missing\n\n\nCode\nstocks_wider &lt;- stocks %&gt;% \n  pivot_wider(\n    names_from = year,\n    values_from = return\n    )\nstocks_wider\n\n\n# A tibble: 4 × 3\n    qtr `2015` `2016`\n  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1     1   1.88  NA   \n2     2   0.59   0.92\n3     3   0.35   0.17\n4     4  NA      2.66\n\n\n\nNote that quarter 1 year 2016 now has become explicitly missing."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#missing-values_drop_na-true",
    "href": "wrangle-data/tidy-data/tidy-data.html#missing-values_drop_na-true",
    "title": "Tidy Data",
    "section": "missing; values_drop_na = TRUE",
    "text": "missing; values_drop_na = TRUE\n\n\nCode\nstocks_wider %&gt;% \n  pivot_longer(\n    cols = -qtr,\n    names_to = \"year\", # in quote since it does not exist yet\n    values_to = \"return\",\n    values_drop_na = TRUE\n  ) %&gt;% \n  arrange(year, qtr)\n\n\n# A tibble: 6 × 3\n    qtr year  return\n  &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt;\n1     1 2015    1.88\n2     2 2015    0.59\n3     3 2015    0.35\n4     2 2016    0.92\n5     3 2016    0.17\n6     4 2016    2.66"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#missing-complete",
    "href": "wrangle-data/tidy-data/tidy-data.html#missing-complete",
    "title": "Tidy Data",
    "section": "missing; complete()",
    "text": "missing; complete()\n\n\nCode\nstocks %&gt;% \n  complete(year, qtr)\n\n\n# A tibble: 8 × 3\n   year   qtr return\n  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n1  2015     1   1.88\n2  2015     2   0.59\n3  2015     3   0.35\n4  2015     4  NA   \n5  2016     1  NA   \n6  2016     2   0.92\n7  2016     3   0.17\n8  2016     4   2.66\n\n\n\ncomplete() takes a set of columns, and finds all unique combinations.\nIt then ensures the original dataset contains all those values, filling in explicit NAs where necessary."
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#missing-fill",
    "href": "wrangle-data/tidy-data/tidy-data.html#missing-fill",
    "title": "Tidy Data",
    "section": "missing; fill()",
    "text": "missing; fill()\n\n\nCode\ntreatment &lt;- tribble(\n  ~ person,           ~ treatment, ~response,\n  \"Derrick Whitmore\", 1,           7,\n  NA,                 2,           10,\n  NA,                 3,           9,\n  \"Katherine Burke\",  1,           4\n)\ntreatment\n\n\n# A tibble: 4 × 3\n  person           treatment response\n  &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;\n1 Derrick Whitmore         1        7\n2 &lt;NA&gt;                     2       10\n3 &lt;NA&gt;                     3        9\n4 Katherine Burke          1        4\n\n\n\nfill() can save one from a lot of work\nNA for person , should be the name of the person above\nimportant parameter:\n\n… Columns to fill. Names separated by “,”\n.direction = c(“down”, “up”, “downup”, “updown”))"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#missing-fill-example",
    "href": "wrangle-data/tidy-data/tidy-data.html#missing-fill-example",
    "title": "Tidy Data",
    "section": "missing; fill() example",
    "text": "missing; fill() example\n\n\nCode\ntreatment %&gt;% \n  fill(person, .direction = c(\"down\"))\n\n\n# A tibble: 4 × 3\n  person           treatment response\n  &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;\n1 Derrick Whitmore         1        7\n2 Derrick Whitmore         2       10\n3 Derrick Whitmore         3        9\n4 Katherine Burke          1        4\n\n\n\n\nCode\ntreatment %&gt;% \n  fill(person, .direction = c(\"up\"))\n\n\n# A tibble: 4 × 3\n  person           treatment response\n  &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;\n1 Derrick Whitmore         1        7\n2 Katherine Burke          2       10\n3 Katherine Burke          3        9\n4 Katherine Burke          1        4"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#case-who",
    "href": "wrangle-data/tidy-data/tidy-data.html#case-who",
    "title": "Tidy Data",
    "section": "Case; who",
    "text": "Case; who\n\n\nCode\ndim(who)\n\n\n[1] 7240   60\n\n\n\n\nCode\nwho[1:3, ]\n\n\n# A tibble: 3 × 60\n  country   iso2  iso3   year new_sp_m014 new_sp_m1524 new_sp_m2534 new_sp_m3544\n  &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;\n1 Afghanis… AF    AFG    1980          NA           NA           NA           NA\n2 Afghanis… AF    AFG    1981          NA           NA           NA           NA\n3 Afghanis… AF    AFG    1982          NA           NA           NA           NA\n# ℹ 52 more variables: new_sp_m4554 &lt;dbl&gt;, new_sp_m5564 &lt;dbl&gt;,\n#   new_sp_m65 &lt;dbl&gt;, new_sp_f014 &lt;dbl&gt;, new_sp_f1524 &lt;dbl&gt;,\n#   new_sp_f2534 &lt;dbl&gt;, new_sp_f3544 &lt;dbl&gt;, new_sp_f4554 &lt;dbl&gt;,\n#   new_sp_f5564 &lt;dbl&gt;, new_sp_f65 &lt;dbl&gt;, new_sn_m014 &lt;dbl&gt;,\n#   new_sn_m1524 &lt;dbl&gt;, new_sn_m2534 &lt;dbl&gt;, new_sn_m3544 &lt;dbl&gt;,\n#   new_sn_m4554 &lt;dbl&gt;, new_sn_m5564 &lt;dbl&gt;, new_sn_m65 &lt;dbl&gt;,\n#   new_sn_f014 &lt;dbl&gt;, new_sn_f1524 &lt;dbl&gt;, new_sn_f2534 &lt;dbl&gt;, …"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#case-who-1",
    "href": "wrangle-data/tidy-data/tidy-data.html#case-who-1",
    "title": "Tidy Data",
    "section": "Case; who",
    "text": "Case; who\n\n\nCode\n# find type of vector with a pipe\ntypeof_who &lt;- who %&gt;% \n  map(typeof) %&gt;% \n  unlist()\n# print typeof_who\ntypeof_who\n\n\n     country         iso2         iso3         year  new_sp_m014 new_sp_m1524 \n \"character\"  \"character\"  \"character\"     \"double\"     \"double\"     \"double\" \nnew_sp_m2534 new_sp_m3544 new_sp_m4554 new_sp_m5564   new_sp_m65  new_sp_f014 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \nnew_sp_f1524 new_sp_f2534 new_sp_f3544 new_sp_f4554 new_sp_f5564   new_sp_f65 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \n new_sn_m014 new_sn_m1524 new_sn_m2534 new_sn_m3544 new_sn_m4554 new_sn_m5564 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \n  new_sn_m65  new_sn_f014 new_sn_f1524 new_sn_f2534 new_sn_f3544 new_sn_f4554 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \nnew_sn_f5564   new_sn_f65  new_ep_m014 new_ep_m1524 new_ep_m2534 new_ep_m3544 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \nnew_ep_m4554 new_ep_m5564   new_ep_m65  new_ep_f014 new_ep_f1524 new_ep_f2534 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \nnew_ep_f3544 new_ep_f4554 new_ep_f5564   new_ep_f65  newrel_m014 newrel_m1524 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \nnewrel_m2534 newrel_m3544 newrel_m4554 newrel_m5564   newrel_m65  newrel_f014 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \nnewrel_f1524 newrel_f2534 newrel_f3544 newrel_f4554 newrel_f5564   newrel_f65 \n    \"double\"     \"double\"     \"double\"     \"double\"     \"double\"     \"double\" \n\n\nCode\n# tabulate typeof_who\ntable(typeof_who)\n\n\ntypeof_who\ncharacter    double \n        3        57 \n\n\n\nThree variables are of type character, 57 of type integer\nVariable names might be values"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#where-to-start",
    "href": "wrangle-data/tidy-data/tidy-data.html#where-to-start",
    "title": "Tidy Data",
    "section": "Where to start?",
    "text": "Where to start?\n\nWicham: The best place to start is almost always to gather together the columns that are not variables. (pivot_longer())\n\n\n\n\nCode\nwho[1:5, c(\"country\", \"iso2\", \"iso3\")]\n\n\n# A tibble: 5 × 3\n  country     iso2  iso3 \n  &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;\n1 Afghanistan AF    AFG  \n2 Afghanistan AF    AFG  \n3 Afghanistan AF    AFG  \n4 Afghanistan AF    AFG  \n5 Afghanistan AF    AFG  \n\n\n\n\nCode\nnames(who)[1:10]\n\n\n [1] \"country\"      \"iso2\"         \"iso3\"         \"year\"         \"new_sp_m014\" \n [6] \"new_sp_m1524\" \"new_sp_m2534\" \"new_sp_m3544\" \"new_sp_m4554\" \"new_sp_m5564\""
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#where-to-start-1",
    "href": "wrangle-data/tidy-data/tidy-data.html#where-to-start-1",
    "title": "Tidy Data",
    "section": "Where to start?",
    "text": "Where to start?\n\n\nCode\nunique(who$new_sp_m014)[1:10]\n\n\n [1]  NA   0  30   8  52 129  90 127 139 151\n\n\n\nMight be number of cases\n\n\n\n\nCode\nnames(who)[50:60]\n\n\n [1] \"newrel_m3544\" \"newrel_m4554\" \"newrel_m5564\" \"newrel_m65\"   \"newrel_f014\" \n [6] \"newrel_f1524\" \"newrel_f2534\" \"newrel_f3544\" \"newrel_f4554\" \"newrel_f5564\"\n[11] \"newrel_f65\"  \n\n\n\n“new_sp_m014” etc. probably values not variables"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#who-gather-variables",
    "href": "wrangle-data/tidy-data/tidy-data.html#who-gather-variables",
    "title": "Tidy Data",
    "section": "who, gather variables",
    "text": "who, gather variables\n\n\nCode\nwho1 &lt;- who %&gt;% \n  pivot_longer(cols = new_sp_m014:newrel_f65,\n               names_to = \"key\",\n               values_to = \"cases\",\n               values_drop_na = TRUE\n               )\nwho1\n\n\n# A tibble: 76,046 × 6\n   country     iso2  iso3   year key          cases\n   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;\n 1 Afghanistan AF    AFG    1997 new_sp_m014      0\n 2 Afghanistan AF    AFG    1997 new_sp_m1524    10\n 3 Afghanistan AF    AFG    1997 new_sp_m2534     6\n 4 Afghanistan AF    AFG    1997 new_sp_m3544     3\n 5 Afghanistan AF    AFG    1997 new_sp_m4554     5\n 6 Afghanistan AF    AFG    1997 new_sp_m5564     2\n 7 Afghanistan AF    AFG    1997 new_sp_m65       0\n 8 Afghanistan AF    AFG    1997 new_sp_f014      5\n 9 Afghanistan AF    AFG    1997 new_sp_f1524    38\n10 Afghanistan AF    AFG    1997 new_sp_f2534    36\n# ℹ 76,036 more rows"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#whats-in-a-variable-name",
    "href": "wrangle-data/tidy-data/tidy-data.html#whats-in-a-variable-name",
    "title": "Tidy Data",
    "section": "What’s in a variable name?",
    "text": "What’s in a variable name?\n\n“new_sp_m014”\n\n“new”: new case\nsp: Type of TB, alt. “rel”, “ep”, “sn”, “sp”\nm: male, alt. “m” and “f”\n014: age 0-14, alt “014”, “1524”, “2534”, “3544”, “4554”, “5564”, “65”"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#who1",
    "href": "wrangle-data/tidy-data/tidy-data.html#who1",
    "title": "Tidy Data",
    "section": "who1",
    "text": "who1\n\n\nCode\nhead(who1, n=5)\n\n\n# A tibble: 5 × 6\n  country     iso2  iso3   year key          cases\n  &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;\n1 Afghanistan AF    AFG    1997 new_sp_m014      0\n2 Afghanistan AF    AFG    1997 new_sp_m1524    10\n3 Afghanistan AF    AFG    1997 new_sp_m2534     6\n4 Afghanistan AF    AFG    1997 new_sp_m3544     3\n5 Afghanistan AF    AFG    1997 new_sp_m4554     5\n\n\n\nhave to fix one inconsistency in key;\n\n“newrel” should have been “new_rel”\n\n\n\n\n\nCode\nwho2 &lt;- who1 %&gt;% \n  mutate(\n    key = str_replace(key, \"newrel\", \"new_rel\")\n  )"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#separate-out-values-from-key-variable",
    "href": "wrangle-data/tidy-data/tidy-data.html#separate-out-values-from-key-variable",
    "title": "Tidy Data",
    "section": "Separate out values from “key” variable",
    "text": "Separate out values from “key” variable\n\n\nCode\nwho3 &lt;- who2 %&gt;% \n  separate(col = key,\n           into = c(\"new\", \"type\", \"sexage\"),\n           sep = \"_\"\n           )\nwho3\n\n\n# A tibble: 76,046 × 8\n   country     iso2  iso3   year new   type  sexage cases\n   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;\n 1 Afghanistan AF    AFG    1997 new   sp    m014       0\n 2 Afghanistan AF    AFG    1997 new   sp    m1524     10\n 3 Afghanistan AF    AFG    1997 new   sp    m2534      6\n 4 Afghanistan AF    AFG    1997 new   sp    m3544      3\n 5 Afghanistan AF    AFG    1997 new   sp    m4554      5\n 6 Afghanistan AF    AFG    1997 new   sp    m5564      2\n 7 Afghanistan AF    AFG    1997 new   sp    m65        0\n 8 Afghanistan AF    AFG    1997 new   sp    f014       5\n 9 Afghanistan AF    AFG    1997 new   sp    f1524     38\n10 Afghanistan AF    AFG    1997 new   sp    f2534     36\n# ℹ 76,036 more rows"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#drop-variables-and-split-sexage",
    "href": "wrangle-data/tidy-data/tidy-data.html#drop-variables-and-split-sexage",
    "title": "Tidy Data",
    "section": "Drop variables and split sexage",
    "text": "Drop variables and split sexage\n\n\nCode\nwho5 &lt;- who3 %&gt;% \n  select(-new, -iso2, -iso3) %&gt;% \n  separate(col = sexage,\n           into = c(\"sex\", \"age\"),\n           sep = 1\n           )\nwho5\n\n\n# A tibble: 76,046 × 6\n   country      year type  sex   age   cases\n   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt;\n 1 Afghanistan  1997 sp    m     014       0\n 2 Afghanistan  1997 sp    m     1524     10\n 3 Afghanistan  1997 sp    m     2534      6\n 4 Afghanistan  1997 sp    m     3544      3\n 5 Afghanistan  1997 sp    m     4554      5\n 6 Afghanistan  1997 sp    m     5564      2\n 7 Afghanistan  1997 sp    m     65        0\n 8 Afghanistan  1997 sp    f     014       5\n 9 Afghanistan  1997 sp    f     1524     38\n10 Afghanistan  1997 sp    f     2534     36\n# ℹ 76,036 more rows"
  },
  {
    "objectID": "wrangle-data/tidy-data/tidy-data.html#split-age-into-age_start-and-age_end",
    "href": "wrangle-data/tidy-data/tidy-data.html#split-age-into-age_start-and-age_end",
    "title": "Tidy Data",
    "section": "Split age into age_start and age_end",
    "text": "Split age into age_start and age_end\n\n\nCode\nwho6 &lt;- who5 %&gt;% \n  mutate(\n    age = str_pad(age, width = 4, side = \"left\", pad = \"0\"),\n    age = str_replace(age, \"0065\", \"6599\")\n  ) %&gt;% \n  separate(col = age,\n           into = c(\"age_start\", \"age_end\"),\n           sep = 2\n           )\nwho6[1:5,]\n\n\n# A tibble: 5 × 7\n  country      year type  sex   age_start age_end cases\n  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;chr&gt;   &lt;dbl&gt;\n1 Afghanistan  1997 sp    m     00        14          0\n2 Afghanistan  1997 sp    m     15        24         10\n3 Afghanistan  1997 sp    m     25        34          6\n4 Afghanistan  1997 sp    m     35        44          3\n5 Afghanistan  1997 sp    m     45        54          5\n\n\nCode\ndim(who6)\n\n\n[1] 76046     7\n\n\n\n\nMSB105"
  },
  {
    "objectID": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html",
    "href": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html",
    "title": "Innledende R notater forelesning",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors"
  },
  {
    "objectID": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#innledning",
    "href": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#innledning",
    "title": "Innledende R notater forelesning",
    "section": "Innledning",
    "text": "Innledning\nHer er min aller første R kode.\n\nx &lt;- 3 + 3\nx\n\n[1] 6\n\n\n\n# eller begge samtidig\n(x &lt;- 3 + 3)\n\n[1] 6\n\n\n\n(x &lt;- 13)\n\n[1] 13\n\n\nDe fire regneartene\n\n(2/15)^0.25*exp(4) - 200\n\n[1] -167.0077\n\n\n\nx &lt;- 2\n(y &lt;- 5)\n\n[1] 5\n\n\n\nx + y\n\n[1] 7\n\n\n\nx^y\n\n[1] 32\n\n\n\nz &lt;- x^y\n\n\n(z &lt;- x + y)\n\n[1] 7\n\n\n\n(x &lt;- 13)\n\n[1] 13\n\n\n\nz\n\n[1] 7\n\n\n\n# definerer z på ny\n# får nå oppdatert verdi der ny x verdi (13) er brukt\n(z &lt;- x + y)\n\n[1] 18\n\n\n\ntypeof(z)\n\n[1] \"double\"\n\n\n\nx &lt;- 13L\ny &lt;- 5L\n\n\nz &lt;- x + y\n\n\ntypeof(z)\n\n[1] \"integer\"\n\n\n\n#double\ny &lt;- 5\n\n\n# z double\nz &lt;- x + y\n\n\n# selv et enkelt tall er en vektor\nis.vector(z)\n\n[1] TRUE\n\n\n\n# vektor av heltall\n(x &lt;- c(2L, 8L, 9L, 21L:29L, 17L:12L))\n\n [1]  2  8  9 21 22 23 24 25 26 27 28 29 17 16 15 14 13 12\n\n\n\ntypeof(x)\n\n[1] \"integer\"\n\n\n\n# 21 to 29 by 2\n(x &lt;- c(2L, 8L, 9L, seq(from = 21L, to = 29L, by = 2L), 17L:12L))\n\n [1]  2  8  9 21 23 25 27 29 17 16 15 14 13 12\n\n\n\n(x &lt;- c(2L, 8L, 9L, seq(from = 21L, to = 29L, by = 3L), 17L:12L))\n\n [1]  2  8  9 21 24 27 17 16 15 14 13 12\n\n\n\n# from 29L to 21L by -3 L\n(x &lt;- c(2L, 8L, 9L, seq(from = 29L, to = 21L, by = -3L), 17L:12L))\n\n [1]  2  8  9 29 26 23 17 16 15 14 13 12\n\n\n\n# vår x forskjellig fra den i slides\n(y &lt;- 6:(5 + length(x)))\n\n [1]  6  7  8  9 10 11 12 13 14 15 16 17\n\n\n\nz &lt;- x + y\n\n\ny &lt;- c(y, 0.5 * x)\ny\n\n [1]  6.0  7.0  8.0  9.0 10.0 11.0 12.0 13.0 14.0 15.0 16.0 17.0  1.0  4.0  4.5\n[16] 14.5 13.0 11.5  8.5  8.0  7.5  7.0  6.5  6.0\n\n\n\nx + y\n\n [1]  8.0 15.0 17.0 38.0 36.0 34.0 29.0 29.0 29.0 29.0 29.0 29.0  3.0 12.0 13.5\n[16] 43.5 39.0 34.5 25.5 24.0 22.5 21.0 19.5 18.0\n\n\n\nx &lt;- c(x, 10)\n\n\nx + y\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n [1]  8.0 15.0 17.0 38.0 36.0 34.0 29.0 29.0 29.0 29.0 29.0 29.0 11.0  6.0 12.5\n[16] 23.5 42.0 37.5 31.5 25.0 23.5 22.0 20.5 19.0\n\n\nEt enklere eksempel\n\n(x &lt;- 2:4)\n\n[1] 2 3 4\n\n\n\n(y &lt;- 10:12)\n\n[1] 10 11 12\n\n\n\n(x + y)\n\n[1] 12 14 16\n\n\n\n(y &lt;- c(y, y + 0.5 * x))\n\n[1] 10.0 11.0 12.0 11.0 12.5 14.0\n\n\n\n# automatisk replikering av korteste\n# ingen warning\n(x + y)\n\n[1] 12.0 14.0 16.0 13.0 15.5 18.0\n\n\n\ny\n\n[1] 10.0 11.0 12.0 11.0 12.5 14.0\n\n\n\nrep(x, 2)\n\n[1] 2 3 4 2 3 4\n\n\nVi ser at x + y nå er x + y der x er replikert 2 ganger. Merk at R gjøre dette UTEN noen form for asvarsel.\n\n# legger til et tall (4) i fronten på x\n(x &lt;- c(4, x))\n\n[1] 4 2 3 4\n\n\n\n# Nå er lengen av x 4 og lengden av y er 6. Tar vi nå x + y vil vi få en advarsel om at lengden av x ikke går opp i lengden av y\n(x + y)\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n[1] 14.0 13.0 15.0 15.0 16.5 16.0\n\n# men vi får svaret, x + y der den korteste, dvs x, \n# er replikert og man bruker de verdiene som trengs for å matche y"
  },
  {
    "objectID": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#sjekke-likhet",
    "href": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#sjekke-likhet",
    "title": "Innledende R notater forelesning",
    "section": "Sjekke likhet",
    "text": "Sjekke likhet\nMerk!\n\n(1/7) * 7 == 1L\n\n[1] TRUE\n\n\nmen\n\n(1/49) * 49 == 1L\n\n[1] FALSE\n\n\nHvor ofte skjer dette?\n\nx &lt;- 1:10000\ntypeof(x)\n\n[1] \"integer\"\n\n\n\nx_inv &lt;- 1/x\ntable(x_inv * x == 1L)\n\n\nFALSE  TRUE \n 1178  8822 \n\n\nDe første 30 som er FALSE\n\nhead(x[!(x_inv * x == 1L)], n = 30)\n\n [1]  49  98 103 107 161 187 196 197 206 214 237 239 249 253 322 347 374 389 392\n[20] 394 412 417 425 428 443 474 478 479 491 498\n\n\nLøsning: bruk near\n\ntable(dplyr::near(x_inv * x, 1L))\n\n\n TRUE \n10000 \n\n\n\nz &lt;- c(3, 5, 1, 9)\n\n\nz[-1]\n\n[1] 5 1 9\n\n\n\nz[-c(2, 3)]\n\n[1] 3 9\n\n\n\nhead(z, n = -1)\n\n[1] 3 5 1\n\n\n\nhead(z, n = -2)\n\n[1] 3 5\n\n\n\nhead(z, n = -3)\n\n[1] 3\n\n\n\nlength(z)\n\n[1] 4\n\n\n\nz[1:(length(z)-1)]\n\n[1] 3 5 1\n\n\n\n1:(length(z)-1)\n\n[1] 1 2 3\n\n\n\nx &lt;- numeric(10)\n\n\nx &lt;- as.numeric(c(0:10, 1.3))\n\n\ntypeof(x)\n\n[1] \"double\"\n\n\n\nx\n\n [1]  0.0  1.0  2.0  3.0  4.0  5.0  6.0  7.0  8.0  9.0 10.0  1.3\n\n\n\nround(1/3, digits = 2)\n\n[1] 0.33\n\n\n\nset.seed(666)\nx &lt;- rnorm(10)\n\n\nx\n\n [1]  0.75331105  2.01435467 -0.35513446  2.02816784 -2.21687445  0.75839618\n [7] -1.30618526 -0.80251957 -1.79224083 -0.04203245\n\n\n\nx &lt; 0\n\n [1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE\n\n\n\nq &lt;- x &lt; 0\n\n\ntypeof(q)\n\n[1] \"logical\"\n\n\n\nq\n\n [1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE\n\n\n\nsum(q)\n\n[1] 6\n\n\n\ntable(q)\n\nq\nFALSE  TRUE \n    4     6"
  },
  {
    "objectID": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#vektorer-automatisk-endring-av-type",
    "href": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#vektorer-automatisk-endring-av-type",
    "title": "Innledende R notater forelesning",
    "section": "Vektorer, automatisk endring av type",
    "text": "Vektorer, automatisk endring av type\nRegelen er altså at alle element i en vektor må være av samme type. Hva skjer hvis vi legger til et element av en annen type? Vår venn R hjelper oss og skifter automatisk de eksisterende elementene i vektoren til en ny type som er forenlig med det nye elementet.\n\n# Integer vector add floating point number\nx &lt;- c(3L, 7L)\ntypeof(x)\n\n[1] \"integer\"\n\n\n\n# add floating point number to x\nx &lt;- c(x, 3.13)\nx\n\n[1] 3.00 7.00 3.13\n\n\n\n# x now double (floating point numbers)\ntypeof(x)\n\n[1] \"double\"\n\n\n\n# add character to x\nx &lt;- c(\"h\", x)\nx\n\n[1] \"h\"    \"3\"    \"7\"    \"3.13\"\n\n\n\n# x is now a character vector\ntypeof(x)\n\n[1] \"character\"\n\n\nA special case, add integer to logical\n\n# logical\nx &lt;- c(TRUE, TRUE, FALSE)\ntypeof(x)\n\n[1] \"logical\"\n\n\n\n# add integer\nx &lt;- c(x, 9L)\nx\n\n[1] 1 1 0 9\n\n\nTRUE and FALSE now has gotten their integer values, respectively 1 and 0.\nWhat happens if we add a double to a logical vector?\n\nx &lt;- c(TRUE, TRUE, FALSE)\nx &lt;- c(x, 3.13)\nx\n\n[1] 1.00 1.00 0.00 3.13\n\n\n\ntypeof(x)\n\n[1] \"double\"\n\n\nWhat if we add a character?\n\nx &lt;- c(TRUE, TRUE, FALSE)\nx &lt;- c(x, \"b\")\n\n\nx\n\n[1] \"TRUE\"  \"TRUE\"  \"FALSE\" \"b\"    \n\n\nIf we add integer and character we get:\n\nx &lt;- c(TRUE, TRUE, FALSE)\nx &lt;- c(x, 3L, \"b\")\nx\n\n[1] \"TRUE\"  \"TRUE\"  \"FALSE\" \"3\"     \"b\"    \n\n\nBut if we first add integer and then character we end up with:\n\nx &lt;- c(TRUE, TRUE, FALSE)\nx &lt;- c(x, 3L)\nx &lt;- c (x, \"b\")\nx\n\n[1] \"1\" \"1\" \"0\" \"3\" \"b\""
  },
  {
    "objectID": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#dataframes",
    "href": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#dataframes",
    "title": "Innledende R notater forelesning",
    "section": "Dataframes",
    "text": "Dataframes\n\ndf &lt;- data.frame(x = 1:3, y = letters[1:3], z = LETTERS[1:3])\n\n\ndf[,c(1,3)]\n\n  x z\n1 1 A\n2 2 B\n3 3 C\n\n\n\ndf[2,]\n\n  x y z\n2 2 b B\n\n\n\ndf[c(1,3),]\n\n  x y z\n1 1 a A\n3 3 c C\n\n\n\ndf[c(1,3),2]\n\n[1] \"a\" \"c\"\n\n\n\ndf[c(1,3), c(1,3)]\n\n  x z\n1 1 A\n3 3 C\n\n\nKolonner vha. navn\n\ndf[c(1,3), c(\"x\",\"z\")]\n\n  x z\n1 1 A\n3 3 C\n\n\n\ndf[3, 3]\n\n[1] \"C\"\n\n\n\ndf[3, c(\"z\")]\n\n[1] \"C\"\n\n\n\ndf[3, \"z\"]\n\n[1] \"C\"\n\n\n\ndf$z\n\n[1] \"A\" \"B\" \"C\"\n\n\n\ndf$y[3]\n\n[1] \"c\"\n\n\n\ndim(df)\n\n[1] 3 3\n\n\n\ndim(df[1:2, 1:2])\n\n[1] 2 2\n\n\n\ndim(df[1:2, 2])\n\nNULL\n\n\n\nclass(df[1:2, 1:2])\n\n[1] \"data.frame\"\n\n\n\nlength(df[1:2, 2])\n\n[1] 2"
  },
  {
    "objectID": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#tibbles",
    "href": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#tibbles",
    "title": "Innledende R notater forelesning",
    "section": "Tibbles",
    "text": "Tibbles\nSelv en enkelt verdi valgt fra en tibble forblir en tibble med dimensjon 1x1 (ikke noe vektor tull som for klassiske dataframes).\n\ntib &lt;- tibble(df)\ndim(tib[2,3])\n\n[1] 1 1\n\n\n\nclass(tib)\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\n\ntypeof(tib)\n\n[1] \"list\"\n\n\nSiden tibbles er en utvidelse av dataframes og dataframes er en liste av vektorer og lister av samme lengde."
  },
  {
    "objectID": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#matriser",
    "href": "introduction/very-short-intro-r/Innledende-R-notater-forelesning.html#matriser",
    "title": "Innledende R notater forelesning",
    "section": "Matriser",
    "text": "Matriser\n\n# define a matirc in R\nX &lt;- matrix(\n  c(2, 2, -1, 5, 2, 6), \n  nrow = 3, \n  byrow = FALSE\n  )\n\n\nX\n\n     [,1] [,2]\n[1,]    2    5\n[2,]    2    2\n[3,]   -1    6\n\n\n\nY &lt;- matrix(c(-3, 2, 2.5, 6, -4, 4), nrow = 2, byrow = FALSE)\n\n\nY\n\n     [,1] [,2] [,3]\n[1,]   -3  2.5   -4\n[2,]    2  6.0    4\n\n\n\nY %*% X\n\n     [,1] [,2]\n[1,]    3  -34\n[2,]   12   46\n\n\n\nX_t &lt;- t(X)\nX_t\n\n     [,1] [,2] [,3]\n[1,]    2    2   -1\n[2,]    5    2    6\n\n\nMatrise multiplikasjon i R. Definert hvis antall kolonner i første matrise er lik antall rekker i andre matrise. Resultatet vil ha en dimensjon lik antall rekker i første matrise x antall kolonner i andre matrise.\n\nX_t %*% X\n\n     [,1] [,2]\n[1,]    9    8\n[2,]    8   65\n\n\nInverse matrise i R\n\n(XTX_inv &lt;- solve(X_t %*% X))\n\n            [,1]        [,2]\n[1,]  0.12476008 -0.01535509\n[2,] -0.01535509  0.01727447\n\n\nIdentitestsmatrise\n\n(I &lt;- diag(5))\n\n     [,1] [,2] [,3] [,4] [,5]\n[1,]    1    0    0    0    0\n[2,]    0    1    0    0    0\n[3,]    0    0    1    0    0\n[4,]    0    0    0    1    0\n[5,]    0    0    0    0    1\n\n\n\n(X_t %*% X) %*% XTX_inv \n\n             [,1] [,2]\n[1,] 1.000000e+00    0\n[2,] 9.367507e-17    1\n\n\n\nXTX_inv %*% (X_t %*% X)\n\n     [,1]          [,2]\n[1,]    1 -1.908196e-17\n[2,]    0  1.000000e+00\n\n\ngagasgasg"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#calculator",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#calculator",
    "title": "Very Short Intro to R",
    "section": "Calculator",
    "text": "Calculator\n\n\nCode\n2+2\n\n\n[1] 4\n\n\n\n\n\nCode\n(2/15)^0.25*exp(4) - 200\n\n\n[1] -167.0077"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#variables",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#variables",
    "title": "Very Short Intro to R",
    "section": "Variables",
    "text": "Variables\n\n\nCode\n2\n\n\n[1] 2\n\n\n\nMust give it a name (an address to location in memory) to be able to retrieve it.\n\n\nCode\nx &lt;- 2\n\n\n\n\nWe can also write x = 2, but &lt;- is the R way. We assign 2 to x.\n\n\nCode\n# get x\nx\n\n\n[1] 2"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#variables-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#variables-cont.",
    "title": "Very Short Intro to R",
    "section": "Variables cont.",
    "text": "Variables cont.\nTo both assign and print out result use parentheses.\n\n\nCode\n(y &lt;- 5)\n\n\n[1] 5\n\n\n\n\n\nCode\n(z &lt;- x + y)\n\n\n[1] 7"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#variables-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#variables-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Variables cont.",
    "text": "Variables cont.\nWe can change an assignment.\n\n\nCode\n(x &lt;- 13)\n\n\n[1] 13\n\n\n\n\n\nCode\nz\n\n\n[1] 7\n\n\nz retains value\n\n\n\n\nCode\n# update assignment\n(z &lt;- x + y)\n\n\n[1] 18\n\n\nz gets new value"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#integers-floating-point-decimal-numeric",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#integers-floating-point-decimal-numeric",
    "title": "Very Short Intro to R",
    "section": "Integers, floating point (decimal), numeric",
    "text": "Integers, floating point (decimal), numeric\n\n\nCode\ntypeof(z)\n\n\n[1] \"double\"\n\n\n\nIf we want z to be an integer we must do\n\n\nCode\n# Why L? I don't know.\nx &lt;- 13L\ny &lt;- 5L\n(z &lt;- x + y)\n\n\n[1] 18\n\n\n\n\n\n\nCode\ntypeof(z)\n\n\n[1] \"integer\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#vectors",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#vectors",
    "title": "Very Short Intro to R",
    "section": "Vectors",
    "text": "Vectors\nR works on vectors. Even single digits, as above, are vectors of length 1.\n\n\nCode\n(x &lt;- c(2, 8, 9, 21:29, 17:12))\n\n\n [1]  2  8  9 21 22 23 24 25 26 27 28 29 17 16 15 14 13 12\n\n\n\n\n\nCode\n(y &lt;- 6:(5 + length(x)))\n\n\n [1]  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23\n\n\n\n\n\n\nCode\n(z &lt;- x + y)\n\n\n [1]  8 15 17 30 32 34 36 38 40 42 44 46 35 35 35 35 35 35\n\n\n\n\nWhat happend?"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#vectors-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#vectors-cont.",
    "title": "Very Short Intro to R",
    "section": "Vectors cont.",
    "text": "Vectors cont.\n\n\nCode\n(y &lt;- 6:14) \n\n\n[1]  6  7  8  9 10 11 12 13 14\n\n\nWhat will z now be?\n\n\n\nCode\n(z &lt;- x + y)\n\n\n [1]  8 15 17 30 32 34 36 38 40 33 35 37 26 26 26 26 26 26\n\n\n\n\n\n\nCode\n(y &lt;- 6:13) \n\n\n[1]  6  7  8  9 10 11 12 13"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#vectors-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#vectors-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Vectors cont.",
    "text": "Vectors cont.\n\n\nCode\n(z &lt;- x + y)\n\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n [1]  8 15 17 30 32 34 36 38 32 34 36 38 27 27 27 27 19 19\n\n\n\nIf vectors not of same length R will replicate the shortest.\nIf a multiple NO WARNING!\n\nDANGER!\n\nElse the warning above"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#change-type",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#change-type",
    "title": "Very Short Intro to R",
    "section": "Change type",
    "text": "Change type\n\n\nCode\ntypeof(z)\n\n\n[1] \"double\"\n\n\n\n\n\nCode\nz &lt;- as.integer(z)\n\n\n\n\n\n\nCode\ntypeof(z)\n\n\n[1] \"integer\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#change-type-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#change-type-cont.",
    "title": "Very Short Intro to R",
    "section": "Change type cont.",
    "text": "Change type cont.\n\n\nCode\nz &lt;- as.character(z)\n\n\n\n\n\nCode\ntypeof(z)\n\n\n[1] \"character\"\n\n\n\n\n\n\nCode\nz\n\n\n [1] \"8\"  \"15\" \"17\" \"30\" \"32\" \"34\" \"36\" \"38\" \"32\" \"34\" \"36\" \"38\" \"27\" \"27\" \"27\"\n[16] \"27\" \"19\" \"19\"\n\n\n\nNow quotes around number, hence character."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector",
    "text": "Picking values in vector\n\n\nCode\n# first value\nz[1]\n\n\n[1] \"8\"\n\n\n\nWhat will happen? Why?\n\n\n\n\nCode\n# commented out else document will not run\n#z[1] + z[2]"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\nConvert back to integer\n\n\nCode\nz &lt;- as.integer(z)\nz[1] + z[2]\n\n\n[1] 23\n\n\n\n\n\nCode\nz\n\n\n [1]  8 15 17 30 32 34 36 38 32 34 36 38 27 27 27 27 19 19\n\n\n\n\nWhat will the next one return?\n\n\nCode\nz[1] + z[2:4]"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\nQuite flexible, we can for instance do:\n\n\nCode\nx[5] + z[c(1:2, c(9, 3, 1), 13:11)]\n\n\n[1] 30 37 54 39 30 49 60 58\n\n\nNote that the indexes must be put inside c().\n\n\n\nCode\nc(1:2, c(9, 3, 1), 13:11)\n\n\n[1]  1  2  9  3  1 13 12 11"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\nWhat happened previous slide?\n\n\nCode\nx[5]\n\n\n[1] 22\n\n\n\n\n\nCode\nz[c(1:2, c(9, 3, 1), 13:11)]\n\n\n[1]  8 15 32 17  8 27 38 36\n\n\n\n\n\n\nCode\nx[5] + z[c(1:2, c(9, 3, 1), 13:11)]\n\n\n[1] 30 37 54 39 30 49 60 58"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\n\n\nCode\nz &lt;- c(3, 5, 1, 9)\n\n\nWhat will the following return?\n\n\nCode\nz[-1]\n\n\n\nWhat will the following return?\n\n\nCode\nz[-c(2:3)]\n\n\n\n\nCode\nz[-c(3:2)]"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#picking-values-in-vector-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\nHow to drop last value?\n\n\nCode\nhead(z, n = -1)\n\n\n[1] 3 5 1\n\n\n\n\n\nCode\nhead(z, n = -2)\n\n\n[1] 3 5\n\n\n\n\nGet the two values at the end\n\n\nCode\nz[(length(z)-1):length(z)]\n\n\n[1] 1 9\n\n\nor\n\n\n\n\nCode\ntail(z, n = 2)\n\n\n[1] 1 9"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#generating-empty-vectors",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#generating-empty-vectors",
    "title": "Very Short Intro to R",
    "section": "Generating empty vectors",
    "text": "Generating empty vectors\n\n\nCode\nx &lt;- numeric(10)\n\n\n\n\n\nCode\nx\n\n\n [1] 0 0 0 0 0 0 0 0 0 0\n\n\n\n\nCode\ntypeof(x)\n\n\n[1] \"double\"\n\n\n\nImportant technique used in loops.\nFaster to generate an empty vector of needed length than to grow it with one new value many times."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#generating-empty-vectors-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#generating-empty-vectors-1",
    "title": "Very Short Intro to R",
    "section": "Generating empty vectors",
    "text": "Generating empty vectors\nR starts indexing at 1 (not 0).\n\n\nCode\n# empty numeric vector\nx &lt;- numeric(1000000)\nset.seed(666)\n# fill with values\nt1 &lt;- Sys.time()\nfor (i in 1:1000000) {\n  # standard normal\n  x[i] = rnorm(n = 1)\n}\nt2 &lt;- Sys.time()\n(d1 &lt;- t2 - t1)\n\n\nTime difference of 1.284744 secs\n\n\n\n\nCode\nhead(x, n = 10)\n\n\n [1]  0.75331105  2.01435467 -0.35513446  2.02816784 -2.21687445  0.75839618\n [7] -1.30618526 -0.80251957 -1.79224083 -0.04203245"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#generating-vector-incrementally",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#generating-vector-incrementally",
    "title": "Very Short Intro to R",
    "section": "Generating vector incrementally",
    "text": "Generating vector incrementally\nSlower code. Allocate more space in memory for x for each iteration.\n\n\nCode\n# \"slow\" code\nrm(x)\nset.seed(666)\n# fill with values\nt1 &lt;- Sys.time()\nx &lt;- 0\nfor (i in 1:1000000) {\n  # standard normal\n  x[i] = rnorm(n = 1)\n}\nt2 &lt;- Sys.time()\n(d2 &lt;- t2 - t1)\n\n\nTime difference of 1.42941 secs\n\n\n\n\nCode\nhead(x, n = 10)\n\n\n [1]  0.75331105  2.01435467 -0.35513446  2.02816784 -2.21687445  0.75839618\n [7] -1.30618526 -0.80251957 -1.79224083 -0.04203245"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#speed-difference",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#speed-difference",
    "title": "Very Short Intro to R",
    "section": "Speed Difference",
    "text": "Speed Difference\n\n\nCode\n# percent slower\nround((as.double(d2 - d1)/as.double(d1))*100, digits = 2)\n\n\n[1] 11.26"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#the-r-way",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#the-r-way",
    "title": "Very Short Intro to R",
    "section": "The R way",
    "text": "The R way\n\n\nCode\nset.seed(666)\nt1 &lt;- Sys.time()\nx &lt;- rnorm(1000000)\nt2 &lt;- Sys.time()\n(d3 &lt;- t2 - t1)\n\n\nTime difference of 0.02765083 secs\n\n\n\n\nCode\nhead(x, n = 10)\n\n\n [1]  0.75331105  2.01435467 -0.35513446  2.02816784 -2.21687445  0.75839618\n [7] -1.30618526 -0.80251957 -1.79224083 -0.04203245\n\n\n\n\n\nCode\n# percent faster\nround((as.double(d2- d3)/as.double(d3)) * 100, digits = 2)\n\n\n[1] 5069.5"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#other-types-of-vectors-logical",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#other-types-of-vectors-logical",
    "title": "Very Short Intro to R",
    "section": "Other types of vectors; logical",
    "text": "Other types of vectors; logical\n\n\nCode\nx &lt;- x[1:10]\nq &lt;- x &lt; 0\n\n\n\n\n\nCode\nq\n\n\n [1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE\n\n\n\nq is a boolen or logical vector\n\nTRUE for the values of x that are less than 0, and false for the ones that are not."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#other-types-of-vectors-named",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#other-types-of-vectors-named",
    "title": "Very Short Intro to R",
    "section": "Other types of vectors; named",
    "text": "Other types of vectors; named\n\n\nCode\ntemp &lt;- c(11, 17, 22, 15, 15, 25)\nweather &lt;- c(\"Rainy\", \"Sunny\", \"Sunny\", \"Fair\", \"Fair\", \"Sunny\") \n\n\n\n\n\nCode\nnames(temp) &lt;- weather\n\n\n\n\n\n\nCode\ntemp\n\n\nRainy Sunny Sunny  Fair  Fair Sunny \n   11    17    22    15    15    25 \n\n\n\n\nCode\ntemp[names(temp) == \"Sunny\"]\n\n\nSunny Sunny Sunny \n   17    22    25"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#other-types-of-vectors-factor",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#other-types-of-vectors-factor",
    "title": "Very Short Intro to R",
    "section": "Other types of vectors; factor",
    "text": "Other types of vectors; factor\n\n\nCode\n# some codeing of sex, 1 female, 2 male\nsex &lt;- c(1, 2, 1, 2, 2, 1, 2)\n\n\n\n\n\nCode\n# new labels, \"F\" for 1 and \"M\" for 2\nsex_f &lt;- factor(sex, labels = c(\"F\", \"M\"))\n\n\n\n\n\n\nCode\nsex_f\n\n\n[1] F M F M M F M\nLevels: F M\n\n\n\n\nCode\ntable(sex_f)\n\n\nsex_f\nF M \n3 4"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#rules-for-vectors",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#rules-for-vectors",
    "title": "Very Short Intro to R",
    "section": "Rules for vectors",
    "text": "Rules for vectors\n\nEvery element of a vector must be of the same type.\nIf not, elements will be converted\n\n\n\n\nCode\n(x &lt;- 1:3)\n\n\n[1] 1 2 3\n\n\n\n\nCode\ntypeof(x)\n\n\n[1] \"integer\"\n\n\n\n\nCode\n# insert \"b\" second place\nx[2] &lt;- \"b\"\n\n\n\n\nCode\nx\n\n\n[1] \"1\" \"b\" \"3\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#rules-for-vectors-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#rules-for-vectors-cont.",
    "title": "Very Short Intro to R",
    "section": "Rules for vectors cont.",
    "text": "Rules for vectors cont.\n\n\nCode\ntypeof(x)\n\n\n[1] \"character\"\n\n\n\n\nCode\n# will fail\n# x &lt;- as.integer(x)\n\n\n\n\nCode\nx &lt;- 1:3\n\n\n\n\nCode\nx[3] &lt;- 5.0\n\n\n\n\nCode\nx\n\n\n[1] 1 2 5\n\n\n\n\nCode\ntypeof(x)\n\n\n[1] \"double\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#lists",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#lists",
    "title": "Very Short Intro to R",
    "section": "Lists",
    "text": "Lists\n\nMost flexible datatype in R, but also more complex and perhaps more difficult to work with\n\n\n\n\nCode\nl &lt;- list(x = 1:3, y = c(\"A\", letters[4:13]), z = seq(from = 1.3, to = 2.7, by = 0.2))\n\n\n\n\nCode\nl\n\n\n$x\n[1] 1 2 3\n\n$y\n [1] \"A\" \"d\" \"e\" \"f\" \"g\" \"h\" \"i\" \"j\" \"k\" \"l\" \"m\"\n\n$z\n[1] 1.3 1.5 1.7 1.9 2.1 2.3 2.5 2.7\n\n\n\n\nCode\ntypeof(l)\n\n\n[1] \"list\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#lists-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#lists-cont.",
    "title": "Very Short Intro to R",
    "section": "Lists cont.",
    "text": "Lists cont.\n\nFind the name of list elements\n\n\n\n\nCode\n#make copy of l\nll &lt;- l\nnames(ll)\n\n\n[1] \"x\" \"y\" \"z\"\n\n\n\nchange name of first element in the list ll\n\n\n\n\n\nCode\nnames(ll)[1] &lt;- \"New Name\"\n\n\n\n\nCode\nnames(ll)\n\n\n[1] \"New Name\" \"y\"        \"z\"       \n\n\n\n\nCode\nrm(ll)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#lists-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#lists-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Lists cont.",
    "text": "Lists cont.\n\n\nCode\ntypeof(l$x)\n\n\n[1] \"integer\"\n\n\n\n\nCode\nis.vector(l$x)\n\n\n[1] TRUE\n\n\n\nl$x, element x in list l\n\n\n\n\nCode\ntypeof(l$y)\n\n\n[1] \"character\"\n\n\n\n\n\n\nCode\ntypeof(l$z)\n\n\n[1] \"double\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#list-in-list",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#list-in-list",
    "title": "Very Short Intro to R",
    "section": "List in list",
    "text": "List in list\n\nWe can have lists inside lists\n\n\n\n\nCode\nl &lt;- list(\n  x = 1:3, \n  y = c(\"A\", letters[4:13]), \n  z = list(\n    za = seq(from = 1.3, to = 2.7, by = 0.2), \n    zb = c(TRUE, FALSE), \n    zc = 5:9,\n    zd = list(1, \"F\", 3.2)\n    )\n  )"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#list-in-list-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#list-in-list-cont.",
    "title": "Very Short Intro to R",
    "section": "List in list cont.",
    "text": "List in list cont.\n\n\nCode\nl\n\n\n$x\n[1] 1 2 3\n\n$y\n [1] \"A\" \"d\" \"e\" \"f\" \"g\" \"h\" \"i\" \"j\" \"k\" \"l\" \"m\"\n\n$z\n$z$za\n[1] 1.3 1.5 1.7 1.9 2.1 2.3 2.5 2.7\n\n$z$zb\n[1]  TRUE FALSE\n\n$z$zc\n[1] 5 6 7 8 9\n\n$z$zd\n$z$zd[[1]]\n[1] 1\n\n$z$zd[[2]]\n[1] \"F\"\n\n$z$zd[[3]]\n[1] 3.2"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#list-in-list-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#list-in-list-cont.-1",
    "title": "Very Short Intro to R",
    "section": "List in list cont.",
    "text": "List in list cont.\n\n\nCode\nl$z$zb\n\n\n[1]  TRUE FALSE"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#dataframes",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#dataframes",
    "title": "Very Short Intro to R",
    "section": "Dataframes",
    "text": "Dataframes\n\nThe most used datastructure in R\nA dataframe is a list of vectors and/or lists of the same length.\n\n\n\n\nCode\ndf &lt;- data.frame(x = 1:3, y = letters[1:3], z = LETTERS[1:3])\n\n\n\n\nCode\ndf\n\n\n\n\n\nx\ny\nz\n\n\n1\na\nA\n\n\n2\nb\nB\n\n\n3\nc\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#the-following-will-not-work",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#the-following-will-not-work",
    "title": "Very Short Intro to R",
    "section": "The following will not work:",
    "text": "The following will not work:\n\nx and y 3 elements, z 4 elements. x, y and z can not be put into a dataframe."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#this-will-work",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#this-will-work",
    "title": "Very Short Intro to R",
    "section": "This will work",
    "text": "This will work\n\n\nCode\ndf1 &lt;- data.frame(x = 1:3, y = letters[1:3], \n                 z = df)\n\n\n\n\nCode\nstr(df1)\n\n\n'data.frame':   3 obs. of  5 variables:\n $ x  : int  1 2 3\n $ y  : chr  \"a\" \"b\" \"c\"\n $ z.x: int  1 2 3\n $ z.y: chr  \"a\" \"b\" \"c\"\n $ z.z: chr  \"A\" \"B\" \"C\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#this-will-work-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#this-will-work-cont.",
    "title": "Very Short Intro to R",
    "section": "This will work cont.",
    "text": "This will work cont.\n\nRemember that a dataframe is a list of vectors and lists, hence we can have whole dataframes in a column (variable) in a dataframe.\nMany modern R packages uses this trick including tidyverse and the sf* packages\nThey do it a bit more advanced and include a different dataframe in each row"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#adding-a-variable-to-a-dataframe",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#adding-a-variable-to-a-dataframe",
    "title": "Very Short Intro to R",
    "section": "Adding a variable to a dataframe",
    "text": "Adding a variable to a dataframe\n\n\nCode\ndf\n\n\n\n\n\nx\ny\nz\n\n\n1\na\nA\n\n\n2\nb\nB\n\n\n3\nc\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#adding-a-variable-to-a-dataframe-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#adding-a-variable-to-a-dataframe-1",
    "title": "Very Short Intro to R",
    "section": "Adding a variable to a dataframe",
    "text": "Adding a variable to a dataframe\n\n\nCode\ndf$q &lt;- c(2.1, 0.4, 0.9)\n\n\n\n\n\nCode\ndf\n\n\n\n\n\nx\ny\nz\nq\n\n\n1\na\nA\n2.1\n\n\n2\nb\nB\n0.4\n\n\n3\nc\nC\n0.9"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe",
    "text": "Selecting Values from a dataframe\nSelecting column 2\n\n\nCode\n# all rows, col 2\ndf[,2]\n\n\n[1] \"a\" \"b\" \"c\"\n\n\nSelecting columns 1 and 3\n\n\nCode\n# col 1 and 3\ndf[, c(1,3)]\n\n\n\n\n\nx\nz\n\n\n1\nA\n\n\n2\nB\n\n\n3\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\nSelecting column 2 by name\n\n\nCode\n# col 2 by name\ndf[, \"y\"]\n\n\n[1] \"a\" \"b\" \"c\"\n\n\nSelecting columns 1 and 3 by name\n\n\nCode\ndf[, c(\"x\", \"z\")]\n\n\n\n\n\nx\nz\n\n\n1\nA\n\n\n2\nB\n\n\n3\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\nSelecting row 1\n\n\nCode\n# select row 1\ndf[1,]\n\n\n\n\n\nx\ny\nz\nq\n\n\n1\na\nA\n2.1"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\n\n\nCode\n# selecting row 1 and 3\ndf[c(1, 3),]\n\n\n\n\n\nx\ny\nz\nq\n\n\n1\na\nA\n2.1\n\n\n3\nc\nC\n0.9"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\nSelecting row 1 and 3 from column 2 and 3\n\n\nCode\ndf[c(1, 3), 2:3]\n\n\n\n\n\ny\nz\n\n\na\nA\n\n\nc\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#selecting-values-from-a-dataframe-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\nSelecting value from row 2 and column 3\n\n\nCode\ndf[2, 3]\n\n\n[1] \"B\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#be-aware-of-the-following",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#be-aware-of-the-following",
    "title": "Very Short Intro to R",
    "section": "Be aware of the following",
    "text": "Be aware of the following\nWhat type?\n\n\nCode\ntypeof(df[2, 3])\n\n\n[1] \"character\"\n\n\n\n\nCode\nis.vector(df[2, 3])\n\n\n[1] TRUE\n\n\n\n\nCode\nis.data.frame(df[2, 3])\n\n\n[1] FALSE\n\n\n\n\nCode\ntypeof(df[1:2, 3])\n\n\n[1] \"character\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#be-aware-of-the-following-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#be-aware-of-the-following-cont.",
    "title": "Very Short Intro to R",
    "section": "Be aware of the following cont.",
    "text": "Be aware of the following cont.\n\n\nCode\nis.vector(df[1:2, 3])\n\n\n[1] TRUE\n\n\n\n\nCode\nis.data.frame(df[1:2, 3])\n\n\n[1] FALSE\n\n\n\n\nCode\nis.data.frame(df[2, 2:3])\n\n\n[1] TRUE"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#be-aware-of-the-following-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#be-aware-of-the-following-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Be aware of the following cont.",
    "text": "Be aware of the following cont.\n\n\nCode\ntypeof(df[c(1, 3), 2:3])\n\n\n[1] \"list\"\n\n\n\n\nCode\nis.vector(df[c(1, 3), 2:3])\n\n\n[1] FALSE\n\n\n\n\nCode\nis.data.frame(df[c(1, 3), 2:3])\n\n\n[1] TRUE"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#be-aware-of-the-following-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#be-aware-of-the-following-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Be aware of the following cont.",
    "text": "Be aware of the following cont.\n\nIf we select a single item from a dataframe we end up with a vector with one element\nIf we select multiple values from a row in a dataframe we end up with a dataframe with multiple arguments\nIf we select multiple values from a column in a dataframe we end up a vector\nIf we select values from multiple rows and columns we end up with a dataframe"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#dataframe-versus-tibble",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#dataframe-versus-tibble",
    "title": "Very Short Intro to R",
    "section": "Dataframe versus Tibble",
    "text": "Dataframe versus Tibble\nTibble part of tidyverse to be introduced later on, but important point\nA Tibble is a modernised version of a dataframe\n\n\nCode\ntib &lt;- as_tibble(df)\n\n\n\n\nCode\ntib\n\n\n\n\n\nx\ny\nz\nq\n\n\n1\na\nA\n2.1\n\n\n2\nb\nB\n0.4\n\n\n3\nc\nC\n0.9"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#dataframe-versus-tibble-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#dataframe-versus-tibble-cont.",
    "title": "Very Short Intro to R",
    "section": "Dataframe versus Tibble cont.",
    "text": "Dataframe versus Tibble cont.\n\n\nCode\nis.vector(tib[2,3])\n\n\n[1] FALSE\n\n\n\n\n\nCode\n# tibble just an updated dataframe\nis.data.frame(tib[2,3])\n\n\n[1] TRUE\n\n\n\n\nNote! Selecting from a tibble ALWAYS return a dataframe, selecting from a dataframe will return a dataframe OR a vector."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices",
    "title": "Very Short Intro to R",
    "section": "Matrices",
    "text": "Matrices\n\nRectangular collection of numbers.\nImportant in econometrics (appendix D in Wooldridge)\nUsed for solving systems of equations\nSpecial versions of the arithmetic operations for matrices"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\n\nCode\n# define a matirc in R\nX &lt;- matrix(c(2, 2, -1, 5, 2, 6), nrow = 3, byrow = FALSE)\n\n\n\n\n\nCode\nX\n\n\n     [,1] [,2]\n[1,]    2    5\n[2,]    2    2\n[3,]   -1    6\n\n\n\n\n\n\nCode\nmatrix(c(2, 2, -1, 5, 2, 6), nrow = 3, byrow = TRUE)\n\n\n     [,1] [,2]\n[1,]    2    2\n[2,]   -1    5\n[3,]    2    6"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\n\nCode\n# transpose\nt(X)\n\n\n     [,1] [,2] [,3]\n[1,]    2    2   -1\n[2,]    5    2    6\n\n\n\n\n\nCode\nY &lt;- matrix(c(-3, 2, 2.5, 6, -4, 4), nrow = 2, byrow = FALSE)\n\n\n\n\n\n\nCode\nY\n\n\n     [,1] [,2] [,3]\n[1,]   -3  2.5   -4\n[2,]    2  6.0    4"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\nDimension of a matrix is number of rows (m), number of columns (n)\nThe rule for matrix multiplication (X %*% Y) is that it is only defined when \\(n_x = m_y\\) and the result will be a matrix with dimension \\(m_x, n_y\\)."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\n\nCode\ndim(X)\n\n\n[1] 3 2\n\n\n\n\nCode\ndim(Y)\n\n\n[1] 2 3\n\n\n\n\nCode\n# X %*% Y will be defined since (n_X = 2 = m_Y = 2) and the result will have dimension 3x3\nX %*% Y\n\n\n     [,1] [,2] [,3]\n[1,]    4 35.0   12\n[2,]   -2 17.0    0\n[3,]   15 33.5   28"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\\(X^TX\\) is important in econometrics\n\n\nCode\n# X, two variables with 3 obs. for each variable\nt(X) %*% X\n\n\n     [,1] [,2]\n[1,]    9    8\n[2,]    8   65\n\n\nFinding the inverse of a square matrix\n\n\nCode\n(XTX_inv &lt;- solve(t(X) %*% X))\n\n\n            [,1]        [,2]\n[1,]  0.12476008 -0.01535509\n[2,] -0.01535509  0.01727447"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-5",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-5",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\nMultiplying a matrix with its inverse will give the identity matrix I\n\n\nCode\n(t(X) %*% X) %*% XTX_inv\n\n\n             [,1] [,2]\n[1,] 1.000000e+00    0\n[2,] 9.367507e-17    1\n\n\nGenerate identity matrix I\n\n\nCode\n(I &lt;- diag(2))\n\n\n     [,1] [,2]\n[1,]    1    0\n[2,]    0    1"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-6",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-6",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\nMultiplying a square matrix with I will return the matrix\n\n\nCode\n(t(X) %*% X) %*% I\n\n\n     [,1] [,2]\n[1,]    9    8\n[2,]    8   65\n\n\n\n\nCode\nI %*% (t(X) %*% X)\n\n\n     [,1] [,2]\n[1,]    9    8\n[2,]    8   65"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-7",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#matrices-cont.-7",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\nWe select elements from matrices like we do for dataframes\n\n\nCode\nX\n\n\n     [,1] [,2]\n[1,]    2    5\n[2,]    2    2\n[3,]   -1    6\n\n\n\n\nCode\nX[3, 1:2]\n\n\n[1] -1  6"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#subsets",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#subsets",
    "title": "Very Short Intro to R",
    "section": "Subsets",
    "text": "Subsets\n\n\nCode\ndim(cars)\n\n\n[1] 50  2\n\n\n\n\nCode\nhead(cars, n = 4)\n\n\n\n\n\nspeed\ndist\n\n\n4\n2\n\n\n4\n10\n\n\n7\n4\n\n\n7\n22"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#subsets-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#subsets-cont.",
    "title": "Very Short Intro to R",
    "section": "Subsets cont.",
    "text": "Subsets cont.\n\n\nCode\nsummary(cars)\n\n\n     speed           dist       \n Min.   : 4.0   Min.   :  2.00  \n 1st Qu.:12.0   1st Qu.: 26.00  \n Median :15.0   Median : 36.00  \n Mean   :15.4   Mean   : 42.98  \n 3rd Qu.:19.0   3rd Qu.: 56.00  \n Max.   :25.0   Max.   :120.00"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#subsets-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#subsets-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Subsets cont.",
    "text": "Subsets cont.\n\n\nCode\n(cars_sub &lt;- subset(cars, subset = cars$speed &gt; 6 & cars$speed &lt; 11))\n\n\n\n\n\nspeed\ndist\n\n\n7\n4\n\n\n7\n22\n\n\n8\n16\n\n\n9\n10\n\n\n10\n18\n\n\n10\n26\n\n\n10\n34"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#subsets-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#subsets-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Subsets cont.",
    "text": "Subsets cont.\n\nsubset is nice to use with the lm() (linear model, default command to run regressions in R) command to run regressions on a subset of the data"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#saveload-data",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#saveload-data",
    "title": "Very Short Intro to R",
    "section": "Save/load data",
    "text": "Save/load data\n\n\nCode\nsave(cars_sub, file = \"cars_sub.Rdata\")\n\n\nDelete cars_sub\n\n\nCode\nrm(cars_sub)\n\n\n\n\nCode\n# should have done some house keeping ;-)\n# no cars_sub\nls()\n\n\n [1] \"d1\"      \"d2\"      \"d3\"      \"df\"      \"df1\"     \"i\"       \"I\"      \n [8] \"l\"       \"q\"       \"sex\"     \"sex_f\"   \"t1\"      \"t2\"      \"temp\"   \n[15] \"tib\"     \"weather\" \"x\"       \"X\"       \"XTX_inv\" \"y\"       \"Y\"      \n[22] \"z\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#saveload-data-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#saveload-data-1",
    "title": "Very Short Intro to R",
    "section": "Save/load data",
    "text": "Save/load data\n\n\nCode\n# Note! we don't have to do cars_sub &lt;- load(…)\nload(file = \"cars_sub.Rdata\")\n\n\n\n\nCode\n# it's back\ndim(cars_sub)\n\n\n[1] 7 2"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#help",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#help",
    "title": "Very Short Intro to R",
    "section": "Help",
    "text": "Help\n\nR has built in help\nFor packages to be accepted at CRAN they have to be well documented\ntidyverse has very nice documentation\nhelp for a command in Console: help(dim) or ?dim\nAlso search in the Help tab\nIf we click on the package name in the Package tab we will get documentation for all the commands in the package\nExercise: Find help for dim {base} via the Package tab"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-regression-analysis-in-r",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-regression-analysis-in-r",
    "title": "Very Short Intro to R",
    "section": "Very simple regression analysis in R",
    "text": "Very simple regression analysis in R\n\n\nCode\nlm1 &lt;- lm(formula = dist ~ speed, data = cars)\n\n\n\n\nCode\nsummary(lm1)\n\n\n\nCall:\nlm(formula = dist ~ speed, data = cars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-29.069  -9.525  -2.272   9.215  43.201 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) -17.5791     6.7584  -2.601   0.0123 *  \nspeed         3.9324     0.4155   9.464 1.49e-12 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 15.38 on 48 degrees of freedom\nMultiple R-squared:  0.6511,    Adjusted R-squared:  0.6438 \nF-statistic: 89.57 on 1 and 48 DF,  p-value: 1.49e-12"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-regression-analysis-in-r-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-regression-analysis-in-r-1",
    "title": "Very Short Intro to R",
    "section": "Very simple regression analysis in R",
    "text": "Very simple regression analysis in R\nWithout intercept term\n\n\nCode\n# Note! -1 at end of formula\nlm2 &lt;- lm(formula = dist ~ speed -1, data = cars)\n\n\n\n\nCode\nsummary(lm2)\n\n\n\nCall:\nlm(formula = dist ~ speed - 1, data = cars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-26.183 -12.637  -5.455   4.590  50.181 \n\nCoefficients:\n      Estimate Std. Error t value Pr(&gt;|t|)    \nspeed   2.9091     0.1414   20.58   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 16.26 on 49 degrees of freedom\nMultiple R-squared:  0.8963,    Adjusted R-squared:  0.8942 \nF-statistic: 423.5 on 1 and 49 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-regression-analysis-in-r-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-regression-analysis-in-r-2",
    "title": "Very Short Intro to R",
    "section": "Very simple regression analysis in R",
    "text": "Very simple regression analysis in R\n\n\nCode\n# only on a subset of data\nlm3 &lt;- lm(formula = dist ~ speed, \n          data = cars, \n          subset = cars$speed &gt; 6 & cars$speed &lt; 11\n          )\n\n\n\n\nCode\nsummary(lm3)\n\n\n\nCall:\nlm(formula = dist ~ speed, data = cars, subset = cars$speed &gt; \n    6 & cars$speed &lt; 11)\n\nResiduals:\n     3      4      5      6      7      8      9 \n-7.500 10.500  0.375 -9.750 -5.875  2.125 10.125 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)\n(Intercept)  -17.375     23.397  -0.743    0.491\nspeed          4.125      2.656   1.553    0.181\n\nResidual standard error: 8.981 on 5 degrees of freedom\nMultiple R-squared:  0.3253,    Adjusted R-squared:  0.1904 \nF-statistic: 2.411 on 1 and 5 DF,  p-value: 0.1812"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#reporting-regression-results",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#reporting-regression-results",
    "title": "Very Short Intro to R",
    "section": "Reporting Regression Results",
    "text": "Reporting Regression Results\n\n\nCode\nhuxreg(\n        lm1, lm2, lm3,\n        error_format = \"({statistic})\", \n        note         = \"{stars}. T statistics in parentheses.\"\n      )"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#reporting-regression-results-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#reporting-regression-results-cont.",
    "title": "Very Short Intro to R",
    "section": "Reporting Regression Results cont.",
    "text": "Reporting Regression Results cont.\n\n\n\n\n\n\n(1)\n(2)\n(3)\n\n\n(Intercept)\n-17.579 *  \n        \n-17.375 \n\n\n\n(-2.601)   \n        \n(-0.743)\n\n\nspeed\n3.932 ***\n2.909 ***\n4.125 \n\n\n\n(9.464)   \n(20.578)   \n(1.553)\n\n\nN\n50        \n50        \n7     \n\n\nR2\n0.651    \n0.896    \n0.325 \n\n\nlogLik\n-206.578    \n-209.875    \n-24.120 \n\n\nAIC\n419.157    \n423.750    \n54.241 \n\n\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05. T statistics in parentheses."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting",
    "title": "Very Short Intro to R",
    "section": "Classic plotting",
    "text": "Classic plotting\nWe will mainly use the ggplot2 package in tidyverse for plotting\nHere is a tiny bit about the classic R plot() function\n\n\nCode\nplot(cars)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\n\n\nCode\nplot(x = cars$dist, y = cars$speed)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\nClassic plot with regression line\n\n\nCode\nplot(cars)\nabline(lm(formula = dist ~ speed, data = cars))"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\n\n\nCode\n# multiple regression\n# LifeCycleSavings from package Datasets\nmreg1 &lt;- lm(\n  formula =sr ~ pop15 + pop75 + dpi + ddpi, \n  data = LifeCycleSavings\n  )\nsummary(mreg1)\n\n\n\nCall:\nlm(formula = sr ~ pop15 + pop75 + dpi + ddpi, data = LifeCycleSavings)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-8.2422 -2.6857 -0.2488  2.4280  9.7509 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 28.5660865  7.3545161   3.884 0.000334 ***\npop15       -0.4611931  0.1446422  -3.189 0.002603 ** \npop75       -1.6914977  1.0835989  -1.561 0.125530    \ndpi         -0.0003369  0.0009311  -0.362 0.719173    \nddpi         0.4096949  0.1961971   2.088 0.042471 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.803 on 45 degrees of freedom\nMultiple R-squared:  0.3385,    Adjusted R-squared:  0.2797 \nF-statistic: 5.756 on 4 and 45 DF,  p-value: 0.0007904"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\nNicer output than summary()\n\n\nCode\nhuxreg(\n        mreg1,\n        error_format = \"({statistic})\", \n        note         = \"{stars}. T statistics in parentheses.\"\n      )"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#classic-plotting-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\n\n\n\n\n\n\n(1)\n\n\n(Intercept)\n28.566 ***\n\n\n\n(3.884)   \n\n\npop15\n-0.461 ** \n\n\n\n(-3.189)   \n\n\npop75\n-1.691    \n\n\n\n(-1.561)   \n\n\ndpi\n-0.000    \n\n\n\n(-0.362)   \n\n\nddpi\n0.410 *  \n\n\n\n(2.088)   \n\n\nN\n50        \n\n\nR2\n0.338    \n\n\nlogLik\n-135.098    \n\n\nAIC\n282.196    \n\n\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05. T statistics in parentheses."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-function",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-function",
    "title": "Very Short Intro to R",
    "section": "Very Simple Function",
    "text": "Very Simple Function\nIt’s very easy to write functions in R and we should start to practice at once.\n\n\nCode\nadd_numbers &lt;- function(x, y) {\n  x + y\n}\n\n\n\n\nCode\nadd_numbers(2,2)\n\n\n[1] 4\n\n\n\n\nCode\n# will fail\n#add_numbers(2)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-function-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-function-cont.",
    "title": "Very Short Intro to R",
    "section": "Very simple function cont.",
    "text": "Very simple function cont.\nImproved version\n\n\nCode\n# default value 0\nadd_numbers &lt;- function(x=0, y=0) {\n  x + y\n}\n\n\n\n\nCode\nadd_numbers()\n\n\n[1] 0\n\n\n\n\nCode\nadd_numbers(5, 10)\n\n\n[1] 15\n\n\n\n\nCode\nadd_numbers(3)\n\n\n[1] 3"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-function-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-function-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Very simple function cont.",
    "text": "Very simple function cont.\nDivide two numbers\n\n\nCode\ndivide_numbers &lt;- function(x=0, y=1) {\n  x/y\n}\n\n\n\n\nCode\ndivide_numbers()\n\n\n[1] 0\n\n\n\n\nCode\ndivide_numbers(5)\n\n\n[1] 5\n\n\n\n\nCode\n# x = 0, y = 5\ndivide_numbers(,5)\n\n\n[1] 0"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-function-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#very-simple-function-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Very simple function cont.",
    "text": "Very simple function cont.\n\n\nCode\n# x is 5, y = 2\ndivide_numbers(5,2)\n\n\n[1] 2.5\n\n\n\n\nCode\n# named arguments, sequence does not matter\ndivide_numbers(y = 2, x = 5)\n\n\n[1] 2.5"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#simple-function-with-for-next-loop.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#simple-function-with-for-next-loop.",
    "title": "Very Short Intro to R",
    "section": "Simple function with for next loop.",
    "text": "Simple function with for next loop.\n\n\nCode\nstart_stupid_fun &lt;- function(x1 = 0, n = 10) {\n# initialise x\nx = vector(mode = \"numeric\", length = n)\nx[1] = x1\n\nfor (i in seq_along(x[-1])) {\n  x[i + 1] = x[i] + 1\n}\nprint(x)\n}\n\n\n\n\nCode\nstart_stupid_fun()\n\n\n [1] 0 1 2 3 4 5 6 7 8 9\n\n\n\n\nCode\nstart_stupid_fun(x1 = 5, n = 15)\n\n\n [1]  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#extensions",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#extensions",
    "title": "Very Short Intro to R",
    "section": "Extensions",
    "text": "Extensions\n\n\nCode\n# probably from jørn\nstupid_fun &lt;- function(\n    x1 = 0, \n    n = 10, \n    d = 1, # how much to increase number\n    w = 80, # text width in chacters\n    width_fraction = 1, # how wide should the output be\n    print_to_console = TRUE # where to send the output\n    ) {\n  # we stop if we are to produce zero numbers\n  # stopifnot(n &gt; 0) an alternative but throws an error\n  # and stop compilation of the document/presentation\n  if(!n &gt; 0) return(\"n needs to be positive.\")\n  # max number of digits in numbers\n  dig =  nchar(n*d)\n  # width in number of charcter for output\n  w_out = w * width_fraction\n  # allocate a numeric vector with room for n numbers\n  x = vector(mode = \"numeric\", length = n)\n  # First number in output vector is x1\n  x[1] = x1\n  # we loop through x vector but drop first element\n  for (i in seq_along(x[-1])) {\n    # i starts at 1, so first is x1 + d\n    x[i + 1] = x[i] + d\n    }\n\n# nice trick to control print to console\nif (print_to_console) {\nprint(stringr::str_pad(x, width = dig, side = \"left\", pad = \" \"),\n      width = w_out)\n  } else {\n    tibble(x)\n  }\n}"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#testing",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#testing",
    "title": "Very Short Intro to R",
    "section": "Testing",
    "text": "Testing\n\n\nCode\n# Generate 33 number starting with -13 and increasing by 5, default width\nstupid_fun(x1 = -13, n = 33, d = 5, print_to_console = TRUE)\n\n\n [1] \"-13\" \" -8\" \" -3\" \"  2\" \"  7\" \" 12\" \" 17\" \" 22\" \" 27\" \" 32\" \" 37\" \" 42\"\n[13] \" 47\" \" 52\" \" 57\" \" 62\" \" 67\" \" 72\" \" 77\" \" 82\" \" 87\" \" 92\" \" 97\" \"102\"\n[25] \"107\" \"112\" \"117\" \"122\" \"127\" \"132\" \"137\" \"142\" \"147\"\n\n\n\n\nCode\n# 13 numbers\nstupid_fun(x1 = -7, n = 13, width_fraction = 0.3, d = 5, \n           print_to_console = TRUE)\n\n\n [1] \"-7\" \"-2\" \" 3\" \" 8\"\n [5] \"13\" \"18\" \"23\" \"28\"\n [9] \"33\" \"38\" \"43\" \"48\"\n[13] \"53\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#print-to-console-false",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#print-to-console-false",
    "title": "Very Short Intro to R",
    "section": "Print to console FALSE",
    "text": "Print to console FALSE\n\n\nCode\nstupid_fun(x1 = -21, n = 5, width_fraction = 0.6, d = 5, \n           print_to_console = FALSE)\n\n\n\n\n\nx\n\n\n-21\n\n\n-16\n\n\n-11\n\n\n-6\n\n\n-1"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#zero-numbers",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#zero-numbers",
    "title": "Very Short Intro to R",
    "section": "Zero numbers",
    "text": "Zero numbers\n\n\nCode\n# result for n=0, no error so the presentation compiles\nstupid_fun(x1 = -21, n = 0, width_fraction = 0.6, \n           d = 5, print_to_console=TRUE)\n\n\n[1] \"n needs to be positive.\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail",
    "text": "Head_and_tail\nWe have the functions head() and tail() to inspect respectively the start and end of a dataframe or similar object. Sometimes we might want to do bought with one command.\nFirst attempt\n\n\nCode\nhead_and_tail &lt;- function(x) {\n  c(head(x), tail(x))\n}"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\n\n\nCode\nhead_and_tail(mtcars[,1:6])\n\n\n$mpg\n[1] 21.0 21.0 22.8 21.4 18.7 18.1\n\n$cyl\n[1] 6 6 4 6 8 6\n\n$disp\n[1] 160 160 108 258 360 225\n\n$hp\n[1] 110 110  93 110 175 105\n\n$drat\n[1] 3.90 3.90 3.85 3.08 3.15 2.76\n\n$wt\n[1] 2.620 2.875 2.320 3.215 3.440 3.460\n\n$mpg\n[1] 26.0 30.4 15.8 19.7 15.0 21.4\n\n$cyl\n[1] 4 4 8 6 8 4\n\n$disp\n[1] 120.3  95.1 351.0 145.0 301.0 121.0\n\n$hp\n[1]  91 113 264 175 335 109\n\n$drat\n[1] 4.43 3.77 4.22 3.62 3.54 4.11\n\n$wt\n[1] 2.140 1.513 3.170 2.770 3.570 2.780"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\nSecond attempt\n\n\nCode\nhead_and_tail &lt;- function(x, n=3L) {\nres = rbind(rep('Head',length(names(x))),\n        head(x, n = n),\n        rep('*-*-*',length(names(x))), \n        rep('Tail',length(names(x))), \n        tail(x, n = n)\n        )\nas_tibble(res)\n}"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\nTesting\n\n\nCode\nhead_and_tail(mtcars[,1:6], n = 3)\n\n\n\n\n\nmpg\ncyl\ndisp\nhp\ndrat\nwt\n\n\nHead\nHead\nHead\nHead\nHead\nHead\n\n\n21\n6\n160\n110\n3.9\n2.62\n\n\n21\n6\n160\n110\n3.9\n2.875\n\n\n22.8\n4\n108\n93\n3.85\n2.32\n\n\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n\n\nTail\nTail\nTail\nTail\nTail\nTail\n\n\n19.7\n6\n145\n175\n3.62\n2.77\n\n\n15\n8\n301\n335\n3.54\n3.57\n\n\n21.4\n4\n121\n109\n4.11\n2.78"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\nTesting\n\n\nCode\nh_a_t &lt;- head_and_tail(mtcars[,1:5], n = 2)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#head_and_tail-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\n\n\nCode\nh_a_t\n\n\n\n\n\nmpg\ncyl\ndisp\nhp\ndrat\n\n\nHead\nHead\nHead\nHead\nHead\n\n\n21\n6\n160\n110\n3.9\n\n\n21\n6\n160\n110\n3.9\n\n\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n\n\nTail\nTail\nTail\nTail\nTail\n\n\n15\n8\n301\n335\n3.54\n\n\n21.4\n4\n121\n109\n4.11"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r.html#want-to-learn-more-classic-r",
    "href": "introduction/very-short-intro-r/very-short-intro-r.html#want-to-learn-more-classic-r",
    "title": "Very Short Intro to R",
    "section": "Want to learn more classic R?",
    "text": "Want to learn more classic R?\n\nTry the Tutorials in upper right pane\nTry the Introduction chapter in Using R for Introductory Econometrics\nSee section 2 in Big Book of R\nR for everyone: Advanced Analytics and Graphics, 2nd Edition av Jared P. Lander\n\n\n\nMSB105"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html",
    "title": "Very Short Intro to R",
    "section": "",
    "text": "suppressPackageStartupMessages(\n  c(\n    library(tidyverse),\n    library(huxtable)\n  )\n)\n\n [1] \"lubridate\" \"forcats\"   \"stringr\"   \"dplyr\"     \"purrr\"     \"readr\"    \n [7] \"tidyr\"     \"tibble\"    \"ggplot2\"   \"tidyverse\" \"stats\"     \"graphics\" \n[13] \"grDevices\" \"utils\"     \"datasets\"  \"methods\"   \"base\"      \"huxtable\" \n[19] \"lubridate\" \"forcats\"   \"stringr\"   \"dplyr\"     \"purrr\"     \"readr\"    \n[25] \"tidyr\"     \"tibble\"    \"ggplot2\"   \"tidyverse\" \"stats\"     \"graphics\" \n[31] \"grDevices\" \"utils\"     \"datasets\"  \"methods\"   \"base\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#calculator",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#calculator",
    "title": "Very Short Intro to R",
    "section": "Calculator",
    "text": "Calculator\n\n2+2\n\n[1] 4\n\n\n\n(2/15)^0.25*exp(4) - 200\n\n[1] -167.0077"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#variables",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#variables",
    "title": "Very Short Intro to R",
    "section": "Variables",
    "text": "Variables\n\n2\n\n[1] 2\n\n\nMust give it a name (an address to location in memory) to be able to retrieve it.\n\nx &lt;- 2\n\nWe can also write x = 2, but &lt;- is the R way. We assign 2 to x.\n\n# get x\nx\n\n[1] 2"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#variables-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#variables-cont.",
    "title": "Very Short Intro to R",
    "section": "Variables cont.",
    "text": "Variables cont.\nTo both assign and print out result use parentheses.\n\n(y &lt;- 5)\n\n[1] 5\n\n\n\n(z &lt;- x + y)\n\n[1] 7"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#variables-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#variables-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Variables cont.",
    "text": "Variables cont.\nWe can change an assignment.\n\n(x &lt;- 13)\n\n[1] 13\n\n\n\nz\n\n[1] 7\n\n\nz retains value\n\n# update assignment\n(z &lt;- x + y)\n\n[1] 18\n\n\nz gets new value"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#integers-floating-point-decimal-numeric",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#integers-floating-point-decimal-numeric",
    "title": "Very Short Intro to R",
    "section": "Integers, floating point (decimal), numeric",
    "text": "Integers, floating point (decimal), numeric\n\ntypeof(z)\n\n[1] \"double\"\n\n\nIf we want z to be an integer we must do\n\n# Why L? I don't know.\nx &lt;- 13L\ny &lt;- 5L\n(z &lt;- x + y)\n\n[1] 18\n\n\n\ntypeof(z)\n\n[1] \"integer\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#vectors",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#vectors",
    "title": "Very Short Intro to R",
    "section": "Vectors",
    "text": "Vectors\nR works on vectors. Even single digits, as above, are vectors of length 1.\n\n(x &lt;- c(2, 8, 9, 21:29, 17:12))\n\n [1]  2  8  9 21 22 23 24 25 26 27 28 29 17 16 15 14 13 12\n\n\n\n(y &lt;- 6:(5 + length(x)))\n\n [1]  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23\n\n\n\n(z &lt;- x + y)\n\n [1]  8 15 17 30 32 34 36 38 40 42 44 46 35 35 35 35 35 35\n\n\nWhat happend?"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#vectors-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#vectors-cont.",
    "title": "Very Short Intro to R",
    "section": "Vectors cont.",
    "text": "Vectors cont.\n\n(y &lt;- 6:14) \n\n[1]  6  7  8  9 10 11 12 13 14\n\n\nWhat will z now be?\n\n(z &lt;- x + y)\n\n [1]  8 15 17 30 32 34 36 38 40 33 35 37 26 26 26 26 26 26\n\n\n\n(y &lt;- 6:13) \n\n[1]  6  7  8  9 10 11 12 13"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#vectors-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#vectors-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Vectors cont.",
    "text": "Vectors cont.\n\n(z &lt;- x + y)\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n [1]  8 15 17 30 32 34 36 38 32 34 36 38 27 27 27 27 19 19\n\n\n\nIf vectors not of same length R will replicate the shortest.\nIf a multiple NO WARNING!\n\nDANGER!\n\nElse the warning above"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#change-type",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#change-type",
    "title": "Very Short Intro to R",
    "section": "Change type",
    "text": "Change type\n\ntypeof(z)\n\n[1] \"double\"\n\n\n\nz &lt;- as.integer(z)\n\n\ntypeof(z)\n\n[1] \"integer\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#change-type-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#change-type-cont.",
    "title": "Very Short Intro to R",
    "section": "Change type cont.",
    "text": "Change type cont.\n\nz &lt;- as.character(z)\n\n\ntypeof(z)\n\n[1] \"character\"\n\n\n\nz\n\n [1] \"8\"  \"15\" \"17\" \"30\" \"32\" \"34\" \"36\" \"38\" \"32\" \"34\" \"36\" \"38\" \"27\" \"27\" \"27\"\n[16] \"27\" \"19\" \"19\"\n\n\n\nNow quotes around number, hence character."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector",
    "text": "Picking values in vector\n\n# first value\nz[1]\n\n[1] \"8\"\n\n\nWhat will happen? Why?\n\n# commented out else document will not run\n#z[1] + z[2]"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\nConvert back to integer\n\nz &lt;- as.integer(z)\nz[1] + z[2]\n\n[1] 23\n\n\n\nz\n\n [1]  8 15 17 30 32 34 36 38 32 34 36 38 27 27 27 27 19 19\n\n\nWhat will the next one return?\n\nz[1] + z[2:4]"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\nQuite flexible, we can for instance do:\n\nx[5] + z[c(1:2, c(9, 3, 1), 13:11)]\n\n[1] 30 37 54 39 30 49 60 58\n\n\nNote that the indexes must be put inside c().\n\nc(1:2, c(9, 3, 1), 13:11)\n\n[1]  1  2  9  3  1 13 12 11"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\nWhat happened previous slide?\n\nx[5]\n\n[1] 22\n\n\n\nz[c(1:2, c(9, 3, 1), 13:11)]\n\n[1]  8 15 32 17  8 27 38 36\n\n\n\nx[5] + z[c(1:2, c(9, 3, 1), 13:11)]\n\n[1] 30 37 54 39 30 49 60 58"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\n\nz &lt;- c(3, 5, 1, 9)\n\nWhat will the following return?\n\nz[-1]\n\nWhat will the following return?\n\nz[-c(2:3)]\n\n\nz[-c(3:2)]"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#picking-values-in-vector-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Picking values in vector cont.",
    "text": "Picking values in vector cont.\nHow to drop last value?\n\nhead(z, n = -1)\n\n[1] 3 5 1\n\n\n\nhead(z, n = -2)\n\n[1] 3 5\n\n\nGet the two values at the end\n\nz[(length(z)-1):length(z)]\n\n[1] 1 9\n\n\nor\n\ntail(z, n = 2)\n\n[1] 1 9"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#generating-empty-vectors",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#generating-empty-vectors",
    "title": "Very Short Intro to R",
    "section": "Generating empty vectors",
    "text": "Generating empty vectors\n\nx &lt;- numeric(10)\n\n\nx\n\n [1] 0 0 0 0 0 0 0 0 0 0\n\n\n\ntypeof(x)\n\n[1] \"double\"\n\n\n\nImportant technique used in loops.\nFaster to generate an empty vector of needed length than to grow it with one new value many times."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#generating-empty-vectors-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#generating-empty-vectors-1",
    "title": "Very Short Intro to R",
    "section": "Generating empty vectors",
    "text": "Generating empty vectors\nR starts indexing at 1 (not 0).\n\n# empty numeric vector\nx &lt;- numeric(1000000)\nset.seed(666)\n# fill with values\nt1 &lt;- Sys.time()\nfor (i in 1:1000000) {\n  # standard normal\n  x[i] = rnorm(n = 1)\n}\nt2 &lt;- Sys.time()\n(d1 &lt;- t2 - t1)\n\nTime difference of 1.356548 secs\n\n\n\nhead(x, n = 10)\n\n [1]  0.75331105  2.01435467 -0.35513446  2.02816784 -2.21687445  0.75839618\n [7] -1.30618526 -0.80251957 -1.79224083 -0.04203245"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#generating-vector-incrementally",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#generating-vector-incrementally",
    "title": "Very Short Intro to R",
    "section": "Generating vector incrementally",
    "text": "Generating vector incrementally\nSlower code. Allocate more space in memory for x for each iteration.\n\n# \"slow\" code\nrm(x)\nset.seed(666)\n# fill with values\nt1 &lt;- Sys.time()\nx &lt;- 0\nfor (i in 1:1000000) {\n  # standard normal\n  x[i] = rnorm(n = 1)\n}\nt2 &lt;- Sys.time()\n(d2 &lt;- t2 - t1)\n\nTime difference of 1.303082 secs\n\n\n\nhead(x, n = 10)\n\n [1]  0.75331105  2.01435467 -0.35513446  2.02816784 -2.21687445  0.75839618\n [7] -1.30618526 -0.80251957 -1.79224083 -0.04203245"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#speed-difference",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#speed-difference",
    "title": "Very Short Intro to R",
    "section": "Speed Difference",
    "text": "Speed Difference\n\n# percent slower\nround((as.double(d2 - d1)/as.double(d1))*100, digits = 2)\n\n[1] -3.94"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#the-r-way",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#the-r-way",
    "title": "Very Short Intro to R",
    "section": "The R way",
    "text": "The R way\n\nset.seed(666)\nt1 &lt;- Sys.time()\nx &lt;- rnorm(1000000)\nt2 &lt;- Sys.time()\n(d3 &lt;- t2 - t1)\n\nTime difference of 0.02978992 secs\n\n\n\nhead(x, n = 10)\n\n [1]  0.75331105  2.01435467 -0.35513446  2.02816784 -2.21687445  0.75839618\n [7] -1.30618526 -0.80251957 -1.79224083 -0.04203245\n\n\n\n# percent faster\nround((as.double(d2- d3)/as.double(d3)) * 100, digits = 2)\n\n[1] 4274.24"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#other-types-of-vectors-logical",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#other-types-of-vectors-logical",
    "title": "Very Short Intro to R",
    "section": "Other types of vectors; logical",
    "text": "Other types of vectors; logical\n\nx &lt;- x[1:10]\nq &lt;- x &lt; 0\n\n\nq\n\n [1] FALSE FALSE  TRUE FALSE  TRUE FALSE  TRUE  TRUE  TRUE  TRUE\n\n\n\nq is a boolen or logical vector\n\nTRUE for the values of x that are less than 0, and false for the ones that are not."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#other-types-of-vectors-named",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#other-types-of-vectors-named",
    "title": "Very Short Intro to R",
    "section": "Other types of vectors; named",
    "text": "Other types of vectors; named\n\ntemp &lt;- c(11, 17, 22, 15, 15, 25)\nweather &lt;- c(\"Rainy\", \"Sunny\", \"Sunny\", \"Fair\", \"Fair\", \"Sunny\") \n\n\nnames(temp) &lt;- weather\n\n\ntemp\n\nRainy Sunny Sunny  Fair  Fair Sunny \n   11    17    22    15    15    25 \n\n\n\ntemp[names(temp) == \"Sunny\"]\n\nSunny Sunny Sunny \n   17    22    25"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#other-types-of-vectors-factor",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#other-types-of-vectors-factor",
    "title": "Very Short Intro to R",
    "section": "Other types of vectors; factor",
    "text": "Other types of vectors; factor\n\n# some codeing of sex, 1 female, 2 male\nsex &lt;- c(1, 2, 1, 2, 2, 1, 2)\n\n\n# new labels, \"F\" for 1 and \"M\" for 2\nsex_f &lt;- factor(sex, labels = c(\"F\", \"M\"))\n\n\nsex_f\n\n[1] F M F M M F M\nLevels: F M\n\n\n\ntable(sex_f)\n\nsex_f\nF M \n3 4"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#rules-for-vectors",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#rules-for-vectors",
    "title": "Very Short Intro to R",
    "section": "Rules for vectors",
    "text": "Rules for vectors\n\nEvery element of a vector must be of the same type.\nIf not, elements will be converted\n\n\n(x &lt;- 1:3)\n\n[1] 1 2 3\n\n\n\ntypeof(x)\n\n[1] \"integer\"\n\n\n\n# insert \"b\" second place\nx[2] &lt;- \"b\"\n\n\nx\n\n[1] \"1\" \"b\" \"3\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#rules-for-vectors-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#rules-for-vectors-cont.",
    "title": "Very Short Intro to R",
    "section": "Rules for vectors cont.",
    "text": "Rules for vectors cont.\n\ntypeof(x)\n\n[1] \"character\"\n\n\n\n# will fail\n# x &lt;- as.integer(x)\n\n\nx &lt;- 1:3\n\n\nx[3] &lt;- 5.0\n\n\nx\n\n[1] 1 2 5\n\n\n\ntypeof(x)\n\n[1] \"double\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#lists",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#lists",
    "title": "Very Short Intro to R",
    "section": "Lists",
    "text": "Lists\n\nMost flexible datatype in R, but also more complex and perhaps more difficult to work with\n\n\nl &lt;- list(x = 1:3, y = c(\"A\", letters[4:13]), z = seq(from = 1.3, to = 2.7, by = 0.2))\n\n\nl\n\n$x\n[1] 1 2 3\n\n$y\n [1] \"A\" \"d\" \"e\" \"f\" \"g\" \"h\" \"i\" \"j\" \"k\" \"l\" \"m\"\n\n$z\n[1] 1.3 1.5 1.7 1.9 2.1 2.3 2.5 2.7\n\n\n\ntypeof(l)\n\n[1] \"list\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#lists-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#lists-cont.",
    "title": "Very Short Intro to R",
    "section": "Lists cont.",
    "text": "Lists cont.\n\ntypeof(l$x)\n\n[1] \"integer\"\n\n\n\nis.vector(l$x)\n\n[1] TRUE\n\n\n\nl$x, element x in list l\n\n\ntypeof(l$y)\n\n[1] \"character\"\n\n\n\ntypeof(l$z)\n\n[1] \"double\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#list-in-list",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#list-in-list",
    "title": "Very Short Intro to R",
    "section": "List in list",
    "text": "List in list\n\nWe can have lists inside lists\n\n\nl &lt;- list(\n  x = 1:3, \n  y = c(\"A\", letters[4:13]), \n  z = list(\n    za = seq(from = 1.3, to = 2.7, by = 0.2), \n    zb = c(TRUE, FALSE), \n    zc = 5:9,\n    zd = list(1, \"F\", 3.2)\n    )\n  )"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#list-in-list-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#list-in-list-cont.",
    "title": "Very Short Intro to R",
    "section": "List in list cont.",
    "text": "List in list cont.\n\n\nCode\nl\n\n\n$x\n[1] 1 2 3\n\n$y\n [1] \"A\" \"d\" \"e\" \"f\" \"g\" \"h\" \"i\" \"j\" \"k\" \"l\" \"m\"\n\n$z\n$z$za\n[1] 1.3 1.5 1.7 1.9 2.1 2.3 2.5 2.7\n\n$z$zb\n[1]  TRUE FALSE\n\n$z$zc\n[1] 5 6 7 8 9\n\n$z$zd\n$z$zd[[1]]\n[1] 1\n\n$z$zd[[2]]\n[1] \"F\"\n\n$z$zd[[3]]\n[1] 3.2"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#list-in-list-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#list-in-list-cont.-1",
    "title": "Very Short Intro to R",
    "section": "List in list cont.",
    "text": "List in list cont.\n\nl$z$zb\n\n[1]  TRUE FALSE"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#dataframes",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#dataframes",
    "title": "Very Short Intro to R",
    "section": "Dataframes",
    "text": "Dataframes\n\nThe most used datastructure in R\nA dataframe is a list of vectors and/or lists of the same length.\n\n\ndf &lt;- data.frame(x = 1:3, y = letters[1:3], z = LETTERS[1:3])\n\n\ndf\n\n\n\n\nx\ny\nz\n\n\n1\na\nA\n\n\n2\nb\nB\n\n\n3\nc\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#the-following-will-not-work",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#the-following-will-not-work",
    "title": "Very Short Intro to R",
    "section": "The following will not work:",
    "text": "The following will not work:\n\n\n\nx and y 3 elements, z 4 elements. x, y and z can not be put into a dataframe."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#this-will-work",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#this-will-work",
    "title": "Very Short Intro to R",
    "section": "This will work",
    "text": "This will work\n\ndf1 &lt;- data.frame(x = 1:3, y = letters[1:3], \n                 z = df)\n\n\nstr(df1)\n\n'data.frame':   3 obs. of  5 variables:\n $ x  : int  1 2 3\n $ y  : chr  \"a\" \"b\" \"c\"\n $ z.x: int  1 2 3\n $ z.y: chr  \"a\" \"b\" \"c\"\n $ z.z: chr  \"A\" \"B\" \"C\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#this-will-work-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#this-will-work-cont.",
    "title": "Very Short Intro to R",
    "section": "This will work cont.",
    "text": "This will work cont.\n\nRemember that a dataframe is a list of vectors and lists, hence we can have whole dataframes in a column (variable) in a dataframe.\nMany modern R packages uses this trick including tidyverse and the sf* packages\nThey do it a bit more advanced and include a different dataframe in each row"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#adding-a-variable-to-a-dataframe",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#adding-a-variable-to-a-dataframe",
    "title": "Very Short Intro to R",
    "section": "Adding a variable to a dataframe",
    "text": "Adding a variable to a dataframe\n\ndf\n\n\n\n\nx\ny\nz\n\n\n1\na\nA\n\n\n2\nb\nB\n\n\n3\nc\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#adding-a-variable-to-a-dataframe-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#adding-a-variable-to-a-dataframe-1",
    "title": "Very Short Intro to R",
    "section": "Adding a variable to a dataframe",
    "text": "Adding a variable to a dataframe\n\ndf$q &lt;- c(2.1, 0.4, 0.9)\n\n\n\nCode\ndf\n\n\n\n\n\nx\ny\nz\nq\n\n\n1\na\nA\n2.1\n\n\n2\nb\nB\n0.4\n\n\n3\nc\nC\n0.9"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe",
    "text": "Selecting Values from a dataframe\nSelecting column 2\n\n# all rows, col 2\ndf[,2]\n\n[1] \"a\" \"b\" \"c\"\n\n\nSelecting columns 1 and 3\n\n# col 1 and 3\ndf[, c(1,3)]\n\n\n\n\nx\nz\n\n\n1\nA\n\n\n2\nB\n\n\n3\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\nSelecting column 2 by name\n\n# col 2 by name\ndf[, \"y\"]\n\n[1] \"a\" \"b\" \"c\"\n\n\nSelecting columns 1 and 3 by name\n\ndf[, c(\"x\", \"z\")]\n\n\n\n\nx\nz\n\n\n1\nA\n\n\n2\nB\n\n\n3\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\nSelecting row 1\n\n# select row 1\ndf[1,]\n\n\n\n\nx\ny\nz\nq\n\n\n1\na\nA\n2.1"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\n\n# selecting row 1 and 3\ndf[c(1, 3),]\n\n\n\n\nx\ny\nz\nq\n\n\n1\na\nA\n2.1\n\n\n3\nc\nC\n0.9"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\nSelecting row 1 and 3 from column 2 and 3\n\ndf[c(1, 3), 2:3]\n\n\n\n\ny\nz\n\n\na\nA\n\n\nc\nC"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#selecting-values-from-a-dataframe-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Selecting Values from a dataframe cont.",
    "text": "Selecting Values from a dataframe cont.\nSelecting value from row 2 and column 3\n\ndf[2, 3]\n\n[1] \"B\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#be-aware-of-the-following",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#be-aware-of-the-following",
    "title": "Very Short Intro to R",
    "section": "Be aware of the following",
    "text": "Be aware of the following\nWhat type?\n\ntypeof(df[2, 3])\n\n[1] \"character\"\n\n\n\nis.vector(df[2, 3])\n\n[1] TRUE\n\n\n\nis.data.frame(df[2, 3])\n\n[1] FALSE\n\n\n\ntypeof(df[1:2, 3])\n\n[1] \"character\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#be-aware-of-the-following-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#be-aware-of-the-following-cont.",
    "title": "Very Short Intro to R",
    "section": "Be aware of the following cont.",
    "text": "Be aware of the following cont.\n\nis.vector(df[1:2, 3])\n\n[1] TRUE\n\n\n\nis.data.frame(df[1:2, 3])\n\n[1] FALSE\n\n\n\nis.data.frame(df[2, 2:3])\n\n[1] TRUE"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#be-aware-of-the-following-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#be-aware-of-the-following-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Be aware of the following cont.",
    "text": "Be aware of the following cont.\n\ntypeof(df[c(1, 3), 2:3])\n\n[1] \"list\"\n\n\n\nis.vector(df[c(1, 3), 2:3])\n\n[1] FALSE\n\n\n\nis.data.frame(df[c(1, 3), 2:3])\n\n[1] TRUE"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#be-aware-of-the-following-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#be-aware-of-the-following-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Be aware of the following cont.",
    "text": "Be aware of the following cont.\n\nIf we select a single item from a dataframe we end up with a vector with one element\nIf we select multiple values from a row in a dataframe we end up with a dataframe\nIf we select multiple values from a column in a dataframe we end up with a vector.\nIf we select values from multiple rows and columns we end up with a dataframe"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#dataframe-versus-tibble",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#dataframe-versus-tibble",
    "title": "Very Short Intro to R",
    "section": "Dataframe versus Tibble",
    "text": "Dataframe versus Tibble\nTibble part of tidyverse to be introduced later on, but important point\nA Tibble is a modernised version of a dataframe\n\ntib &lt;- as_tibble(df)\n\n\ntib\n\n\n\n\nx\ny\nz\nq\n\n\n1\na\nA\n2.1\n\n\n2\nb\nB\n0.4\n\n\n3\nc\nC\n0.9"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#dataframe-versus-tibble-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#dataframe-versus-tibble-cont.",
    "title": "Very Short Intro to R",
    "section": "Dataframe versus Tibble cont.",
    "text": "Dataframe versus Tibble cont.\n\nis.vector(tib[2,3])\n\n[1] FALSE\n\n\n\n# tibble just an updated dataframe\nis.data.frame(tib[2,3])\n\n[1] TRUE\n\n\nNote! Selecting from a tibble ALWAYS return a dataframe, selecting from a dataframe will return a dataframe OR a vector."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices",
    "title": "Very Short Intro to R",
    "section": "Matrices",
    "text": "Matrices\n\nRectangular collection of numbers.\nImportant in econometrics (appendix D in Wooldridge)\nUsed for solving systems of equations\nSpecial versions of the arithmetic operations for matrices"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\n# define a matirc in R\nX &lt;- matrix(c(2, 2, -1, 5, 2, 6), nrow = 3, byrow = FALSE)\n\n\nX\n\n     [,1] [,2]\n[1,]    2    5\n[2,]    2    2\n[3,]   -1    6\n\n\n\nmatrix(c(2, 2, -1, 5, 2, 6), nrow = 3, byrow = TRUE)\n\n     [,1] [,2]\n[1,]    2    2\n[2,]   -1    5\n[3,]    2    6"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\n# transpose\nt(X)\n\n     [,1] [,2] [,3]\n[1,]    2    2   -1\n[2,]    5    2    6\n\n\n\nY &lt;- matrix(c(-3, 2, 2.5, 6, -4, 4), nrow = 2, byrow = FALSE)\n\n\nY\n\n     [,1] [,2] [,3]\n[1,]   -3  2.5   -4\n[2,]    2  6.0    4"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\nDimension of a matrix is number of rows (m), number of columns (n)\nThe rule for matrix multiplication (X %*% Y) is that it is only defined when \\(n_x = m_y\\) and the result will be a matrix with dimension \\(m_x, n_y\\)."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\ndim(X)\n\n[1] 3 2\n\n\n\ndim(Y)\n\n[1] 2 3\n\n\n\n# X %*% Y will be defined since (n_X = 2 = m_Y = 2) and the result will have dimension 3x3\nX %*% Y\n\n     [,1] [,2] [,3]\n[1,]    4 35.0   12\n[2,]   -2 17.0    0\n[3,]   15 33.5   28"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\n\\(X^TX\\) is important in econometrics\n\n# X, two variables with 3 obs. for each variable\nt(X) %*% X\n\n     [,1] [,2]\n[1,]    9    8\n[2,]    8   65\n\n\nFinding the inverse of a square matrix\n\n(XTX_inv &lt;- solve(t(X) %*% X))\n\n            [,1]        [,2]\n[1,]  0.12476008 -0.01535509\n[2,] -0.01535509  0.01727447"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-5",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-5",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\nMultiplying a matrix with its inverse will give the identity matrix I\n\n(t(X) %*% X) %*% XTX_inv\n\n             [,1] [,2]\n[1,] 1.000000e+00    0\n[2,] 9.367507e-17    1\n\n\nGenerate identity matrix I\n\n(I &lt;- diag(2))\n\n     [,1] [,2]\n[1,]    1    0\n[2,]    0    1"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-6",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-6",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\nMultiplying a square matrix with I will return the matrix\n\n(t(X) %*% X) %*% I\n\n     [,1] [,2]\n[1,]    9    8\n[2,]    8   65\n\n\n\nI %*% (t(X) %*% X)\n\n     [,1] [,2]\n[1,]    9    8\n[2,]    8   65"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-7",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#matrices-cont.-7",
    "title": "Very Short Intro to R",
    "section": "Matrices cont.",
    "text": "Matrices cont.\nWe select elements from matrices like we do for dataframes\n\nX\n\n     [,1] [,2]\n[1,]    2    5\n[2,]    2    2\n[3,]   -1    6\n\n\n\nX[3, 1:2]\n\n[1] -1  6"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#subsets",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#subsets",
    "title": "Very Short Intro to R",
    "section": "Subsets",
    "text": "Subsets\n\ndim(cars)\n\n[1] 50  2\n\n\n\nhead(cars, n = 4)\n\n\n\n\nspeed\ndist\n\n\n4\n2\n\n\n4\n10\n\n\n7\n4\n\n\n7\n22"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#subsets-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#subsets-cont.",
    "title": "Very Short Intro to R",
    "section": "Subsets cont.",
    "text": "Subsets cont.\n\nsummary(cars)\n\n     speed           dist       \n Min.   : 4.0   Min.   :  2.00  \n 1st Qu.:12.0   1st Qu.: 26.00  \n Median :15.0   Median : 36.00  \n Mean   :15.4   Mean   : 42.98  \n 3rd Qu.:19.0   3rd Qu.: 56.00  \n Max.   :25.0   Max.   :120.00"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#subsets-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#subsets-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Subsets cont.",
    "text": "Subsets cont.\n\n(cars_sub &lt;- subset(cars, subset = cars$speed &gt; 6 & cars$speed &lt; 11))\n\n\n\n\nspeed\ndist\n\n\n7\n4\n\n\n7\n22\n\n\n8\n16\n\n\n9\n10\n\n\n10\n18\n\n\n10\n26\n\n\n10\n34"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#subsets-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#subsets-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Subsets cont.",
    "text": "Subsets cont.\n\nsubset is nice to use with the lm() (linear model, default command to run regressions in R) command to run regressions on a subset of the data"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#saveload-data",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#saveload-data",
    "title": "Very Short Intro to R",
    "section": "Save/load data",
    "text": "Save/load data\n\nsave(cars_sub, file = \"cars_sub.Rdata\")\n\nDelete cars_sub\n\nrm(cars_sub)\n\n\n# should have done some house keeping ;-)\n# no cars_sub\nls()\n\n [1] \"d1\"      \"d2\"      \"d3\"      \"df\"      \"df1\"     \"i\"       \"I\"      \n [8] \"l\"       \"q\"       \"sex\"     \"sex_f\"   \"t1\"      \"t2\"      \"temp\"   \n[15] \"tib\"     \"weather\" \"x\"       \"X\"       \"XTX_inv\" \"y\"       \"Y\"      \n[22] \"z\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#saveload-data-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#saveload-data-1",
    "title": "Very Short Intro to R",
    "section": "Save/load data",
    "text": "Save/load data\n\n# Note! we don't have to do cars_sub &lt;- load(…)\nload(file = \"cars_sub.Rdata\")\n\n\n# it's back\ndim(cars_sub)\n\n[1] 7 2"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#help",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#help",
    "title": "Very Short Intro to R",
    "section": "Help",
    "text": "Help\n\nR has built in help\nFor packages to be accepted at CRAN they have to be well documented\ntidyverse has very nice documentation\nhelp for a command in Console: help(dim) or ?dim\nAlso search in the Help tab\nIf we click on the package name in the Package tab we will get documentation for all the commands in the package\nExercise: Find help for dim {base} via the Package tab"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-regression-analysis-in-r",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-regression-analysis-in-r",
    "title": "Very Short Intro to R",
    "section": "Very simple regression analysis in R",
    "text": "Very simple regression analysis in R\n\nlm1 &lt;- lm(formula = dist ~ speed, data = cars)\n\n\nsummary(lm1)\n\n\nCall:\nlm(formula = dist ~ speed, data = cars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-29.069  -9.525  -2.272   9.215  43.201 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) -17.5791     6.7584  -2.601   0.0123 *  \nspeed         3.9324     0.4155   9.464 1.49e-12 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 15.38 on 48 degrees of freedom\nMultiple R-squared:  0.6511,    Adjusted R-squared:  0.6438 \nF-statistic: 89.57 on 1 and 48 DF,  p-value: 1.49e-12"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-regression-analysis-in-r-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-regression-analysis-in-r-1",
    "title": "Very Short Intro to R",
    "section": "Very simple regression analysis in R",
    "text": "Very simple regression analysis in R\nWithout intercept term\n\n# Note! -1 at end of formula\nlm2 &lt;- lm(formula = dist ~ speed -1, data = cars)\n\n\nsummary(lm2)\n\n\nCall:\nlm(formula = dist ~ speed - 1, data = cars)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-26.183 -12.637  -5.455   4.590  50.181 \n\nCoefficients:\n      Estimate Std. Error t value Pr(&gt;|t|)    \nspeed   2.9091     0.1414   20.58   &lt;2e-16 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 16.26 on 49 degrees of freedom\nMultiple R-squared:  0.8963,    Adjusted R-squared:  0.8942 \nF-statistic: 423.5 on 1 and 49 DF,  p-value: &lt; 2.2e-16"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-regression-analysis-in-r-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-regression-analysis-in-r-2",
    "title": "Very Short Intro to R",
    "section": "Very simple regression analysis in R",
    "text": "Very simple regression analysis in R\n\n# only on a subset of data\nlm3 &lt;- lm(formula = dist ~ speed, \n          data = cars, \n          subset = cars$speed &gt; 6 & cars$speed &lt; 11\n          )\n\n\nsummary(lm3)\n\n\nCall:\nlm(formula = dist ~ speed, data = cars, subset = cars$speed &gt; \n    6 & cars$speed &lt; 11)\n\nResiduals:\n     3      4      5      6      7      8      9 \n-7.500 10.500  0.375 -9.750 -5.875  2.125 10.125 \n\nCoefficients:\n            Estimate Std. Error t value Pr(&gt;|t|)\n(Intercept)  -17.375     23.397  -0.743    0.491\nspeed          4.125      2.656   1.553    0.181\n\nResidual standard error: 8.981 on 5 degrees of freedom\nMultiple R-squared:  0.3253,    Adjusted R-squared:  0.1904 \nF-statistic: 2.411 on 1 and 5 DF,  p-value: 0.1812"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#reporting-regression-results",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#reporting-regression-results",
    "title": "Very Short Intro to R",
    "section": "Reporting Regression Results",
    "text": "Reporting Regression Results\n\nhuxreg(\n        lm1, lm2, lm3,\n        error_format = \"({statistic})\", \n        note         = \"{stars}. T statistics in parentheses.\"\n      )"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#reporting-regression-results-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#reporting-regression-results-cont.",
    "title": "Very Short Intro to R",
    "section": "Reporting Regression Results cont.",
    "text": "Reporting Regression Results cont.\n\n\n\n\n\n\n(1)\n(2)\n(3)\n\n\n(Intercept)\n-17.579 *  \n        \n-17.375 \n\n\n\n(-2.601)   \n        \n(-0.743)\n\n\nspeed\n3.932 ***\n2.909 ***\n4.125 \n\n\n\n(9.464)   \n(20.578)   \n(1.553)\n\n\nN\n50        \n50        \n7     \n\n\nR2\n0.651    \n0.896    \n0.325 \n\n\nlogLik\n-206.578    \n-209.875    \n-24.120 \n\n\nAIC\n419.157    \n423.750    \n54.241 \n\n\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05. T statistics in parentheses."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting",
    "title": "Very Short Intro to R",
    "section": "Classic plotting",
    "text": "Classic plotting\nWe will mainly use the ggplot2 package in tidyverse for plotting\nHere is a tiny bit about the classic R plot() function\n\nplot(cars)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\n\nplot(x = cars$dist, y = cars$speed)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\nClassic plot with regression line\n\nplot(cars)\nabline(lm(formula = dist ~ speed, data = cars))"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\n\n# multiple regression\n# LifeCycleSavings from package Datasets\nmreg1 &lt;- lm(\n  formula =sr ~ pop15 + pop75 + dpi + ddpi, \n  data = LifeCycleSavings\n  )\nsummary(mreg1)\n\n\nCall:\nlm(formula = sr ~ pop15 + pop75 + dpi + ddpi, data = LifeCycleSavings)\n\nResiduals:\n    Min      1Q  Median      3Q     Max \n-8.2422 -2.6857 -0.2488  2.4280  9.7509 \n\nCoefficients:\n              Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 28.5660865  7.3545161   3.884 0.000334 ***\npop15       -0.4611931  0.1446422  -3.189 0.002603 ** \npop75       -1.6914977  1.0835989  -1.561 0.125530    \ndpi         -0.0003369  0.0009311  -0.362 0.719173    \nddpi         0.4096949  0.1961971   2.088 0.042471 *  \n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 3.803 on 45 degrees of freedom\nMultiple R-squared:  0.3385,    Adjusted R-squared:  0.2797 \nF-statistic: 5.756 on 4 and 45 DF,  p-value: 0.0007904"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\nNicer output than summary()\n\nhuxreg(\n        mreg1,\n        error_format = \"({statistic})\", \n        note         = \"{stars}. T statistics in parentheses.\"\n      )"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#classic-plotting-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Classic plotting cont.",
    "text": "Classic plotting cont.\n\n\n\n\n\n\n(1)\n\n\n(Intercept)\n28.566 ***\n\n\n\n(3.884)   \n\n\npop15\n-0.461 ** \n\n\n\n(-3.189)   \n\n\npop75\n-1.691    \n\n\n\n(-1.561)   \n\n\ndpi\n-0.000    \n\n\n\n(-0.362)   \n\n\nddpi\n0.410 *  \n\n\n\n(2.088)   \n\n\nN\n50        \n\n\nR2\n0.338    \n\n\nlogLik\n-135.098    \n\n\nAIC\n282.196    \n\n\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05. T statistics in parentheses."
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-function",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-function",
    "title": "Very Short Intro to R",
    "section": "Very Simple Function",
    "text": "Very Simple Function\nIt’s very easy to write functions in R and we should start to practice at once.\n\nadd_numbers &lt;- function(x, y) {\n  x + y\n}\n\n\nadd_numbers(2,2)\n\n[1] 4\n\n\n\n# will fail\n#add_numbers(2)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-function-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-function-cont.",
    "title": "Very Short Intro to R",
    "section": "Very simple function cont.",
    "text": "Very simple function cont.\nImproved version\n\n# default value 0\nadd_numbers &lt;- function(x=0, y=0) {\n  x + y\n}\n\n\nadd_numbers()\n\n[1] 0\n\n\n\nadd_numbers(5, 10)\n\n[1] 15\n\n\n\nadd_numbers(3)\n\n[1] 3"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-function-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-function-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Very simple function cont.",
    "text": "Very simple function cont.\nDivide two numbers\n\ndivide_numbers &lt;- function(x=0, y=1) {\n  x/y\n}\n\n\ndivide_numbers()\n\n[1] 0\n\n\n\ndivide_numbers(5)\n\n[1] 5\n\n\n\n# x = 0, y = 5\ndivide_numbers(,5)\n\n[1] 0"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-function-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#very-simple-function-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Very simple function cont.",
    "text": "Very simple function cont.\n\n# x is 5, y = 2\ndivide_numbers(5,2)\n\n[1] 2.5\n\n\n\n# named arguments, sequence does not matter\ndivide_numbers(y = 2, x = 5)\n\n[1] 2.5"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#simple-function-with-for-next-loop.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#simple-function-with-for-next-loop.",
    "title": "Very Short Intro to R",
    "section": "Simple function with for next loop.",
    "text": "Simple function with for next loop.\n\nstart_stupid_fun &lt;- function(x1 = 0, n = 10) {\n# initialise x\nx = vector(mode = \"numeric\", length = n)\nx[1] = x1\n\nfor (i in seq_along(x[-1])) {\n  x[i + 1] = x[i] + 1\n}\nprint(x)\n}\n\n\nstart_stupid_fun()\n\n [1] 0 1 2 3 4 5 6 7 8 9\n\n\n\nstart_stupid_fun(x1 = 5, n = 15)\n\n [1]  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#extensions",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#extensions",
    "title": "Very Short Intro to R",
    "section": "Extensions",
    "text": "Extensions\n\n# probably from jørn\nstupid_fun &lt;- function(\n    x1 = 0, \n    n = 10, \n    d = 1, # how much to increase number\n    w = 80, # text width in chacters\n    width_fraction = 1, # how wide should the output be\n    print_to_console = TRUE # where to send the output\n    ) {\n  # we stop if we are to produce zero numbers\n  # stopifnot(n &gt; 0) an alternative but throws an error\n  # and stop compilation of the document/presentation\n  if(!n &gt; 0) return(\"n needs to be positive.\")\n  # max number of digits in numbers\n  dig =  nchar(n*d)\n  # width in number of charcter for output\n  w_out = w * width_fraction\n  # allocate a numeric vector with room for n numbers\n  x = vector(mode = \"numeric\", length = n)\n  # First number in output vector is x1\n  x[1] = x1\n  # we loop through x vector but drop first element\n  for (i in seq_along(x[-1])) {\n    # i starts at 1, so first is x1 + d\n    x[i + 1] = x[i] + d\n    }\n\n# nice trick to control print to console\nif (print_to_console) {\nprint(stringr::str_pad(x, width = dig, side = \"left\", pad = \" \"),\n      width = w_out)\n  } else {\n    tibble(x)\n  }\n}"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#testing",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#testing",
    "title": "Very Short Intro to R",
    "section": "Testing",
    "text": "Testing\n\n# Generate 33 number starting with -13 and increasing by 5, default width\nstupid_fun(x1 = -13, n = 33, d = 5, print_to_console = TRUE)\n\n [1] \"-13\" \" -8\" \" -3\" \"  2\" \"  7\" \" 12\" \" 17\" \" 22\" \" 27\" \" 32\" \" 37\" \" 42\"\n[13] \" 47\" \" 52\" \" 57\" \" 62\" \" 67\" \" 72\" \" 77\" \" 82\" \" 87\" \" 92\" \" 97\" \"102\"\n[25] \"107\" \"112\" \"117\" \"122\" \"127\" \"132\" \"137\" \"142\" \"147\"\n\n\n\n# 13 numbers\nstupid_fun(x1 = -7, n = 13, width_fraction = 0.3, d = 5, \n           print_to_console = TRUE)\n\n [1] \"-7\" \"-2\" \" 3\" \" 8\"\n [5] \"13\" \"18\" \"23\" \"28\"\n [9] \"33\" \"38\" \"43\" \"48\"\n[13] \"53\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#print-to-console-false",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#print-to-console-false",
    "title": "Very Short Intro to R",
    "section": "Print to console FALSE",
    "text": "Print to console FALSE\n\nstupid_fun(x1 = -21, n = 5, width_fraction = 0.6, d = 5, \n           print_to_console = FALSE)\n\n\n\n\nx\n\n\n-21\n\n\n-16\n\n\n-11\n\n\n-6\n\n\n-1"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#zero-numbers",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#zero-numbers",
    "title": "Very Short Intro to R",
    "section": "Zero numbers",
    "text": "Zero numbers\n\n# result for n=0, no error so the presentation compiles\nstupid_fun(x1 = -21, n = 0, width_fraction = 0.6, \n           d = 5, print_to_console=TRUE)\n\n[1] \"n needs to be positive.\""
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail",
    "text": "Head_and_tail\nWe have the functions head() and tail() to inspect respectively the start and end of a dataframe or similar object. Sometimes we might want to do bought with one command.\n\nFirst attempt\n\nhead_and_tail &lt;- function(x) {\n  c(head(x), tail(x))\n}"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\n\nhead_and_tail(mtcars[,1:6])\n\n$mpg\n[1] 21.0 21.0 22.8 21.4 18.7 18.1\n\n$cyl\n[1] 6 6 4 6 8 6\n\n$disp\n[1] 160 160 108 258 360 225\n\n$hp\n[1] 110 110  93 110 175 105\n\n$drat\n[1] 3.90 3.90 3.85 3.08 3.15 2.76\n\n$wt\n[1] 2.620 2.875 2.320 3.215 3.440 3.460\n\n$mpg\n[1] 26.0 30.4 15.8 19.7 15.0 21.4\n\n$cyl\n[1] 4 4 8 6 8 4\n\n$disp\n[1] 120.3  95.1 351.0 145.0 301.0 121.0\n\n$hp\n[1]  91 113 264 175 335 109\n\n$drat\n[1] 4.43 3.77 4.22 3.62 3.54 4.11\n\n$wt\n[1] 2.140 1.513 3.170 2.770 3.570 2.780"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.-1",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.-1",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\n\nSecond attempt\n\nhead_and_tail &lt;- function(x, n=3L) {\nres = rbind(rep('Head',length(names(x))),\n        head(x, n = n),\n        rep('*-*-*',length(names(x))), \n        rep('Tail',length(names(x))), \n        tail(x, n = n)\n        )\nas_tibble(res)\n}"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.-2",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.-2",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\n\nTesting\n\nhead_and_tail(mtcars[,1:6], n = 3)\n\n\n\n\nmpg\ncyl\ndisp\nhp\ndrat\nwt\n\n\nHead\nHead\nHead\nHead\nHead\nHead\n\n\n21\n6\n160\n110\n3.9\n2.62\n\n\n21\n6\n160\n110\n3.9\n2.875\n\n\n22.8\n4\n108\n93\n3.85\n2.32\n\n\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n\n\nTail\nTail\nTail\nTail\nTail\nTail\n\n\n19.7\n6\n145\n175\n3.62\n2.77\n\n\n15\n8\n301\n335\n3.54\n3.57\n\n\n21.4\n4\n121\n109\n4.11\n2.78"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.-3",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.-3",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\n\nTesting\n\nh_a_t &lt;- head_and_tail(mtcars[,1:5], n = 2)"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.-4",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#head_and_tail-cont.-4",
    "title": "Very Short Intro to R",
    "section": "Head_and_tail cont.",
    "text": "Head_and_tail cont.\n\nh_a_t\n\n\n\n\nmpg\ncyl\ndisp\nhp\ndrat\n\n\nHead\nHead\nHead\nHead\nHead\n\n\n21\n6\n160\n110\n3.9\n\n\n21\n6\n160\n110\n3.9\n\n\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n*-*-*\n\n\nTail\nTail\nTail\nTail\nTail\n\n\n15\n8\n301\n335\n3.54\n\n\n21.4\n4\n121\n109\n4.11"
  },
  {
    "objectID": "introduction/very-short-intro-r/very-short-intro-r-document.html#want-to-learn-more-classic-r",
    "href": "introduction/very-short-intro-r/very-short-intro-r-document.html#want-to-learn-more-classic-r",
    "title": "Very Short Intro to R",
    "section": "Want to learn more classic R?",
    "text": "Want to learn more classic R?\n\nTry the Tutorials in upper right pane\nTry the Introduction chapter in Using R for Introductory Econometrics\nSee section 2 in Big Book of R\nR for everyone: Advanced Analytics and Graphics, 2nd Edition av Jared P. Lander"
  },
  {
    "objectID": "introduction/reg-tables/reg-tables.html",
    "href": "introduction/reg-tables/reg-tables.html",
    "title": "Regression Tables",
    "section": "",
    "text": "library(huxtable)\n\nA short example illustrating the use of regresssion tables.\n\nsummary(mtcars)\n\n      mpg             cyl             disp             hp       \n Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  \n 1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  \n Median :19.20   Median :6.000   Median :196.3   Median :123.0  \n Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  \n 3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  \n Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  \n      drat             wt             qsec             vs        \n Min.   :2.760   Min.   :1.513   Min.   :14.50   Min.   :0.0000  \n 1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   1st Qu.:0.0000  \n Median :3.695   Median :3.325   Median :17.71   Median :0.0000  \n Mean   :3.597   Mean   :3.217   Mean   :17.85   Mean   :0.4375  \n 3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90   3rd Qu.:1.0000  \n Max.   :4.930   Max.   :5.424   Max.   :22.90   Max.   :1.0000  \n       am              gear            carb      \n Min.   :0.0000   Min.   :3.000   Min.   :1.000  \n 1st Qu.:0.0000   1st Qu.:3.000   1st Qu.:2.000  \n Median :0.0000   Median :4.000   Median :2.000  \n Mean   :0.4062   Mean   :3.688   Mean   :2.812  \n 3rd Qu.:1.0000   3rd Qu.:4.000   3rd Qu.:4.000  \n Max.   :1.0000   Max.   :5.000   Max.   :8.000  \n\n\n\nlm1 &lt;- lm(mpg ~ cyl, data = mtcars)\nlm2 &lt;- lm(mpg ~ cyl + disp + hp, data = mtcars)\nlm3 &lt;- lm(mpg ~ disp + gear + carb + am, data = mtcars)\n\n\nhuxreg(lm1, lm2, lm3)\n\n\n\n\n\n(1)\n(2)\n(3)\n\n\n(Intercept)\n37.885 ***\n34.185 ***\n23.319 ***\n\n\n\n(2.074)   \n(2.591)   \n(4.626)   \n\n\ncyl\n-2.876 ***\n-1.227    \n        \n\n\n\n(0.322)   \n(0.797)   \n        \n\n\ndisp\n        \n-0.019    \n-0.022 ** \n\n\n\n        \n(0.010)   \n(0.006)   \n\n\nhp\n        \n-0.015    \n        \n\n\n\n        \n(0.015)   \n        \n\n\ngear\n        \n        \n1.431    \n\n\n\n        \n        \n(1.289)   \n\n\ncarb\n        \n        \n-1.622 ***\n\n\n\n        \n        \n(0.417)   \n\n\nam\n        \n        \n2.669    \n\n\n\n        \n        \n(1.631)   \n\n\nN\n32        \n32        \n32        \n\n\nR2\n0.726    \n0.768    \n0.836    \n\n\nlogLik\n-81.653    \n-79.009    \n-73.473    \n\n\nAIC\n169.306    \n168.018    \n158.946    \n\n\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05.\n\n\n\n\n\n\n\n\nhuxreg(\n        lm1, lm2, lm3, \n        error_format = \"[{statistic}]\", \n        note         = \"{stars}. T statistics in brackets.\"\n      )\n\n\n\n\n\n(1)\n(2)\n(3)\n\n\n(Intercept)\n37.885 ***\n34.185 ***\n23.319 ***\n\n\n\n[18.268]   \n[13.195]   \n[5.041]   \n\n\ncyl\n-2.876 ***\n-1.227    \n        \n\n\n\n[-8.920]   \n[-1.540]   \n        \n\n\ndisp\n        \n-0.019    \n-0.022 ** \n\n\n\n        \n[-1.811]   \n[-3.439]   \n\n\nhp\n        \n-0.015    \n        \n\n\n\n        \n[-1.002]   \n        \n\n\ngear\n        \n        \n1.431    \n\n\n\n        \n        \n[1.109]   \n\n\ncarb\n        \n        \n-1.622 ***\n\n\n\n        \n        \n[-3.888]   \n\n\nam\n        \n        \n2.669    \n\n\n\n        \n        \n[1.636]   \n\n\nN\n32        \n32        \n32        \n\n\nR2\n0.726    \n0.768    \n0.836    \n\n\nlogLik\n-81.653    \n-79.009    \n-73.473    \n\n\nAIC\n169.306    \n168.018    \n158.946    \n\n\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05. T statistics in brackets.\n\n\n\n\n\n\n\nSuppose that we discover that the observations number 4 to 6, 13 and 17 should not be included.\n\nlm1_red &lt;- lm(mpg ~ cyl, data = mtcars[-c(4:6, 13, 17), ])\nlm2_red &lt;- lm(mpg ~ cyl + disp + hp, data = mtcars[-c(4:6, 13, 17), ])\nlm3_red &lt;- lm(mpg ~ disp + gear + carb + am, data = mtcars[-c(4:6, 13, 17), ])\n\n\nhuxreg(\n        lm1_red, lm2_red, lm3_red, \n        error_format = \"[{statistic}]\", \n        note         = \"{stars}. T statistics in brackets.\"\n      )\n\n\n\n\n\n(1)\n(2)\n(3)\n\n\n(Intercept)\n38.552 ***\n34.420 ***\n23.702 ***\n\n\n\n[17.294]   \n[12.171]   \n[4.915]   \n\n\ncyl\n-3.014 ***\n-1.202    \n        \n\n\n\n[-8.470]   \n[-1.345]   \n        \n\n\ndisp\n        \n-0.022    \n-0.025 ** \n\n\n\n        \n[-1.888]   \n[-3.674]   \n\n\nhp\n        \n-0.013    \n        \n\n\n\n        \n[-0.822]   \n        \n\n\ngear\n        \n        \n1.473    \n\n\n\n        \n        \n[1.106]   \n\n\ncarb\n        \n        \n-1.595 ** \n\n\n\n        \n        \n[-3.575]   \n\n\nam\n        \n        \n2.469    \n\n\n\n        \n        \n[1.475]   \n\n\nN\n27        \n27        \n27        \n\n\nR2\n0.742    \n0.787    \n0.855    \n\n\nlogLik\n-69.814    \n-67.222    \n-62.020    \n\n\nAIC\n145.627    \n144.443    \n136.040    \n\n\n*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05. T statistics in brackets.\n\n\n\n\n\n\n\n\n#siste"
  },
  {
    "objectID": "introduction/s-d-d/cite.html",
    "href": "introduction/s-d-d/cite.html",
    "title": "Citations in R Notebooks",
    "section": "",
    "text": "The ideas of Gentleman and Temple Lang (2003), which were implemented by Gentleman (2005) when parts of Golub et al. (1999) was reproduced as a compendium (Gentleman and Temple Lang, 2003), i.e. reproducible research. The RStudio Team (2020) implementation of R Notebookis a modern implementation of the same basic ideas. R Notebooks achieves this by using the R Core Team (2020) packages knitr(Xie, 2014) and rmarkdown (Allaire et al., 2020). The process is documented in Xie (2015), Xie (2020), Xie et al. (2018) and Wickham and Grolemund (2016). R Notebooks support mathematical typesetting via $$, see (Lamport, 1986) and also (knuth1986texbook?), and can be converted to different output formats with the help of Pandoc (Pandoc - Pandoc User’s Guide, n.d.).\nFuther tips might be found in Tierney (n.d.)."
  },
  {
    "objectID": "introduction/s-d-d/cite.html#what-we-want-to-accomplish",
    "href": "introduction/s-d-d/cite.html#what-we-want-to-accomplish",
    "title": "Citations in R Notebooks",
    "section": "",
    "text": "The ideas of Gentleman and Temple Lang (2003), which were implemented by Gentleman (2005) when parts of Golub et al. (1999) was reproduced as a compendium (Gentleman and Temple Lang, 2003), i.e. reproducible research. The RStudio Team (2020) implementation of R Notebookis a modern implementation of the same basic ideas. R Notebooks achieves this by using the R Core Team (2020) packages knitr(Xie, 2014) and rmarkdown (Allaire et al., 2020). The process is documented in Xie (2015), Xie (2020), Xie et al. (2018) and Wickham and Grolemund (2016). R Notebooks support mathematical typesetting via $$, see (Lamport, 1986) and also (knuth1986texbook?), and can be converted to different output formats with the help of Pandoc (Pandoc - Pandoc User’s Guide, n.d.).\nFuther tips might be found in Tierney (n.d.)."
  },
  {
    "objectID": "introduction/s-d-d/cite.html#references",
    "href": "introduction/s-d-d/cite.html#references",
    "title": "Citations in R Notebooks",
    "section": "References",
    "text": "References\n\n\nAllaire, J., Xie, Y., McPherson, J., Luraschi, J., Ushey, K., Atkins, A., Wickham, H., Cheng, J., Chang, W., and Iannone, R. (2020). Rmarkdown: Dynamic documents for r. https://github.com/rstudio/rmarkdown\n\n\nGentleman, R. (2005). Reproducible Research: A Bioinformatics Case Study. Statistical Applications in Genetics and Molecular Biology, 4(1). https://doi.org/10.2202/1544-6115.1034\n\n\nGentleman, R., and Temple Lang, D. (2003). Statistical Analyses and Reproducible Research. Journal of Computational and Graphical Statistics, 16(1), 1–23. https://doi.org/10.1198/106186007X178663\n\n\nGolub, T. R., Slonim, D. K., Tamayo, P., Huard, C., Gaasenbeek, M., Mesirov, J. P., Coller, H., Loh, M., Downing, J. R., Caligiuri, M., Bloomfield, C., and Lander, E. (1999). Molecular classification of cancer: Class discovery and class prediction by gene monitoring. Science (New York, N.Y.), 286, 531–537.\n\n\nLamport, L. (1986). LATEX: A document preparation system (pp. XIV, 242). Addison-Wesley.\n\n\nPandoc - Pandoc User’s Guide. (n.d.). Retrieved March 10, 2020, from https://pandoc.org/MANUAL.html\n\n\nR Core Team. (2020). R: A language and environment for statistical computing. R Foundation for Statistical Computing. https://www.R-project.org/\n\n\nRStudio Team. (2020). RStudio: Integrated development environment for r. RStudio, PBC. http://www.rstudio.com/\n\n\nTierney, N. (n.d.). RMarkdown for Scientists. Retrieved August 23, 2020, from https://rmd4sci.njtierney.com/\n\n\nWickham, H., and Grolemund, G. (2016). R for data science: Import, tidy, transform, visualize, and model data (pp. XXV, 492). O’Reilly.\n\n\nXie, Y. (2014). Knitr: A comprehensive tool for reproducible research in R. In V. Stodden, F. Leisch, and R. D. Peng (Eds.), Implementing reproducible computational research. Chapman and Hall/CRC. http://www.crcpress.com/product/isbn/9781466561595\n\n\nXie, Y. (2015). Dynamic documents with R and knitr (2nd ed.). Chapman and Hall/CRC. https://yihui.org/knitr/\n\n\nXie, Y. (2020). Knitr: A general-purpose package for dynamic report generation in r. https://yihui.org/knitr/\n\n\nXie, Y., Allaire, J. J., and Grolemund, G. (2018). R markdown: The definitive guide. Chapman and Hall/CRC. https://bookdown.org/yihui/rmarkdown"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#where-to-get-more-informations",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#where-to-get-more-informations",
    "title": "Structured Dynamic Documents",
    "section": "Where to get more informations",
    "text": "Where to get more informations\n\nr4ds\nMarkdown\nHelp menu in RStudio\nR Markdown Reference Guide\nR Markdown Cheat Sheet (se Help menyen i RStudio )"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-short-repetition",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-short-repetition",
    "title": "Structured Dynamic Documents",
    "section": "Our Tools, short repetition",
    "text": "Our Tools, short repetition\n\nR, a statistical programming language (free implementation of the language S)\nThe “Lingua Franca” of the statisticians\n\n15000+ packages\nNew tests/routines often début as R packages\nr tutorials\n\nBuilt in tutorials (install package learnr)\n\n\nEspecially relevant packages for us:\n\nknitr\nRMarkdown\nGGplot2\nThe tidyverse packages\nLater on: sp* and sf* packages to handle spatial data"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.",
    "title": "Structured Dynamic Documents",
    "section": "Our Tools cont.",
    "text": "Our Tools cont.\n\nRStudio (Free version, no official support)\nRStudio is an IDE (Integrated Developer Environment) for all thing R related\nCross platform (mac, windows, linux)"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.-1",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.-1",
    "title": "Structured Dynamic Documents",
    "section": "Our Tools cont.",
    "text": "Our Tools cont.\n\n\n\n\n\nRSudion IDE (alt click to zoom)\n\n\n\n\nUpper left: Editor\nLower left: Console and Terminal\nUpper right: History, Environment, git and (from version 1.3) Tutorials.\nLower right: Files, Plots, Packages and Help"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.-2",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.-2",
    "title": "Structured Dynamic Documents",
    "section": "Our Tools cont.",
    "text": "Our Tools cont.\n\n\\(\\LaTeX\\) (se kap. 3 for matte), used for math support in pdf, html and docx documents, ex. $$\\sum_{i=1}^I x_i$$ gives a display equation like \\[\\sum_{i=1}^I x_i\\].\nWhile $\\sum_{i=1}^I x_i$ gives us an in-line equation like \\(\\sum_{i=1}^I x_i\\)."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.-3",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.-3",
    "title": "Structured Dynamic Documents",
    "section": "Our Tools cont.",
    "text": "Our Tools cont.\n\nWe can also do something more fancy like $$\\forall x \\in \\mathbf{R}:\\qquad x^{2} \\geq 0$$\n\\[\\forall x \\in \\mathbf{R}:\\qquad x^{2} \\geq 0\\]\nor $$\\mathbf{X} = \\left(\\begin{array}{ccc}x_1 & x_2 & \\ldots \\\\ x_3 & x_4 & \\ldots \\\\ \\vdots & \\vdots & \\ddots \\end{array} \\right)$$\n\\[\\mathbf{X} = \\left(\n     \\begin{array}{ccc}x_1 & x_2 & \\ldots \\\\ x_3 & x_4 & \\ldots \\\\ \\vdots & \\vdots & \\ddots \\end{array}\n     \\right)\\]"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.-4",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#our-tools-cont.-4",
    "title": "Structured Dynamic Documents",
    "section": "Our Tools cont.",
    "text": "Our Tools cont.\n\npandoc; works in the background and converts Markdown to different formats pdf(via latex), docx, html etc.\nPandoc is quite good at converting latex formulas, even into MS Word formulas.\nNow we are changing to Quarto (the new Pandoc) that will be even better.\nZotero; helps with gathering (Zotero connector) and building collection of references.\nMac: Use Firefox or Chrome as browser. Support for Safari returning autumn 2020\nMac: Zotero 6 has built in Safari support. (You will have to enable the plugin under Valg/Preferences)"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#why-markdown",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#why-markdown",
    "title": "Structured Dynamic Documents",
    "section": "Why Markdown?",
    "text": "Why Markdown?\n\nEasy to learn (manual 3-4 pages)\nFlexible, can easily be converted into other formats like pdf (via latex), docx (MS Word), html etc.\nCross platform (mac, windows, Linux)\nPlain text, facilitates use of distributed version control systems (support for git/github in RStudio)\nPlain text, resilient with regard to technological change (plain text formats are more robust than binary formats)"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#why-rmarkdown-cont.",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#why-rmarkdown-cont.",
    "title": "Structured Dynamic Documents",
    "section": "Why RMarkdown? cont.",
    "text": "Why RMarkdown? cont.\n\nRMarkdown is Markdown with support for R code (via knitr).\nRmarkdown documents can include R code (“statistics”) that is executed.\n\nPlots\nTables\nModels\nTests\n\nknitr takes the R code and output and convert it to markdown automagically.\nReproducible research (“The Golden Standard”)."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#examples-rmarkdown",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#examples-rmarkdown",
    "title": "Structured Dynamic Documents",
    "section": "Examples Rmarkdown",
    "text": "Examples Rmarkdown\n\nWriting R-code in Rmarkdown documents.\nWe write in-line code as `r set.seed(1234); round(rnorm(3),3)`\nwhich will give us -1.207, 0.277, 1.084 in the text.\nalt+cmd+i (mac) or alt+ctrl+i (pc) insert an empty R code chunck\n\n\nRMarkdown code chunk"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#example-rmarkdown",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#example-rmarkdown",
    "title": "Structured Dynamic Documents",
    "section": "Example Rmarkdown",
    "text": "Example Rmarkdown\n\n\nCode\nhead(cars, n = 3)\n\n\n  speed dist\n1     4    2\n2     4   10\n3     7    4\n\n\nCode\n# mai is a Graphical Parameter that specifies margin sizes in inches\n# here all 4 set to 0. Do ?par in Console to see details.\nplot(cars, mai = c(rep(4, 0)))"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#example-quarto",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#example-quarto",
    "title": "Structured Dynamic Documents",
    "section": "Example Quarto",
    "text": "Example Quarto\n\n\n\n\nCode\nhead(cars, n = 3)\n\n\n  speed dist\n1     4    2\n2     4   10\n3     7    4\n\n\nCode\n# mai is a Graphical Parameter that \n# specifies margin sizes in inches\n# here all 4 set to 0. Do ?par in \n# Console to see details.\nplot(cars, mai = c(rep(4, 0)))\n\n\n\n\n\nHead of cars, and a plot\n\n\n\n\n\n\n\n\nQuarto r code\n\n\n\nQuarto specifies chunk options in an alternative format.\nThe Rmarkdown way still works.\nPlease note true (lowecase) not TRUE after echo in Quarto alternative."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#what-happened-here",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#what-happened-here",
    "title": "Structured Dynamic Documents",
    "section": "What happened here?",
    "text": "What happened here?\n\nR was first run on the R code parts of our document\nThe package knitr converted the code and the results into pure Markdown chunks\nEach chunk was then inserted into the Markdown document to replace R-code and output\nThe resulting pure Markdown document was then converted to html (or .docx, .pdf, .rtf etc.) by pandoc.\nSimilar process for Quarto, but then Quarto instead of Pandoc."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#what-happened-here-1",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#what-happened-here-1",
    "title": "Structured Dynamic Documents",
    "section": "What happened here?",
    "text": "What happened here?\n\n\nFrom the .md (Markdown) file:\n\n\n\nSome markdown text.\n\n\n\nRemember that ```code``` is set as code in Markup\nAgain: knitr picks out the R-code in our RMarkdown document. It then runs the code through R and return the code (if echo=TRUE) and the output as Markdown text. This Markdown text is inserted into the RMarkdown document and replaces the R-code. Hence we end up with a pure Markdown document. This Markdown document is then in turn converted by pandoc into the format we want, i.e. html (default), pfd (via latex), MS Word etc.."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#structure-of-r-notebooks",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#structure-of-r-notebooks",
    "title": "Structured Dynamic Documents",
    "section": "Structure of R Notebooks",
    "text": "Structure of R Notebooks\n\nstructured document"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#structure-of-r-notebooks-1",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#structure-of-r-notebooks-1",
    "title": "Structured Dynamic Documents",
    "section": "Structure of R Notebooks",
    "text": "Structure of R Notebooks\n\nCode chunck missing previous slide\ncan turn on/off: include, eval, cache, echo etc.\nvery flexible"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#important-chunck-options",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#important-chunck-options",
    "title": "Structured Dynamic Documents",
    "section": "Important chunck options",
    "text": "Important chunck options\n\n\nRMarkdown\n\nSee rmarkdown cookbook chap. 11 for more chunk options.\ncache=TRUE/FALSE Turn on/off cache\neval=TRUE/FALSE Evalualte R code, or not\necho=TRUE/FALSE Show R code, or not\nfig.width: 6 Width of figure\nfig.height: 6 Height of figure\n\n\nQuarto\n\nSee Quarto documentation for more chunk options. RStudio provides auto completion. Start with writing the first characters, for instance fig-, and you will get a list of options that starts with fig-.\n#| cache: true/false Turn on/off cache\n#| eval: true/false Evalualte R code, or not\n#| echo: true/false Show R code, or not\n#| fig-width=6 Width of figure\n#| fig-height=6 Height of figure"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-code-style-guide",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-code-style-guide",
    "title": "Structured Dynamic Documents",
    "section": "R code style guide",
    "text": "R code style guide\n\nWe will have to write some R code\nBest way to avoid bad habits …\n\nis to never acquire them in the first place\n\nhence we use tidyverse style guide (tidyverse style guide)\nRstudio has integrated support for tidyverse style and will indicate when we err.\n\nImportant to set the Preferences… correctly . Home work to next time.\n\nAdditional help from the AddIn styler (install the styler package to get the add-in)"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#rcode-style-guide",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#rcode-style-guide",
    "title": "Structured Dynamic Documents",
    "section": "Rcode style guide",
    "text": "Rcode style guide\n\ninstall.packages(\"styler\")\nStyler is a package that installs an add-in that makes it easy to style code according to tidyverse style guide\nWhen we have written some R-code, that could do with some styling, we first select the code and then select Style selction from the Addins drop-down menu."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#add-in-in-rstudio",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#add-in-in-rstudio",
    "title": "Structured Dynamic Documents",
    "section": "Add-in in Rstudio",
    "text": "Add-in in Rstudio\n\n\n\n\nAddins menu\n\n\nWhat’s in the Addins menu will depend on the packages we have installed."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook",
    "title": "Structured Dynamic Documents",
    "section": "R Notebook",
    "text": "R Notebook\n\nR Notebook &gt; - Everything, results, plots, warnings etc., will be in the Notebook &gt; - Working directory is the same as the directory where the Notebookis placed. &gt; - markdown + code in code chunks &gt; - Support for citations and references? &gt; - Quite good, but not everything is well documented\nWe will use Quarto Documents … or Quarto Presentations …"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook-empty",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook-empty",
    "title": "Structured Dynamic Documents",
    "section": "R Notebook; empty",
    "text": "R Notebook; empty\n\nnothing-defined"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook-getwd",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook-getwd",
    "title": "Structured Dynamic Documents",
    "section": "R Notebook; getwd",
    "text": "R Notebook; getwd\n\ngetwd"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook-y-defined-in-console",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook-y-defined-in-console",
    "title": "Structured Dynamic Documents",
    "section": "R Notebook; y-defined in console",
    "text": "R Notebook; y-defined in console\n\ny-defined-in-console"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook-run-all-above",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#r-notebook-run-all-above",
    "title": "Structured Dynamic Documents",
    "section": "R Notebook; run-all-above",
    "text": "R Notebook; run-all-above\n\nrun-all-above"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#spesielt-for-r-notebooksquarto-documentspresentations",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#spesielt-for-r-notebooksquarto-documentspresentations",
    "title": "Structured Dynamic Documents",
    "section": "Spesielt for R Notebooks/Quarto documents/presentations",
    "text": "Spesielt for R Notebooks/Quarto documents/presentations\n\nWorking directory er mappen som R Notebook-en ligger i. I tillegg vil også output fra kommandoene og ting som warnings havner i selve notebook-en.\nSamme gjelder for Quarto dokumenter/presentasjoner.\nFor detaljer er R Markdown: The Definitive Guide kap. 3.2 en god kilde."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#spesielt-for-r-notebooksquarto-documentspresentations-fortsettelse",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#spesielt-for-r-notebooksquarto-documentspresentations-fortsettelse",
    "title": "Structured Dynamic Documents",
    "section": "Spesielt for R Notebooks/Quarto documents/presentations fortsettelse",
    "text": "Spesielt for R Notebooks/Quarto documents/presentations fortsettelse\n\n\nCode\n# Do not run this\n# Do not do this in R Notebooks you share with others. Rude!\nrm(list = ls())\n# ls() is OK\nls()\n\n\n\n\nCode\ngetwd()\n\n\n[1] \"/Users/ag/Dev/QQ_MSB105/introduction/s-d-d\""
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#spesielt-for-r-notebooksquarto-documentspresentations-fortsettelse-1",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#spesielt-for-r-notebooksquarto-documentspresentations-fortsettelse-1",
    "title": "Structured Dynamic Documents",
    "section": "Spesielt for R Notebooks/Quarto documents/presentations fortsettelse",
    "text": "Spesielt for R Notebooks/Quarto documents/presentations fortsettelse\n\n\nCode\n(x &lt;- 1:3)\n\n\n[1] 1 2 3\n\n\n\n\nCode\ny"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#from-console",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#from-console",
    "title": "Structured Dynamic Documents",
    "section": "From Console",
    "text": "From Console\n\nFrom Console"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#in-r-chunck",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#in-r-chunck",
    "title": "Structured Dynamic Documents",
    "section": "In R chunck",
    "text": "In R chunck\n\n\nCode\n#Gives problem when we try to compile document\n#y\n\n\n\n\nCode\n#Have to define it in document\ny &lt;- 2\n\n\n\n\nCode\nx + y\n\n\n[1] 3 4 5\n\n\n\nThings defined in Console available in Quarto document (but not reproducible).\nThings defined in Console not available in Quarto document when we try to render.\nThings evaluated in Quarto available in Console."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#citations",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#citations",
    "title": "Structured Dynamic Documents",
    "section": "Citations",
    "text": "Citations\nWhat we want to accomplish\n---\ntitle: \"Citations in R Notebooks\"\nbibliography: citeRnotebook.bib\ncsl: apa-no-ampersand.csl\noutput: html_notebook\n---\n\n## What we want to accomplish:\n\nThe ideas of @gentleman2003, which were implemented by @gentleman2005 when parts of @golub1999 was reproduced \nas a *compendium* [@gentleman2003], i.e. reproducible\nresearch. The @rstudioteam2020 implementation of `R\nNotebook`is a modern ...[snip]\n## References\n&lt;div id=\"refs\"&gt;&lt;/div&gt;\nshould give:"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#citations-csl-apa-no-ampersand.csl",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#citations-csl-apa-no-ampersand.csl",
    "title": "Structured Dynamic Documents",
    "section": "Citations; csl: apa-no-ampersand.csl",
    "text": "Citations; csl: apa-no-ampersand.csl\n\napa-citation"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#citations-csl-elsevier-harvard.csl",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#citations-csl-elsevier-harvard.csl",
    "title": "Structured Dynamic Documents",
    "section": "Citations; csl: elsevier-harvard.csl",
    "text": "Citations; csl: elsevier-harvard.csl\n\nharvard-citation"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#citations-csl-chicagosnip-ibid.csl",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#citations-csl-chicagosnip-ibid.csl",
    "title": "Structured Dynamic Documents",
    "section": "Citations; csl: chicago[snip]-ibid.csl",
    "text": "Citations; csl: chicago[snip]-ibid.csl\n\nchicago-citation"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#pdf-csl-apa-no-ampersand.csl",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#pdf-csl-apa-no-ampersand.csl",
    "title": "Structured Dynamic Documents",
    "section": "pdf; csl: apa-no-ampersand.csl",
    "text": "pdf; csl: apa-no-ampersand.csl\n\napa-citation-pdf-version"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#citation-how-does-it-work",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#citation-how-does-it-work",
    "title": "Structured Dynamic Documents",
    "section": "Citation, how does it work?",
    "text": "Citation, how does it work?\nWe have a .bib file. Trust me, you do not want to do this by hand.\n@book{allaire2020,\n  title = {Rmarkdown: {{Dynamic}} Documents for r},\n  author = {Allaire, JJ and Xie, Yihui and McPherson, Jonathan and Luraschi, Javier and Ushey, Kevin and Atkins, Aron and Wickham, Hadley and Cheng, Joe and Chang, Winston and Iannone, Richard},\n  date = {2020},\n  url = {https://github.com/rstudio/rmarkdown}\n}\n\n@article{almas2012,\n  title = {Norske børshandlede fond : en kvantitativ analyse av fondenes egenskaper},\n  shorttitle = {Norske børshandlede fond},\n  author = {Almås, Pål Jonas Brandåstrø and Andersen, Kristian Peder Mørtvedt},\n  date = {2012},\n  url = {https://openaccess.nhh.no/nhh-xmlui/handle/11250/169733},\n  urldate = {2020-05-07},\n  abstract = {Denne masterutredningen"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#citation-how-does-it-work-1",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#citation-how-does-it-work-1",
    "title": "Structured Dynamic Documents",
    "section": "Citation, how does it work?",
    "text": "Citation, how does it work?\n\ncitekey\nUse the citekey to pull out the info from the .bib file and places it in the reference list. Formated according to the CLS file.\nPut in the citation, also according to CLS file. - Two versions @allaire2020 and [@allaire2020]\nOnly collect the entries we have cited (.bib can be huge and contain all references we have ever collected)\n&lt;div id=\"refs\"&gt;&lt;/div&gt; gives the placement of the reference list. If not given it will be put at the end of the document\nHow do we know the citekeys? The package citr installs a handy RStudio addin. (In later versions of RStudio just use Insert &gt; Citation from the visual menu.)"
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#citation-how-does-it-work-2",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#citation-how-does-it-work-2",
    "title": "Structured Dynamic Documents",
    "section": "Citation, how does it work?",
    "text": "Citation, how does it work?\n\n@ Citation from the Insert menu in Visual mode.\nAddin (citr) not needed any more. Citation now supported by default in RStudio."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#citation-how-to-make-the-.bib-file",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#citation-how-to-make-the-.bib-file",
    "title": "Structured Dynamic Documents",
    "section": "Citation, how to make the .bib file",
    "text": "Citation, how to make the .bib file\n\nZotero\nZotero Connector\nInstall Better bibtex for Zotero &gt; - https://retorque.re/zotero-better-bibtex/\nInstall the citr package\nSupport for citation is now a default feature of RStudio."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#exercise-1",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#exercise-1",
    "title": "Structured Dynamic Documents",
    "section": "Exercise 1",
    "text": "Exercise 1\nWork alone this time so we avoid the problems with syncing via Github.\nWe need to be updated to latest versions of software!\n\nInstall the extensions for Zotero\nFind the article: Tidy Data by Hadley Wickham; Journal of Statistical Software and “harvest” the reference\nGet bib info for the R package Tidyverse\n\nInstall and load (library(tidyverse)) the tidyverse\nIn R Console: print(citation(tidyverse), base=bibtex)\nImport into Zotero: Fil&gt; Importer fra uklippstavle (dvs. fra Fil menyen velg Importer fra uklippstavle)\n\nGet bib info for R. Copy the reference into Zotero\n\nIn R Console: print(citation(), base=bibtex)\n\nFind bib-info for r4ds at Amazon and harvest the reference."
  },
  {
    "objectID": "introduction/s-d-d/Structured-Dynamic-Documents.html#exercise-1-cont.",
    "href": "introduction/s-d-d/Structured-Dynamic-Documents.html#exercise-1-cont.",
    "title": "Structured Dynamic Documents",
    "section": "Exercise 1 cont.",
    "text": "Exercise 1 cont.\n\nMake a new project\nWrite a short text in an R Notebook where you use both versions of citing, (i.e. with and without brackets). Use the 4 sources harvested above.\nUse at least 5 commits\nRemember to write nice commit messages ;-)\nRemember: commit, pull, push\n\n\n\nMSB105"
  },
  {
    "objectID": "introduction/intro/Intro.html#hvem-er-jeg",
    "href": "introduction/intro/Intro.html#hvem-er-jeg",
    "title": "Introduksjon Data Science",
    "section": "Hvem er jeg?",
    "text": "Hvem er jeg?\n\nArnstein Gjestland\nKontor: 4063 (4. etasje mot vest)\nEpost: ag@hvl.no\nGithub nick: agjest"
  },
  {
    "objectID": "introduction/intro/Intro.html#hovedpoeng",
    "href": "introduction/intro/Intro.html#hovedpoeng",
    "title": "Introduksjon Data Science",
    "section": "Hovedpoeng",
    "text": "Hovedpoeng\n\n«Det ingen fortalte oss» eller\n«Det ingen lærte oss»\n80/20 regelen"
  },
  {
    "objectID": "introduction/intro/Intro.html#start",
    "href": "introduction/intro/Intro.html#start",
    "title": "Introduksjon Data Science",
    "section": "Start",
    "text": "Start\n\nHvor mange disponerer en bærbar datamaskin?\n\nPC?\n\nWindows 10?\n\nMac?\n\neldre enn 2010?\n\nAndre?"
  },
  {
    "objectID": "introduction/intro/Intro.html#start-forts.",
    "href": "introduction/intro/Intro.html#start-forts.",
    "title": "Introduksjon Data Science",
    "section": "Start forts.",
    "text": "Start forts.\n\nVi kommer til å ta som utgangspunkt at dere disponerer en bærbar datamaskin som vi kan installere programvare på.\n\nAdministratorrettigheter\nOppdatert til siste gratis tilgjengelige systemversjon\n30 GB ledig diskkapasitet"
  },
  {
    "objectID": "introduction/intro/Intro.html#start-forts.-1",
    "href": "introduction/intro/Intro.html#start-forts.-1",
    "title": "Introduksjon Data Science",
    "section": "Start forts.",
    "text": "Start forts.\n\nNoen som har erfaring med programmering?\n\nR?\nAndre språk?\n\nNoen som har erfaring med versjonskontroll?\n\ngit?\nsvn?\n\nNoen som har erfaring med kommandolinje/terminal?\nNoen som har erfaring med unix/linux?"
  },
  {
    "objectID": "introduction/intro/Intro.html#pensum",
    "href": "introduction/intro/Intro.html#pensum",
    "title": "Introduksjon Data Science",
    "section": "Pensum",
    "text": "Pensum\n\nPensum\n\nPensumbok: R for Data Science Garrett Grolemund og Hadley Wickham.\n\nStøttelitteratur\n\nPapir\n\nR for everyone: Advanced Analytics and Graphics, 2nd Edition av Jared P. Lander"
  },
  {
    "objectID": "introduction/intro/Intro.html#pensum-forts.",
    "href": "introduction/intro/Intro.html#pensum-forts.",
    "title": "Introduksjon Data Science",
    "section": "Pensum forts.",
    "text": "Pensum forts.\n\nStøttelitteratur på nettet\n\nBeginner’s guide to R\nSTAT 545; Data wrangling, exploration, and analysis with R\nHappy Git and GitHub for the useR\nR Markdown: The Definitive Guide\nR Markdown Cookbook (juli\n\n\n\nModernDive (infer pakken og bootstrapping)\nPro Git\nBig Book of R"
  },
  {
    "objectID": "introduction/intro/Intro.html#temaer-i-kurset",
    "href": "introduction/intro/Intro.html#temaer-i-kurset",
    "title": "Introduksjon Data Science",
    "section": "Temaer i kurset",
    "text": "Temaer i kurset\n\nHovedtema\n\nReplikerbarhet/Reproduserbarhet\n\nQuarto Document\n\nTidligere: R Notebook, notebook med rmarkdown for reproduserbarhet\n\nFornøyd hvis vi klarer reproduserbarhet\nNødvendig betingelse for replikerbarhet\n\nKrangling med data («data wrangling»)\n\nFra rådata til ryddige («tidy») data.\nTidyverse"
  },
  {
    "objectID": "introduction/intro/Intro.html#temaer-i-kurset-1",
    "href": "introduction/intro/Intro.html#temaer-i-kurset-1",
    "title": "Introduksjon Data Science",
    "section": "Temaer i kurset",
    "text": "Temaer i kurset\nAndre tema:\n\nPresentasjon av data\n\nggplot2\n\nVersjonskontroll\n\ngit\nGithub\n\nMer kompliserte datastrukturer\n\nlist-columns in dataframe\n\nModeller til tidy data (broom)"
  },
  {
    "objectID": "introduction/intro/Intro.html#nærmere-om-rmarkdown",
    "href": "introduction/intro/Intro.html#nærmere-om-rmarkdown",
    "title": "Introduksjon Data Science",
    "section": "Nærmere om Rmarkdown",
    "text": "Nærmere om Rmarkdown\n\nTo foregående år:\n\nSøkte å oppnå reproduserbarhet vha. R Notebook (Rmarkdown Notebook).\nI versjon 1.4 har RStudio fått «Visual Rmarkdown» funksjonalitet\nKan skifte mellom nesten “WYSIWYG” og markup mode\n\nI år:\n\nFra versjon RStudio 2022.07.1+554 “Spotted Wakerobin” har vi tilgang til Quarto (neste vesjon av R Markdown dokumenter) som vi vil bruke.\nMer solid, også support for andre språk som python og julia\nQuarto Documents har endelsen .qmd"
  },
  {
    "objectID": "introduction/intro/Intro.html#r-notebooks-kildekode-r-markdown",
    "href": "introduction/intro/Intro.html#r-notebooks-kildekode-r-markdown",
    "title": "Introduksjon Data Science",
    "section": "R Notebooks (Kildekode R Markdown)",
    "text": "R Notebooks (Kildekode R Markdown)\n\n\nCode\nknitr::include_graphics(\"eks-rmd.png\")\n\n\n\n\n\n\n\n\necho true in R Notebook"
  },
  {
    "objectID": "introduction/intro/Intro.html#quarto-document-kildekode-r-markdown",
    "href": "introduction/intro/Intro.html#quarto-document-kildekode-r-markdown",
    "title": "Introduksjon Data Science",
    "section": "Quarto Document (Kildekode R Markdown)",
    "text": "Quarto Document (Kildekode R Markdown)\n\n\nCode\nknitr::include_graphics(\"eks-rmd.png\")\n\n\n\n\n\n\n\n\necho true in Quarto Document (R Notebook way still works)"
  },
  {
    "objectID": "introduction/intro/Intro.html#kildekode-r-markdown",
    "href": "introduction/intro/Intro.html#kildekode-r-markdown",
    "title": "Introduksjon Data Science",
    "section": "Kildekode R Markdown",
    "text": "Kildekode R Markdown\n\nR Markdown = markdown + R\nR Notebook = markdown + chunks med R kode som kan evalueres\nChunk-ene kan kjøres i vilkårlig rekkefølge\nKjenner bare objekter definert i dokumentet\nResultatet kommer i R Notebook"
  },
  {
    "objectID": "introduction/intro/Intro.html#resultat-html-1",
    "href": "introduction/intro/Intro.html#resultat-html-1",
    "title": "Introduksjon Data Science",
    "section": "Resultat, html 1",
    "text": "Resultat, html 1"
  },
  {
    "objectID": "introduction/intro/Intro.html#resultat-html-2",
    "href": "introduction/intro/Intro.html#resultat-html-2",
    "title": "Introduksjon Data Science",
    "section": "Resultat, html 2",
    "text": "Resultat, html 2"
  },
  {
    "objectID": "introduction/intro/Intro.html#konvertert-til-nb.html",
    "href": "introduction/intro/Intro.html#konvertert-til-nb.html",
    "title": "Introduksjon Data Science",
    "section": "Konvertert til nb.html",
    "text": "Konvertert til nb.html\n\n\n\n\n\n\nhtml dokument; kan åpnes i alle nettlesere\nSå vidt jeg kan se genererer ikke Quarto nb.html filer.\n\nBlitt litt overflødig nå når vi ha Visual mode for .qmd filer"
  },
  {
    "objectID": "introduction/intro/Intro.html#konvertert-til-nb.html-1",
    "href": "introduction/intro/Intro.html#konvertert-til-nb.html-1",
    "title": "Introduksjon Data Science",
    "section": "Konvertert til nb.html",
    "text": "Konvertert til nb.html\n\nnb.html er ikke bare html. Inneholder ekstra opplysninger\nKan sende nb.html filen til andre og når de åpner denne i Rstudio vil de ha samme notebook som oss.\n\nNå vil vi heller bare legge ved link til .qmd filen, eventuelt med editor: visual angitt i YAML."
  },
  {
    "objectID": "introduction/intro/Intro.html#konvertert-til-pdf",
    "href": "introduction/intro/Intro.html#konvertert-til-pdf",
    "title": "Introduksjon Data Science",
    "section": "Konvertert til pdf",
    "text": "Konvertert til pdf\n\n\n\n\n\n\nKonverterer først til LaTeX"
  },
  {
    "objectID": "introduction/intro/Intro.html#konvertert-til-pdf-1",
    "href": "introduction/intro/Intro.html#konvertert-til-pdf-1",
    "title": "Introduksjon Data Science",
    "section": "Konvertert til pdf",
    "text": "Konvertert til pdf\n\nLaTeX filen blir så kjørt gjennom pdflatex eller xelatex\npdf-filen er altså utdata fra LaTeX\nLaTeX er et typografisk system populært for akademiske arbeider; særlig de som inneholder mye matematikk"
  },
  {
    "objectID": "introduction/intro/Intro.html#konvertert-til-docx-word",
    "href": "introduction/intro/Intro.html#konvertert-til-docx-word",
    "title": "Introduksjon Data Science",
    "section": "Konvertert til docx (Word)",
    "text": "Konvertert til docx (Word)\n\n\n\n\n\n\nPopulært blant dem som ikke vet bedre ;-)"
  },
  {
    "objectID": "introduction/intro/Intro.html#konvertert-til-docx-word-1",
    "href": "introduction/intro/Intro.html#konvertert-til-docx-word-1",
    "title": "Introduksjon Data Science",
    "section": "Konvertert til docx (Word)",
    "text": "Konvertert til docx (Word)\n\nModerne versjoner av Word er blitt mye bedre\nMatematikk blir konvertert til formler som er editerbare i Word (ikke bilder)"
  },
  {
    "objectID": "introduction/intro/Intro.html#ønsket-format-rmarkdown",
    "href": "introduction/intro/Intro.html#ønsket-format-rmarkdown",
    "title": "Introduksjon Data Science",
    "section": "Ønsket format Rmarkdown",
    "text": "Ønsket format Rmarkdown\n\nVelg format fra knitr menyen.\n\nVi velger ønsket format vha. knitr menyen."
  },
  {
    "objectID": "introduction/intro/Intro.html#ønsket-format-quarto-dokument",
    "href": "introduction/intro/Intro.html#ønsket-format-quarto-dokument",
    "title": "Introduksjon Data Science",
    "section": "Ønsket format Quarto dokument",
    "text": "Ønsket format Quarto dokument\n\nKlikk Render knappen. Hvis vi har definert flere format (pdf. html, docx) i YAML vil vi se en liten drop-down meny til høyre for Render kappen. Her kan vi velge hvilket format vi ønsker å «rendre» til.\nMed Quarto velger vi Render fra ikon-linjen øverst i editoren (øvre venstre «pane»)."
  },
  {
    "objectID": "introduction/intro/Intro.html#ønsket-format",
    "href": "introduction/intro/Intro.html#ønsket-format",
    "title": "Introduksjon Data Science",
    "section": "Ønsket format",
    "text": "Ønsket format\n\nDokumentformatene .pdf, .html og .docx er de mest relevante alternativene\nDet er også mulighet for å generere rapporter vha. en mal og parametre.\nFor en presentasjon ville vi hatt andre alternativer (som Powerpoint) og revealjs. Ønsket format blir angitt i YAML, f.eks. format: revealjs.\n\n\n\nMSB105"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#loading-some-r-libraries",
    "href": "introduction/undervisningsplan/undervisningsplan.html#loading-some-r-libraries",
    "title": "Undervisningsplan",
    "section": "Loading some R libraries",
    "text": "Loading some R libraries\n\n\nCode\nlibrary(tidyverse)\nlibrary(readr)"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#oppstart",
    "href": "introduction/undervisningsplan/undervisningsplan.html#oppstart",
    "title": "Undervisningsplan",
    "section": "Oppstart",
    "text": "Oppstart\n\nSvært intensivt i starten.\nVi må ha lært en del R før André starter med økonometri.\nDe mer utfordrene tingene kommer mot slutten av kurset. Da kjører vi med redusert fart."
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset",
    "href": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset",
    "title": "Undervisningsplan",
    "section": "Opplegg for kurset",
    "text": "Opplegg for kurset\n\nIngen eksamen, bestått/ikke bestått ut fra produksjon undervegs\nJevnlig mindre prosjekt som skal skrives og leveres\n\nGrupper på 2.\n\nSamarbeid vha. versjonskontrollsystem; git og Github\n\nIkke godt nok; tilbakemelding med sjanse til å forbedre\n\nFremdeles ikke godt nok, ny oppgave med kort frist (mye mer arbeid både for dere og meg. Håper vi ungår dette)"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset-1",
    "href": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset-1",
    "title": "Undervisningsplan",
    "section": "Opplegg for kurset",
    "text": "Opplegg for kurset\n\nAvsluttende termpaper mot slutten av kurset\nJeg hjelper det jeg kan."
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset-2",
    "href": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset-2",
    "title": "Undervisningsplan",
    "section": "Opplegg for kurset",
    "text": "Opplegg for kurset\n\nMitt opplegg for kurset er inspirert av disse to:\n\n og\n\n\n\nbenito"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset-3",
    "href": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset-3",
    "title": "Undervisningsplan",
    "section": "Opplegg for kurset",
    "text": "Opplegg for kurset\n\n\n\nJeg kommer til å lyve ;-)\n\nSnarere ikke fortelle hele sannheten\nNår jeg mener det hjelper på forståelsen\n\n\n\n\n\n\nTFG"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset-4",
    "href": "introduction/undervisningsplan/undervisningsplan.html#opplegg-for-kurset-4",
    "title": "Undervisningsplan",
    "section": "Opplegg for kurset",
    "text": "Opplegg for kurset\n\n\n\n\nJeg bestemmer, f.eks\n\nVi vil skrive R-kode iht. «The tidyverse style guide»\n\nDer det er valg bestemmer jeg også ;-), f.eks\n\n«snake case» for R objekter (dette_er_snake_case)\n«kebab case» for filnavn (mitt-fine-filnavn.txt)\n\nAltså når «The tidyverse style guide» gir ulike valg så vil jeg, med diktatorisk makt, velge\n\n\n\n\n\n\nBenito"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#pensum",
    "href": "introduction/undervisningsplan/undervisningsplan.html#pensum",
    "title": "Undervisningsplan",
    "section": "Pensum",
    "text": "Pensum\nVi vil i hovedsak benytte R for Data Science.\n\nCover R for Data Science"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-quarto-document",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-quarto-document",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan; Quarto Document",
    "text": "Undervisningsplan; Quarto Document\nJeg vil komme tilbake med en mer detaljert undervisningsplan når vi har kommet skikkelig i gang\n\nInstallasjon av nødvendig programvare\nIntroduksjon til Quarto Document (før brukte vi R notebook)\n\nSkrive et Quarto Document, minimalt med R kode. Bruke markdown. peer review.\nBruke R studio project (r4ds: 8 Workflow: projects)\nTar dette først s.a. vi kan skrive R kode Quarto dokumenter\n\nIntensivkurs R"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#underv.-plan-version-control-system-vcs",
    "href": "introduction/undervisningsplan/undervisningsplan.html#underv.-plan-version-control-system-vcs",
    "title": "Undervisningsplan",
    "section": "Underv.-plan; Version Control System (VCS)",
    "text": "Underv.-plan; Version Control System (VCS)\n\nHvorfor versjonskontroll?\n\nBackup\nKontroll på versjoner\nSamarbeid\nKan enkelt gå tilbake til tidligere versjoner av dokumentene\n\nKomplett «history» av «commits»\n\nUtviklingen av dokumentet/analysen vil ha en komplett log/historie\nVerktøy git/Github/(gitaHead)"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-gitgithub",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-gitgithub",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan; git/Github",
    "text": "Undervisningsplan; git/Github\n\nIntroduksjon til git/Github\n\nOppdatere Quarto Document utfra tilbakemeldinger vha. git/Github\nSamarbeid vha. Github. Benytte git/Github til å lage en ny versjon som er en kombinasjon av det beste fra de to Quarto Document-ene\n\nggplot2, reproduserbare plot (r4ds: 3 Data visualisation) og tibbles (r4ds: 10 Tibbles)."
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-datatransform.",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-datatransform.",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan; Datatransform.",
    "text": "Undervisningsplan; Datatransform.\n\nData transformasjoner (r4ds: 5 Data transformation)\n\nLes også kjapt gjennom kap. 4 og 6. Små kap.\n\nNoe er ikke direkte relevant for oss, men kjekt å kjenne til\n\n«pipe»: %&gt;% (r4ds: 18 Pipes)\n\nVi vil skrive kode vha. «pipes» helt fra starten\n\npakken dplyr (en del av tidyverse)\nfunksjonene: tibble(), filter(), arrange(), select(), mutate(), rename(), summarise() og group_by()"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-utforskende-dataanalyse",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-utforskende-dataanalyse",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan; Utforskende dataanalyse",
    "text": "Undervisningsplan; Utforskende dataanalyse\n\nUtforskende dataanalyse (r4ds: 7 Exploratory Data Analysis)\n\nFå en forståelse av dataene\n\nvariasjon\nsentralitet\nutliggere\nsymmetri/skjevhet\nmanglende verdier\nkovariasjon mellom variabler"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-importeksport-av-data",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-importeksport-av-data",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan; import/eksport av data",
    "text": "Undervisningsplan; import/eksport av data\n\nImport/export av data (r4ds: 11 Data import)\n\nreadr lese/skrive diverse tekstformat (csv, tsv, fwf etc.)\nreadxl leser excel regneark\nwritexl skriver xlsx filer (ikke en del av Tidyverse)\nNytt prosjekt, grupper på to, samarbeid via git/Github\n\nBruk av «branches»\nGapminder datasett\n\n\nImport av data vha. API. Pakken PxWebApiData gjør at vi kan hente data direkte fra SSBs server rett inn i vårt R dokument."
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-ryddige-tidy-data",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-ryddige-tidy-data",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan; Ryddige («Tidy») data",
    "text": "Undervisningsplan; Ryddige («Tidy») data\n\nLangt og vidt dataformat\n\npivot_longer() fra wide til long\npivot_wider() fra long til wide\nseparate()/unite()\nmissing values, fill()"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#eksempel-wide-format",
    "href": "introduction/undervisningsplan/undervisningsplan.html#eksempel-wide-format",
    "title": "Undervisningsplan",
    "section": "Eksempel wide format",
    "text": "Eksempel wide format\n\nVi henter ofte dataene i wide format.\nMå konverteres til long format for å kunne brukes i statistiske rutiner\n\n\n\nCode\n# Leser inn csv fil med data\nRegHeltLedige_w &lt;- read_csv(\"RegHeltLedige_w.csv\")\n# Heller dataene inn i en pipe\nRegHeltLedige_w %&gt;% \n# Plukker ut tre måneder rundt årsskiftet\n  select(knrNavn, `2013M12`, `2014M01`, `2014M02`)\n\n\n# A tibble: 18 × 4\n   knrNavn                      `2013M12` `2014M01` `2014M02`\n   &lt;chr&gt;                            &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n 1 0101 Halden (-2019)                3.7       3.8       3.7\n 2 0104 Moss (-2019)                  3.3       4         4  \n 3 0105 Sarpsborg (1992-2019)         3.7       4.4       4.3\n 4 0106 Fredrikstad (1994-2019)       4.6       5         4.8\n 5 0111 Hvaler (-2019)                1.8       2.3       2.5\n 6 0118 Aremark (-2019)               2.6       2.8       3  \n 7 0119 Marker (-2019)                2.4       3         2.9\n 8 0121 Rømskog (-2019)               2.3       2.3       2  \n 9 0122 Trøgstad (-2019)              2.6       2.7       2.5\n10 0123 Spydeberg (-2019)             2.1       2.3       2.1\n11 0124 Askim (-2019)                 3.4       4.1       4.2\n12 0125 Eidsberg (-2019)              3.4       4.6       4.3\n13 0127 Skiptvet (-2019)              2.2       3.4       3.1\n14 0128 Rakkestad (-2019)             2.3       3         2.8\n15 0135 Råde (-2019)                  3         3.4       3.7\n16 0136 Rygge (-2019)                 2.5       2.9       2.8\n17 0137 Våler (Østfold) (-2019)       2.6       2.9       3.4\n18 0138 Hobøl (-2019)                 2.4       2.9       3.6"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#eksempel-long-format",
    "href": "introduction/undervisningsplan/undervisningsplan.html#eksempel-long-format",
    "title": "Undervisningsplan",
    "section": "Eksempel long format",
    "text": "Eksempel long format\n\n\nCode\n# Leser inn csv fil med data\nRegHeltLedige_l &lt;- read_csv(\"RegHeltLedige_l.csv\")\n# Heller dataene inn i en pipe\nRegHeltLedige_l %&gt;% \n# Plukker ut tre måneder rundt årsskiftet\n  filter(\n    (year == 2013 & month %in% c(\"12\")) |\n      (year == 2014 & month %in% c(\"01\", \"02\"))\n  ) \n\n\n# A tibble: 54 × 5\n   knr   kNavn        year month unemp\n   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt;\n 1 0101  Halden       2013 12      3.7\n 2 0101  Halden       2014 01      3.8\n 3 0101  Halden       2014 02      3.7\n 4 0104  Moss         2013 12      3.3\n 5 0104  Moss         2014 01      4  \n 6 0104  Moss         2014 02      4  \n 7 0105  Sarpsborg    2013 12      3.7\n 8 0105  Sarpsborg    2014 01      4.4\n 9 0105  Sarpsborg    2014 02      4.3\n10 0106  Fredrikstad  2013 12      4.6\n# ℹ 44 more rows\n\n\n\nDette kommer vi til å jobbe mye med"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-fortsettelse",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-fortsettelse",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan fortsettelse",
    "text": "Undervisningsplan fortsettelse\n\nKombinere tabeller (r4ds: 13 Relational data)\n\nen del av dplyr pakken\njoins (dplyrs merge) Sette sammen tabeller vha. felles nøkkel\n\nTekststrenger (r4ds: 14 Strings)\n\nstringr pakken\nregular expressions\n\nFactorer (r4ds: 15 Factors)\n\nforcats\nfactorvariabler (diskrete kategorier) i Tidyverse"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-fortsettelse-1",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-fortsettelse-1",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan fortsettelse",
    "text": "Undervisningsplan fortsettelse\n\nFunksjoner og vektorer (r4ds: 19 Functions, r4ds: 20 Vectors)\n\nSkrive enkle funksjoner\nLitt mer om R’s vektorer\n\nIterasjon (21 Iteration)\n\nLøkker (for, while etc)\nmaps (fra purrr pakken i Tidyverse)\n\nbruke funksjonen på hvert element i en liste\nRs alternativ til iterasjon\nRs foretrukne måte å gjøre ting\n\nofte raskere\nmer elegant"
  },
  {
    "objectID": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-fortsettelse-2",
    "href": "introduction/undervisningsplan/undervisningsplan.html#undervisningsplan-fortsettelse-2",
    "title": "Undervisningsplan",
    "section": "Undervisningsplan fortsettelse",
    "text": "Undervisningsplan fortsettelse\n\n(lineære) modeller (r4ds: 23 Model basics)\nutvikling av modeller (r4ds: 24 Model building)\nmange modeller (r4ds: 25 Many models)\n\nbroom pakken\nutrolig effektiv teknikk, men også krevende datastrukturer\n\n\n\n\nMSB105"
  },
  {
    "objectID": "introduction/div-doc/rstudio-github.html",
    "href": "introduction/div-doc/rstudio-github.html",
    "title": "Koble sammen RStudio og Github på mac",
    "section": "",
    "text": "Det ser ut til at det har skjedd noen endringer så våre gamle besvergelser virker ikke lenger.\nFølgende skal virke, men krever at pakken usethis er installert. Så gjør dette først via Install under Packages.\n\n# Ditt navn og epost-adressen du ønsker å bruke\nusethis::use_git_config(user.name = \"YourName\", user.email = \"your@mail.com\")\n\n\n# lager token (nøkkel) på Github side\n# Sett varighet til Custom… ett år frem\n# create token\n# kopier så token\nusethis::create_github_token()\n\n\nKopier den nye nøkkelen.\nGå tilbake til RStudio og gi kommandoen\n\n\n# gitcreds_set() only works in interactive mode\ngitcreds::gitcreds_set()\n\nI spørsmålet som kommer opp i Console (nederst til venstre) svarer du med å lime inn den nye nøkkelen (token) fra Github. Kommer det opp et Xaccess vindu fra macosx så limer du nøkkelen inn der også.\nDa skal nøkkelen være satt. Du kan eventuelt også legge den inn i .Renviron filen. Dette gjøres med kommandoen\n\nusethis::edit_r_environ()\n\n• Edit '/Users/ag/.Renviron'\n• Restart R for changes to take effect\n\n\nI filen som åpnes må du skrive GITHUB_PAT='YourPAT' der YourPAT byttes ut med nøkkelen (token) fra Github. Det er viktig at du legger inn et linjeskift til slutt, dvs. plasser cursoren etter avsluttende parentes og trykk return før du til slutt lagrer filen.\nTil slutt kan du sjekke at alt ser ok ut med kommandoen:\n\nusethis::git_sitrep()"
  },
  {
    "objectID": "introduction/div-doc/rstudio-github.html#innledning",
    "href": "introduction/div-doc/rstudio-github.html#innledning",
    "title": "Koble sammen RStudio og Github på mac",
    "section": "",
    "text": "Det ser ut til at det har skjedd noen endringer så våre gamle besvergelser virker ikke lenger.\nFølgende skal virke, men krever at pakken usethis er installert. Så gjør dette først via Install under Packages.\n\n# Ditt navn og epost-adressen du ønsker å bruke\nusethis::use_git_config(user.name = \"YourName\", user.email = \"your@mail.com\")\n\n\n# lager token (nøkkel) på Github side\n# Sett varighet til Custom… ett år frem\n# create token\n# kopier så token\nusethis::create_github_token()\n\n\nKopier den nye nøkkelen.\nGå tilbake til RStudio og gi kommandoen\n\n\n# gitcreds_set() only works in interactive mode\ngitcreds::gitcreds_set()\n\nI spørsmålet som kommer opp i Console (nederst til venstre) svarer du med å lime inn den nye nøkkelen (token) fra Github. Kommer det opp et Xaccess vindu fra macosx så limer du nøkkelen inn der også.\nDa skal nøkkelen være satt. Du kan eventuelt også legge den inn i .Renviron filen. Dette gjøres med kommandoen\n\nusethis::edit_r_environ()\n\n• Edit '/Users/ag/.Renviron'\n• Restart R for changes to take effect\n\n\nI filen som åpnes må du skrive GITHUB_PAT='YourPAT' der YourPAT byttes ut med nøkkelen (token) fra Github. Det er viktig at du legger inn et linjeskift til slutt, dvs. plasser cursoren etter avsluttende parentes og trykk return før du til slutt lagrer filen.\nTil slutt kan du sjekke at alt ser ok ut med kommandoen:\n\nusethis::git_sitrep()"
  },
  {
    "objectID": "introduction/div-doc/Innledende-R-notater.html",
    "href": "introduction/div-doc/Innledende-R-notater.html",
    "title": "Innledende R notater",
    "section": "",
    "text": "Her er min aller første R kode.\n\nx &lt;- 3 + 3\nx\n\n[1] 6\n\n\n\n# eller begge samtidig\n(x &lt;- 3 + 3)\n\n[1] 6\n\n\n\n(x &lt;- 13)\n\n[1] 13\n\n\nDe fire regneartene\n\n(2/15)^0.25*exp(4) - 200\n\n[1] -167.0077\n\n\n\nx &lt;- 2\n(y &lt;- 5)\n\n[1] 5\n\n\n\nx + y\n\n[1] 7\n\n\n\nx^y\n\n[1] 32\n\n\n\nz &lt;- x^y\n\n\n(z &lt;- x + y)\n\n[1] 7\n\n\n\n(x &lt;- 13)\n\n[1] 13\n\n\n\nz\n\n[1] 7\n\n\n\n# definerer z på ny\n# får nå oppdatert verdi der ny x verdi (13) er brukt\n(z &lt;- x + y)\n\n[1] 18\n\n\n\ntypeof(z)\n\n[1] \"double\"\n\n\n\nx &lt;- 13L\ny &lt;- 5L\n\n\nz &lt;- x + y\n\n\ntypeof(z)\n\n[1] \"integer\"\n\n\n\n#double\ny &lt;- 5\n\n\n# z double\nz &lt;- x + y\n\n\n# selv et enkelt tall er en vektor\nis.vector(z)\n\n[1] TRUE\n\n\n\n# vektor av heltall\n(x &lt;- c(2L, 8L, 9L, 21L:29L, 17L:12L))\n\n [1]  2  8  9 21 22 23 24 25 26 27 28 29 17 16 15 14 13 12\n\n\n\ntypeof(x)\n\n[1] \"integer\"\n\n\n\n# 21 to 29 by 2\n(x &lt;- c(2L, 8L, 9L, seq(from = 21L, to = 29L, by = 2L), 17L:12L))\n\n [1]  2  8  9 21 23 25 27 29 17 16 15 14 13 12\n\n\n\n(x &lt;- c(2L, 8L, 9L, seq(from = 21L, to = 29L, by = 3L), 17L:12L))\n\n [1]  2  8  9 21 24 27 17 16 15 14 13 12\n\n\n\n# from 29L to 21L by -3 L\n(x &lt;- c(2L, 8L, 9L, seq(from = 29L, to = 21L, by = -3L), 17L:12L))\n\n [1]  2  8  9 29 26 23 17 16 15 14 13 12\n\n\n\n# vår x forskjellig fra den i slides\n(y &lt;- 6:(5 + length(x)))\n\n [1]  6  7  8  9 10 11 12 13 14 15 16 17\n\n\n\nz &lt;- x + y\n\n\ny &lt;- c(y, 0.5 * x)\ny\n\n [1]  6.0  7.0  8.0  9.0 10.0 11.0 12.0 13.0 14.0 15.0 16.0 17.0  1.0  4.0  4.5\n[16] 14.5 13.0 11.5  8.5  8.0  7.5  7.0  6.5  6.0\n\n\n\nx + y\n\n [1]  8.0 15.0 17.0 38.0 36.0 34.0 29.0 29.0 29.0 29.0 29.0 29.0  3.0 12.0 13.5\n[16] 43.5 39.0 34.5 25.5 24.0 22.5 21.0 19.5 18.0\n\n\n\nx &lt;- c(x, 10)\n\n\nx + y\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n [1]  8.0 15.0 17.0 38.0 36.0 34.0 29.0 29.0 29.0 29.0 29.0 29.0 11.0  6.0 12.5\n[16] 23.5 42.0 37.5 31.5 25.0 23.5 22.0 20.5 19.0\n\n\nEt enklere eksempel\n\n(x &lt;- 2:4)\n\n[1] 2 3 4\n\n\n\n(y &lt;- 10:12)\n\n[1] 10 11 12\n\n\n\n(x + y)\n\n[1] 12 14 16\n\n\n\n(y &lt;- c(y, y + 0.5 * x))\n\n[1] 10.0 11.0 12.0 11.0 12.5 14.0\n\n\n\n# automatisk replikering av korteste\n# ingen warning\n(x + y)\n\n[1] 12.0 14.0 16.0 13.0 15.5 18.0\n\n\n\ny\n\n[1] 10.0 11.0 12.0 11.0 12.5 14.0\n\n\n\nrep(x, 2)\n\n[1] 2 3 4 2 3 4\n\n\nVi ser at x + y nå er x + y der x er replikert 2 ganger. Merk at R gjøre dette UTEN noen form for asvarsel.\n\n# legger til et tall (4) i fronten på x\n(x &lt;- c(4, x))\n\n[1] 4 2 3 4\n\n\n\n# Nå er elngen av x 4 og lengden av y er 6. Tar vi nå x + y vil vi få en advarsel om at lengden av x ikke går opp i lengden av y\n(x + y)\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n[1] 14.0 13.0 15.0 15.0 16.5 16.0\n\n# men vi får svaret, x + y der den korteste x er replikert og man bruker de \n# verdiene som trengs for å matche y"
  },
  {
    "objectID": "introduction/div-doc/Innledende-R-notater.html#innledning",
    "href": "introduction/div-doc/Innledende-R-notater.html#innledning",
    "title": "Innledende R notater",
    "section": "",
    "text": "Her er min aller første R kode.\n\nx &lt;- 3 + 3\nx\n\n[1] 6\n\n\n\n# eller begge samtidig\n(x &lt;- 3 + 3)\n\n[1] 6\n\n\n\n(x &lt;- 13)\n\n[1] 13\n\n\nDe fire regneartene\n\n(2/15)^0.25*exp(4) - 200\n\n[1] -167.0077\n\n\n\nx &lt;- 2\n(y &lt;- 5)\n\n[1] 5\n\n\n\nx + y\n\n[1] 7\n\n\n\nx^y\n\n[1] 32\n\n\n\nz &lt;- x^y\n\n\n(z &lt;- x + y)\n\n[1] 7\n\n\n\n(x &lt;- 13)\n\n[1] 13\n\n\n\nz\n\n[1] 7\n\n\n\n# definerer z på ny\n# får nå oppdatert verdi der ny x verdi (13) er brukt\n(z &lt;- x + y)\n\n[1] 18\n\n\n\ntypeof(z)\n\n[1] \"double\"\n\n\n\nx &lt;- 13L\ny &lt;- 5L\n\n\nz &lt;- x + y\n\n\ntypeof(z)\n\n[1] \"integer\"\n\n\n\n#double\ny &lt;- 5\n\n\n# z double\nz &lt;- x + y\n\n\n# selv et enkelt tall er en vektor\nis.vector(z)\n\n[1] TRUE\n\n\n\n# vektor av heltall\n(x &lt;- c(2L, 8L, 9L, 21L:29L, 17L:12L))\n\n [1]  2  8  9 21 22 23 24 25 26 27 28 29 17 16 15 14 13 12\n\n\n\ntypeof(x)\n\n[1] \"integer\"\n\n\n\n# 21 to 29 by 2\n(x &lt;- c(2L, 8L, 9L, seq(from = 21L, to = 29L, by = 2L), 17L:12L))\n\n [1]  2  8  9 21 23 25 27 29 17 16 15 14 13 12\n\n\n\n(x &lt;- c(2L, 8L, 9L, seq(from = 21L, to = 29L, by = 3L), 17L:12L))\n\n [1]  2  8  9 21 24 27 17 16 15 14 13 12\n\n\n\n# from 29L to 21L by -3 L\n(x &lt;- c(2L, 8L, 9L, seq(from = 29L, to = 21L, by = -3L), 17L:12L))\n\n [1]  2  8  9 29 26 23 17 16 15 14 13 12\n\n\n\n# vår x forskjellig fra den i slides\n(y &lt;- 6:(5 + length(x)))\n\n [1]  6  7  8  9 10 11 12 13 14 15 16 17\n\n\n\nz &lt;- x + y\n\n\ny &lt;- c(y, 0.5 * x)\ny\n\n [1]  6.0  7.0  8.0  9.0 10.0 11.0 12.0 13.0 14.0 15.0 16.0 17.0  1.0  4.0  4.5\n[16] 14.5 13.0 11.5  8.5  8.0  7.5  7.0  6.5  6.0\n\n\n\nx + y\n\n [1]  8.0 15.0 17.0 38.0 36.0 34.0 29.0 29.0 29.0 29.0 29.0 29.0  3.0 12.0 13.5\n[16] 43.5 39.0 34.5 25.5 24.0 22.5 21.0 19.5 18.0\n\n\n\nx &lt;- c(x, 10)\n\n\nx + y\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n [1]  8.0 15.0 17.0 38.0 36.0 34.0 29.0 29.0 29.0 29.0 29.0 29.0 11.0  6.0 12.5\n[16] 23.5 42.0 37.5 31.5 25.0 23.5 22.0 20.5 19.0\n\n\nEt enklere eksempel\n\n(x &lt;- 2:4)\n\n[1] 2 3 4\n\n\n\n(y &lt;- 10:12)\n\n[1] 10 11 12\n\n\n\n(x + y)\n\n[1] 12 14 16\n\n\n\n(y &lt;- c(y, y + 0.5 * x))\n\n[1] 10.0 11.0 12.0 11.0 12.5 14.0\n\n\n\n# automatisk replikering av korteste\n# ingen warning\n(x + y)\n\n[1] 12.0 14.0 16.0 13.0 15.5 18.0\n\n\n\ny\n\n[1] 10.0 11.0 12.0 11.0 12.5 14.0\n\n\n\nrep(x, 2)\n\n[1] 2 3 4 2 3 4\n\n\nVi ser at x + y nå er x + y der x er replikert 2 ganger. Merk at R gjøre dette UTEN noen form for asvarsel.\n\n# legger til et tall (4) i fronten på x\n(x &lt;- c(4, x))\n\n[1] 4 2 3 4\n\n\n\n# Nå er elngen av x 4 og lengden av y er 6. Tar vi nå x + y vil vi få en advarsel om at lengden av x ikke går opp i lengden av y\n(x + y)\n\nWarning in x + y: longer object length is not a multiple of shorter object\nlength\n\n\n[1] 14.0 13.0 15.0 15.0 16.5 16.0\n\n# men vi får svaret, x + y der den korteste x er replikert og man bruker de \n# verdiene som trengs for å matche y"
  },
  {
    "objectID": "introduction/install-r-packages/install-R-packages.html",
    "href": "introduction/install-r-packages/install-R-packages.html",
    "title": "Install R Packages",
    "section": "",
    "text": "We set some options to make sure that we include dependencies and also that we install pre-compiled binaries.\nI’m sure we’ll have forgotten some, but we’ll install them when needed.\nWe can also install packages by using Install button on the Packages tab.\n\ninstall.packages(\"tidyverse\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"modelr\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"readr\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"huxtable\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\n# To be used to set up git/github\ninstall.packages(\"usethis\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"credentials\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"styler\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\n# For packages not on CRAN we need devtools\ninstall.packages(\"devtools\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\n\nI often use the following trick at the end of my documents, a simple R chunk with a single comment. Clicking the “Run All Chunks Above” above button will run all chunks in the document.\n\n#siste"
  },
  {
    "objectID": "introduction/install-r-packages/install-R-packages.html#packages-we-will-need",
    "href": "introduction/install-r-packages/install-R-packages.html#packages-we-will-need",
    "title": "Install R Packages",
    "section": "",
    "text": "We set some options to make sure that we include dependencies and also that we install pre-compiled binaries.\nI’m sure we’ll have forgotten some, but we’ll install them when needed.\nWe can also install packages by using Install button on the Packages tab.\n\ninstall.packages(\"tidyverse\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"modelr\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"readr\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"huxtable\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\n# To be used to set up git/github\ninstall.packages(\"usethis\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"credentials\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\ninstall.packages(\"styler\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\n# For packages not on CRAN we need devtools\ninstall.packages(\"devtools\", dependencies = TRUE, \n                 type=\"binary\", repos='http://cran.uib.no')\n\nI often use the following trick at the end of my documents, a simple R chunk with a single comment. Clicking the “Run All Chunks Above” above button will run all chunks in the document.\n\n#siste"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#references-in-norwegian",
    "href": "introduction/Zotero_demo/Zotero_demo.html#references-in-norwegian",
    "title": "Zotero demo",
    "section": "References in Norwegian",
    "text": "References in Norwegian\nAdd lang: nb-NO to YAML right below bibliography:.\nCSL: decides which format to use for the reference list and citations in the text. https://www.zotero.org/styles had 10,324 to choose from last I checked."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#load-needed-libraries",
    "href": "introduction/Zotero_demo/Zotero_demo.html#load-needed-libraries",
    "title": "Zotero demo",
    "section": "Load needed libraries",
    "text": "Load needed libraries\n\n\nCode\nlibrary(knitr)\nlibrary(rmarkdown)\nlibrary(tidyverse)"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#software",
    "href": "introduction/Zotero_demo/Zotero_demo.html#software",
    "title": "Zotero demo",
    "section": "Software",
    "text": "Software\n\nZotero from http://www.zoerto.org.\nZotero Connector\n\nInstall from Zoteros web site if needed\nEnable in preferences (Safari on mac)\n\nBetter BibTex for Zotero from https://retorque.re/zotero-better-bibtex/installation/."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#define-group-on-zotero.org",
    "href": "introduction/Zotero_demo/Zotero_demo.html#define-group-on-zotero.org",
    "title": "Zotero demo",
    "section": "Define group on zotero.org",
    "text": "Define group on zotero.org\n\nYou are going to write paper together, hence a shared library in the sky is essential.\nDefine a private library at Zotero.\n\nYou can grant access for your co-worker later.\n\nA shared library reduce the risk of getting a merge conflict."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#new-group-on-zotero.org-cont.",
    "href": "introduction/Zotero_demo/Zotero_demo.html#new-group-on-zotero.org-cont.",
    "title": "Zotero demo",
    "section": "New group on zotero.org cont.",
    "text": "New group on zotero.org cont.\n\nCreate New Group"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#configure-group-on-zotero.org-cont.",
    "href": "introduction/Zotero_demo/Zotero_demo.html#configure-group-on-zotero.org-cont.",
    "title": "Zotero demo",
    "section": "Configure group on zotero.org cont.",
    "text": "Configure group on zotero.org cont.\n\nConfigure Group"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#select-your-library-in-rstudio-preference",
    "href": "introduction/Zotero_demo/Zotero_demo.html#select-your-library-in-rstudio-preference",
    "title": "Zotero demo",
    "section": "Select your library in RStudio preference",
    "text": "Select your library in RStudio preference\n\nThis might have to be changed when you are working together on a project\n\n\nGroup settings"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#my-new-group",
    "href": "introduction/Zotero_demo/Zotero_demo.html#my-new-group",
    "title": "Zotero demo",
    "section": "My new Group",
    "text": "My new Group\n\nMy new group"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#select-web-library",
    "href": "introduction/Zotero_demo/Zotero_demo.html#select-web-library",
    "title": "Zotero demo",
    "section": "Select Web Library",
    "text": "Select Web Library\n\nWeb library for new group"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#select-new-empty-library-for-group",
    "href": "introduction/Zotero_demo/Zotero_demo.html#select-new-empty-library-for-group",
    "title": "Zotero demo",
    "section": "Select New Empty Library for group",
    "text": "Select New Empty Library for group\n\nPlease, don’t mind all my junk\n\n\nGroup Library"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#sync-in-zotero-app",
    "href": "introduction/Zotero_demo/Zotero_demo.html#sync-in-zotero-app",
    "title": "Zotero demo",
    "section": "Sync in Zotero app",
    "text": "Sync in Zotero app\n\nWe have to sync our Zotero app with the web.\n\n\nSync app with zotero.org"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#harvest-some-references",
    "href": "introduction/Zotero_demo/Zotero_demo.html#harvest-some-references",
    "title": "Zotero demo",
    "section": "Harvest some references",
    "text": "Harvest some references\n\nPoint you web browser to https://r4ds.had.co.nz.\nClick the “Harvest icon” icon in your web browser.\n\n\nHarvest reference"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#select-library",
    "href": "introduction/Zotero_demo/Zotero_demo.html#select-library",
    "title": "Zotero demo",
    "section": "Select Library",
    "text": "Select Library\n\nSelect the library to add the reference to (you probably just have one alternative).\n\n\nSelect Library"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#first-reference-in-local-zotero-library",
    "href": "introduction/Zotero_demo/Zotero_demo.html#first-reference-in-local-zotero-library",
    "title": "Zotero demo",
    "section": "First reference in Local Zotero Library",
    "text": "First reference in Local Zotero Library\n\nFirst Local Reference"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#sync-to-the-sky",
    "href": "introduction/Zotero_demo/Zotero_demo.html#sync-to-the-sky",
    "title": "Zotero demo",
    "section": "Sync to the Sky",
    "text": "Sync to the Sky\n\nClick sync upper right corner to get the reference from your machine to the web library.\n\n\nReference copied to zotero.org"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#exercise",
    "href": "introduction/Zotero_demo/Zotero_demo.html#exercise",
    "title": "Zotero demo",
    "section": "Exercise",
    "text": "Exercise\nHarvest the bibliographic info for “R for everyone, Jared Lander, 2. ed.”.\n\nLander reference"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#some-zotero-configuration-1",
    "href": "introduction/Zotero_demo/Zotero_demo.html#some-zotero-configuration-1",
    "title": "Zotero demo",
    "section": "Some Zotero configuration 1",
    "text": "Some Zotero configuration 1"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#some-zotero-configuration-2",
    "href": "introduction/Zotero_demo/Zotero_demo.html#some-zotero-configuration-2",
    "title": "Zotero demo",
    "section": "Some Zotero configuration 2",
    "text": "Some Zotero configuration 2"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#some-zotero-configuration-2-1",
    "href": "introduction/Zotero_demo/Zotero_demo.html#some-zotero-configuration-2-1",
    "title": "Zotero demo",
    "section": "Some Zotero configuration 2",
    "text": "Some Zotero configuration 2"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#get-citation-information",
    "href": "introduction/Zotero_demo/Zotero_demo.html#get-citation-information",
    "title": "Zotero demo",
    "section": "Get citation information",
    "text": "Get citation information\nLibrary must be loaded before we can get citation information.\nWe can easily get reference information for all the wonderful R packages we use.\n\n\nCode\n# map functions over a list of packages\n# output result to a text file\nmap(map(c(\"knitr\", \"rmarkdown\", \"tidyverse\"), citation), toBibtex)\n\n\nAbove we see function within function, which might be a bit hard to follow."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#get-citation-information-with-a-pipe",
    "href": "introduction/Zotero_demo/Zotero_demo.html#get-citation-information-with-a-pipe",
    "title": "Zotero demo",
    "section": "Get citation information with a pipe",
    "text": "Get citation information with a pipe\nThe following code that uses a pipe is probably far easier to follow.\n\n\nCode\n# Easier to understand with a pipe\nc(\"knitr\", \"rmarkdown\", \"tidyverse\") %&gt;% \n  # use the R citation function on the package list\n  map(citation) %&gt;% \n  # convert the reference info to bibtex format by using the toBibtex\n  # function on each member of the reference list\n  map(toBibtex) %&gt;%\n  # print the list\n  map(print) %&gt;% \n  # only want the list elements combined, not each list item\n  # in addition, hence max.level=0 \n  str(max.level=0)\n\n\n@Manual{,\n  title = {knitr: A General-Purpose Package for Dynamic Report Generation in R},\n  author = {Yihui Xie},\n  year = {2023},\n  note = {R package version 1.42},\n  url = {https://yihui.org/knitr/},\n}\n\n@Book{,\n  title = {Dynamic Documents with {R} and knitr},\n  author = {Yihui Xie},\n  publisher = {Chapman and Hall/CRC},\n  address = {Boca Raton, Florida},\n  year = {2015},\n  edition = {2nd},\n  note = {ISBN 978-1498716963},\n  url = {https://yihui.org/knitr/},\n}\n\n@InCollection{,\n  booktitle = {Implementing Reproducible Computational Research},\n  editor = {Victoria Stodden and Friedrich Leisch and Roger D. Peng},\n  title = {knitr: A Comprehensive Tool for Reproducible Research in {R}},\n  author = {Yihui Xie},\n  publisher = {Chapman and Hall/CRC},\n  year = {2014},\n  note = {ISBN 978-1466561595},\n}\n@Manual{,\n  title = {rmarkdown: Dynamic Documents for R},\n  author = {JJ Allaire and Yihui Xie and Christophe Dervieux and Jonathan McPherson and Javier Luraschi and Kevin Ushey and Aron Atkins and Hadley Wickham and Joe Cheng and Winston Chang and Richard Iannone},\n  year = {2023},\n  note = {R package version 2.24},\n  url = {https://github.com/rstudio/rmarkdown},\n}\n\n@Book{,\n  title = {R Markdown: The Definitive Guide},\n  author = {Yihui Xie and J.J. Allaire and Garrett Grolemund},\n  publisher = {Chapman and Hall/CRC},\n  address = {Boca Raton, Florida},\n  year = {2018},\n  isbn = {9781138359338},\n  url = {https://bookdown.org/yihui/rmarkdown},\n}\n\n@Book{,\n  title = {R Markdown Cookbook},\n  author = {Yihui Xie and Christophe Dervieux and Emily Riederer},\n  publisher = {Chapman and Hall/CRC},\n  address = {Boca Raton, Florida},\n  year = {2020},\n  isbn = {9780367563837},\n  url = {https://bookdown.org/yihui/rmarkdown-cookbook},\n}\n@Article{,\n  title = {Welcome to the {tidyverse}},\n  author = {Hadley Wickham and Mara Averick and Jennifer Bryan and Winston Chang and Lucy D'Agostino McGowan and Romain François and Garrett Grolemund and Alex Hayes and Lionel Henry and Jim Hester and Max Kuhn and Thomas Lin Pedersen and Evan Miller and Stephan Milton Bache and Kirill Müller and Jeroen Ooms and David Robinson and Dana Paige Seidel and Vitalie Spinu and Kohske Takahashi and Davis Vaughan and Claus Wilke and Kara Woo and Hiroaki Yutani},\n  year = {2019},\n  journal = {Journal of Open Source Software},\n  volume = {4},\n  number = {43},\n  pages = {1686},\n  doi = {10.21105/joss.01686},\n}\nList of 3"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#copy-package-references",
    "href": "introduction/Zotero_demo/Zotero_demo.html#copy-package-references",
    "title": "Zotero demo",
    "section": "Copy package references",
    "text": "Copy package references\n\nSelect the text above (not List of 3)\nCopy the text\nSwitch to Zotero an select ‘Importer fra utklippstavle’ fra Fil menyen.\nSync with zotero.org"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#export-to-bib-file",
    "href": "introduction/Zotero_demo/Zotero_demo.html#export-to-bib-file",
    "title": "Zotero demo",
    "section": "Export to bib file",
    "text": "Export to bib file\n\nExport to bibtex file\nPlace the file in same directory as your document\nRight-click (mac: ctrl + click) on Library name (mine agag)\nSelect ‘Eksporter bibliotek …’"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#export-to-bib-file-cont.",
    "href": "introduction/Zotero_demo/Zotero_demo.html#export-to-bib-file-cont.",
    "title": "Zotero demo",
    "section": "Export to bib file cont.",
    "text": "Export to bib file cont.\n\n\nGive it a nice name that ends with .bib\nRemember to save in same directory as your document\nEdit to bibliography: your_name.bib in the YAML header"
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#exercise-1",
    "href": "introduction/Zotero_demo/Zotero_demo.html#exercise-1",
    "title": "Zotero demo",
    "section": "Exercise",
    "text": "Exercise\n\nGet the reference info. for the paper version of R for Data Science and add it to your library.\nSync with your zotero.org library (it might do this automatically).\nExport your updated library to your .bib file (overwrite the previous version)."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#citations",
    "href": "introduction/Zotero_demo/Zotero_demo.html#citations",
    "title": "Zotero demo",
    "section": "Citations",
    "text": "Citations\nNow we can cite all the R packages that makes this possible. See (Wickham et al. 2019; Xie 2014, 2015, 2022; Xie, Allaire, and Grolemund 2018; Xie, Dervieux, and Riederer 2020).\nTo learn more, take a look at the Zotero documentation.\nWe also have the two excellent books Grolemund and Wickham (2017) and Lander (2017)."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#insert-citations",
    "href": "introduction/Zotero_demo/Zotero_demo.html#insert-citations",
    "title": "Zotero demo",
    "section": "Insert Citations",
    "text": "Insert Citations\n\nPlace the cursor where you want the citations.\nSelect ‘Citation’ from the ‘Insert’ menu in Visual mode.\nPress Shift to select multiple references."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#bibliography",
    "href": "introduction/Zotero_demo/Zotero_demo.html#bibliography",
    "title": "Zotero demo",
    "section": "Bibliography",
    "text": "Bibliography\n\n\nGrolemund, Garrett, and Hadley Wickham. 2017. R for Data Science: Import, Tidy, Transform, Visualize, and Model Data. 1st edition. Sebastopol, CA: O’Reilly Media.\n\n\nLander, Jared. 2017. R for Everyone: Advanced Analytics and Graphics. 2nd edition. Boston: Addison-Wesley Professional.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686.\n\n\nXie, Yihui. 2014. “Knitr: A Comprehensive Tool for Reproducible Research in R.” In Implementing Reproducible Computational Research, edited by Victoria Stodden, Friedrich Leisch, and Roger D. Peng. Chapman and Hall/CRC. http://www.crcpress.com/product/isbn/9781466561595.\n\n\n———. 2015. Dynamic Documents with R and Knitr. 2nd ed. Boca Raton, Florida: Chapman and Hall/CRC. https://yihui.org/knitr/.\n\n\n———. 2022. Knitr: A General-Purpose Package for Dynamic Report Generation in R. Manual. https://yihui.org/knitr/.\n\n\nXie, Yihui, J. J. Allaire, and Garrett Grolemund. 2018. R Markdown: The Definitive Guide. Boca Raton, Florida: Chapman and Hall/CRC. https://bookdown.org/yihui/rmarkdown.\n\n\nXie, Yihui, Christophe Dervieux, and Emily Riederer. 2020. R Markdown Cookbook. Boca Raton, Florida: Chapman and Hall/CRC. https://bookdown.org/yihui/rmarkdown-cookbook."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#appendix",
    "href": "introduction/Zotero_demo/Zotero_demo.html#appendix",
    "title": "Zotero demo",
    "section": "Appendix",
    "text": "Appendix\nBy default the reference list/bibliography is dumped at the end of document. How can we place it somewhere else? The solution is some raw html code\n&lt;div id=\"refs\"&gt;&lt;/div&gt;\nplaced right after the heading for References/Bibliography."
  },
  {
    "objectID": "introduction/Zotero_demo/Zotero_demo.html#exercise-2",
    "href": "introduction/Zotero_demo/Zotero_demo.html#exercise-2",
    "title": "Zotero demo",
    "section": "Exercise",
    "text": "Exercise\nChange the citation style to Apa 7. ed. no ampersand.\nChange the citation style to Chicago Manual of Style 17th edition (author-date).\n\n\nMSB105"
  },
  {
    "objectID": "introduction/git-github/git-github.html#register-on-github",
    "href": "introduction/git-github/git-github.html#register-on-github",
    "title": "Git and Github",
    "section": "Register on Github",
    "text": "Register on Github\n\nuse same email as git\n\ncheck with git config --global --list in terminal\n\nsome good advice for selecting user_name on Github\n\nNo …,\n\nBigSexyThing should probably not be your username on Github\nand before you ask …\n\nneither should big_sexy_thing\n\n\n\nGo to www.github.com"
  },
  {
    "objectID": "introduction/git-github/git-github.html#register-on-github-cont.",
    "href": "introduction/git-github/git-github.html#register-on-github-cont.",
    "title": "Git and Github",
    "section": "Register on Github cont.",
    "text": "Register on Github cont.\nThis is taken from https://gist.github.com/Z3tt/\n\nWe have to connect RStudio to Github securely, with a token.\nIf you haven’t registered yourself in git do:\n\n\n\n\nCode\n# You have probably allready done this\nusethis::use_git_config(user.name = \"YourName\", user.email = \"your@mail.com\")\n\n\n\nMake sure that you have installed the packages:\n\nusethis\ncredential"
  },
  {
    "objectID": "introduction/git-github/git-github.html#register-on-github-cont.-1",
    "href": "introduction/git-github/git-github.html#register-on-github-cont.-1",
    "title": "Git and Github",
    "section": "Register on Github cont.",
    "text": "Register on Github cont.\n\nGenerate a token on Github\nSelect 90 days unless you enjoy this so much that you want to do it more often.\n\n\n\n\nCode\n## create a personal access token for authentication:\nusethis::create_github_token()"
  },
  {
    "objectID": "introduction/git-github/git-github.html#register-on-github-cont.-2",
    "href": "introduction/git-github/git-github.html#register-on-github-cont.-2",
    "title": "Git and Github",
    "section": "Register on Github cont.",
    "text": "Register on Github cont.\n\nNew toke 90 days."
  },
  {
    "objectID": "introduction/git-github/git-github.html#register-on-github-cont.-3",
    "href": "introduction/git-github/git-github.html#register-on-github-cont.-3",
    "title": "Git and Github",
    "section": "Register on Github cont.",
    "text": "Register on Github cont.\n\nScroll down an click Generate.\n\n\n\n\n\nClick Generate token.\n\n\n\nCopy the new token.\n\n\n\n\n\n\nCopy the new token."
  },
  {
    "objectID": "introduction/git-github/git-github.html#register-on-github-cont.-4",
    "href": "introduction/git-github/git-github.html#register-on-github-cont.-4",
    "title": "Git and Github",
    "section": "Register on Github cont.",
    "text": "Register on Github cont.\n\nRun the command below.\npaste your new token into YourPAT\n\n\n\n\nCode\n# set personal access token:\ncredentials::set_github_pat(\"YourPAT\")\n\n\n\nIf asked by your local security system; paste the PAT and click OK"
  },
  {
    "objectID": "introduction/git-github/git-github.html#register-on-github-cont.-5",
    "href": "introduction/git-github/git-github.html#register-on-github-cont.-5",
    "title": "Git and Github",
    "section": "Register on Github cont.",
    "text": "Register on Github cont.\n\nVerify your settings.\n\n\n\n\nCode\n#### 4. Verify settings ######################################################\nusethis::git_sitrep()\n\n\n\nNow RStudio should be connected to Github for 90 days.\nDO NOT SAVE A DOCUMENT WITH YOUR PAT IN IT!"
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-in-rstudio",
    "href": "introduction/git-github/git-github.html#git-in-rstudio",
    "title": "Git and Github",
    "section": "Git in RStudio",
    "text": "Git in RStudio\n\ngit in RStudioDen til venstre dreier seg i hovedsak om dokumentet jeg arbeider på nå, mens den til høyre er mer sentrert om hele prosjektet."
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-in-rstudio-1",
    "href": "introduction/git-github/git-github.html#git-in-rstudio-1",
    "title": "Git and Github",
    "section": "Git in RStudio",
    "text": "Git in RStudio\n\nOpen source Version Control System\ncmd-line client\n\nwe can run this under Terminal in RStudio\nmost of what we need is implemented in the Git pane in RStudio (can spare us from some command line bullshittery)\n\nWe can currently (version RStudio 2022.07.1+554 “Spotted Wakerobin”) create branches in the RStudio git-pane, but not merge the branch back into master/main"
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-in-rstudio-cont.",
    "href": "introduction/git-github/git-github.html#git-in-rstudio-cont.",
    "title": "Git and Github",
    "section": "Git in RStudio cont.",
    "text": "Git in RStudio cont.\n\nTo merge branches we currently have 2 options\n\nuse the Terminal (git merge &lt;branch-name&gt;), but first we have to switch back to master/main\n\nThis will be the alternative we use\n\nuse a GUI git client (GitAhead or others)\n\nIf we are using Github we can also use a web-based client to merge branches. The Github web-pages is then the client."
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-branches",
    "href": "introduction/git-github/git-github.html#git-branches",
    "title": "Git and Github",
    "section": "Git branches",
    "text": "Git branches\n\nAn important design-goal for git was lightweight branches\n\neasy to do\nuses few resources\n\nWhy branch?\n\nfor sw development; always a master ready to ship\nfor our use: an (unfinished) printable draft always ready for printing or previewing\nreduces the chance of a merge conflict\nreduces the chance of a push rejection\n\nHence we should not commit directly to master/main"
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-branches-1",
    "href": "introduction/git-github/git-github.html#git-branches-1",
    "title": "Git and Github",
    "section": "Git branches",
    "text": "Git branches\n\nExample:\n\nWe want to update, or start writing, the Introduction\nWe check out a new branch, perhaps name it Update-Introduction\nWe work on the updated introduction in the branch, possibly with several commits\nThe document/report is available in master/main, with the old introduction, while we are working\nWhen we are ready with the updated introduction we merge it back into master/main and master/main gets an updated introduction\n\nFor more info on git branching (using the command line) see:\n\nHappy Git and GitHub for the useR: 22 Branches\nGit Branching (the Git Book)"
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-branches-in-rstudio",
    "href": "introduction/git-github/git-github.html#git-branches-in-rstudio",
    "title": "Git and Github",
    "section": "Git branches in RStudio",
    "text": "Git branches in RStudio\n\n\n\n\nnewbranch\n\n\nClick the small icon, left of master/main, in the upper right corner \nDo not use space in branch-names (i.e. Update-Introduction not Update Introduction)"
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-branches-in-rstudio-1",
    "href": "introduction/git-github/git-github.html#git-branches-in-rstudio-1",
    "title": "Git and Github",
    "section": "Git branches in RStudio",
    "text": "Git branches in RStudio\n\n\n\n\nbranching\n\n\nNote that Rstudio does: /usr/bin/git checkout -B Update-Introduction which is the same as:\n\ngit branch Update-Introduction\n\ncreate a branch\n\ngit checkout Update-Introduction\n\nswitch to the branch Update-Introduction\nThere is also a -b version. Subtile differences, see man git-checkout in Terminal for details (type q to exit man)"
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-branches-in-rstudio-2",
    "href": "introduction/git-github/git-github.html#git-branches-in-rstudio-2",
    "title": "Git and Github",
    "section": "Git branches in RStudio",
    "text": "Git branches in RStudio\n\nWork and commit on branch Update-Introduction\nWhen finished:\n\nSelect Terminal in lower left paneGit branches in RStudio\n\n\n\nTerminal tab in lower left pane\nThen give the commandl\n\ngit checkout master or git checkout main\n\nthis command switch back to the branch master or main (local)\n\ngit merge Update-Introduction\n\nmerge the branch Update-Introduction into master or main branch"
  },
  {
    "objectID": "introduction/git-github/git-github.html#git-branches-in-rstudio-3",
    "href": "introduction/git-github/git-github.html#git-branches-in-rstudio-3",
    "title": "Git and Github",
    "section": "Git branches in RStudio",
    "text": "Git branches in RStudio\n\nWe should now have an updated Introduction.\nLet´s practice branching\n\nStart with your citation project\nCreate a new branch Introduction\nCheck that you are in the new branch\nWrite/update your Introduction\nDo three commits\n\nSelect the Terminal tab in the lower left pane\nGive the command: git checkout master or git checkout main\nThen give the command: git merge Introduction"
  },
  {
    "objectID": "introduction/git-github/git-github.html#workflow-stud.-a-and-b-working-together",
    "href": "introduction/git-github/git-github.html#workflow-stud.-a-and-b-working-together",
    "title": "Git and Github",
    "section": "Workflow stud. A and B working together",
    "text": "Workflow stud. A and B working together\n\nStud. A creates new project on Github\nChoose Create Readme.md.\n\nGives us some default text, can be edited later\n\nSwitch back to RStudio\nNew project, version control\nBack to Github. Copy URL from Code button\nBack to RStudio, paste the URL and Create project"
  },
  {
    "objectID": "introduction/git-github/git-github.html#workflow-stud.-a-and-b-working-together-1",
    "href": "introduction/git-github/git-github.html#workflow-stud.-a-and-b-working-together-1",
    "title": "Git and Github",
    "section": "Workflow stud. A and B working together",
    "text": "Workflow stud. A and B working together\n\nStud. A selects File &gt; Quarto Document … in RStudio\n\nwrite something (use Visual mode)\nSave, give Quarto Document a meaningful name\nSelect Git tab in upper right corner\n\nCommit (check the box for your Quarto Document under Staged)\nPull (get any changes from Github)\n\nReduces the change of a merge conflict\n\nPush (send your changes up to Github)"
  },
  {
    "objectID": "introduction/git-github/git-github.html#workflow-stud.-a-and-b-working-together-2",
    "href": "introduction/git-github/git-github.html#workflow-stud.-a-and-b-working-together-2",
    "title": "Git and Github",
    "section": "Workflow stud. A and B working together",
    "text": "Workflow stud. A and B working together\n\nStud. A gives stud. B access to repository\nStud. B clones repository\nStud. B edits the Quarto Document"
  },
  {
    "objectID": "introduction/git-github/git-github.html#workflow-stud.-a-and-b-working-together-3",
    "href": "introduction/git-github/git-github.html#workflow-stud.-a-and-b-working-together-3",
    "title": "Git and Github",
    "section": "Workflow stud. A and B working together",
    "text": "Workflow stud. A and B working together\n\nStud. B\nsave Quarto Document\n\nCommit\nPull\nPush\n\nTime to discuss who do what\n\nIssues at Github might be useful\n\n\n\n\nMSB105"
  },
  {
    "objectID": "introduction/available-datasets/available_datasets.html",
    "href": "introduction/available-datasets/available_datasets.html",
    "title": "Available datasets",
    "section": "",
    "text": "#s1 &lt;- search(); s1\ns1 &lt;- .packages();s1\n\n[1] \"stats\"     \"graphics\"  \"grDevices\" \"utils\"     \"datasets\"  \"methods\"  \n[7] \"base\"     \n\n#alternative\n#(s1 &lt;- .packages())"
  },
  {
    "objectID": "introduction/available-datasets/available_datasets.html#what-is-loaded",
    "href": "introduction/available-datasets/available_datasets.html#what-is-loaded",
    "title": "Available datasets",
    "section": "",
    "text": "#s1 &lt;- search(); s1\ns1 &lt;- .packages();s1\n\n[1] \"stats\"     \"graphics\"  \"grDevices\" \"utils\"     \"datasets\"  \"methods\"  \n[7] \"base\"     \n\n#alternative\n#(s1 &lt;- .packages())"
  },
  {
    "objectID": "introduction/available-datasets/available_datasets.html#standard-datasets",
    "href": "introduction/available-datasets/available_datasets.html#standard-datasets",
    "title": "Available datasets",
    "section": "Standard datasets",
    "text": "Standard datasets\n\nd1 &lt;- as.list(data(package=s1))\nd1 &lt;- as.data.frame(d1[3]$results[,c(3, 4)])\nd1 #df_print: paged in YAML\n\n                      Item\n1            AirPassengers\n2                  BJsales\n3   BJsales.lead (BJsales)\n4                      BOD\n5                      CO2\n6              ChickWeight\n7                    DNase\n8           EuStockMarkets\n9             Formaldehyde\n10            HairEyeColor\n11            Harman23.cor\n12            Harman74.cor\n13                Indometh\n14            InsectSprays\n15          JohnsonJohnson\n16               LakeHuron\n17        LifeCycleSavings\n18                Loblolly\n19                    Nile\n20                  Orange\n21           OrchardSprays\n22             PlantGrowth\n23               Puromycin\n24               Seatbelts\n25                  Theoph\n26                 Titanic\n27             ToothGrowth\n28           UCBAdmissions\n29          UKDriverDeaths\n30                   UKgas\n31             USAccDeaths\n32               USArrests\n33          USJudgeRatings\n34   USPersonalExpenditure\n35               UScitiesD\n36                VADeaths\n37                WWWusage\n38             WorldPhones\n39             ability.cov\n40                airmiles\n41              airquality\n42                anscombe\n43                  attenu\n44                attitude\n45                 austres\n46       beaver1 (beavers)\n47       beaver2 (beavers)\n48                    cars\n49                chickwts\n50                     co2\n51                 crimtab\n52             discoveries\n53                   esoph\n54                    euro\n55       euro.cross (euro)\n56                eurodist\n57                faithful\n58  fdeaths (UKLungDeaths)\n59                  freeny\n60       freeny.x (freeny)\n61       freeny.y (freeny)\n62                  infert\n63                    iris\n64                   iris3\n65                 islands\n66  ldeaths (UKLungDeaths)\n67                      lh\n68                 longley\n69                    lynx\n70  mdeaths (UKLungDeaths)\n71                  morley\n72                  mtcars\n73                  nhtemp\n74                  nottem\n75                     npk\n76      occupationalStatus\n77                  precip\n78              presidents\n79                pressure\n80                  quakes\n81                   randu\n82                  rivers\n83                    rock\n84                   sleep\n85  stack.loss (stackloss)\n86     stack.x (stackloss)\n87               stackloss\n88       state.abb (state)\n89      state.area (state)\n90    state.center (state)\n91  state.division (state)\n92      state.name (state)\n93    state.region (state)\n94       state.x77 (state)\n95           sunspot.month\n96            sunspot.year\n97                sunspots\n98                   swiss\n99                treering\n100                  trees\n101                  uspop\n102                volcano\n103             warpbreaks\n104                  women\n                                                              Title\n1                       Monthly Airline Passenger Numbers 1949-1960\n2                                 Sales Data with Leading Indicator\n3                                 Sales Data with Leading Indicator\n4                                         Biochemical Oxygen Demand\n5                             Carbon Dioxide Uptake in Grass Plants\n6                    Weight versus age of chicks on different diets\n7                                              Elisa assay of DNase\n8   Daily Closing Prices of Major European Stock Indices, 1991-1998\n9                                     Determination of Formaldehyde\n10                        Hair and Eye Color of Statistics Students\n11                                               Harman Example 2.3\n12                                               Harman Example 7.4\n13                                 Pharmacokinetics of Indomethacin\n14                                   Effectiveness of Insect Sprays\n15                   Quarterly Earnings per Johnson & Johnson Share\n16                                    Level of Lake Huron 1875-1972\n17                             Intercountry Life-Cycle Savings Data\n18                                    Growth of Loblolly pine trees\n19                                           Flow of the River Nile\n20                                           Growth of Orange Trees\n21                                        Potency of Orchard Sprays\n22                       Results from an Experiment on Plant Growth\n23                       Reaction Velocity of an Enzymatic Reaction\n24                         Road Casualties in Great Britain 1969-84\n25                                 Pharmacokinetics of Theophylline\n26                            Survival of passengers on the Titanic\n27           The Effect of Vitamin C on Tooth Growth in Guinea Pigs\n28                                Student Admissions at UC Berkeley\n29                         Road Casualties in Great Britain 1969-84\n30                                     UK Quarterly Gas Consumption\n31                            Accidental Deaths in the US 1973-1978\n32                                  Violent Crime Rates by US State\n33        Lawyers' Ratings of State Judges in the US Superior Court\n34                                        Personal Expenditure Data\n35          Distances Between European Cities and Between US Cities\n36                                   Death Rates in Virginia (1940)\n37                                        Internet Usage per Minute\n38                                           The World's Telephones\n39                                   Ability and Intelligence Tests\n40             Passenger Miles on Commercial US Airlines, 1937-1960\n41                                New York Air Quality Measurements\n42      Anscombe's Quartet of 'Identical' Simple Linear Regressions\n43                                The Joyner-Boore Attenuation Data\n44                               The Chatterjee-Price Attitude Data\n45      Quarterly Time Series of the Number of Australian Residents\n46                           Body Temperature Series of Two Beavers\n47                           Body Temperature Series of Two Beavers\n48                             Speed and Stopping Distances of Cars\n49                                     Chicken Weights by Feed Type\n50                          Mauna Loa Atmospheric CO2 Concentration\n51                                    Student's 3000 Criminals Data\n52                          Yearly Numbers of Important Discoveries\n53                        Smoking, Alcohol and (O)esophageal Cancer\n54                              Conversion Rates of Euro Currencies\n55                              Conversion Rates of Euro Currencies\n56          Distances Between European Cities and Between US Cities\n57                                         Old Faithful Geyser Data\n58                      Monthly Deaths from Lung Diseases in the UK\n59                                            Freeny's Revenue Data\n60                                            Freeny's Revenue Data\n61                                            Freeny's Revenue Data\n62               Infertility after Spontaneous and Induced Abortion\n63                                       Edgar Anderson's Iris Data\n64                                       Edgar Anderson's Iris Data\n65                            Areas of the World's Major Landmasses\n66                      Monthly Deaths from Lung Diseases in the UK\n67                             Luteinizing Hormone in Blood Samples\n68                               Longley's Economic Regression Data\n69                         Annual Canadian Lynx trappings 1821-1934\n70                      Monthly Deaths from Lung Diseases in the UK\n71                                    Michelson Speed of Light Data\n72                                       Motor Trend Car Road Tests\n73                         Average Yearly Temperatures in New Haven\n74            Average Monthly Temperatures at Nottingham, 1920-1939\n75                           Classical N, P, K Factorial Experiment\n76                    Occupational Status of Fathers and their Sons\n77                                Annual Precipitation in US Cities\n78                      Quarterly Approval Ratings of US Presidents\n79           Vapor Pressure of Mercury as a Function of Temperature\n80                                Locations of Earthquakes off Fiji\n81                 Random Numbers from Congruential Generator RANDU\n82                           Lengths of Major North American Rivers\n83                           Measurements on Petroleum Rock Samples\n84                                             Student's Sleep Data\n85                                 Brownlee's Stack Loss Plant Data\n86                                 Brownlee's Stack Loss Plant Data\n87                                 Brownlee's Stack Loss Plant Data\n88                                       US State Facts and Figures\n89                                       US State Facts and Figures\n90                                       US State Facts and Figures\n91                                       US State Facts and Figures\n92                                       US State Facts and Figures\n93                                       US State Facts and Figures\n94                                       US State Facts and Figures\n95                     Monthly Sunspot Data, from 1749 to \"Present\"\n96                                   Yearly Sunspot Data, 1700-1988\n97                               Monthly Sunspot Numbers, 1749-1983\n98         Swiss Fertility and Socioeconomic Indicators (1888) Data\n99                                 Yearly Treering Data, -6000-1979\n100              Diameter, Height and Volume for Black Cherry Trees\n101                           Populations Recorded by the US Census\n102       Topographic Information on Auckland's Maunga Whau Volcano\n103                     The Number of Breaks in Yarn during Weaving\n104                  Average Heights and Weights for American Women"
  },
  {
    "objectID": "introduction/available-datasets/available_datasets.html#we-will-need-tidyverse",
    "href": "introduction/available-datasets/available_datasets.html#we-will-need-tidyverse",
    "title": "Available datasets",
    "section": "We will need tidyverse",
    "text": "We will need tidyverse\n\nlibrary(tidyverse)# 8 packages\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.2     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors"
  },
  {
    "objectID": "introduction/available-datasets/available_datasets.html#what-is-loaded-now",
    "href": "introduction/available-datasets/available_datasets.html#what-is-loaded-now",
    "title": "Available datasets",
    "section": "What is loaded now",
    "text": "What is loaded now\n\ns2 &lt;- .packages()\ns2\n\n [1] \"lubridate\" \"forcats\"   \"stringr\"   \"dplyr\"     \"purrr\"     \"readr\"    \n [7] \"tidyr\"     \"tibble\"    \"ggplot2\"   \"tidyverse\" \"stats\"     \"graphics\" \n[13] \"grDevices\" \"utils\"     \"datasets\"  \"methods\"   \"base\""
  },
  {
    "objectID": "introduction/available-datasets/available_datasets.html#packages-loaded-above",
    "href": "introduction/available-datasets/available_datasets.html#packages-loaded-above",
    "title": "Available datasets",
    "section": "Packages loaded above",
    "text": "Packages loaded above\ns1is default packages, while s2is default packages and the ones we loaded above. s3will be the new packages loaded.\n\n(s3 &lt;- setdiff(s2, s1))\n\n [1] \"lubridate\" \"forcats\"   \"stringr\"   \"dplyr\"     \"purrr\"     \"readr\"    \n [7] \"tidyr\"     \"tibble\"    \"ggplot2\"   \"tidyverse\""
  },
  {
    "objectID": "introduction/available-datasets/available_datasets.html#new-data-sets",
    "href": "introduction/available-datasets/available_datasets.html#new-data-sets",
    "title": "Available datasets",
    "section": "new data sets",
    "text": "new data sets\nData sets in the packages loaded above (the 9 in tidyverse).\n\nd3 &lt;- as.list(data(package = s3))\nd3 &lt;- as.data.frame(d3[3]$results[,c(3, 4)])\nd3\n\n                     Item\n1                  lakers\n2                 gss_cat\n3                   fruit\n4               sentences\n5                   words\n6        band_instruments\n7       band_instruments2\n8            band_members\n9                starwars\n10                 storms\n11              billboard\n12       cms_patient_care\n13 cms_patient_experience\n14           construction\n15        fish_encounters\n16              household\n17             population\n18           relig_income\n19                 smiths\n20                 table1\n21                 table2\n22                 table3\n23                table4a\n24                table4b\n25                 table5\n26         us_rent_income\n27                    who\n28                   who2\n29         world_bank_pop\n30               diamonds\n31              economics\n32         economics_long\n33              faithfuld\n34            luv_colours\n35                midwest\n36                    mpg\n37                 msleep\n38           presidential\n39                  seals\n40              txhousing\n                                                               Title\n1                               Lakers 2008-2009 basketball data set\n2   A sample of categorical variables from the General Social survey\n3       Sample character vectors for practicing string manipulations\n4       Sample character vectors for practicing string manipulations\n5       Sample character vectors for practicing string manipulations\n6                                                    Band membership\n7                                                    Band membership\n8                                                    Band membership\n9                                                Starwars characters\n10                                                 Storm tracks data\n11              Song rankings for Billboard top 100 in the year 2000\n12            Data from the Centers for Medicare & Medicaid Services\n13            Data from the Centers for Medicare & Medicaid Services\n14                          Completed construction in the US in 2018\n15                                                   Fish encounters\n16                                                    Household data\n17                                 World Health Organization TB data\n18                                    Pew religion and income survey\n19                                  Some data about the Smith family\n20                                   Example tabular representations\n21                                   Example tabular representations\n22                                   Example tabular representations\n23                                   Example tabular representations\n24                                   Example tabular representations\n25                                   Example tabular representations\n26                                           US rent and income data\n27                                 World Health Organization TB data\n28                                 World Health Organization TB data\n29                               Population data from the world bank\n30                          Prices of over 50,000 round cut diamonds\n31                                           US economic time series\n32                                           US economic time series\n33                          2d density estimate of Old Faithful data\n34                                           'colors()' in Luv space\n35                                              Midwest demographics\n36 Fuel economy data from 1999 to 2008 for 38 popular models of cars\n37      An updated and expanded version of the mammals sleep dataset\n38                   Terms of 12 presidents from Eisenhower to Trump\n39                                    Vector field of seal movements\n40                                               Housing sales in TX\n\n\nR for data science uses the mpg dataset for many of the examples in chapter 3. The first one ggplot() command is\n\nggplot(data = mpg) + \n  geom_point(mapping = aes(x = displ, y = hwy))\n\n\n\n\nand as you will see the dataset is mpg. You should work through the examples in chapter 3. It´s easy to copy the code into R.\n\n\n\nEx. ggplot2.\n\n\nJust click the icon in the upper right corner and then paste the code into an R Notebook. (remember alt + ctrl + i (pc) or alt + cmb + i (on mac) before you paste in the copied code)\nI will use another classic dataset called mtcars. It´s one of the classics and is allways available in R. We can read about it by entering mtcars in the search field in help.\n\n\n\nDocumentation of Dataset mtcars.\n\n\nWe can start by viewing the data. Note there is a big difference between view and View. It´s the one with capital v we want here.\n\n#View(mtcars)\n\n\n\n\nUsing View() function to inspect data.\n\n\nThis gives us a nice spreadsheet view of the dataset. We can return to our document either by clicking its tab, clicking the white arrow pointing left or by closing the mtcars tab by clicking the little x to the right of the tab name.\nAnother way to take a swift look at the data is by\n\nhead(mtcars)\n\n                   mpg cyl disp  hp drat    wt  qsec vs am gear carb\nMazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4\nMazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4\nDatsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1\nHornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1\nHornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2\nValiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1\n\n\n(note that this is displayed as a nice table because we have df_print: paged up in the YAML header). In the console the same command would have given us\n\n\n\nmtcars Dataset in Console."
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#r-from-r-project.org",
    "href": "introduction/install-sw/install-sw.html#r-from-r-project.org",
    "title": "Install Software",
    "section": "R from r-project.org",
    "text": "R from r-project.org\n\nWe need to install the latest version of R\nGoto www.r-project.org\n\nSelect CRAN from menu at the left\nSelect Norway: uib from the list\nDownload for your platform (macos, windows or linux)\nFor mac select correct version\n\nR-4.2.1.pkg for Intel processor (macs older than 1,5 years)\nR-4.2.1-arm64.pkg for Apple Silicon processors (M1 or M2)\n\n\nInstall software as you normally would"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#mac-installer",
    "href": "introduction/install-sw/install-sw.html#mac-installer",
    "title": "Install Software",
    "section": "Mac installer",
    "text": "Mac installer\n\nSelect “Tilpass”\n\n\n\n\n\nTilpass"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#mac-installer-cont.",
    "href": "introduction/install-sw/install-sw.html#mac-installer-cont.",
    "title": "Install Software",
    "section": "Mac installer cont.",
    "text": "Mac installer cont.\n\ndeselect tcltk\n\n\n\n\n\nDeselect tcl/pk"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#install-rstudio",
    "href": "introduction/install-sw/install-sw.html#install-rstudio",
    "title": "Install Software",
    "section": "Install RStudio",
    "text": "Install RStudio\n\nWe need to install latest version of RStudio\nGoto https://www.rstudio.com/products/rstudio/download/\nDownload the free RStudio Desktop for your system\nFor mac drag the RStudio icon to the Applications folder alias next to the icon\nFor windows follow normal application installation procedure"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#install-zotero",
    "href": "introduction/install-sw/install-sw.html#install-zotero",
    "title": "Install Software",
    "section": "Install Zotero",
    "text": "Install Zotero\n\nWe need to install the latest version of Zotero\nGoto https://www.zotero.org/download/\nAfter Zotero is installed and running return to www.zotero.org with your favourite web borwser.\nInstall Zotero Connector\n\nIf you are using Safari on mac the connector is included, but you have to enable it under Safari &gt; Valg … &gt; Tillegg"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#enable-zotero-connector-in-safari",
    "href": "introduction/install-sw/install-sw.html#enable-zotero-connector-in-safari",
    "title": "Install Software",
    "section": "Enable Zotero Connector in Safari",
    "text": "Enable Zotero Connector in Safari\n\nEnable Zotero Connector in Safari"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#installing-better-bibtex",
    "href": "introduction/install-sw/install-sw.html#installing-better-bibtex",
    "title": "Install Software",
    "section": "Installing Better BibTeX",
    "text": "Installing Better BibTeX\n\nGoto https://retorque.re/zotero-better-bibtex/\nClick Download in menu at the left\nThen click Installation in menu at the left to get installation instructions"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#installing-git",
    "href": "introduction/install-sw/install-sw.html#installing-git",
    "title": "Install Software",
    "section": "Installing git",
    "text": "Installing git\n\nGoto https://git-scm.com/downloads\nDownload for your system\nChoose binary installer (on mac)\n\nClick download on https://sourceforge.net/projects/git-osx-installer/"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#for-mac",
    "href": "introduction/install-sw/install-sw.html#for-mac",
    "title": "Install Software",
    "section": "For mac",
    "text": "For mac\n\nOpen the Terminal program (ligger i Verktøy mappen i Programmer mappen)\nGive the following command (in Terminal)\n\nxcode-select --install\n\nAn apple ID might be required to be able to download"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#final-configurations",
    "href": "introduction/install-sw/install-sw.html#final-configurations",
    "title": "Install Software",
    "section": "Final configurations",
    "text": "Final configurations\n\nStart RStudio\nCheck that you have a Git tab in upper right pane\nSelect the Terminal tab in lower right pane in RStudio\n\n\ngit config --global user.name 'Jane Doe'\ngit config --global user.email 'jane@example.com'\ngit config --global --list"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#git-editor",
    "href": "introduction/install-sw/install-sw.html#git-editor",
    "title": "Install Software",
    "section": "Git editor",
    "text": "Git editor\n\nPC\n\ngit config --global core.editor C:\\Program Files\\RStudio\\bin\\rstudio.exe\n\nmac\n\ngit config --global core.editor /Applications/RStudio.app"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#define-user-on-github",
    "href": "introduction/install-sw/install-sw.html#define-user-on-github",
    "title": "Install Software",
    "section": "Define user on Github",
    "text": "Define user on Github\n\nhvl email og email you use\nUse a serious name; you might be showing this to a future employer\nConnect RStudio to Github\n\ninstall packages\n\nusethis\ncredentials\n\nUse Github.R\n\nSee git-github slides for configuration"
  },
  {
    "objectID": "introduction/install-sw/install-sw.html#install-tinytex",
    "href": "introduction/install-sw/install-sw.html#install-tinytex",
    "title": "Install Software",
    "section": "Install tinytex",
    "text": "Install tinytex\n\nUnder Packages in lower right pane select:\n\nInstall\n\nUnder packages write tinytex\nMake sure that Install dependencies is checked\nClick install\n\n\nWhen install check off tinytex in the lower left pane under tab Packages\nGive the command install_tinytex() in Console in lower left pane.\n\n\n\nMSB105"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html",
    "href": "introduction/pref-setup-2022/ps2022.html",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "We set up the RStudio preferences so that we all work in an identical environment.\nSelect Preferences.. from the File menu.\n\n\n\nSelect Preferences…\n\n\nThe Global Options… are now on the Tools menu for both windows and macos.\n\n\n\nNew location for Global Options…\n\n\n\n\n\n\n\nGeneral:Basic\n\n\n\n\n\n\n\n\nGeneral:Graphics\n\n\n\n\n\n\n\n\nGeneral:Advanced\n\n\n\n\n\n\n\n\nCode:Editing\n\n\n\n\n\n\n\n\nCode:Display\n\n\n\n\n\n\n\n\nCode:Saving\n\n\n\n\n\n\n\n\nCode:Completion\n\n\n\n\n\n\n\n\nCode:Diagnostic\n\n\n\n\n\n\n\n\nConsole\n\n\n\n\n\nWhat font to use is up to you, but use a fixed-width font. I like fira-code. Courier or Monaco are good alternatives.\n\n\n\nAppearance\n\n\n\n\n\n\n\n\nPane layout 1\n\n\n\n\n\n\n\n\nPane layout 2\n\n\n\n\n\n\n\n\nPackages:Management\n\n\n\n\n\n\n\n\nPackages:Development\n\n\n\n\n\n\n\n\nPackages:C/C++\n\n\n\n\n\nSee rmarkdown-cookbook chapter 16 for details. We select “Document” for where to evaluate chunck, hence our “working directory will be the directory where our R Notebook is placed.\n\n\n\nR Markdown:Basic\n\n\n\n\n\n\n\n\nR Markdown:Advanced\n\n\n\n\n\n\n\n\nR Markdown:Visual\n\n\n\n\n\n\n\n\nR Markdown:Citations. Note! We will soon be changing Use libraries:, but My Library is OK for now.\n\n\n\n\n\n\n\n\nR Markdown:Quarto. Note! This pane does not exists in the latest version since Quarto now is the default.\n\n\n\n\n\n\n\n\nPython\n\n\n\n\n\n\n\n\nSweave\n\n\n\n\n\n\n\n\nSpelling\n\n\nChoose Install More Languages...from the Main dictionary language: drop-down menu. Norwegian should now be in the menu.\n\n\n\nWe are only going to use Git so SVN is not to important.\n\n\n\nGit/SVN\n\n\n\n\n\n\n\n\nPublishing\n\n\n\n\n\n\n\n\nTerminal:General\n\n\n\n\n\n\n\n\nTerminal:Closing\n\n\n\n\n\n\n\n\nAccessibility:General\n\n\n\n\n\n\n\n\nAccessibility:Announcements"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#generalbasic",
    "href": "introduction/pref-setup-2022/ps2022.html#generalbasic",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "General:Basic"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#generalgraphics",
    "href": "introduction/pref-setup-2022/ps2022.html#generalgraphics",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "General:Graphics"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#generaladvanced",
    "href": "introduction/pref-setup-2022/ps2022.html#generaladvanced",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "General:Advanced"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#codeediting",
    "href": "introduction/pref-setup-2022/ps2022.html#codeediting",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Code:Editing"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#codedisplay",
    "href": "introduction/pref-setup-2022/ps2022.html#codedisplay",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Code:Display"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#codesaving",
    "href": "introduction/pref-setup-2022/ps2022.html#codesaving",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Code:Saving"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#codecompletion",
    "href": "introduction/pref-setup-2022/ps2022.html#codecompletion",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Code:Completion"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#codediagnostic",
    "href": "introduction/pref-setup-2022/ps2022.html#codediagnostic",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Code:Diagnostic"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#console",
    "href": "introduction/pref-setup-2022/ps2022.html#console",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Console"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#appearance",
    "href": "introduction/pref-setup-2022/ps2022.html#appearance",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "What font to use is up to you, but use a fixed-width font. I like fira-code. Courier or Monaco are good alternatives.\n\n\n\nAppearance"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#pane-layout-1",
    "href": "introduction/pref-setup-2022/ps2022.html#pane-layout-1",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Pane layout 1"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#pane-layout-2",
    "href": "introduction/pref-setup-2022/ps2022.html#pane-layout-2",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Pane layout 2"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#packagesmanagement",
    "href": "introduction/pref-setup-2022/ps2022.html#packagesmanagement",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Packages:Management"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#packagesdevelopment",
    "href": "introduction/pref-setup-2022/ps2022.html#packagesdevelopment",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Packages:Development"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#packagescc",
    "href": "introduction/pref-setup-2022/ps2022.html#packagescc",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Packages:C/C++"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#r-markdownbasic",
    "href": "introduction/pref-setup-2022/ps2022.html#r-markdownbasic",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "See rmarkdown-cookbook chapter 16 for details. We select “Document” for where to evaluate chunck, hence our “working directory will be the directory where our R Notebook is placed.\n\n\n\nR Markdown:Basic"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#r-markdown-advanced",
    "href": "introduction/pref-setup-2022/ps2022.html#r-markdown-advanced",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "R Markdown:Advanced"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#r-markdown-visual",
    "href": "introduction/pref-setup-2022/ps2022.html#r-markdown-visual",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "R Markdown:Visual"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#r-markdown-citations",
    "href": "introduction/pref-setup-2022/ps2022.html#r-markdown-citations",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "R Markdown:Citations. Note! We will soon be changing Use libraries:, but My Library is OK for now."
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#r-markdown-quarto",
    "href": "introduction/pref-setup-2022/ps2022.html#r-markdown-quarto",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "R Markdown:Quarto. Note! This pane does not exists in the latest version since Quarto now is the default."
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#python",
    "href": "introduction/pref-setup-2022/ps2022.html#python",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Python"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#sweave",
    "href": "introduction/pref-setup-2022/ps2022.html#sweave",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Sweave"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#spelling",
    "href": "introduction/pref-setup-2022/ps2022.html#spelling",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Spelling\n\n\nChoose Install More Languages...from the Main dictionary language: drop-down menu. Norwegian should now be in the menu."
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#gitsvn",
    "href": "introduction/pref-setup-2022/ps2022.html#gitsvn",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "We are only going to use Git so SVN is not to important.\n\n\n\nGit/SVN"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#publishing",
    "href": "introduction/pref-setup-2022/ps2022.html#publishing",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Publishing"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#terminalgeneral",
    "href": "introduction/pref-setup-2022/ps2022.html#terminalgeneral",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Terminal:General"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#terminalclosing",
    "href": "introduction/pref-setup-2022/ps2022.html#terminalclosing",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Terminal:Closing"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#accessibilitygeneral",
    "href": "introduction/pref-setup-2022/ps2022.html#accessibilitygeneral",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Accessibility:General"
  },
  {
    "objectID": "introduction/pref-setup-2022/ps2022.html#accessibilityannouncements",
    "href": "introduction/pref-setup-2022/ps2022.html#accessibilityannouncements",
    "title": "RStudio preference setup 2022",
    "section": "",
    "text": "Accessibility:Announcements"
  },
  {
    "objectID": "introduction/illustrate-markdown/illustrate-markdown.html",
    "href": "introduction/illustrate-markdown/illustrate-markdown.html",
    "title": "Illustrate Markdown",
    "section": "",
    "text": "I have used format: pdf, keep-md: true, keep-tex: true in the YAML header to produce the images below."
  },
  {
    "objectID": "introduction/illustrate-markdown/illustrate-markdown.html#introduction",
    "href": "introduction/illustrate-markdown/illustrate-markdown.html#introduction",
    "title": "Illustrate Markdown",
    "section": "Introduction",
    "text": "Introduction\nA short document to illustrate RMarkdown and Markdown.\nWe start with some simple R code in a chunk.\n\ncars[1:3, ]\n\n  speed dist\n1     4    2\n2     4   10\n3     7    4\n\n\nWith echo: true only the code and not the code options are shown. The complete content of the chunk is:\n\n\n\nThe complete content of the chunk above.\n\n\n\nplot(cars)\n\n\n\n\n\n\n\nThe complete content of the plot chunk.\n\n\n\nplot(cars)\n\n\n\n\nPlot with fig-width: 2 and echo: true\n\n\n\n\n\n\n\n\n\nPlot with fig-width: 4 and echo: false"
  },
  {
    "objectID": "introduction/illustrate-markdown/illustrate-markdown.html#the-resulting-markdown",
    "href": "introduction/illustrate-markdown/illustrate-markdown.html#the-resulting-markdown",
    "title": "Illustrate Markdown",
    "section": "The resulting Markdown",
    "text": "The resulting Markdown\nSee Rmarkdown Cookbook section 5.8 for an explanation of the colons.\n\n\n\nFirst part of md file.\n\n\n\n\n\nSecond part of md file."
  },
  {
    "objectID": "introduction/illustrate-markdown/illustrate-markdown.html#the-md-file-converted-to-html",
    "href": "introduction/illustrate-markdown/illustrate-markdown.html#the-md-file-converted-to-html",
    "title": "Illustrate Markdown",
    "section": "The MD file converted to HTML",
    "text": "The MD file converted to HTML\n\n\n\nA segment of the md file converted into html. The html header is dropped."
  },
  {
    "objectID": "introduction/illustrate-markdown/illustrate-markdown.html#the-md-file-converted-to-latex",
    "href": "introduction/illustrate-markdown/illustrate-markdown.html#the-md-file-converted-to-latex",
    "title": "Illustrate Markdown",
    "section": "The MD file converted to LaTeX",
    "text": "The MD file converted to LaTeX\n\n\n\nA segment of the LaTeX file generated. This file is run through xelatex to generate the pdf file."
  },
  {
    "objectID": "introduction/illustrate-markdown/illustrate-markdown.html#the-md-file-converted-to-pdf-format",
    "href": "introduction/illustrate-markdown/illustrate-markdown.html#the-md-file-converted-to-pdf-format",
    "title": "Illustrate Markdown",
    "section": "The MD file converted to PDF format",
    "text": "The MD file converted to PDF format\n\n\n\nFirst page of PDF file.\n\n\n\n\n\nSecond page of PDF file.\n\n\n\n\n\nThird page of PDF file."
  },
  {
    "objectID": "introduction/illustrate-markdown/illustrate-markdown.html#the-whole-process",
    "href": "introduction/illustrate-markdown/illustrate-markdown.html#the-whole-process",
    "title": "Illustrate Markdown",
    "section": "The whole process",
    "text": "The whole process\nQuarto Document -&gt; MD file -&gt; HTML file with CSS styling\nQuarto Document -&gt; MD file -&gt; LaTeX file -&gt; PDF file\nWe can also have:\nQuarto Document -&gt; MD file -&gt; .docx file\n.docx files are an XLM file that is kind of a generalisation of HTML"
  },
  {
    "objectID": "introduction/introduction.html",
    "href": "introduction/introduction.html",
    "title": "Introduction",
    "section": "",
    "text": "This section will introduce you to the tools we will be using, RStudio (with Quarto), R, git, github and Zotero. It will try to give you an idea of what Data Sciences is and also teach you some classic R, give you an introduction to git and github and show you who to manage your references with Zotero."
  },
  {
    "objectID": "introduction/introduction.html#presentations",
    "href": "introduction/introduction.html#presentations",
    "title": "Introduction",
    "section": "Presentations",
    "text": "Presentations\n\nIntro\nUndervisningsplan\nInstall Software\nStructured Dynamic Documents\n\nDocuments:\n\nPreferences RStudio\nInstall R packages\nIllustrate Markdown\nRegression Tables\n\nOther:\n\nStuff from lecture “Innledning R”\nConnect RStudio to Github on mac\n\n\nGit and Github\nVery Short Intro to R\n\nVery Short Intro to R (as document)\nNotater fra forelesning (in Norwegian)\n\nZotero demo"
  },
  {
    "objectID": "introduction/introduction.html#datasets",
    "href": "introduction/introduction.html#datasets",
    "title": "Introduction",
    "section": "Datasets",
    "text": "Datasets\nR has a lot of available datasets to practise with. The following document explains how to find what’s available.\n\nAvailable Datasets"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#getting-data-from-external-source.-chap.-11",
    "href": "explore-data/import-export-data/import-export-data.html#getting-data-from-external-source.-chap.-11",
    "title": "Import/Export Data",
    "section": "Getting data from external source. (chap. 11)",
    "text": "Getting data from external source. (chap. 11)\n\nWe will download some data from SSB.\nWe will get data from ssb tab. 10540 which gives us percentage of the workforce (split on age-group) that is unemployed.\nWe will get data for municipalities in Rogaland in the period Jan. 1999 to Dec. 2002"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#getting-data-from-external-source.-chap.-11-cont.",
    "href": "explore-data/import-export-data/import-export-data.html#getting-data-from-external-source.-chap.-11-cont.",
    "title": "Import/Export Data",
    "section": "Getting data from external source. (chap. 11) cont.",
    "text": "Getting data from external source. (chap. 11) cont.\nThe SSB web page."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#getting-data-from-external-source.-chap.-11-cont.-1",
    "href": "explore-data/import-export-data/import-export-data.html#getting-data-from-external-source.-chap.-11-cont.-1",
    "title": "Import/Export Data",
    "section": "Getting data from external source. (chap. 11) cont.",
    "text": "Getting data from external source. (chap. 11) cont.\n\nWe can get the data into R in (at least) two ways:\n\nUse SSB web-app to select part of tables (up to 300000 cells max)\nUse the SSB api (up to 800000 cells max)"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#ssb-web-app",
    "href": "explore-data/import-export-data/import-export-data.html#ssb-web-app",
    "title": "Import/Export Data",
    "section": "SSB web-app",
    "text": "SSB web-app\nWe can use the web-pages of SSB and download the data as .xlsx format and use the read_xlsx() function from the readxl package, (Wickham and Bryan 2023)\nGenerate the table in xlsx-format\n\nThe .xlsx File."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#ssb-web-app-cont.",
    "href": "explore-data/import-export-data/import-export-data.html#ssb-web-app-cont.",
    "title": "Import/Export Data",
    "section": "SSB web-app cont.",
    "text": "SSB web-app cont.\n\nAs .csv\n\n\n\n\n\nThe csv file RegLedige15-74-web-csv"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#ssb-web-app-cont.-1",
    "href": "explore-data/import-export-data/import-export-data.html#ssb-web-app-cont.-1",
    "title": "Import/Export Data",
    "section": "SSB web-app cont.",
    "text": "SSB web-app cont.\nNote that:\n\ndecimal point is ‘,’ and not ‘.’ in “Norwegian .csv files”\n\ndecimal point in SSB semicolon separated files seems to be ‘.’\n\n‘;’, not ‘,’, is used to separate values in “Norwegian .csv files”\nTo read the data into R we will use the classic functions from the util package read.table() and read.csv2().\n\nThe read_table() and read_csv2() functions are “modern” equivalents of these classics.\n\nWe use read.table since it’s possible to specify dec = \"\" and sep = \"\".\n\nread.csv2 is a form of read.table() that already uses these options.\nThe modern ones uses locale(), but I could not get it to work properly."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#ssb-web-app-cont.-2",
    "href": "explore-data/import-export-data/import-export-data.html#ssb-web-app-cont.-2",
    "title": "Import/Export Data",
    "section": "SSB web-app cont.",
    "text": "SSB web-app cont.\n\nUnder Environment in the upper right pane i R Studio there is also an Import Dataset menu.\nNote that it gives an error for the .csv file (“multibyte character”)."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-excel-file",
    "href": "explore-data/import-export-data/import-export-data.html#read-excel-file",
    "title": "Import/Export Data",
    "section": "Read Excel file",
    "text": "Read Excel file\n\nThe Tidyverse library does not load the readxl package.\n\nTo use the read_xlsx() function we will either have to use readxl::read_xlsx() or first load the readxl package with library(readxl)\n\nput the library() commands in an r-chunk called setup at the very start of your notebook.\n\nThe chunk named setup will be run every time you render the quarto document.\n\nIf you haven’t got the readxl package you have to install it first."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.",
    "href": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.",
    "title": "Import/Export Data",
    "section": "Read Excel file cont.",
    "text": "Read Excel file cont.\n\n\nCode\nRegHeltLedige &lt;- readxl::read_excel(\n  path = \"RegHeltLedige.xlsx\", \n  sheet = \"RegHeltLedige\",\n  skip = 1\n  )\n# Have a look at the names generated\nnames(RegHeltLedige)\n\n\n[1] \"...1\"                          \"...2\"                         \n[3] \"...3\"                          \"Registrert helt arbeidsledige\""
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-1",
    "href": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-1",
    "title": "Import/Export Data",
    "section": "Read Excel file cont.",
    "text": "Read Excel file cont.\n\nCheck head of file. 15 first lines.\n\n\n\n\nCode\nhead(RegHeltLedige, n = 15)\n\n\n# A tibble: 15 × 4\n   ...1           ...2     ...3    `Registrert helt arbeidsledige`\n   &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                          \n 1 1101 Eigersund 15-74 år 1999M01 1.5                            \n 2 &lt;NA&gt;           &lt;NA&gt;     1999M02 1.5                            \n 3 &lt;NA&gt;           &lt;NA&gt;     1999M03 1.3                            \n 4 &lt;NA&gt;           &lt;NA&gt;     1999M04 1.8                            \n 5 &lt;NA&gt;           &lt;NA&gt;     1999M05 1.3                            \n 6 &lt;NA&gt;           &lt;NA&gt;     1999M06 1.4                            \n 7 &lt;NA&gt;           &lt;NA&gt;     1999M07 2                              \n 8 &lt;NA&gt;           &lt;NA&gt;     1999M08 2.4                            \n 9 &lt;NA&gt;           &lt;NA&gt;     1999M09 1.9                            \n10 &lt;NA&gt;           &lt;NA&gt;     1999M10 1.6                            \n11 &lt;NA&gt;           &lt;NA&gt;     1999M11 1.5                            \n12 &lt;NA&gt;           &lt;NA&gt;     1999M12 1.6                            \n13 &lt;NA&gt;           &lt;NA&gt;     2000M01 2.1                            \n14 &lt;NA&gt;           &lt;NA&gt;     2000M02 1.9                            \n15 &lt;NA&gt;           &lt;NA&gt;     2000M03 2"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-2",
    "href": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-2",
    "title": "Import/Export Data",
    "section": "Read Excel file cont.",
    "text": "Read Excel file cont.\n\nCheck head of file, where age_group change. Lines 45:55.\n\n\n\n\nCode\nprint(RegHeltLedige[c(1:5, 45:55),], n = 20)\n\n\n# A tibble: 16 × 4\n   ...1           ...2     ...3    `Registrert helt arbeidsledige`\n   &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;                          \n 1 1101 Eigersund 15-74 år 1999M01 1.5                            \n 2 &lt;NA&gt;           &lt;NA&gt;     1999M02 1.5                            \n 3 &lt;NA&gt;           &lt;NA&gt;     1999M03 1.3                            \n 4 &lt;NA&gt;           &lt;NA&gt;     1999M04 1.8                            \n 5 &lt;NA&gt;           &lt;NA&gt;     1999M05 1.3                            \n 6 &lt;NA&gt;           &lt;NA&gt;     2002M09 2.1                            \n 7 &lt;NA&gt;           &lt;NA&gt;     2002M10 2.1                            \n 8 &lt;NA&gt;           &lt;NA&gt;     2002M11 3                              \n 9 &lt;NA&gt;           &lt;NA&gt;     2002M12 2.9                            \n10 &lt;NA&gt;           15-29 år 1999M01 2                              \n11 &lt;NA&gt;           &lt;NA&gt;     1999M02 1.8                            \n12 &lt;NA&gt;           &lt;NA&gt;     1999M03 1.7                            \n13 &lt;NA&gt;           &lt;NA&gt;     1999M04 2.5                            \n14 &lt;NA&gt;           &lt;NA&gt;     1999M05 1.7                            \n15 &lt;NA&gt;           &lt;NA&gt;     1999M06 1.9                            \n16 &lt;NA&gt;           &lt;NA&gt;     1999M07 2.6"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-3",
    "href": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-3",
    "title": "Import/Export Data",
    "section": "Read Excel file cont.",
    "text": "Read Excel file cont.\n\nWe must fix variable names\nWe must fill in for NAs in municipality names and age group\n. . .\n\n\n\nCode\nnames(RegHeltLedige) &lt;- c(\"knr_kname\", \"age_group\", \"year_month\", \"unempl\")\nhead(RegHeltLedige, n = 3)\n\n\n# A tibble: 3 × 4\n  knr_kname      age_group year_month unempl\n  &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; \n1 1101 Eigersund 15-74 år  1999M01    1.5   \n2 &lt;NA&gt;           &lt;NA&gt;      1999M02    1.5   \n3 &lt;NA&gt;           &lt;NA&gt;      1999M03    1.3"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-4",
    "href": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-4",
    "title": "Import/Export Data",
    "section": "Read Excel file cont.",
    "text": "Read Excel file cont.\n\n\nCode\n# Fill in for NA\nRegHeltLedige &lt;- fill(\n  data = RegHeltLedige,\n  # column to fill, Note use of c() when multiple columns\n  c(knr_kname, age_group),\n  # NOTE! .direction, NOT direction\n  .direction = \"down\")"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-5",
    "href": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-5",
    "title": "Import/Export Data",
    "section": "Read Excel file cont.",
    "text": "Read Excel file cont.\n\nRe-check head of file\n\n\n\n\nCode\nprint(RegHeltLedige[c(1:5, 45:55),], n = 20)\n\n\n# A tibble: 16 × 4\n   knr_kname      age_group year_month unempl\n   &lt;chr&gt;          &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; \n 1 1101 Eigersund 15-74 år  1999M01    1.5   \n 2 1101 Eigersund 15-74 år  1999M02    1.5   \n 3 1101 Eigersund 15-74 år  1999M03    1.3   \n 4 1101 Eigersund 15-74 år  1999M04    1.8   \n 5 1101 Eigersund 15-74 år  1999M05    1.3   \n 6 1101 Eigersund 15-74 år  2002M09    2.1   \n 7 1101 Eigersund 15-74 år  2002M10    2.1   \n 8 1101 Eigersund 15-74 år  2002M11    3     \n 9 1101 Eigersund 15-74 år  2002M12    2.9   \n10 1101 Eigersund 15-29 år  1999M01    2     \n11 1101 Eigersund 15-29 år  1999M02    1.8   \n12 1101 Eigersund 15-29 år  1999M03    1.7   \n13 1101 Eigersund 15-29 år  1999M04    2.5   \n14 1101 Eigersund 15-29 år  1999M05    1.7   \n15 1101 Eigersund 15-29 år  1999M06    1.9   \n16 1101 Eigersund 15-29 år  1999M07    2.6   \n\n\n\nOk, NAs filled in"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-6",
    "href": "explore-data/import-export-data/import-export-data.html#read-excel-file-cont.-6",
    "title": "Import/Export Data",
    "section": "Read Excel file cont.",
    "text": "Read Excel file cont.\n\n\nCode\nhead(as.data.frame(RegHeltLedige), n =200)\n\n\n               knr_kname age_group year_month unempl\n1         1101 Eigersund  15-74 år    1999M01    1.5\n2         1101 Eigersund  15-74 år    1999M02    1.5\n3         1101 Eigersund  15-74 år    1999M03    1.3\n4         1101 Eigersund  15-74 år    1999M04    1.8\n5         1101 Eigersund  15-74 år    1999M05    1.3\n6         1101 Eigersund  15-74 år    1999M06    1.4\n7         1101 Eigersund  15-74 år    1999M07      2\n8         1101 Eigersund  15-74 år    1999M08    2.4\n9         1101 Eigersund  15-74 år    1999M09    1.9\n10        1101 Eigersund  15-74 år    1999M10    1.6\n11        1101 Eigersund  15-74 år    1999M11    1.5\n12        1101 Eigersund  15-74 år    1999M12    1.6\n13        1101 Eigersund  15-74 år    2000M01    2.1\n14        1101 Eigersund  15-74 år    2000M02    1.9\n15        1101 Eigersund  15-74 år    2000M03      2\n16        1101 Eigersund  15-74 år    2000M04    2.7\n17        1101 Eigersund  15-74 år    2000M05    2.6\n18        1101 Eigersund  15-74 år    2000M06    3.3\n19        1101 Eigersund  15-74 år    2000M07    4.9\n20        1101 Eigersund  15-74 år    2000M08    3.7\n21        1101 Eigersund  15-74 år    2000M09    3.1\n22        1101 Eigersund  15-74 år    2000M10    2.6\n23        1101 Eigersund  15-74 år    2000M11    2.6\n24        1101 Eigersund  15-74 år    2000M12      3\n25        1101 Eigersund  15-74 år    2001M01    2.8\n26        1101 Eigersund  15-74 år    2001M02    2.6\n27        1101 Eigersund  15-74 år    2001M03    2.6\n28        1101 Eigersund  15-74 år    2001M04    2.7\n29        1101 Eigersund  15-74 år    2001M05    2.3\n30        1101 Eigersund  15-74 år    2001M06    2.1\n31        1101 Eigersund  15-74 år    2001M07    2.7\n32        1101 Eigersund  15-74 år    2001M08    2.6\n33        1101 Eigersund  15-74 år    2001M09    2.2\n34        1101 Eigersund  15-74 år    2001M10      2\n35        1101 Eigersund  15-74 år    2001M11      2\n36        1101 Eigersund  15-74 år    2001M12    2.1\n37        1101 Eigersund  15-74 år    2002M01    2.3\n38        1101 Eigersund  15-74 år    2002M02    2.2\n39        1101 Eigersund  15-74 år    2002M03    2.1\n40        1101 Eigersund  15-74 år    2002M04    2.3\n41        1101 Eigersund  15-74 år    2002M05      2\n42        1101 Eigersund  15-74 år    2002M06    1.7\n43        1101 Eigersund  15-74 år    2002M07    2.4\n44        1101 Eigersund  15-74 år    2002M08    2.4\n45        1101 Eigersund  15-74 år    2002M09    2.1\n46        1101 Eigersund  15-74 år    2002M10    2.1\n47        1101 Eigersund  15-74 år    2002M11      3\n48        1101 Eigersund  15-74 år    2002M12    2.9\n49        1101 Eigersund  15-29 år    1999M01      2\n50        1101 Eigersund  15-29 år    1999M02    1.8\n51        1101 Eigersund  15-29 år    1999M03    1.7\n52        1101 Eigersund  15-29 år    1999M04    2.5\n53        1101 Eigersund  15-29 år    1999M05    1.7\n54        1101 Eigersund  15-29 år    1999M06    1.9\n55        1101 Eigersund  15-29 år    1999M07    2.6\n56        1101 Eigersund  15-29 år    1999M08    2.9\n57        1101 Eigersund  15-29 år    1999M09    2.1\n58        1101 Eigersund  15-29 år    1999M10    2.1\n59        1101 Eigersund  15-29 år    1999M11      2\n60        1101 Eigersund  15-29 år    1999M12    2.5\n61        1101 Eigersund  15-29 år    2000M01      3\n62        1101 Eigersund  15-29 år    2000M02    3.3\n63        1101 Eigersund  15-29 år    2000M03    2.7\n64        1101 Eigersund  15-29 år    2000M04    3.9\n65        1101 Eigersund  15-29 år    2000M05    3.6\n66        1101 Eigersund  15-29 år    2000M06    4.8\n67        1101 Eigersund  15-29 år    2000M07    6.1\n68        1101 Eigersund  15-29 år    2000M08    5.1\n69        1101 Eigersund  15-29 år    2000M09      4\n70        1101 Eigersund  15-29 år    2000M10    3.3\n71        1101 Eigersund  15-29 år    2000M11    2.9\n72        1101 Eigersund  15-29 år    2000M12    3.5\n73        1101 Eigersund  15-29 år    2001M01    3.8\n74        1101 Eigersund  15-29 år    2001M02    3.4\n75        1101 Eigersund  15-29 år    2001M03    3.5\n76        1101 Eigersund  15-29 år    2001M04    3.3\n77        1101 Eigersund  15-29 år    2001M05    2.9\n78        1101 Eigersund  15-29 år    2001M06    2.2\n79        1101 Eigersund  15-29 år    2001M07    3.1\n80        1101 Eigersund  15-29 år    2001M08    3.7\n81        1101 Eigersund  15-29 år    2001M09    2.9\n82        1101 Eigersund  15-29 år    2001M10    2.5\n83        1101 Eigersund  15-29 år    2001M11    2.6\n84        1101 Eigersund  15-29 år    2001M12    2.7\n85        1101 Eigersund  15-29 år    2002M01    2.8\n86        1101 Eigersund  15-29 år    2002M02    2.7\n87        1101 Eigersund  15-29 år    2002M03    2.7\n88        1101 Eigersund  15-29 år    2002M04    2.6\n89        1101 Eigersund  15-29 år    2002M05      2\n90        1101 Eigersund  15-29 år    2002M06    2.2\n91        1101 Eigersund  15-29 år    2002M07    3.1\n92        1101 Eigersund  15-29 år    2002M08    3.4\n93        1101 Eigersund  15-29 år    2002M09    2.6\n94        1101 Eigersund  15-29 år    2002M10    2.7\n95        1101 Eigersund  15-29 år    2002M11    3.9\n96        1101 Eigersund  15-29 år    2002M12    3.8\n97        1101 Eigersund  30-74 år    1999M01    1.3\n98        1101 Eigersund  30-74 år    1999M02    1.3\n99        1101 Eigersund  30-74 år    1999M03    1.1\n100       1101 Eigersund  30-74 år    1999M04    1.5\n101       1101 Eigersund  30-74 år    1999M05    1.2\n102       1101 Eigersund  30-74 år    1999M06    1.2\n103       1101 Eigersund  30-74 år    1999M07    1.7\n104       1101 Eigersund  30-74 år    1999M08    2.2\n105       1101 Eigersund  30-74 år    1999M09    1.8\n106       1101 Eigersund  30-74 år    1999M10    1.5\n107       1101 Eigersund  30-74 år    1999M11    1.3\n108       1101 Eigersund  30-74 år    1999M12    1.2\n109       1101 Eigersund  30-74 år    2000M01    1.8\n110       1101 Eigersund  30-74 år    2000M02    1.4\n111       1101 Eigersund  30-74 år    2000M03    1.7\n112       1101 Eigersund  30-74 år    2000M04    2.2\n113       1101 Eigersund  30-74 år    2000M05    2.2\n114       1101 Eigersund  30-74 år    2000M06    2.7\n115       1101 Eigersund  30-74 år    2000M07    4.5\n116       1101 Eigersund  30-74 år    2000M08    3.1\n117       1101 Eigersund  30-74 år    2000M09    2.8\n118       1101 Eigersund  30-74 år    2000M10    2.3\n119       1101 Eigersund  30-74 år    2000M11    2.6\n120       1101 Eigersund  30-74 år    2000M12    2.9\n121       1101 Eigersund  30-74 år    2001M01    2.4\n122       1101 Eigersund  30-74 år    2001M02    2.3\n123       1101 Eigersund  30-74 år    2001M03    2.2\n124       1101 Eigersund  30-74 år    2001M04    2.5\n125       1101 Eigersund  30-74 år    2001M05    2.1\n126       1101 Eigersund  30-74 år    2001M06      2\n127       1101 Eigersund  30-74 år    2001M07    2.6\n128       1101 Eigersund  30-74 år    2001M08    2.2\n129       1101 Eigersund  30-74 år    2001M09    1.9\n130       1101 Eigersund  30-74 år    2001M10    1.9\n131       1101 Eigersund  30-74 år    2001M11    1.8\n132       1101 Eigersund  30-74 år    2001M12    1.9\n133       1101 Eigersund  30-74 år    2002M01    2.1\n134       1101 Eigersund  30-74 år    2002M02      2\n135       1101 Eigersund  30-74 år    2002M03    1.8\n136       1101 Eigersund  30-74 år    2002M04    2.2\n137       1101 Eigersund  30-74 år    2002M05    2.1\n138       1101 Eigersund  30-74 år    2002M06    1.5\n139       1101 Eigersund  30-74 år    2002M07    2.2\n140       1101 Eigersund  30-74 år    2002M08      2\n141       1101 Eigersund  30-74 år    2002M09    1.9\n142       1101 Eigersund  30-74 år    2002M10    1.9\n143       1101 Eigersund  30-74 år    2002M11    2.7\n144       1101 Eigersund  30-74 år    2002M12    2.6\n145 1102 Sandnes (-2019)  15-74 år    1999M01    2.2\n146 1102 Sandnes (-2019)  15-74 år    1999M02    2.2\n147 1102 Sandnes (-2019)  15-74 år    1999M03    2.2\n148 1102 Sandnes (-2019)  15-74 år    1999M04    2.1\n149 1102 Sandnes (-2019)  15-74 år    1999M05      2\n150 1102 Sandnes (-2019)  15-74 år    1999M06    2.3\n151 1102 Sandnes (-2019)  15-74 år    1999M07    2.7\n152 1102 Sandnes (-2019)  15-74 år    1999M08    2.7\n153 1102 Sandnes (-2019)  15-74 år    1999M09    2.4\n154 1102 Sandnes (-2019)  15-74 år    1999M10    2.4\n155 1102 Sandnes (-2019)  15-74 år    1999M11    2.5\n156 1102 Sandnes (-2019)  15-74 år    1999M12    2.4\n157 1102 Sandnes (-2019)  15-74 år    2000M01    2.9\n158 1102 Sandnes (-2019)  15-74 år    2000M02    2.7\n159 1102 Sandnes (-2019)  15-74 år    2000M03    2.6\n160 1102 Sandnes (-2019)  15-74 år    2000M04    2.7\n161 1102 Sandnes (-2019)  15-74 år    2000M05    2.8\n162 1102 Sandnes (-2019)  15-74 år    2000M06    2.8\n163 1102 Sandnes (-2019)  15-74 år    2000M07    3.1\n164 1102 Sandnes (-2019)  15-74 år    2000M08    3.2\n165 1102 Sandnes (-2019)  15-74 år    2000M09    3.1\n166 1102 Sandnes (-2019)  15-74 år    2000M10    3.1\n167 1102 Sandnes (-2019)  15-74 år    2000M11    3.2\n168 1102 Sandnes (-2019)  15-74 år    2000M12    3.3\n169 1102 Sandnes (-2019)  15-74 år    2001M01    3.3\n170 1102 Sandnes (-2019)  15-74 år    2001M02    3.1\n171 1102 Sandnes (-2019)  15-74 år    2001M03    3.1\n172 1102 Sandnes (-2019)  15-74 år    2001M04    2.8\n173 1102 Sandnes (-2019)  15-74 år    2001M05    2.6\n174 1102 Sandnes (-2019)  15-74 år    2001M06    2.6\n175 1102 Sandnes (-2019)  15-74 år    2001M07    2.7\n176 1102 Sandnes (-2019)  15-74 år    2001M08    2.9\n177 1102 Sandnes (-2019)  15-74 år    2001M09    2.8\n178 1102 Sandnes (-2019)  15-74 år    2001M10    2.9\n179 1102 Sandnes (-2019)  15-74 år    2001M11      3\n180 1102 Sandnes (-2019)  15-74 år    2001M12      3\n181 1102 Sandnes (-2019)  15-74 år    2002M01    3.5\n182 1102 Sandnes (-2019)  15-74 år    2002M02    3.1\n183 1102 Sandnes (-2019)  15-74 år    2002M03    3.1\n184 1102 Sandnes (-2019)  15-74 år    2002M04      3\n185 1102 Sandnes (-2019)  15-74 år    2002M05    2.9\n186 1102 Sandnes (-2019)  15-74 år    2002M06    2.9\n187 1102 Sandnes (-2019)  15-74 år    2002M07    3.3\n188 1102 Sandnes (-2019)  15-74 år    2002M08    3.4\n189 1102 Sandnes (-2019)  15-74 år    2002M09    3.2\n190 1102 Sandnes (-2019)  15-74 år    2002M10    3.3\n191 1102 Sandnes (-2019)  15-74 år    2002M11    3.2\n192 1102 Sandnes (-2019)  15-74 år    2002M12    3.3\n193 1102 Sandnes (-2019)  15-29 år    1999M01    2.8\n194 1102 Sandnes (-2019)  15-29 år    1999M02    2.7\n195 1102 Sandnes (-2019)  15-29 år    1999M03    2.5\n196 1102 Sandnes (-2019)  15-29 år    1999M04    2.4\n197 1102 Sandnes (-2019)  15-29 år    1999M05    2.3\n198 1102 Sandnes (-2019)  15-29 år    1999M06      3\n199 1102 Sandnes (-2019)  15-29 år    1999M07    3.3\n200 1102 Sandnes (-2019)  15-29 år    1999M08    3.2"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#write-.xlsx-files",
    "href": "explore-data/import-export-data/import-export-data.html#write-.xlsx-files",
    "title": "Import/Export Data",
    "section": "Write .xlsx files",
    "text": "Write .xlsx files\n\nBe future proof, write .csv files\nreadxl packages does not have any write*() function\nIf you really have to write out an Excel worksheet try the writexl package"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-.csv-comma-separated-values-file",
    "href": "explore-data/import-export-data/import-export-data.html#read-.csv-comma-separated-values-file",
    "title": "Import/Export Data",
    "section": "Read .csv (Comma Separated Values) file",
    "text": "Read .csv (Comma Separated Values) file\n\nIn Norway we use “,” as decimal sign.\n\nNot “.”\n\nHence our .csv files is really semicolon separated values.\nWe skip the first 3 lines and use the fourth as “header”, i.e. as variable names\nSSB seems to be serving the files with iso-8859-1 encoding (or is it CP-1252?).\n\n\n\n\nFile -I command in Terminal\n\n\nThe command might be file -i on linux and windows\nThose that find this very interesting might check out Windows-1252\n\nThank God for unicode"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding",
    "text": "Read csv file with encoding\n\nSelect readr from the Import Dataset drop-down menu in the Environment pane in the upper right corner.\nThis menu selection uses the readr package (Wickham, Hester, and Bryan 2023).\n\n\n\n\n\nImport Dataset from Environment Pane."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding cont.",
    "text": "Read csv file with encoding cont.\n\nReadr error. Hit Return/Enter or click OK.\nThis doesn’t look to good."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-1",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-1",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding cont.",
    "text": "Read csv file with encoding cont.\n\nClick Locale: Configure…\nChange:\n\nEncoding to ISO-8859-1\nSSB .csv download seems to be using ‘.’ as decimal marker\n\nClick Configure"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-2",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-2",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding cont.",
    "text": "Read csv file with encoding cont.\n\nWrong encoding, i.e. UTF. Change it to ISO-8859-1."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-3",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-3",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding cont.",
    "text": "Read csv file with encoding cont.\n\nChanged encoding"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-4",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-4",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding cont.",
    "text": "Read csv file with encoding cont.\n\nFixed readr problem."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-5",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-cont.-5",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding cont.",
    "text": "Read csv file with encoding cont.\n\nCopy code and make sure that library(readr) is in the setup chunk.\n\n\n\n\n\nCopy the code into document."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-update",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-update",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding update",
    "text": "Read csv file with encoding update\n\nCode to read .csv file from SSB\n\n\n\n\nCode\nmy_data &lt;- read_delim(\n  # Change the file argument\n  file = \"RegHeltLedige.csv\",\n  delim = \";\",\n  escape_double = FALSE,\n  locale = locale(encoding = \"ISO-8859-1\"),\n  trim_ws = TRUE, \n  skip = 1,\n  show_col_types = FALSE\n  )"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-update-1",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-update-1",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding update",
    "text": "Read csv file with encoding update\n\n\nCode\nhead(my_data)\n\n\n# A tibble: 6 × 4\n  region         alder    måned   `Registrert helt arbeidsledige`\n  &lt;chr&gt;          &lt;chr&gt;    &lt;chr&gt;                             &lt;dbl&gt;\n1 1101 Eigersund 15-74 år 1999M01                             1.5\n2 1101 Eigersund 15-74 år 1999M02                             1.5\n3 1101 Eigersund 15-74 år 1999M03                             1.3\n4 1101 Eigersund 15-74 år 1999M04                             1.8\n5 1101 Eigersund 15-74 år 1999M05                             1.3\n6 1101 Eigersund 15-74 år 1999M06                             1.4"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-update-2",
    "href": "explore-data/import-export-data/import-export-data.html#read-csv-file-with-encoding-update-2",
    "title": "Import/Export Data",
    "section": "Read csv file with encoding update",
    "text": "Read csv file with encoding update\n\n\nCode\nsummary(my_data)\n\n\n    region             alder              måned          \n Length:3744        Length:3744        Length:3744       \n Class :character   Class :character   Class :character  \n Mode  :character   Mode  :character   Mode  :character  \n                                                         \n                                                         \n                                                         \n Registrert helt arbeidsledige\n Min.   : 0.000               \n 1st Qu.: 1.400               \n Median : 2.100               \n Mean   : 2.392               \n 3rd Qu.: 3.100               \n Max.   :33.700"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#ssb-api-pxwebapidata",
    "href": "explore-data/import-export-data/import-export-data.html#ssb-api-pxwebapidata",
    "title": "Import/Export Data",
    "section": "SSB api (PxWebApiData)",
    "text": "SSB api (PxWebApiData)\n\nWe can also use the api provided by SSB together with the package PxWebApiData and download the data directly into R.\nSee ApiData tutorial for a simple introduction to the ApiData function in the PxWebApiData package.\nThe Introduction to PxWebApiData vignette to the PxWebApiData package is also a nice introduction."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#check-metadata-10540-table",
    "href": "explore-data/import-export-data/import-export-data.html#check-metadata-10540-table",
    "title": "Import/Export Data",
    "section": "Check metadata 10540 table",
    "text": "Check metadata 10540 table\n\n\nCode\nmetadata_10540 &lt;- ApiData(\n  \"http://data.ssb.no/api/v0/en/table/10540\",\n  returnMetaFrames = TRUE\n  )"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#check-metadata-10540-table-cont",
    "href": "explore-data/import-export-data/import-export-data.html#check-metadata-10540-table-cont",
    "title": "Import/Export Data",
    "section": "Check metadata 10540 table cont",
    "text": "Check metadata 10540 table cont\n\nMetadata SSB table 10540"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#check-variables-10540-table",
    "href": "explore-data/import-export-data/import-export-data.html#check-variables-10540-table",
    "title": "Import/Export Data",
    "section": "Check variables 10540 table",
    "text": "Check variables 10540 table\n\n\nCode\n#Get more info about table\nApiData(\n\"http://data.ssb.no/api/v0/en/table/10540\",\nreturnApiQuery = TRUE\n) \n\n\n{\n  \"query\": [\n    {\n      \"code\": \"Region\",\n      \"selection\": {\n        \"filter\": \"item\",\n        \"values\": [\"0\", \"99\", \"9999\"]\n      }\n    },\n    {\n      \"code\": \"Alder\",\n      \"selection\": {\n        \"filter\": \"item\",\n        \"values\": [\"15-74\", \"15-29\", \"30-74\"]\n      }\n    },\n    {\n      \"code\": \"ContentsCode\",\n      \"selection\": {\n        \"filter\": \"item\",\n        \"values\": [\"RegHeltLedige\"]\n      }\n    },\n    {\n      \"code\": \"Tid\",\n      \"selection\": {\n        \"filter\": \"item\",\n        \"values\": [\"1999M01\", \"2020M03\", \"2020M11\"]\n      }\n    }\n  ],\n  \"response\": {\n    \"format\": \"json-stat2\"\n  }\n}"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-10540-table",
    "href": "explore-data/import-export-data/import-export-data.html#read-10540-table",
    "title": "Import/Export Data",
    "section": "Read 10540 table",
    "text": "Read 10540 table\n\n\nCode\nunemp99to02 &lt;- ApiData(\n  \"http://data.ssb.no/api/v0/en/table/10540\",\n  # Have not been able to specify more complex regions\n  Region = list(\"11*\"),\n  Tid = c(paste(\n    rep(1999:2002, each = 12), \n    \"M\",\n    sprintf(\"%02d\", 1:12), \n    sep = \"\")\n    )\n  )"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-10540-table-1",
    "href": "explore-data/import-export-data/import-export-data.html#read-10540-table-1",
    "title": "Import/Export Data",
    "section": "Read 10540 table",
    "text": "Read 10540 table\nWhat is returned by Region = list(\"11*\")?\n\n\nCode\n# Note the two $ signs\nunique(unemp99to02$`10540: Unemployed persons registered at the Employment Office (per cent), by region, age, contents and month`$region)[1:10]\n\n\n [1] \"Rogaland\"        \"Eigersund\"       \"Sandnes (-2019)\" \"Stavanger\"      \n [5] \"Haugesund\"       \"Sandnes\"         \"Sokndal\"         \"Lund\"           \n [9] \"Bjerkreim\"       \"Hå\""
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#read-10540-table-2",
    "href": "explore-data/import-export-data/import-export-data.html#read-10540-table-2",
    "title": "Import/Export Data",
    "section": "Read 10540 table",
    "text": "Read 10540 table\n\nCheck structure of result\n\n\n\n\n\nStructure of the answer from SSB server."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#bind-dataframes",
    "href": "explore-data/import-export-data/import-export-data.html#bind-dataframes",
    "title": "Import/Export Data",
    "section": "Bind dataframes",
    "text": "Bind dataframes\n\nWe see that what’s returned is a list with two element\nThe elements are\n\n\n\n\nCode\nis.data.frame(unemp99to02$`10540: Unemployed persons registered at the Employment Office (per cent), by region, age, contents and month`)\n\n\n[1] TRUE\n\n\n\n\n\n\nCode\nis.data.frame(unemp99to02$dataset)\n\n\n[1] TRUE"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#bind-dataframes-1",
    "href": "explore-data/import-export-data/import-export-data.html#bind-dataframes-1",
    "title": "Import/Export Data",
    "section": "Bind dataframes",
    "text": "Bind dataframes\n\nBind the two dataframes together.\nEach row is for the same observation (in both dataframes).\n\n\n\n\nCode\n# one labels df and one values df, cbind them\nunemp99to02_df &lt;- cbind(\n  unemp99to02[[1]], \n  unemp99to02[[2]]\n  )\nhead(unemp99to02_df, n = 5)\n\n\n    region         age                                               contents\n1 Rogaland 15-74 years Unemployed persons registered at the Employment Office\n2 Rogaland 15-74 years Unemployed persons registered at the Employment Office\n3 Rogaland 15-74 years Unemployed persons registered at the Employment Office\n4 Rogaland 15-74 years Unemployed persons registered at the Employment Office\n5 Rogaland 15-74 years Unemployed persons registered at the Employment Office\n    month value NAstatus Region Alder  ContentsCode     Tid value NAstatus\n1 1999M01   2.1     &lt;NA&gt;     11 15-74 RegHeltLedige 1999M01   2.1     &lt;NA&gt;\n2 1999M02   2.0     &lt;NA&gt;     11 15-74 RegHeltLedige 1999M02   2.0     &lt;NA&gt;\n3 1999M03   2.0     &lt;NA&gt;     11 15-74 RegHeltLedige 1999M03   2.0     &lt;NA&gt;\n4 1999M04   2.0     &lt;NA&gt;     11 15-74 RegHeltLedige 1999M04   2.0     &lt;NA&gt;\n5 1999M05   1.8     &lt;NA&gt;     11 15-74 RegHeltLedige 1999M05   1.8     &lt;NA&gt;"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#bind-dataframes-2",
    "href": "explore-data/import-export-data/import-export-data.html#bind-dataframes-2",
    "title": "Import/Export Data",
    "section": "Bind dataframes",
    "text": "Bind dataframes\n\nStructure of the new dataframe."
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#bind-dataframes-3",
    "href": "explore-data/import-export-data/import-export-data.html#bind-dataframes-3",
    "title": "Import/Export Data",
    "section": "Bind dataframes",
    "text": "Bind dataframes\n\nWe pick the variables we need in the order we want them.\n\n\n\n\nCode\n#pick and order variables. Pick them by name.\nunemp99to02 &lt;- unemp99to02_df[, c(\n  \"Region\",\n  \"region\",\n  \"month\",\n  \"age\",\n  \"value\"\n)]"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#set-the-names-we-want",
    "href": "explore-data/import-export-data/import-export-data.html#set-the-names-we-want",
    "title": "Import/Export Data",
    "section": "Set the names we want",
    "text": "Set the names we want\n\nGive the variables names we like.\n\n\n\n\nCode\nnames(unemp99to02)\n\n\n[1] \"Region\" \"region\" \"month\"  \"age\"    \"value\" \n\n\nCode\n# new variable names\nnames(unemp99to02) &lt;- c(\n  \"knr\",\n  \"knavn\",\n  \"y_m\",\n  \"age\",\n  \"unemp\"\n)"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#write-the-data-as-a-csv-file.",
    "href": "explore-data/import-export-data/import-export-data.html#write-the-data-as-a-csv-file.",
    "title": "Import/Export Data",
    "section": "Write the data as a csv file.",
    "text": "Write the data as a csv file.\n\nWrite data out to disk.\nIt is recommended to save data as .csv files (pure text) to be future proof.\nCheck that it looks OK\n\n\n\n\nCode\n# Check that it looks OK\nhead(unemp99to02, n = 5)\n\n\n  knr    knavn     y_m         age unemp\n1  11 Rogaland 1999M01 15-74 years   2.1\n2  11 Rogaland 1999M02 15-74 years   2.0\n3  11 Rogaland 1999M03 15-74 years   2.0\n4  11 Rogaland 1999M04 15-74 years   2.0\n5  11 Rogaland 1999M05 15-74 years   1.8"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#write-the-data-as-a-csv-file-cont.",
    "href": "explore-data/import-export-data/import-export-data.html#write-the-data-as-a-csv-file-cont.",
    "title": "Import/Export Data",
    "section": "Write the data as a csv file cont.",
    "text": "Write the data as a csv file cont.\n\nCheck that the dimensions seems reasonable.\n\n\n\n\nCode\ndim(unemp99to02)\n\n\n[1] 4464    5\n\n\n\nWrite the data in international CSV format.\n\nDecimal separator: .\nValue separator: ,\n\n\n\n\n\n\nCode\n# save it as csv\nwrite.table(unemp99to02,\n  file = \"tmp.csv\",\n  dec = \".\",\n  sep = \",\"\n)"
  },
  {
    "objectID": "explore-data/import-export-data/import-export-data.html#references",
    "href": "explore-data/import-export-data/import-export-data.html#references",
    "title": "Import/Export Data",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nAllaire, JJ, Yihui Xie, Christophe Dervieux, Jonathan McPherson, Javier Luraschi, Kevin Ushey, Aron Atkins, et al. 2023. Rmarkdown: Dynamic Documents for r. https://CRAN.R-project.org/package=rmarkdown.\n\n\nLangsrud, Øyvind, and Jan Bruusgaard. 2023. PxWebApiData: PX-Web Data by API. https://github.com/statisticsnorway/PxWebApiData.\n\n\nR Core Team. 2023. R: A Language and Environment for Statistical Computing. Vienna, Austria: R Foundation for Statistical Computing. https://www.R-project.org/.\n\n\nWickham, Hadley. 2021. Nycflights13: Flights That Departed NYC in 2013. https://github.com/hadley/nycflights13.\n\n\n———. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686.\n\n\nWickham, Hadley, and Jennifer Bryan. 2023. Readxl: Read Excel Files. https://CRAN.R-project.org/package=readxl.\n\n\nWickham, Hadley, Jim Hester, and Jennifer Bryan. 2023. Readr: Read Rectangular Text Data. https://CRAN.R-project.org/package=readr.\n\n\nXie, Yihui, J. J. Allaire, and Garrett Grolemund. 2018. R Markdown: The Definitive Guide. Boca Raton, Florida: Chapman; Hall/CRC. https://bookdown.org/yihui/rmarkdown.\n\n\nXie, Yihui, Christophe Dervieux, and Emily Riederer. 2020. R Markdown Cookbook. Boca Raton, Florida: Chapman; Hall/CRC. https://bookdown.org/yihui/rmarkdown-cookbook."
  },
  {
    "objectID": "explore-data/trans-data/index.html#introduction-to-transforming-data-chp.-5",
    "href": "explore-data/trans-data/index.html#introduction-to-transforming-data-chp.-5",
    "title": "Transforming Data",
    "section": "Introduction to Transforming Data (chp. 5)",
    "text": "Introduction to Transforming Data (chp. 5)\nAddin ViewPipeSteps\n\nPackage (addIn) ViewPipeSteps\neasier debugging of pipes"
  },
  {
    "objectID": "explore-data/trans-data/index.html#nice-tutorials-on-rstudio",
    "href": "explore-data/trans-data/index.html#nice-tutorials-on-rstudio",
    "title": "Transforming Data",
    "section": "Nice tutorials on RStudio",
    "text": "Nice tutorials on RStudio\n\nRStudio Crash Course for beginners 2020.\n\nMore on Bryan Jenks\n\nIntroduction to R and RStudio\nR Programming Tutorial - Learn the Basics of StatisticalComputing\nmore tips on Twitter: @rstudiotips"
  },
  {
    "objectID": "explore-data/trans-data/index.html#introduction",
    "href": "explore-data/trans-data/index.html#introduction",
    "title": "Transforming Data",
    "section": "Introduction",
    "text": "Introduction\n\nChapter 5 is a central chapter.\nIt covers how to manipulate a dataframe/tibble.\nI highly recommend that you work through (follow) the example in the book.\nSuggestions:\n\nDo it in a Quarto Document.\nCopy the code from the book into your own Quarto Document.\nTry to experiment with the code and write your own remarks/comment about the code and how it works.\n\nI will cover the most important material in lectures, but we do not have time to cover all the finer details."
  },
  {
    "objectID": "explore-data/trans-data/index.html#small-collection-of-verbs",
    "href": "explore-data/trans-data/index.html#small-collection-of-verbs",
    "title": "Transforming Data",
    "section": "Small collection of verbs",
    "text": "Small collection of verbs\n\nWe will use a small collection of verbs:\n\nfilter(): show us just the data that satisfies one or more conditions\narrange(): sort (rearranges) the rows\nselect(): select some of the variables (remove the variables that does not interest us)\nmutate(): make new variables in the dataframe/tibble\n\ntransmute() only keeps the new variables\nrename(): change the name of a variable (this is really a variant of mutate()).\n\n\nsummarise() and group_by(): Group by one or more criteria and then summarise the variables (max, min, mean, median, sd etc.)\nThe functions above are from the dplyr package which is part of the tidyverse."
  },
  {
    "objectID": "explore-data/trans-data/index.html#data-nycflights13",
    "href": "explore-data/trans-data/index.html#data-nycflights13",
    "title": "Transforming Data",
    "section": "Data: nycflights13",
    "text": "Data: nycflights13\n\nWe will follow the book and use the dataset nycflights13.\nThe dataset is in a package (called nycflights13) that we have to install first.\nSee also:\n\nvignette(\"dplyr\"),\nstarwars dataset,\nvignette(\"grouping\"),\nvignette(\"colwise\") and\nvignette(\"rowwise\")"
  },
  {
    "objectID": "explore-data/trans-data/index.html#the-pipe-5.6.1-and-more-details-in-chap.-18",
    "href": "explore-data/trans-data/index.html#the-pipe-5.6.1-and-more-details-in-chap.-18",
    "title": "Transforming Data",
    "section": "The pipe, 5.6.1 and more details in chap. 18",
    "text": "The pipe, 5.6.1 and more details in chap. 18\n\nThree equivalent ways to calculate in R\nFunction in function in function in function …\nTemporary variables\nThe pipe"
  },
  {
    "objectID": "explore-data/trans-data/index.html#function-in-function-in-function",
    "href": "explore-data/trans-data/index.html#function-in-function-in-function",
    "title": "Transforming Data",
    "section": "Function in function in function …",
    "text": "Function in function in function …\n\n\nCode\nset.seed(1234)\nres_mean_rnorm_3dig &lt;- paste(\"Result:\", round(mean(rnorm(n = 10, mean = 0, sd = 1)), digits = 3), sep = \"\")\nres_mean_rnorm_3dig\n\n\n[1] \"Result:-0.383\""
  },
  {
    "objectID": "explore-data/trans-data/index.html#temporary-variables",
    "href": "explore-data/trans-data/index.html#temporary-variables",
    "title": "Transforming Data",
    "section": "Temporary variables",
    "text": "Temporary variables\n\nMeaningful names with clean-up\n\n\n\n\nCode\nset.seed(1234)\nres_rnorm &lt;- rnorm(n = 10, mean = 0, sd = 1)\nres_mean_rnorm &lt;- mean(res_rnorm)\nres_mean_rnorm_3dig &lt;- round(res_mean_rnorm, digits = 3)\nres_mean_rnorm_3dig_string &lt;- paste(\"Result:\", res_mean_rnorm_3dig, sep = \"\")\n# print result\nres_mean_rnorm_3dig_string\n\n\n[1] \"Result:-0.383\"\n\n\nCode\n# cleanup\nrm(res_rnorm, res_mean_rnorm, res_mean_rnorm_3dig, res_mean_rnorm_3dig_string)"
  },
  {
    "objectID": "explore-data/trans-data/index.html#temporary-variables-in-reality",
    "href": "explore-data/trans-data/index.html#temporary-variables-in-reality",
    "title": "Transforming Data",
    "section": "Temporary variables (in reality)",
    "text": "Temporary variables (in reality)\n\nWhat we usually do, bad variable names and no clean-up\n\n\n\n\nCode\nset.seed(1234)\ntmp &lt;- rnorm(n = 10, mean = 0, sd = 1)\ntmp1 &lt;- mean(tmp)\ntmp2 &lt;- round(tmp1, digits = 3)\npaste(\"Result:\", tmp2, sep = \"\")\n\n\n[1] \"Result:-0.383\"\n\n\n\n\nCode\n# ^t, object names that start with 't' \nls(pattern = \"^t\")\n\n\n[1] \"tmp\"  \"tmp1\" \"tmp2\""
  },
  {
    "objectID": "explore-data/trans-data/index.html#the-pipe-with-addin-viewpipesteps",
    "href": "explore-data/trans-data/index.html#the-pipe-with-addin-viewpipesteps",
    "title": "Transforming Data",
    "section": "The pipe with addin viewpipesteps",
    "text": "The pipe with addin viewpipesteps\n\n\nCode\nset.seed(1234)\nres_mean_rnorm_3dig_string &lt;- \n  rnorm(n = 10, mean = 0, sd = 1) %&gt;%\n  mean() %&gt;%\n  round(digits = 3) %&gt;% \n  # The dot '.' is to show where the content of the pipe should be put\n  paste(\"Result:\", .)\nres_mean_rnorm_3dig_string\n\n\n[1] \"Result: -0.383\""
  },
  {
    "objectID": "explore-data/trans-data/index.html#the-pipe-cont.",
    "href": "explore-data/trans-data/index.html#the-pipe-cont.",
    "title": "Transforming Data",
    "section": "The pipe cont.",
    "text": "The pipe cont.\n\nWhat would happen if we dropped the ‘.’ in paste(\"Result:\", .)?\n\n\n\n\nCode\nset.seed(1234)\nres_mean_rnorm_3dig_string &lt;- \n  rnorm(n = 10, mean = 0, sd = 1) %&gt;%\n  mean() %&gt;%\n  round(digits = 3) %&gt;% \n  # The dot '.' is to show where the content of the pipe should be put\n  paste(\"Result:\")\nres_mean_rnorm_3dig_string\n\n\n[1] \"-0.383 Result:\""
  },
  {
    "objectID": "explore-data/trans-data/index.html#the-pipe-with-addin-viewpipesteps-1",
    "href": "explore-data/trans-data/index.html#the-pipe-with-addin-viewpipesteps-1",
    "title": "Transforming Data",
    "section": "The pipe with Addin viewpipesteps",
    "text": "The pipe with Addin viewpipesteps\n\nRun the set.seed() function\nSelect the pipe\nChoose Print Pipe Chain Steps\n\n\n\n\n\nSelect the pipe"
  },
  {
    "objectID": "explore-data/trans-data/index.html#the-pipe-with-addin-viewpipesteps-cont.",
    "href": "explore-data/trans-data/index.html#the-pipe-with-addin-viewpipesteps-cont.",
    "title": "Transforming Data",
    "section": "The pipe with Addin viewpipesteps cont.",
    "text": "The pipe with Addin viewpipesteps cont.\n\nSelect Print Pipe Chain Steps from Addins menu\n\n\n\n\n\nSelect Print Pipe Chain Steps in the Addins drop-down menu."
  },
  {
    "objectID": "explore-data/trans-data/index.html#the-pipe-with-addin-viewpipesteps-cont.-1",
    "href": "explore-data/trans-data/index.html#the-pipe-with-addin-viewpipesteps-cont.-1",
    "title": "Transforming Data",
    "section": "The pipe with Addin viewpipesteps cont.",
    "text": "The pipe with Addin viewpipesteps cont.\n\nIn the Console we will get the result (output) of every step in the pipe\n\n\n\n\n\nSelect Print Pipe Chain Steps from Addins drop-down menu."
  },
  {
    "objectID": "explore-data/trans-data/index.html#the-pipe-alternative-not-much-used",
    "href": "explore-data/trans-data/index.html#the-pipe-alternative-not-much-used",
    "title": "Transforming Data",
    "section": "The pipe, alternative not much used",
    "text": "The pipe, alternative not much used\n\n\nCode\nset.seed(1234)\nrnorm(\n  n = 10,\n  mean = 0,\n  sd = 1\n) %&gt;%\n  mean() %&gt;%\n  round(digits = 3) %&gt;% \n  paste(\"Result:\", .) -&gt; res_mean_rnorm_3dig_string\nres_mean_rnorm_3dig_string\n\n\n[1] \"Result: -0.383\""
  },
  {
    "objectID": "explore-data/trans-data/index.html#more-about-the-pipe",
    "href": "explore-data/trans-data/index.html#more-about-the-pipe",
    "title": "Transforming Data",
    "section": "More about the pipe",
    "text": "More about the pipe\n\nWork like the unix shell pipe (‘|’)\nOutput from one function is the input of the next function\nTemporary variables in the background, but we don’t have to come up with names or remove them when not needed any more.\nUses the fact that most R functions have the data as their first argument\n\nThe regression function lm(formula, data, …) is an important counter example\nWe use ‘.’ to specify where the data in the pipe enters a function\n\nIf not the first argument (function_name(., other arguments) is the default)\n\n\nThe tidyverse is designed to work well with the pipe\n\nThe sf packages we will encounter next year are also designed to work well with tidyverse and pipes"
  },
  {
    "objectID": "explore-data/trans-data/index.html#nycflights13",
    "href": "explore-data/trans-data/index.html#nycflights13",
    "title": "Transforming Data",
    "section": "nycflights13",
    "text": "nycflights13\n\n\nCode\n# see setup at the top for loading of \n# nycflights13 package\n?nycflights13\n\n\nNo documentation for 'nycflights13' in specified packages and libraries:\nyou could try '??nycflights13'\n\n\n\nLoad the nycflights13 package.\nGet help via Packages pane and click nycflights13."
  },
  {
    "objectID": "explore-data/trans-data/index.html#nycflights13-1",
    "href": "explore-data/trans-data/index.html#nycflights13-1",
    "title": "Transforming Data",
    "section": "nycflights13",
    "text": "nycflights13\n\nThe package contains 5 datsets\n\nairline\nairports\nflights\nplanes\nweather\n\nuse ? to read the help for each\n\n\n\n\nCode\n?flights"
  },
  {
    "objectID": "explore-data/trans-data/index.html#variables-in-flights-from-help",
    "href": "explore-data/trans-data/index.html#variables-in-flights-from-help",
    "title": "Transforming Data",
    "section": "Variables in flights (from help)",
    "text": "Variables in flights (from help)\n\nyear, month, day: Date of departure.\ndep_time, arr_time: Actual departure and arrival times (format HHMM or HMM), local tz.\nsched_dep_time, sched_arr_time: Scheduled departure and arrival times (format HHMM or HMM), local tz.\ndep_delay, arr_delay: Departure and arrival delays, in minutes. Negative times represent early departures/arrivals.\ncarrier: Two letters carrier abbreviation. See airlines to get name.\nflight: Flight number."
  },
  {
    "objectID": "explore-data/trans-data/index.html#variables-in-flights-from-help-cont.",
    "href": "explore-data/trans-data/index.html#variables-in-flights-from-help-cont.",
    "title": "Transforming Data",
    "section": "Variables in flights (from help) cont.",
    "text": "Variables in flights (from help) cont.\n\ntailnum: Plane tail number. See planes for additional metadata.\norigin, dest: Origin and destination. See airports for additional metadata.\nair_time: Amount of time spent in the air, in minutes.\ndistance: Distance between airports, in miles.\nhour, minute: Time of scheduled departure broken into hour and minutes.\ntime_hour: Scheduled date and hour of the flight as a POSIXct date. Along with origin, can be used to join flights data to weather data."
  },
  {
    "objectID": "explore-data/trans-data/index.html#a-first-look-on-flights",
    "href": "explore-data/trans-data/index.html#a-first-look-on-flights",
    "title": "Transforming Data",
    "section": "A first look on flights",
    "text": "A first look on flights\n\n\nCode\n# what size is it\ndim(flights)\n\n\n[1] 336776     19\n\n\n\n\n\nCode\n# what type; data.frame, tibble?\nclass(flights)\n\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\""
  },
  {
    "objectID": "explore-data/trans-data/index.html#a-first-look-on-flights-1",
    "href": "explore-data/trans-data/index.html#a-first-look-on-flights-1",
    "title": "Transforming Data",
    "section": "A first look on flights",
    "text": "A first look on flights\n\n\nCode\nprint(\n  head(flights, n = 5),\n  width = 70\n  )\n\n\n# A tibble: 5 × 19\n   year month   day dep_time sched_dep_time dep_delay arr_time\n  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n1  2013     1     1      517            515         2      830\n2  2013     1     1      533            529         4      850\n3  2013     1     1      542            540         2      923\n4  2013     1     1      544            545        -1     1004\n5  2013     1     1      554            600        -6      812\n# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "explore-data/trans-data/index.html#using-filter-from-r4ds",
    "href": "explore-data/trans-data/index.html#using-filter-from-r4ds",
    "title": "Transforming Data",
    "section": "Using filter(), from r4ds",
    "text": "Using filter(), from r4ds\n\n\nCode\nprint(\n  filter(flights, month == 1, day == 1),\n  n = 5, \n  width = 70\n  )\n\n\n# A tibble: 842 × 19\n   year month   day dep_time sched_dep_time dep_delay arr_time\n  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n1  2013     1     1      517            515         2      830\n2  2013     1     1      533            529         4      850\n3  2013     1     1      542            540         2      923\n4  2013     1     1      544            545        -1     1004\n5  2013     1     1      554            600        -6      812\n# ℹ 837 more rows\n# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "explore-data/trans-data/index.html#more-filter-ex-1",
    "href": "explore-data/trans-data/index.html#more-filter-ex-1",
    "title": "Transforming Data",
    "section": "More filter-ex-1",
    "text": "More filter-ex-1\n\n\nCode\nprint(\n  filter(flights, month == 1, day %in% c(1, 15, 30)),\n  n = 5,\n  width = 70\n  )\n\n\n# A tibble: 2,636 × 19\n   year month   day dep_time sched_dep_time dep_delay arr_time\n  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n1  2013     1     1      517            515         2      830\n2  2013     1     1      533            529         4      850\n3  2013     1     1      542            540         2      923\n4  2013     1     1      544            545        -1     1004\n5  2013     1     1      554            600        -6      812\n# ℹ 2,631 more rows\n# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;\n\n\n\nWhy no day 15 and 30?\nnote %in%, it’s very handy and flexible"
  },
  {
    "objectID": "explore-data/trans-data/index.html#more-filter-ex-1-1",
    "href": "explore-data/trans-data/index.html#more-filter-ex-1-1",
    "title": "Transforming Data",
    "section": "More filter-ex-1",
    "text": "More filter-ex-1\n\n\nCode\nflights_some_days_jan &lt;- filter(flights, month == 1, day %in% c(1, 15, 30))\n# tail(flights_some_days_jan, n = 5)\n# more control\nprint(\n  slice_tail(flights_some_days_jan, n = 7),\n  width = 70\n  )\n\n\n# A tibble: 7 × 19\n   year month   day dep_time sched_dep_time dep_delay arr_time\n  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n1  2013     1    30       NA           1410        NA       NA\n2  2013     1    30       NA            810        NA       NA\n3  2013     1    30       NA           1510        NA       NA\n4  2013     1    30       NA           1725        NA       NA\n5  2013     1    30       NA           1800        NA       NA\n6  2013     1    30       NA           1506        NA       NA\n7  2013     1    30       NA            958        NA       NA\n# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "explore-data/trans-data/index.html#doing-it-with-a-pipe",
    "href": "explore-data/trans-data/index.html#doing-it-with-a-pipe",
    "title": "Transforming Data",
    "section": "Doing it with a Pipe",
    "text": "Doing it with a Pipe\n\n\nCode\n  flights %&gt;% \n  filter(month == 1, day %in% c(1, 15, 30)) %&gt;% \n  slice_tail(n = 7) %&gt;% \n  print(width = 70)\n\n\n# A tibble: 7 × 19\n   year month   day dep_time sched_dep_time dep_delay arr_time\n  &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n1  2013     1    30       NA           1410        NA       NA\n2  2013     1    30       NA            810        NA       NA\n3  2013     1    30       NA           1510        NA       NA\n4  2013     1    30       NA           1725        NA       NA\n5  2013     1    30       NA           1800        NA       NA\n6  2013     1    30       NA           1506        NA       NA\n7  2013     1    30       NA            958        NA       NA\n# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "explore-data/trans-data/index.html#operators",
    "href": "explore-data/trans-data/index.html#operators",
    "title": "Transforming Data",
    "section": "Operators",
    "text": "Operators\n\n== NB! not =; equal\n&lt;, &gt;, &gt;=, &lt;=\n! for negate, !near(1/5 * 5, 5/5) is FALSE\n| is or, ex. TRUE | FALSE is TRUE\n& is and, ex. TRUE & FALSE is FALSE. TRUE & TRUE is TRUE, !(TRUE & FALSE) is TRUE\n%in% is very handy, x %in% c(1, 3), TRUE if x is 1 or 3"
  },
  {
    "objectID": "explore-data/trans-data/index.html#use-near-not-for-doublenumeric",
    "href": "explore-data/trans-data/index.html#use-near-not-for-doublenumeric",
    "title": "Transforming Data",
    "section": "Use near() not == for double/numeric",
    "text": "Use near() not == for double/numeric\n\n\nCode\n(1/49) * 49 == 1\n\n\n[1] FALSE\n\n\nCode\n# and\n(1/49) * 49 == 49/49\n\n\n[1] FALSE\n\n\nCode\n# but\n(1/5) * 5 == 5/5\n\n\n[1] TRUE\n\n\nCode\n# but\n(5/4) == 1.25\n\n\n[1] TRUE"
  },
  {
    "objectID": "explore-data/trans-data/index.html#use-near-not-for-doublenumeric-cont.",
    "href": "explore-data/trans-data/index.html#use-near-not-for-doublenumeric-cont.",
    "title": "Transforming Data",
    "section": "Use near() not == for double/numeric cont.",
    "text": "Use near() not == for double/numeric cont.\n\nuse near()\n\n\n\n\nCode\nnear(1/49 * 49, 1)\n\n\n[1] TRUE\n\n\nCode\nnear(1/5 * 5, 5/5)\n\n\n[1] TRUE"
  },
  {
    "objectID": "explore-data/trans-data/index.html#small-exercise",
    "href": "explore-data/trans-data/index.html#small-exercise",
    "title": "Transforming Data",
    "section": "Small Exercise",
    "text": "Small Exercise\n1) How many flights were there in April and September (total)?\n2) How many flights were there in total the first two days of a month?\n3) How may flights were there during 2013 that had an arrival delay greater than or equal to 15 min., but less than 30 min.?"
  },
  {
    "objectID": "explore-data/trans-data/index.html#solution-small-exercise",
    "href": "explore-data/trans-data/index.html#solution-small-exercise",
    "title": "Transforming Data",
    "section": "Solution Small Exercise",
    "text": "Solution Small Exercise\n1) How many flights were there in April and September (total)?"
  },
  {
    "objectID": "explore-data/trans-data/index.html#solution-small-exercise-cont.",
    "href": "explore-data/trans-data/index.html#solution-small-exercise-cont.",
    "title": "Transforming Data",
    "section": "Solution Small Exercise cont.",
    "text": "Solution Small Exercise cont.\n2) How many flights were there in total the first two days of a month?"
  },
  {
    "objectID": "explore-data/trans-data/index.html#solution-small-exercise-cont.-1",
    "href": "explore-data/trans-data/index.html#solution-small-exercise-cont.-1",
    "title": "Transforming Data",
    "section": "Solution Small Exercise cont.",
    "text": "Solution Small Exercise cont.\n3) How may flights were there during 2013 that had an arrival delay greater than or equal to 15 min., but less than 30 min.?\n\n\nNote use of .. Needed when using classic functions like [."
  },
  {
    "objectID": "explore-data/trans-data/index.html#missing-values-na",
    "href": "explore-data/trans-data/index.html#missing-values-na",
    "title": "Transforming Data",
    "section": "Missing values NA",
    "text": "Missing values NA\n\nGeneral rule: If one is NA, whole result will be NA,\n\nex. sum(c(1, 2, NA, 4, 5)) will return\nNA.\n\nCheck for NA with is.na()\n\nNOT x == NA\n\nis.na() returns TRUE if NA\nHow to count number of NAs in a vector?\n\nsum(is.na(flights$arr_delay)) will return\n9430"
  },
  {
    "objectID": "explore-data/trans-data/index.html#arrange-sorts-rows",
    "href": "explore-data/trans-data/index.html#arrange-sorts-rows",
    "title": "Transforming Data",
    "section": "arrange() sorts rows",
    "text": "arrange() sorts rows\n\n\nCode\nprint(\n  arrange(flights, year, month, day),\n  n = 10,\n  width = 70\n  )\n\n\n# A tibble: 336,776 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n 1  2013     1     1      517            515         2      830\n 2  2013     1     1      533            529         4      850\n 3  2013     1     1      542            540         2      923\n 4  2013     1     1      544            545        -1     1004\n 5  2013     1     1      554            600        -6      812\n 6  2013     1     1      554            558        -4      740\n 7  2013     1     1      555            600        -5      913\n 8  2013     1     1      557            600        -3      709\n 9  2013     1     1      557            600        -3      838\n10  2013     1     1      558            600        -2      753\n# ℹ 336,766 more rows\n# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "explore-data/trans-data/index.html#arrange-sorts-rows-as-pipe",
    "href": "explore-data/trans-data/index.html#arrange-sorts-rows-as-pipe",
    "title": "Transforming Data",
    "section": "arrange() sorts rows as pipe",
    "text": "arrange() sorts rows as pipe\n\n\nCode\nflights %&gt;% \n  arrange(year, month, day) %&gt;% \n  print(n = 10, width = 70)\n\n\n# A tibble: 336,776 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n 1  2013     1     1      517            515         2      830\n 2  2013     1     1      533            529         4      850\n 3  2013     1     1      542            540         2      923\n 4  2013     1     1      544            545        -1     1004\n 5  2013     1     1      554            600        -6      812\n 6  2013     1     1      554            558        -4      740\n 7  2013     1     1      555            600        -5      913\n 8  2013     1     1      557            600        -3      709\n 9  2013     1     1      557            600        -3      838\n10  2013     1     1      558            600        -2      753\n# ℹ 336,766 more rows\n# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "explore-data/trans-data/index.html#arrange-sort-rows-decending",
    "href": "explore-data/trans-data/index.html#arrange-sort-rows-decending",
    "title": "Transforming Data",
    "section": "arrange() sort rows decending",
    "text": "arrange() sort rows decending\n\n\nCode\n#dec. first\nprint(arrange(flights, year, desc(month), day), n = 10, width = 70)\n\n\n# A tibble: 336,776 × 19\n    year month   day dep_time sched_dep_time dep_delay arr_time\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;\n 1  2013    12     1       13           2359        14      446\n 2  2013    12     1       17           2359        18      443\n 3  2013    12     1      453            500        -7      636\n 4  2013    12     1      520            515         5      749\n 5  2013    12     1      536            540        -4      845\n 6  2013    12     1      540            550       -10     1005\n 7  2013    12     1      541            545        -4      734\n 8  2013    12     1      546            545         1      826\n 9  2013    12     1      549            600       -11      648\n10  2013    12     1      550            600       -10      825\n# ℹ 336,766 more rows\n# ℹ 12 more variables: sched_arr_time &lt;int&gt;, arr_delay &lt;dbl&gt;,\n#   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;,\n#   dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,\n#   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;"
  },
  {
    "objectID": "explore-data/trans-data/index.html#select-selects-the-variables-you-want",
    "href": "explore-data/trans-data/index.html#select-selects-the-variables-you-want",
    "title": "Transforming Data",
    "section": "select() selects the variables you want",
    "text": "select() selects the variables you want\n\n\nCode\n(my_vars &lt;- select(flights, day, month, year, arr_delay))\n\n\n# A tibble: 336,776 × 4\n     day month  year arr_delay\n   &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;\n 1     1     1  2013        11\n 2     1     1  2013        20\n 3     1     1  2013        33\n 4     1     1  2013       -18\n 5     1     1  2013       -25\n 6     1     1  2013        12\n 7     1     1  2013        19\n 8     1     1  2013       -14\n 9     1     1  2013        -8\n10     1     1  2013         8\n# ℹ 336,766 more rows\n\n\n\nHow to select the same variables, but only for May?"
  },
  {
    "objectID": "explore-data/trans-data/index.html#filter-and-select-in-pipe",
    "href": "explore-data/trans-data/index.html#filter-and-select-in-pipe",
    "title": "Transforming Data",
    "section": "filter() and select() in pipe",
    "text": "filter() and select() in pipe\n\n\nCode\n# Use a pipe\nmy_vars_May &lt;- flights %&gt;%\n  filter(month == 5) %&gt;%\n  select(day, month, year, arr_delay)\nhead(my_vars_May)\n\n\n# A tibble: 6 × 4\n    day month  year arr_delay\n  &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;\n1     1     5  2013       408\n2     1     5  2013         1\n3     1     5  2013        -4\n4     1     5  2013        -9\n5     1     5  2013       -23\n6     1     5  2013        -6\n\n\n\nHow do we find median arr_delay in May?"
  },
  {
    "objectID": "explore-data/trans-data/index.html#filter-and-select-in-pipe-cont.",
    "href": "explore-data/trans-data/index.html#filter-and-select-in-pipe-cont.",
    "title": "Transforming Data",
    "section": "filter() and select() in pipe cont.",
    "text": "filter() and select() in pipe cont.\n\n\nCode\n# Use a pipe\nmy_vars_May &lt;-  flights %&gt;%\n  filter(month == 5) %&gt;%\n  select(arr_delay)\n\nmedian(my_vars_May$arr_delay, na.rm = TRUE)\n\n\n[1] -8\n\n\n\nTo calculate the median direct in the pipe we need another function called summarise() that we will cover soon."
  },
  {
    "objectID": "explore-data/trans-data/index.html#new-variable-use-mutate",
    "href": "explore-data/trans-data/index.html#new-variable-use-mutate",
    "title": "Transforming Data",
    "section": "New variable, use mutate",
    "text": "New variable, use mutate\n\n\nCode\nmy_new_data &lt;- flights %&gt;%\n  select(year:day, ends_with(\"delay\"), distance, air_time) %&gt;%\n  mutate(\n    gain = dep_delay - arr_delay,\n    speed = (distance/air_time) * 60\n    ) %&gt;%\n  select(year:day, gain, everything()) %&gt;%\n  arrange(gain)\nhead(my_new_data, n = 5) \n\n\n# A tibble: 5 × 9\n   year month   day  gain dep_delay arr_delay distance air_time speed\n  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;\n1  2013    11     1  -196        -2       194     2475      336  442.\n2  2013     4    18  -181        -2       179     1389      234  356.\n3  2013     8     8  -165       180       345     2565      420  366.\n4  2013     7    10  -161        16       177     2586      387  401.\n5  2013     6    27  -157        43       200      544      120  272 \n\n\n\n\nNote use of the helper function ends_with()\n\nMany helper functions and they can save a lot of time\nSee ?select for details\n\nHow do we get speed between dep_delay and arr_delay?"
  },
  {
    "objectID": "explore-data/trans-data/index.html#new-variable-use-mutate-cont.",
    "href": "explore-data/trans-data/index.html#new-variable-use-mutate-cont.",
    "title": "Transforming Data",
    "section": "New variable, use mutate cont.",
    "text": "New variable, use mutate cont.\n\n\nCode\nmy_new_data &lt;- flights %&gt;%\n  select(year:day, ends_with(\"delay\"), distance, air_time) %&gt;%\n  mutate(\n    gain = dep_delay - arr_delay,\n    speed = (distance/air_time) * 60\n    ) %&gt;%\n  select(year:day, gain, dep_delay, speed, everything()) %&gt;%\n  arrange(gain)\nhead(my_new_data, n=5) \n\n\n# A tibble: 5 × 9\n   year month   day  gain dep_delay speed arr_delay distance air_time\n  &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;\n1  2013    11     1  -196        -2  442.       194     2475      336\n2  2013     4    18  -181        -2  356.       179     1389      234\n3  2013     8     8  -165       180  366.       345     2565      420\n4  2013     7    10  -161        16  401.       177     2586      387\n5  2013     6    27  -157        43  272        200      544      120"
  },
  {
    "objectID": "explore-data/trans-data/index.html#transmute",
    "href": "explore-data/trans-data/index.html#transmute",
    "title": "Transforming Data",
    "section": "transmute()",
    "text": "transmute()\n\nWhen should we use transmute()\nWhen we just want to keep the new variable(s)"
  },
  {
    "objectID": "explore-data/trans-data/index.html#transmute-1",
    "href": "explore-data/trans-data/index.html#transmute-1",
    "title": "Transforming Data",
    "section": "transmute()",
    "text": "transmute()\n\n\nCode\nmy_data &lt;- flights %&gt;%\n    transmute(\n    gain = dep_delay - arr_delay,\n    speed = (distance/air_time) * 60\n    ) %&gt;%\n  arrange(gain)\nhead(my_data, n = 3)\n\n\n# A tibble: 3 × 2\n   gain speed\n  &lt;dbl&gt; &lt;dbl&gt;\n1  -196  442.\n2  -181  356.\n3  -165  366."
  },
  {
    "objectID": "explore-data/trans-data/index.html#transmute-alternative-to-mutate-and-then-select",
    "href": "explore-data/trans-data/index.html#transmute-alternative-to-mutate-and-then-select",
    "title": "Transforming Data",
    "section": "transmute() alternative to mutate() and then select()",
    "text": "transmute() alternative to mutate() and then select()\n\n\nCode\nmy_data &lt;- flights %&gt;%\n    mutate(\n    gain = dep_delay - arr_delay,\n    speed = (distance/air_time) * 60\n    ) %&gt;%\n  select(gain, speed) %&gt;%\n  arrange(gain)\nhead(my_data, n = 3)\n\n\n# A tibble: 3 × 2\n   gain speed\n  &lt;dbl&gt; &lt;dbl&gt;\n1  -196  442.\n2  -181  356.\n3  -165  366."
  },
  {
    "objectID": "explore-data/trans-data/index.html#summarise-and-group_by",
    "href": "explore-data/trans-data/index.html#summarise-and-group_by",
    "title": "Transforming Data",
    "section": "summarise() and group_by()",
    "text": "summarise() and group_by()\n\n\nCode\n# note na.rm = TRUE, else everything will be NA \n# even if just one NA\nflights %&gt;%\n  summarise(delay = median(arr_delay, na.rm = TRUE))\n\n\n# A tibble: 1 × 1\n  delay\n  &lt;dbl&gt;\n1    -5\n\n\n\n\nOur example with arr_delay from earlier\n\n\n\n\n\nCode\nflights %&gt;%\n  filter(month == 5) %&gt;%\n  select(arr_delay) %&gt;%\n  summarise(median_arr_delay = median(arr_delay, na.rm = TRUE))\n\n\n# A tibble: 1 × 1\n  median_arr_delay\n             &lt;dbl&gt;\n1               -8"
  },
  {
    "objectID": "explore-data/trans-data/index.html#summarise-and-group_by-1",
    "href": "explore-data/trans-data/index.html#summarise-and-group_by-1",
    "title": "Transforming Data",
    "section": "summarise() and group_by()",
    "text": "summarise() and group_by()\n\nHow to get median arr_delay for each month?\n\n\n\n\nCode\nflights %&gt;%\n  group_by(month) %&gt;%\n  summarise(median_arr_delay = median(arr_delay, na.rm = TRUE))\n\n\n# A tibble: 12 × 2\n   month median_arr_delay\n   &lt;int&gt;            &lt;dbl&gt;\n 1     1               -3\n 2     2               -3\n 3     3               -6\n 4     4               -2\n 5     5               -8\n 6     6               -2\n 7     7               -2\n 8     8               -5\n 9     9              -12\n10    10               -7\n11    11               -6\n12    12                2\n\n\n\n\nCode\n#siste\n\n\n\n\nMSB105"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html",
    "href": "explore-data/eda/eda-doc.html",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "",
    "text": "packs &lt;- suppressPackageStartupMessages(\n  c(\n    library(tidyverse),\n    library(nycflights13),\n    library(gridExtra),\n    library(modelr),\n    library(grid),\n    library(ggplotify),\n    library(vtable)\n    )\n)\n\n\nunique(packs)\n\n [1] \"lubridate\"    \"forcats\"      \"stringr\"      \"dplyr\"        \"purrr\"       \n [6] \"readr\"        \"tidyr\"        \"tibble\"       \"ggplot2\"      \"tidyverse\"   \n[11] \"stats\"        \"graphics\"     \"grDevices\"    \"utils\"        \"datasets\"    \n[16] \"methods\"      \"base\"         \"nycflights13\" \"gridExtra\"    \"modelr\"      \n[21] \"grid\"         \"ggplotify\"    \"vtable\"       \"kableExtra\""
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#packages-used",
    "href": "explore-data/eda/eda-doc.html#packages-used",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "",
    "text": "packs &lt;- suppressPackageStartupMessages(\n  c(\n    library(tidyverse),\n    library(nycflights13),\n    library(gridExtra),\n    library(modelr),\n    library(grid),\n    library(ggplotify),\n    library(vtable)\n    )\n)\n\n\nunique(packs)\n\n [1] \"lubridate\"    \"forcats\"      \"stringr\"      \"dplyr\"        \"purrr\"       \n [6] \"readr\"        \"tidyr\"        \"tibble\"       \"ggplot2\"      \"tidyverse\"   \n[11] \"stats\"        \"graphics\"     \"grDevices\"    \"utils\"        \"datasets\"    \n[16] \"methods\"      \"base\"         \"nycflights13\" \"gridExtra\"    \"modelr\"      \n[21] \"grid\"         \"ggplotify\"    \"vtable\"       \"kableExtra\""
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#generate-references-for-packages-used",
    "href": "explore-data/eda/eda-doc.html#generate-references-for-packages-used",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Generate References for Packages used",
    "text": "Generate References for Packages used\n\nReferences for used packages will be found at the end of document.\n\n. . .\n\n# create a bib file for the R packages \n# used in this document\n# Note! Needs to do a touch(eda.bib) in terminal before first run\n# else stops when bibliography: \"eda.bib\" not found in YAML\nknitr::write_bib(\n  packs,\n  file = \"eda.bib\"\n  )\nrm(packs)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#chapter-6-workflow",
    "href": "explore-data/eda/eda-doc.html#chapter-6-workflow",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Chapter 6; Workflow",
    "text": "Chapter 6; Workflow\n\nNot all to relevant for us since we use Quarto Documents,\nbut some important points\nCmd + Return/Ctrl + Enter runs current statement and jumps to next statement\nSelecting some statements and hitting Cmd + Return/Ctrl + Enter will run the selected statements.\n\nNice for debugging pipes\nBe very careful when you select the statements\nMissing a ‘)’ or a ‘“’ can bring a lot of hurt.\nIf sh*t happens, ESC is your best friend"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#exploratory-data-analysis-r4ds-chap.-7",
    "href": "explore-data/eda/eda-doc.html#exploratory-data-analysis-r4ds-chap.-7",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Exploratory Data Analysis (r4ds chap. 7)",
    "text": "Exploratory Data Analysis (r4ds chap. 7)\nGeneral reflection up on the concept of Exploratory Data Analysis. You will find details and more code in chapter 7 of r4ds.\n\nGetting to know your data\n\nVariation in variables\nVariation between variables"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#some-definitions",
    "href": "explore-data/eda/eda-doc.html#some-definitions",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Some definitions",
    "text": "Some definitions\n\nVariable: some quality of the underlying phenomenon that one can measure\nValue: the recorded number or category resulting from the measurement\nObservation: a set of measurements of the underlying phenomenon\n\nsame time\nsame object\n\nTabular data Listing of variables, observations and values\nTidy tabular data: Tabular data where\n\neach variable is in a column,\neach observation in a row and\neach cell in the table contains one value"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#single-variable-load-data",
    "href": "explore-data/eda/eda-doc.html#single-variable-load-data",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable, load data",
    "text": "Single variable, load data\n\nLoad the data\n\n. . .\n\nmy_heights &lt;- modelr::heights\n\n. . .\nAny NAs?\n\n# NAs in my_heights?\nmy_heights %&gt;% \n  apply(MARGIN = 2, FUN = is.na) %&gt;% \n  apply(MARGIN = 2, FUN = sum) \n\n   income    height    weight       age   marital       sex education      afqt \n        0         0        95         0         0         0        10       262"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#descriptive-statistics",
    "href": "explore-data/eda/eda-doc.html#descriptive-statistics",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics",
    "text": "Descriptive Statistics\nDescribe data by tables showing:\n\nDifferent statistics (characteristics) of the data\n\nNumber of obs.\nNumber of missing values\nMinimum value\nMaximum value\nMean\nDispersion\n\nStandard deviation\nVariance\nPercentiles"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights",
    "href": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\nSplits variables into two tables\n\n. . .\n\n# package vtable must be installed\nmy_heights %&gt;% \n  select(-marital, -sex) %&gt;% \n  # . to stop RStudio complaining about no data\n  vtable::st(.)\n\n\nSummary Statistics\n\n\nVariable\nN\nMean\nStd. Dev.\nMin\nPctl. 25\nPctl. 75\nMax\n\n\n\n\nincome\n7006\n41204\n55892\n0\n166\n55000\n343830\n\n\nheight\n7006\n67\n4.1\n52\n64\n70\n84\n\n\nweight\n6911\n188\n44\n76\n157\n212\n524\n\n\nage\n7006\n51\n2.2\n47\n49\n53\n56\n\n\neducation\n6996\n13\n2.6\n1\n12\n15\n20\n\n\nafqt\n6744\n41\n29\n0\n15\n65\n100"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-1",
    "href": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n# package vtable must be installed\nmy_heights %&gt;% \n  select(marital, sex) %&gt;% \n  vtable::st(.)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-2",
    "href": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n\n\nSummary Statistics\n\n\nVariable\nN\nPercent\n\n\n\n\nmarital\n7006\n\n\n\n... single\n1124\n16%\n\n\n... married\n3806\n54%\n\n\n... separated\n366\n5%\n\n\n... divorced\n1549\n22%\n\n\n... widowed\n161\n2%\n\n\nsex\n7006\n\n\n\n... male\n3402\n49%\n\n\n... female\n3604\n51%"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-3",
    "href": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-3",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\nmy_heights %&gt;% \n  select(-marital) %&gt;% \n  vtable::st(group = 'sex')\n\n\nSummary Statistics\n\n\n\n\n\n\n\n\n\n\n\n\nsex\n\n\nmale\n\n\nfemale\n\n\n\nVariable\nN\nMean\nSD\nN\nMean\nSD\n\n\n\n\nincome\n3402\n53510\n69399\n3604\n29588\n35347\n\n\nheight\n3402\n70\n3\n3604\n64\n2.7\n\n\nweight\n3392\n204\n41\n3519\n173\n43\n\n\nage\n3402\n51\n2.2\n3604\n51\n2.2\n\n\neducation\n3396\n13\n2.6\n3600\n13\n2.6\n\n\nafqt\n3248\n42\n30\n3496\n41\n28"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-4",
    "href": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-4",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n# package vtable must be installed\nmy_heights %&gt;% \n  mutate(married = if_else(marital == 'married', TRUE, FALSE)) %&gt;% \n  filter(sex == 'female') %&gt;% \n  select(-sex, -marital) %&gt;% \n  vtable::st(group = 'married')\n\n\nSummary Statistics\n\n\n\n\n\n\n\n\n\n\n\n\nmarried\n\n\nNo\n\n\nYes\n\n\n\nVariable\nN\nMean\nSD\nN\nMean\nSD\n\n\n\n\nincome\n1703\n26682\n30962\n1901\n32190\n38680\n\n\nheight\n1703\n64\n2.8\n1901\n64\n2.7\n\n\nweight\n1662\n177\n45\n1857\n169\n40\n\n\nage\n1703\n51\n2.3\n1901\n51\n2.2\n\n\neducation\n1701\n13\n2.6\n1899\n14\n2.6\n\n\nafqt\n1647\n33\n26\n1849\n47\n28"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-5",
    "href": "explore-data/eda/eda-doc.html#descriptive-statistics-ex.-my_heights-5",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n# package vtable must be installed\nmy_heights %&gt;% \n  mutate(married = if_else(marital == 'married', TRUE, FALSE)) %&gt;% \n  filter(sex == 'male') %&gt;% \n  select(-sex, -marital) %&gt;% \n  vtable::st(group = 'married')\n\n\nSummary Statistics\n\n\n\n\n\n\n\n\n\n\n\n\nmarried\n\n\nNo\n\n\nYes\n\n\n\nVariable\nN\nMean\nSD\nN\nMean\nSD\n\n\n\n\nincome\n1497\n32122\n50520\n1905\n70317\n77171\n\n\nheight\n1497\n70\n3.1\n1905\n70\n2.9\n\n\nweight\n1492\n200\n42\n1900\n207\n39\n\n\nage\n1497\n51\n2.2\n1905\n51\n2.3\n\n\neducation\n1494\n12\n2.2\n1902\n14\n2.7\n\n\nafqt\n1426\n34\n28\n1822\n48\n30"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#single-variable-graphical-description-bar-chart",
    "href": "explore-data/eda/eda-doc.html#single-variable-graphical-description-bar-chart",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable graphical description, bar chart",
    "text": "Single variable graphical description, bar chart\n\nSimplest, bar-chart\n\n. . .\n\nggplot(data = my_heights) +\n  geom_bar(mapping = aes(x = education), na.rm = TRUE)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#single-variable-graphical-description-bar-chart-1",
    "href": "explore-data/eda/eda-doc.html#single-variable-graphical-description-bar-chart-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable graphical description, bar chart",
    "text": "Single variable graphical description, bar chart"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#the-peaks",
    "href": "explore-data/eda/eda-doc.html#the-peaks",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "The peaks?",
    "text": "The peaks?\n\nWhat is the reason behind the peak at 12 years?\n\nHigh-school\n\nWhat is the reason behind the peak at 14 years?\n\n2 year trade college\n\nWhat is the reason behind the peak at 16 years?\n\n4 year college"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#single-variable-i.e.-variation-in-a-variable",
    "href": "explore-data/eda/eda-doc.html#single-variable-i.e.-variation-in-a-variable",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable, i.e. variation in a variable",
    "text": "Single variable, i.e. variation in a variable\n\nExample: How does income vary in the modelr::heights dataset?\n\nDoes someone have zero income?\nHow to display the variable? &gt; - histogram; hist(my_df$var_name, breaks = 20) or geom_histogram() from ggplot &gt; - density/violin plot\n\nBe aware of outliers?\n\nMight be difficult to spot in a histogram"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#hist-and-geom_histogram",
    "href": "explore-data/eda/eda-doc.html#hist-and-geom_histogram",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "hist() and geom_histogram()",
    "text": "hist() and geom_histogram()\n\nhist1 &lt;- ggplotify::as.ggplot(~hist(my_heights$income, breaks = 20))\nhist2 &lt;- ggplot(my_heights, mapping = aes(x = income)) +\n  geom_histogram(bins = 20)\n\ngridExtra::grid.arrange(hist1, hist2, ncol = 2)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_histogram-other-variables",
    "href": "explore-data/eda/eda-doc.html#geom_histogram-other-variables",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_histogram() other variables",
    "text": "geom_histogram() other variables\n\nhist3 &lt;- ggplot(my_heights, mapping = aes(x = income)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\nhist4 &lt;- ggplot(my_heights, mapping = aes(x = height)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\nhist5 &lt;- ggplot(my_heights, mapping = aes(x = weight)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\ngridExtra::grid.arrange(hist3, hist4, hist5, nrow = 1)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_histogram-other-variables-1",
    "href": "explore-data/eda/eda-doc.html#geom_histogram-other-variables-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_histogram() other variables",
    "text": "geom_histogram() other variables"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_histogram-other-variables-2",
    "href": "explore-data/eda/eda-doc.html#geom_histogram-other-variables-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_histogram() other variables",
    "text": "geom_histogram() other variables\n\nhist6 &lt;- ggplot(my_heights, mapping = aes(x = age)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\nhist7 &lt;- ggplot(my_heights, mapping = aes(x = education)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\nhist8 &lt;- ggplot(my_heights, mapping = aes(x = afqt)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\ngridExtra::grid.arrange(hist6, hist7, hist8, nrow = 1)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_histogram-other-variables-3",
    "href": "explore-data/eda/eda-doc.html#geom_histogram-other-variables-3",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_histogram() other variables",
    "text": "geom_histogram() other variables"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#variation-in-a-variable-given-another-variable",
    "href": "explore-data/eda/eda-doc.html#variation-in-a-variable-given-another-variable",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Variation in a variable, given another variable",
    "text": "Variation in a variable, given another variable\n\nWe can use the facet feature of ggplot"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_density-faceted-on-sex",
    "href": "explore-data/eda/eda-doc.html#geom_density-faceted-on-sex",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); faceted on sex",
    "text": "geom_density(); faceted on sex\n\nDistribution of income\n\nThree levels of education ([0-12) “NotHS”, [12-14) “NotTC”, [14-16) “NotC”, [16-21] “C+”)\nFaceted on the sex variable\nUse the cut function to make the categories\nHave to use right = FALSE to get open interval on the right"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_density-faceted-on-sex-1",
    "href": "explore-data/eda/eda-doc.html#geom_density-faceted-on-sex-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); faceted on sex",
    "text": "geom_density(); faceted on sex\n\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(!is.na(edu_fac) & income &gt; 0) %&gt;%\n  ggplot(mapping = aes(x = income, fill = edu_fac, colour = edu_fac)) +\n  geom_density(alpha = 0.2, na.rm = TRUE) + \n  facet_wrap(~sex)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_density-faceted-on-sex-2",
    "href": "explore-data/eda/eda-doc.html#geom_density-faceted-on-sex-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); faceted on sex",
    "text": "geom_density(); faceted on sex"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_density-facet-edu_fac",
    "href": "explore-data/eda/eda-doc.html#geom_density-facet-edu_fac",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); facet edu_fac",
    "text": "geom_density(); facet edu_fac\n\nPerhaps better to facet on education\n\n. . .\n\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(!is.na(edu_fac) & income &gt; 0) %&gt;%\n  ggplot(mapping = aes(x = income, fill = sex, colour = sex)) +\n  geom_density(alpha = 0.2, na.rm = TRUE) + \n  facet_wrap(~edu_fac)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#geom_density-facet-edu_fac-1",
    "href": "explore-data/eda/eda-doc.html#geom_density-facet-edu_fac-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); facet edu_fac",
    "text": "geom_density(); facet edu_fac"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#income-equal-to-0",
    "href": "explore-data/eda/eda-doc.html#income-equal-to-0",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Income equal to 0?",
    "text": "Income equal to 0?\n\nmy_heights %&gt;% \n  dim()\n\n[1] 7006    8\n\n\n. . .\n\nmy_heights %&gt;% \n  filter(income &lt; 1) %&gt;% \n  dim()\n\n[1] 1740    8"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#income-equal-to-0-1",
    "href": "explore-data/eda/eda-doc.html#income-equal-to-0-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Income equal to 0?",
    "text": "Income equal to 0?\n\nmy_heights %&gt;% \n  filter(income &lt; 1) %&gt;%\n  select(sex) %&gt;%\n  group_by(sex) %&gt;%\n  table()\n\nsex\n  male female \n   745    995"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#income-equal-to-0-2",
    "href": "explore-data/eda/eda-doc.html#income-equal-to-0-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Income equal to 0?",
    "text": "Income equal to 0?\n\nNo income, grouped by sex and edu_fac\n\n. . .\n\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &lt; 1) %&gt;%\n  select(sex, edu_fac) %&gt;%\n  group_by(sex) %&gt;%\n  table()\n\n        edu_fac\nsex      NotHS NotTC NotC  C+\n  male     252   359   74  56\n  female   245   476  137 133"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#boxplot",
    "href": "explore-data/eda/eda-doc.html#boxplot",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Boxplot",
    "text": "Boxplot\n\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &gt; 0) %&gt;% \n  ggplot(mapping = aes(x = edu_fac, y = income)) +\n  facet_wrap(~sex) + \n  geom_boxplot()"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#boxplot-1",
    "href": "explore-data/eda/eda-doc.html#boxplot-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Boxplot",
    "text": "Boxplot"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#boxplot-code-turned-90",
    "href": "explore-data/eda/eda-doc.html#boxplot-code-turned-90",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Boxplot code, turned 90",
    "text": "Boxplot code, turned 90\n\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &gt; 0) %&gt;% \n  ggplot(mapping = aes(x = edu_fac, y = income)) +\n  facet_wrap(~sex) + \n  geom_boxplot() + \n  coord_flip()"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#boxplot-plot-turned-90",
    "href": "explore-data/eda/eda-doc.html#boxplot-plot-turned-90",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Boxplot plot, turned 90",
    "text": "Boxplot plot, turned 90"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#how-to-treat-bad-data",
    "href": "explore-data/eda/eda-doc.html#how-to-treat-bad-data",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "How to treat bad data",
    "text": "How to treat bad data\n\nOutliers?\n\nReal outliers or faulty registration?\n\nWhat to do?\n\nTo just delete the observation is seldom the right solution\nDocument what you do!\nIf you suspect faulty data entry/registration change value to NA"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#how-to-treat-bad-data-cont.",
    "href": "explore-data/eda/eda-doc.html#how-to-treat-bad-data-cont.",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "How to treat bad data cont.",
    "text": "How to treat bad data cont.\n\nWhat to do? cont.\n\nIn some rare cases it might be acceptable to edit the data\n\nif you have very few observations\ncan give a very plausible explanation for the faulty entry. Document very carefully.\nEx. percentage unemployed timeseries: 2,3%, 3,7% … 270% … 4,1%.\n\nIf you can argue that 2,7 probably has been entered instead of 0,027 it might be defensible to edit the observation, but normally you should change it to NA and document your edit.\n\n\nDo not use na.rm = TRUE in ggplot before last edit.\n\nMake sure that you have thoroughly documented the missing values.\nggplot is nice and warns you about missing values and tells you how many there are."
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#how-to-treat-bad-data-cont.-1",
    "href": "explore-data/eda/eda-doc.html#how-to-treat-bad-data-cont.-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "How to treat bad data cont.",
    "text": "How to treat bad data cont.\n\nWith real outliers\n\nExplanation. Is there a missing variable?\nDo the analysis with and without the outliers. If similar results not to much of a problem, if not …"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#quiz",
    "href": "explore-data/eda/eda-doc.html#quiz",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Quiz",
    "text": "Quiz\nFrom r4ds. Use help (?)\n\n\nHow are NAs handled in geom_histogram()?\nHow are NAs handled in geom_bar()?\nHow are NAs handled in sum and mean"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#answer-quiz",
    "href": "explore-data/eda/eda-doc.html#answer-quiz",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\nset.seed(999)\nmy_data &lt;- tibble(val = c(round(runif(97, 1, 10), 0), rep(NA, 3)))\ng &lt;- ggplot(my_data, mapping = aes(x = val)) \ng1 &lt;- g + geom_histogram()\ng2 &lt;- g + geom_bar()\ngridExtra::grid.arrange(g1, g2, ncol = 2)\nsum(my_data$val); mean(my_data$val)\nsum(my_data$val, na.rm = TRUE); mean(my_data$val, na.rm = TRUE)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#answer-quiz-1",
    "href": "explore-data/eda/eda-doc.html#answer-quiz-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\n\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n\n\nWarning: Removed 3 rows containing non-finite values (`stat_bin()`).\n\n\nWarning: Removed 3 rows containing non-finite values (`stat_count()`)."
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#answer-quiz-2",
    "href": "explore-data/eda/eda-doc.html#answer-quiz-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\n\n\nWarnings about NAs from ggplot.\n\n\n\nsum(my_data$val); mean(my_data$val)\n\n[1] NA\n\n\n[1] NA\n\nsum(my_data$val, na.rm = TRUE); mean(my_data$val, na.rm = TRUE)\n\n[1] 519\n\n\n[1] 5.350515"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#answer-quiz-3",
    "href": "explore-data/eda/eda-doc.html#answer-quiz-3",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\nUsing na.rm = TRUE.\n\n. . .\n\nset.seed(999)\nmy_data &lt;- tibble(val = c(round(runif(97, 1, 10), 0), rep(NA, 3)))\ng &lt;- ggplot(my_data, mapping = aes(x = val)) \ng1 &lt;- g + geom_histogram(binwidth = 1, na.rm = TRUE)\ng2 &lt;- g + geom_bar(na.rm = TRUE)\ngridExtra::grid.arrange(g1, g2, ncol = 2)\nsum(my_data$val); mean(my_data$val)\nsum(my_data$val, na.rm = TRUE); mean(my_data$val, na.rm = TRUE)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#answer-quiz-4",
    "href": "explore-data/eda/eda-doc.html#answer-quiz-4",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\n\n\n\n\n\nsum(my_data$val); mean(my_data$val)\n\n[1] NA\n\n\n[1] NA\n\nsum(my_data$val, na.rm = TRUE); mean(my_data$val, na.rm = TRUE)\n\n[1] 519\n\n\n[1] 5.350515"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#answer-quiz-5",
    "href": "explore-data/eda/eda-doc.html#answer-quiz-5",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\nNow the two seems handle NAs the same way.\nNormal rule: One NA =&gt; result NA\nFor sum() and mean() na.rm = TRUE returns the result of the calculation when NAs are removed"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#covariation",
    "href": "explore-data/eda/eda-doc.html#covariation",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Covariation",
    "text": "Covariation\n\nUse facets as above\nSome cases\n\nCategorical and continuous variable\nTwo categorial variables\nTwo continuous variables"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#categorical-and-continuous-variable",
    "href": "explore-data/eda/eda-doc.html#categorical-and-continuous-variable",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Categorical and continuous variable",
    "text": "Categorical and continuous variable\n\ngeom_freqpoly()\n\nLines, category by colour or linetype (BW)\nDefault gives count, density often better"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#categorical-and-continuous-variable-code",
    "href": "explore-data/eda/eda-doc.html#categorical-and-continuous-variable-code",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Categorical and continuous variable; code",
    "text": "Categorical and continuous variable; code\n\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &gt; 0 & !is.na(weight) & !is.na(afqt) & !is.na(edu_fac)) %&gt;%\nggplot(mapping = aes(x = income, y = ..density..)) +\n  geom_freqpoly(mapping = aes(colour = edu_fac), binwidth = 10000)\n\n\nTry also binwidth = 3000"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#categorical-and-continuous-variable-plot",
    "href": "explore-data/eda/eda-doc.html#categorical-and-continuous-variable-plot",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Categorical and continuous variable; plot",
    "text": "Categorical and continuous variable; plot\n\n\nWarning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.\nℹ Please use `after_stat(density)` instead."
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#two-categorical-variable-code",
    "href": "explore-data/eda/eda-doc.html#two-categorical-variable-code",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two categorical variable; code",
    "text": "Two categorical variable; code\n\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &gt; 0 & !is.na(weight) & !is.na(afqt) & !is.na(edu_fac)) %&gt;%\n  ggplot() +\n  geom_count(mapping = aes(x = marital, y = edu_fac))"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#two-categorical-variable-plot",
    "href": "explore-data/eda/eda-doc.html#two-categorical-variable-plot",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two categorical variable; plot",
    "text": "Two categorical variable; plot"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#one-continuouse-variable-one-with-many-categories",
    "href": "explore-data/eda/eda-doc.html#one-continuouse-variable-one-with-many-categories",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "One continuouse variable, one with many categories",
    "text": "One continuouse variable, one with many categories\n\nmy_heights %&gt;% \n  filter(income &gt; 0 & !is.na(weight) & !is.na(afqt) & !is.na(education)) %&gt;%\n  ggplot() +\n  geom_point(mapping = aes(x = education, y = income), alpha = 0.05)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#one-continuouse-variable-one-with-many-categories-1",
    "href": "explore-data/eda/eda-doc.html#one-continuouse-variable-one-with-many-categories-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "One continuouse variable, one with many categories",
    "text": "One continuouse variable, one with many categories"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#two-continuous-variables",
    "href": "explore-data/eda/eda-doc.html#two-continuous-variables",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables",
    "text": "Two continuous variables\n\nUse diamonds dataset\nSmaller point size\n\n. . .\n\ndiamonds %&gt;% \n  ggplot(mapping = aes(x = carat, y = price)) +\n  geom_point(size = 0.1)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#two-continuous-variables-1",
    "href": "explore-data/eda/eda-doc.html#two-continuous-variables-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables",
    "text": "Two continuous variables"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#two-continuous-variables-alpha",
    "href": "explore-data/eda/eda-doc.html#two-continuous-variables-alpha",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables; alpha",
    "text": "Two continuous variables; alpha\n\ndiamonds %&gt;% \n  ggplot(mapping = aes(x = carat, y = price)) +\n  geom_point(alpha = 0.1, size = 0.2)"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#two-continuous-variables-alpha-1",
    "href": "explore-data/eda/eda-doc.html#two-continuous-variables-alpha-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables; alpha",
    "text": "Two continuous variables; alpha"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#two-continuous-variables-make-one-categorical",
    "href": "explore-data/eda/eda-doc.html#two-continuous-variables-make-one-categorical",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables; make one categorical",
    "text": "Two continuous variables; make one categorical\n\ndiamonds %&gt;% \n  filter(carat &lt;= 2) %&gt;% \n  ggplot(mapping = aes(x = carat, y = price)) +\n  geom_boxplot(mapping = aes(group = cut_width(carat, 0.1)))"
  },
  {
    "objectID": "explore-data/eda/eda-doc.html#two-continuous-variables-make-one-categorical-1",
    "href": "explore-data/eda/eda-doc.html#two-continuous-variables-make-one-categorical-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables; make one categorical",
    "text": "Two continuous variables; make one categorical\n\nNot like the one in r4ds\n\n. . ."
  },
  {
    "objectID": "explore-data/eda/eda.html#packages-used",
    "href": "explore-data/eda/eda.html#packages-used",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Packages used",
    "text": "Packages used\n\n\nCode\npacks &lt;- suppressPackageStartupMessages(\n  c(\n    library(tidyverse),\n    library(nycflights13),\n    library(gridExtra),\n    library(modelr),\n    library(grid),\n    library(ggplotify),\n    library(vtable)\n    )\n)\n\n\n\n\nCode\nunique(packs)\n\n\n [1] \"lubridate\"    \"forcats\"      \"stringr\"      \"dplyr\"        \"purrr\"       \n [6] \"readr\"        \"tidyr\"        \"tibble\"       \"ggplot2\"      \"tidyverse\"   \n[11] \"stats\"        \"graphics\"     \"grDevices\"    \"utils\"        \"datasets\"    \n[16] \"methods\"      \"base\"         \"nycflights13\" \"gridExtra\"    \"modelr\"      \n[21] \"grid\"         \"ggplotify\"    \"vtable\"       \"kableExtra\""
  },
  {
    "objectID": "explore-data/eda/eda.html#generate-references-for-packages-used",
    "href": "explore-data/eda/eda.html#generate-references-for-packages-used",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Generate References for Packages used",
    "text": "Generate References for Packages used\n\n\nCode\n# create a bib file for the R packages \n# used in this document\n# Note! Needs to do a touch(eda.bib) in terminal before first run\n# else stops when bibliography: \"eda.bib\" not found in YAML\nknitr::write_bib(\n  packs,\n  file = \"eda.bib\"\n  )\nrm(packs)"
  },
  {
    "objectID": "explore-data/eda/eda.html#chapter-6-workflow",
    "href": "explore-data/eda/eda.html#chapter-6-workflow",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Chapter 6; Workflow",
    "text": "Chapter 6; Workflow\n\nNot all to relevant for us since we use Quarto Documents,\nbut some important points\nCmd + Return/Ctrl + Enter runs current statement and jumps to next statement\nSelecting some statements and hitting Cmd + Return/Ctrl + Enter will run the selected statements.\n\nNice for debugging pipes\nBe very careful when you select the statements\nMissing a ‘)’ or a ‘“’ can bring a lot of hurt.\nIf sh*t happens, ESC is your best friend"
  },
  {
    "objectID": "explore-data/eda/eda.html#exploratory-data-analysis-r4ds-chap.-7",
    "href": "explore-data/eda/eda.html#exploratory-data-analysis-r4ds-chap.-7",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Exploratory Data Analysis (r4ds chap. 7)",
    "text": "Exploratory Data Analysis (r4ds chap. 7)\nGeneral reflection up on the concept of Exploratory Data Analysis. You will find details and more code in chapter 7 of r4ds.\n\nGetting to know your data\n\nVariation in variables\nVariation between variables"
  },
  {
    "objectID": "explore-data/eda/eda.html#some-definitions",
    "href": "explore-data/eda/eda.html#some-definitions",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Some definitions",
    "text": "Some definitions\n\nVariable: some quality of the underlying phenomenon that one can measure\nValue: the recorded number or category resulting from the measurement\nObservation: a set of measurements of the underlying phenomenon\n\nsame time\nsame object\n\nTabular data Listing of variables, observations and values\nTidy tabular data: Tabular data where\n\neach variable is in a column,\neach observation in a row and\neach cell in the table contains one value"
  },
  {
    "objectID": "explore-data/eda/eda.html#single-variable-load-data",
    "href": "explore-data/eda/eda.html#single-variable-load-data",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable, load data",
    "text": "Single variable, load data\n\nLoad the data\n\n\n\n\nCode\nmy_heights &lt;- modelr::heights\n\n\n\nAny NAs?\n\n\n\n\n\nCode\n# NAs in my_heights?\nmy_heights %&gt;% \n  apply(MARGIN = 2, FUN = is.na) %&gt;% \n  apply(MARGIN = 2, FUN = sum) \n\n\n   income    height    weight       age   marital       sex education      afqt \n        0         0        95         0         0         0        10       262 \n\n\n\nor\n\n\n\n\n\nCode\n# NAs in my_heights?\nmy_heights %&gt;% \n  is.na() %&gt;% \n  apply(MARGIN = 2, FUN = sum) \n\n\n   income    height    weight       age   marital       sex education      afqt \n        0         0        95         0         0         0        10       262"
  },
  {
    "objectID": "explore-data/eda/eda.html#single-variable-load-data-cont.",
    "href": "explore-data/eda/eda.html#single-variable-load-data-cont.",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable, load data cont.",
    "text": "Single variable, load data cont.\n\nNicer solution\n\n\n\n\nCode\n# number of NAs in each variable\n# drop variables with no NA\nmy_heights %&gt;% \n  is.na() %&gt;% \n  colSums()\n\n\n   income    height    weight       age   marital       sex education      afqt \n        0         0        95         0         0         0        10       262 \n\n\n\nor\n\n\n\n\n\nCode\n# number of NAs in each variable\n# drop variables with no NA\nmy_heights %&gt;% \n  is.na() %&gt;% \n  colSums() %&gt;% \n  .[. &gt; 0]\n\n\n   weight education      afqt \n       95        10       262"
  },
  {
    "objectID": "explore-data/eda/eda.html#descriptive-statistics",
    "href": "explore-data/eda/eda.html#descriptive-statistics",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics",
    "text": "Descriptive Statistics\nDescribe data by tables showing:\n\nDifferent statistics (characteristics) of the data\n\nNumber of obs.\nNumber of missing values\nMinimum value\nMaximum value\nMean\nDispersion\n\nStandard deviation\nVariance\nPercentiles"
  },
  {
    "objectID": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights",
    "href": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\nSplits variables into two tables\n\n\n\n\nCode\n# package vtable must be installed\nmy_heights %&gt;% \n  select(-marital, -sex) %&gt;% \n  # . to stop RStudio complaining about no data\n  vtable::st(.)\n\n\n\nSummary Statistics\n\n\nVariable\nN\nMean\nStd. Dev.\nMin\nPctl. 25\nPctl. 75\nMax\n\n\n\n\nincome\n7006\n41204\n55892\n0\n166\n55000\n343830\n\n\nheight\n7006\n67\n4.1\n52\n64\n70\n84\n\n\nweight\n6911\n188\n44\n76\n157\n212\n524\n\n\nage\n7006\n51\n2.2\n47\n49\n53\n56\n\n\neducation\n6996\n13\n2.6\n1\n12\n15\n20\n\n\nafqt\n6744\n41\n29\n0\n15\n65\n100"
  },
  {
    "objectID": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-1",
    "href": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n\nCode\n# package vtable must be installed\nmy_heights %&gt;% \n  select(marital, sex) %&gt;% \n  vtable::st(.)"
  },
  {
    "objectID": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-2",
    "href": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n\n\nSummary Statistics\n\n\nVariable\nN\nPercent\n\n\n\n\nmarital\n7006\n\n\n\n... single\n1124\n16%\n\n\n... married\n3806\n54%\n\n\n... separated\n366\n5%\n\n\n... divorced\n1549\n22%\n\n\n... widowed\n161\n2%\n\n\nsex\n7006\n\n\n\n... male\n3402\n49%\n\n\n... female\n3604\n51%"
  },
  {
    "objectID": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-3",
    "href": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-3",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n\nCode\nmy_heights %&gt;% \n  select(-marital) %&gt;% \n  vtable::st(group = 'sex')\n\n\n\nSummary Statistics\n\n\n\n\n\n\n\n\n\n\n\n\nsex\n\n\nmale\n\n\nfemale\n\n\n\nVariable\nN\nMean\nSD\nN\nMean\nSD\n\n\n\n\nincome\n3402\n53510\n69399\n3604\n29588\n35347\n\n\nheight\n3402\n70\n3\n3604\n64\n2.7\n\n\nweight\n3392\n204\n41\n3519\n173\n43\n\n\nage\n3402\n51\n2.2\n3604\n51\n2.2\n\n\neducation\n3396\n13\n2.6\n3600\n13\n2.6\n\n\nafqt\n3248\n42\n30\n3496\n41\n28"
  },
  {
    "objectID": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-4",
    "href": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-4",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n\nCode\n# package vtable must be installed\nmy_heights %&gt;% \n  mutate(married = if_else(marital == 'married', TRUE, FALSE)) %&gt;% \n  filter(sex == 'female') %&gt;% \n  select(-sex, -marital) %&gt;% \n  vtable::st(group = 'married')\n\n\n\nSummary Statistics\n\n\n\n\n\n\n\n\n\n\n\n\nmarried\n\n\nNo\n\n\nYes\n\n\n\nVariable\nN\nMean\nSD\nN\nMean\nSD\n\n\n\n\nincome\n1703\n26682\n30962\n1901\n32190\n38680\n\n\nheight\n1703\n64\n2.8\n1901\n64\n2.7\n\n\nweight\n1662\n177\n45\n1857\n169\n40\n\n\nage\n1703\n51\n2.3\n1901\n51\n2.2\n\n\neducation\n1701\n13\n2.6\n1899\n14\n2.6\n\n\nafqt\n1647\n33\n26\n1849\n47\n28"
  },
  {
    "objectID": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-5",
    "href": "explore-data/eda/eda.html#descriptive-statistics-ex.-my_heights-5",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Descriptive Statistics ex. my_heights",
    "text": "Descriptive Statistics ex. my_heights\n\n\nCode\n# package vtable must be installed\nmy_heights %&gt;% \n  mutate(married = if_else(marital == 'married', TRUE, FALSE)) %&gt;% \n  filter(sex == 'male') %&gt;% \n  select(-sex, -marital) %&gt;% \n  vtable::st(group = 'married')\n\n\n\nSummary Statistics\n\n\n\n\n\n\n\n\n\n\n\n\nmarried\n\n\nNo\n\n\nYes\n\n\n\nVariable\nN\nMean\nSD\nN\nMean\nSD\n\n\n\n\nincome\n1497\n32122\n50520\n1905\n70317\n77171\n\n\nheight\n1497\n70\n3.1\n1905\n70\n2.9\n\n\nweight\n1492\n200\n42\n1900\n207\n39\n\n\nage\n1497\n51\n2.2\n1905\n51\n2.3\n\n\neducation\n1494\n12\n2.2\n1902\n14\n2.7\n\n\nafqt\n1426\n34\n28\n1822\n48\n30"
  },
  {
    "objectID": "explore-data/eda/eda.html#single-variable-graphical-description-bar-chart",
    "href": "explore-data/eda/eda.html#single-variable-graphical-description-bar-chart",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable graphical description, bar chart",
    "text": "Single variable graphical description, bar chart\n\nSimplest, bar-chart\n\n\n\n\nCode\nggplot(data = my_heights) +\n  geom_bar(mapping = aes(x = education), na.rm = TRUE)"
  },
  {
    "objectID": "explore-data/eda/eda.html#single-variable-graphical-description-bar-chart-1",
    "href": "explore-data/eda/eda.html#single-variable-graphical-description-bar-chart-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable graphical description, bar chart",
    "text": "Single variable graphical description, bar chart"
  },
  {
    "objectID": "explore-data/eda/eda.html#the-peaks",
    "href": "explore-data/eda/eda.html#the-peaks",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "The peaks?",
    "text": "The peaks?\n\nWhat is the reason behind the peak at 12 years?\n\nHigh-school\n\nWhat is the reason behind the peak at 14 years?\n\n2 year trade college\n\nWhat is the reason behind the peak at 16 years?\n\n4 year college"
  },
  {
    "objectID": "explore-data/eda/eda.html#single-variable-i.e.-variation-in-a-variable",
    "href": "explore-data/eda/eda.html#single-variable-i.e.-variation-in-a-variable",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Single variable, i.e. variation in a variable",
    "text": "Single variable, i.e. variation in a variable\n\nExample: How does income vary in the modelr::heights dataset?\n\nDoes someone have zero income?\nHow to display the variable? &gt; - histogram; hist(my_df$var_name, breaks = 20) or geom_histogram() from ggplot &gt; - density/violin plot\n\nBe aware of outliers?\n\nMight be difficult to spot in a histogram"
  },
  {
    "objectID": "explore-data/eda/eda.html#hist-and-geom_histogram",
    "href": "explore-data/eda/eda.html#hist-and-geom_histogram",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "hist() and geom_histogram()",
    "text": "hist() and geom_histogram()\n\n\nCode\nhist1 &lt;- ggplotify::as.ggplot(~hist(my_heights$income, breaks = 20))\nhist2 &lt;- ggplot(my_heights, mapping = aes(x = income)) +\n  geom_histogram(bins = 20)\n\ngridExtra::grid.arrange(hist1, hist2, ncol = 2)"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_histogram-other-variables",
    "href": "explore-data/eda/eda.html#geom_histogram-other-variables",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_histogram() other variables",
    "text": "geom_histogram() other variables\n\n\nCode\nhist3 &lt;- ggplot(my_heights, mapping = aes(x = income)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\nhist4 &lt;- ggplot(my_heights, mapping = aes(x = height)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\nhist5 &lt;- ggplot(my_heights, mapping = aes(x = weight)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\ngridExtra::grid.arrange(hist3, hist4, hist5, nrow = 1)"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_histogram-other-variables-1",
    "href": "explore-data/eda/eda.html#geom_histogram-other-variables-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_histogram() other variables",
    "text": "geom_histogram() other variables"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_histogram-other-variables-2",
    "href": "explore-data/eda/eda.html#geom_histogram-other-variables-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_histogram() other variables",
    "text": "geom_histogram() other variables\n\n\nCode\nhist6 &lt;- ggplot(my_heights, mapping = aes(x = age)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\nhist7 &lt;- ggplot(my_heights, mapping = aes(x = education)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\nhist8 &lt;- ggplot(my_heights, mapping = aes(x = afqt)) +\n  geom_histogram(bins = 40, na.rm = TRUE)\ngridExtra::grid.arrange(hist6, hist7, hist8, nrow = 1)"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_histogram-other-variables-3",
    "href": "explore-data/eda/eda.html#geom_histogram-other-variables-3",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_histogram() other variables",
    "text": "geom_histogram() other variables"
  },
  {
    "objectID": "explore-data/eda/eda.html#variation-in-a-variable-given-another-variable",
    "href": "explore-data/eda/eda.html#variation-in-a-variable-given-another-variable",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Variation in a variable, given another variable",
    "text": "Variation in a variable, given another variable\n\nWe can use the facet feature of ggplot"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_density-faceted-on-sex",
    "href": "explore-data/eda/eda.html#geom_density-faceted-on-sex",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); faceted on sex",
    "text": "geom_density(); faceted on sex\n\nDistribution of income\n\nThree levels of education ([0-12) “NotHS”, [12-14) “NotTC”, [14-16) “NotC”, [16-21] “C+”)\nFaceted on the sex variable\nUse the cut function to make the categories\nHave to use right = FALSE to get open interval on the right"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_density-faceted-on-sex-1",
    "href": "explore-data/eda/eda.html#geom_density-faceted-on-sex-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); faceted on sex",
    "text": "geom_density(); faceted on sex\n\n\nCode\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(!is.na(edu_fac) & income &gt; 0) %&gt;%\n  ggplot(mapping = aes(x = income, fill = edu_fac, colour = edu_fac)) +\n  geom_density(alpha = 0.2, na.rm = TRUE) + \n  facet_wrap(~sex)"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_density-faceted-on-sex-2",
    "href": "explore-data/eda/eda.html#geom_density-faceted-on-sex-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); faceted on sex",
    "text": "geom_density(); faceted on sex"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_density-facet-edu_fac",
    "href": "explore-data/eda/eda.html#geom_density-facet-edu_fac",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); facet edu_fac",
    "text": "geom_density(); facet edu_fac\n\nPerhaps better to facet on education\n\n\n\n\nCode\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(!is.na(edu_fac) & income &gt; 0) %&gt;%\n  ggplot(mapping = aes(x = income, fill = sex, colour = sex)) +\n  geom_density(alpha = 0.2, na.rm = TRUE) + \n  facet_wrap(~edu_fac)"
  },
  {
    "objectID": "explore-data/eda/eda.html#geom_density-facet-edu_fac-1",
    "href": "explore-data/eda/eda.html#geom_density-facet-edu_fac-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "geom_density(); facet edu_fac",
    "text": "geom_density(); facet edu_fac"
  },
  {
    "objectID": "explore-data/eda/eda.html#income-equal-to-0",
    "href": "explore-data/eda/eda.html#income-equal-to-0",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Income equal to 0?",
    "text": "Income equal to 0?\n\n\nCode\nmy_heights %&gt;% \n  dim()\n\n\n[1] 7006    8\n\n\n\n\n\nCode\nmy_heights %&gt;% \n  filter(income &lt; 1) %&gt;% \n  dim()\n\n\n[1] 1740    8"
  },
  {
    "objectID": "explore-data/eda/eda.html#income-equal-to-0-1",
    "href": "explore-data/eda/eda.html#income-equal-to-0-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Income equal to 0?",
    "text": "Income equal to 0?\n\n\nCode\nmy_heights %&gt;% \n  filter(income &lt; 1) %&gt;%\n  select(sex) %&gt;%\n  group_by(sex) %&gt;%\n  table()\n\n\nsex\n  male female \n   745    995"
  },
  {
    "objectID": "explore-data/eda/eda.html#income-equal-to-0-2",
    "href": "explore-data/eda/eda.html#income-equal-to-0-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Income equal to 0?",
    "text": "Income equal to 0?\n\nNo income, grouped by sex and edu_fac\n\n\n\n\nCode\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &lt; 1) %&gt;%\n  select(sex, edu_fac) %&gt;%\n  group_by(sex) %&gt;%\n  table()\n\n\n        edu_fac\nsex      NotHS NotTC NotC  C+\n  male     252   359   74  56\n  female   245   476  137 133"
  },
  {
    "objectID": "explore-data/eda/eda.html#boxplot",
    "href": "explore-data/eda/eda.html#boxplot",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Boxplot",
    "text": "Boxplot\n\n\nCode\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &gt; 0) %&gt;% \n  ggplot(mapping = aes(x = edu_fac, y = income)) +\n  facet_wrap(~sex) + \n  geom_boxplot()"
  },
  {
    "objectID": "explore-data/eda/eda.html#boxplot-1",
    "href": "explore-data/eda/eda.html#boxplot-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Boxplot",
    "text": "Boxplot"
  },
  {
    "objectID": "explore-data/eda/eda.html#boxplot-code-turned-90",
    "href": "explore-data/eda/eda.html#boxplot-code-turned-90",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Boxplot code, turned 90",
    "text": "Boxplot code, turned 90\n\n\nCode\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &gt; 0) %&gt;% \n  ggplot(mapping = aes(x = edu_fac, y = income)) +\n  facet_wrap(~sex) + \n  geom_boxplot() + \n  coord_flip()"
  },
  {
    "objectID": "explore-data/eda/eda.html#boxplot-plot-turned-90",
    "href": "explore-data/eda/eda.html#boxplot-plot-turned-90",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Boxplot plot, turned 90",
    "text": "Boxplot plot, turned 90"
  },
  {
    "objectID": "explore-data/eda/eda.html#how-to-treat-bad-data",
    "href": "explore-data/eda/eda.html#how-to-treat-bad-data",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "How to treat bad data",
    "text": "How to treat bad data\n\nOutliers?\n\nReal outliers or faulty registration?\n\nWhat to do?\n\nTo just delete the observation is seldom the right solution\nDocument what you do!\nIf you suspect faulty data entry/registration change value to NA"
  },
  {
    "objectID": "explore-data/eda/eda.html#how-to-treat-bad-data-cont.",
    "href": "explore-data/eda/eda.html#how-to-treat-bad-data-cont.",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "How to treat bad data cont.",
    "text": "How to treat bad data cont.\n\nWhat to do? cont.\n\nIn some rare cases it might be acceptable to edit the data\n\nif you have very few observations\ncan give a very plausible explanation for the faulty entry. Document very carefully.\nEx. percentage unemployed timeseries: 2,3%, 3,7% … 270% … 4,1%.\n\nIf you can argue that 2,7 probably has been entered instead of 0,027 it might be defensible to edit the observation, but normally you should change it to NA and document your edit.\n\n\nDo not use na.rm = TRUE in ggplot before last edit.\n\nMake sure that you have thoroughly documented the missing values.\nggplot is nice and warns you about missing values and tells you how many there are."
  },
  {
    "objectID": "explore-data/eda/eda.html#how-to-treat-bad-data-cont.-1",
    "href": "explore-data/eda/eda.html#how-to-treat-bad-data-cont.-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "How to treat bad data cont.",
    "text": "How to treat bad data cont.\n\nWith real outliers\n\nExplanation. Is there a missing variable?\nDo the analysis with and without the outliers. If similar results not to much of a problem, if not …"
  },
  {
    "objectID": "explore-data/eda/eda.html#quiz",
    "href": "explore-data/eda/eda.html#quiz",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Quiz",
    "text": "Quiz\nFrom r4ds. Use help (?)\n\nHow are NAs handled in geom_histogram()?\nHow are NAs handled in geom_bar()?\nHow are NAs handled in sum and mean"
  },
  {
    "objectID": "explore-data/eda/eda.html#answer-quiz",
    "href": "explore-data/eda/eda.html#answer-quiz",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\n\nCode\nset.seed(999)\nmy_data &lt;- tibble(val = c(round(runif(97, 1, 10), 0), rep(NA, 3)))\ng &lt;- ggplot(my_data, mapping = aes(x = val)) \ng1 &lt;- g + geom_histogram()\ng2 &lt;- g + geom_bar()\ngridExtra::grid.arrange(g1, g2, ncol = 2)\nsum(my_data$val); mean(my_data$val)\nsum(my_data$val, na.rm = TRUE); mean(my_data$val, na.rm = TRUE)"
  },
  {
    "objectID": "explore-data/eda/eda.html#answer-quiz-1",
    "href": "explore-data/eda/eda.html#answer-quiz-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz"
  },
  {
    "objectID": "explore-data/eda/eda.html#answer-quiz-2",
    "href": "explore-data/eda/eda.html#answer-quiz-2",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\nWarnings about NAs from ggplot.\n\nCode\nsum(my_data$val); mean(my_data$val)\n\n\n[1] NA\n\n\n[1] NA\n\n\nCode\nsum(my_data$val, na.rm = TRUE); mean(my_data$val, na.rm = TRUE)\n\n\n[1] 519\n\n\n[1] 5.350515"
  },
  {
    "objectID": "explore-data/eda/eda.html#answer-quiz-3",
    "href": "explore-data/eda/eda.html#answer-quiz-3",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\nUsing na.rm = TRUE.\n\n\n\n\nCode\nset.seed(999)\nmy_data &lt;- tibble(val = c(round(runif(97, 1, 10), 0), rep(NA, 3)))\ng &lt;- ggplot(my_data, mapping = aes(x = val)) \ng1 &lt;- g + geom_histogram(binwidth = 1, na.rm = TRUE)\ng2 &lt;- g + geom_bar(na.rm = TRUE)\ngridExtra::grid.arrange(g1, g2, ncol = 2)\nsum(my_data$val); mean(my_data$val)\nsum(my_data$val, na.rm = TRUE); mean(my_data$val, na.rm = TRUE)"
  },
  {
    "objectID": "explore-data/eda/eda.html#answer-quiz-4",
    "href": "explore-data/eda/eda.html#answer-quiz-4",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\n\n\nCode\nsum(my_data$val); mean(my_data$val)\n\n\n[1] NA\n\n\n[1] NA\n\n\nCode\nsum(my_data$val, na.rm = TRUE); mean(my_data$val, na.rm = TRUE)\n\n\n[1] 519\n\n\n[1] 5.350515"
  },
  {
    "objectID": "explore-data/eda/eda.html#answer-quiz-5",
    "href": "explore-data/eda/eda.html#answer-quiz-5",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Answer Quiz",
    "text": "Answer Quiz\n\nNow the two seems handle NAs the same way.\nNormal rule: One NA =&gt; result NA\nFor sum() and mean() na.rm = TRUE returns the result of the calculation when NAs are removed"
  },
  {
    "objectID": "explore-data/eda/eda.html#covariation",
    "href": "explore-data/eda/eda.html#covariation",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Covariation",
    "text": "Covariation\n\nUse facets as above\nSome cases\n\nCategorical and continuous variable\nTwo categorial variables\nTwo continuous variables"
  },
  {
    "objectID": "explore-data/eda/eda.html#categorical-and-continuous-variable",
    "href": "explore-data/eda/eda.html#categorical-and-continuous-variable",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Categorical and continuous variable",
    "text": "Categorical and continuous variable\n\ngeom_freqpoly()\n\nLines, category by colour or linetype (BW)\nDefault gives count, density often better"
  },
  {
    "objectID": "explore-data/eda/eda.html#categorical-and-continuous-variable-code",
    "href": "explore-data/eda/eda.html#categorical-and-continuous-variable-code",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Categorical and continuous variable; code",
    "text": "Categorical and continuous variable; code\n\n\nCode\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &gt; 0 & !is.na(weight) & !is.na(afqt) & !is.na(edu_fac)) %&gt;%\nggplot(mapping = aes(x = income, y = ..density..)) +\n  geom_freqpoly(mapping = aes(colour = edu_fac), binwidth = 10000)\n\n\n\nTry also binwidth = 3000"
  },
  {
    "objectID": "explore-data/eda/eda.html#categorical-and-continuous-variable-plot",
    "href": "explore-data/eda/eda.html#categorical-and-continuous-variable-plot",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Categorical and continuous variable; plot",
    "text": "Categorical and continuous variable; plot"
  },
  {
    "objectID": "explore-data/eda/eda.html#two-categorical-variable-code",
    "href": "explore-data/eda/eda.html#two-categorical-variable-code",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two categorical variable; code",
    "text": "Two categorical variable; code\n\n\nCode\nmy_heights %&gt;% \n  mutate(\n    edu_fac = cut(education, \n                  breaks = c(0, 12, 14, 16, 21), \n                  labels = c(\"NotHS\", \"NotTC\", \"NotC\", \"C+\"),\n                  right = FALSE) \n  ) %&gt;% \n  filter(income &gt; 0 & !is.na(weight) & !is.na(afqt) & !is.na(edu_fac)) %&gt;%\n  ggplot() +\n  geom_count(mapping = aes(x = marital, y = edu_fac))"
  },
  {
    "objectID": "explore-data/eda/eda.html#two-categorical-variable-plot",
    "href": "explore-data/eda/eda.html#two-categorical-variable-plot",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two categorical variable; plot",
    "text": "Two categorical variable; plot"
  },
  {
    "objectID": "explore-data/eda/eda.html#one-continuouse-variable-one-with-many-categories",
    "href": "explore-data/eda/eda.html#one-continuouse-variable-one-with-many-categories",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "One continuouse variable, one with many categories",
    "text": "One continuouse variable, one with many categories\n\n\nCode\nmy_heights %&gt;% \n  filter(income &gt; 0 & !is.na(weight) & !is.na(afqt) & !is.na(education)) %&gt;%\n  ggplot() +\n  geom_point(mapping = aes(x = education, y = income), alpha = 0.05)"
  },
  {
    "objectID": "explore-data/eda/eda.html#one-continuouse-variable-one-with-many-categories-1",
    "href": "explore-data/eda/eda.html#one-continuouse-variable-one-with-many-categories-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "One continuouse variable, one with many categories",
    "text": "One continuouse variable, one with many categories"
  },
  {
    "objectID": "explore-data/eda/eda.html#two-continuous-variables",
    "href": "explore-data/eda/eda.html#two-continuous-variables",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables",
    "text": "Two continuous variables\n\nUse diamonds dataset\nSmaller point size\n\n\n\n\nCode\ndiamonds %&gt;% \n  ggplot(mapping = aes(x = carat, y = price)) +\n  geom_point(size = 0.1)"
  },
  {
    "objectID": "explore-data/eda/eda.html#two-continuous-variables-1",
    "href": "explore-data/eda/eda.html#two-continuous-variables-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables",
    "text": "Two continuous variables"
  },
  {
    "objectID": "explore-data/eda/eda.html#two-continuous-variables-alpha",
    "href": "explore-data/eda/eda.html#two-continuous-variables-alpha",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables; alpha",
    "text": "Two continuous variables; alpha\n\n\nCode\ndiamonds %&gt;% \n  ggplot(mapping = aes(x = carat, y = price)) +\n  geom_point(alpha = 0.1, size = 0.2)"
  },
  {
    "objectID": "explore-data/eda/eda.html#two-continuous-variables-alpha-1",
    "href": "explore-data/eda/eda.html#two-continuous-variables-alpha-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables; alpha",
    "text": "Two continuous variables; alpha"
  },
  {
    "objectID": "explore-data/eda/eda.html#two-continuous-variables-make-one-categorical",
    "href": "explore-data/eda/eda.html#two-continuous-variables-make-one-categorical",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables; make one categorical",
    "text": "Two continuous variables; make one categorical\n\n\nCode\ndiamonds %&gt;% \n  filter(carat &lt;= 2) %&gt;% \n  ggplot(mapping = aes(x = carat, y = price)) +\n  geom_boxplot(mapping = aes(group = cut_width(carat, 0.1)))"
  },
  {
    "objectID": "explore-data/eda/eda.html#two-continuous-variables-make-one-categorical-1",
    "href": "explore-data/eda/eda.html#two-continuous-variables-make-one-categorical-1",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "Two continuous variables; make one categorical",
    "text": "Two continuous variables; make one categorical\n\nNot like the one in r4ds"
  },
  {
    "objectID": "explore-data/eda/eda.html#references",
    "href": "explore-data/eda/eda.html#references",
    "title": "Exploratory Data Analysis (EDA)",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nAuguie, Baptiste. 2017. gridExtra: Miscellaneous Functions for \"Grid\" Graphics. https://CRAN.R-project.org/package=gridExtra.\n\n\nGrolemund, Garrett, and Hadley Wickham. 2011. “Dates and Times Made Easy with lubridate.” Journal of Statistical Software 40 (3): 1–25. https://www.jstatsoft.org/v40/i03/.\n\n\nHuntington-Klein, Nick. 2023. Vtable: Variable Table for Variable Documentation. https://nickch-k.github.io/vtable/.\n\n\nMüller, Kirill, and Hadley Wickham. 2023. Tibble: Simple Data Frames. https://CRAN.R-project.org/package=tibble.\n\n\nR Core Team. 2023. R: A Language and Environment for Statistical Computing. Vienna, Austria: R Foundation for Statistical Computing. https://www.R-project.org/.\n\n\nSpinu, Vitalie, Garrett Grolemund, and Hadley Wickham. 2023. Lubridate: Make Dealing with Dates a Little Easier. https://CRAN.R-project.org/package=lubridate.\n\n\nWickham, Hadley. 2016. Ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York. https://ggplot2.tidyverse.org.\n\n\n———. 2021. Nycflights13: Flights That Departed NYC in 2013. https://github.com/hadley/nycflights13.\n\n\n———. 2022. Stringr: Simple, Consistent Wrappers for Common String Operations. https://CRAN.R-project.org/package=stringr.\n\n\n———. 2023a. Forcats: Tools for Working with Categorical Variables (Factors). https://CRAN.R-project.org/package=forcats.\n\n\n———. 2023b. Modelr: Modelling Functions That Work with the Pipe. https://CRAN.R-project.org/package=modelr.\n\n\n———. 2023c. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686.\n\n\nWickham, Hadley, Winston Chang, Lionel Henry, Thomas Lin Pedersen, Kohske Takahashi, Claus Wilke, Kara Woo, Hiroaki Yutani, and Dewey Dunnington. 2023. Ggplot2: Create Elegant Data Visualisations Using the Grammar of Graphics. https://CRAN.R-project.org/package=ggplot2.\n\n\nWickham, Hadley, Romain François, Lionel Henry, Kirill Müller, and Davis Vaughan. 2023. Dplyr: A Grammar of Data Manipulation. https://CRAN.R-project.org/package=dplyr.\n\n\nWickham, Hadley, and Lionel Henry. 2023. Purrr: Functional Programming Tools. https://CRAN.R-project.org/package=purrr.\n\n\nWickham, Hadley, Jim Hester, and Jennifer Bryan. 2023. Readr: Read Rectangular Text Data. https://CRAN.R-project.org/package=readr.\n\n\nWickham, Hadley, Davis Vaughan, and Maximilian Girlich. 2023. Tidyr: Tidy Messy Data. https://CRAN.R-project.org/package=tidyr.\n\n\nYu, Guangchuang. 2023. Ggplotify: Convert Plot to Grob or Ggplot Object. https://github.com/GuangchuangYu/ggplotify.\n\n\nZhu, Hao. 2021. kableExtra: Construct Complex Table with Kable and Pipe Syntax. https://CRAN.R-project.org/package=kableExtra."
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html",
    "title": "Introduction to ggplot",
    "section": "",
    "text": "We start by loading some packages\n\n. . .\n\nlibrary(ggplot2)\nlibrary(tinytex)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ lubridate 1.9.2     ✔ tibble    3.2.1\n✔ purrr     1.0.1     ✔ tidyr     1.3.0\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(ggpubr)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#load-packages",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#load-packages",
    "title": "Introduction to ggplot",
    "section": "",
    "text": "We start by loading some packages\n\n. . .\n\nlibrary(ggplot2)\nlibrary(tinytex)\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.2     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ lubridate 1.9.2     ✔ tibble    3.2.1\n✔ purrr     1.0.1     ✔ tidyr     1.3.0\n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(ggpubr)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#empty-plot",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#empty-plot",
    "title": "Introduction to ggplot",
    "section": "Empty plot",
    "text": "Empty plot\n\nggplot(data = mtcars)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#data-and-mapping",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#data-and-mapping",
    "title": "Introduction to ggplot",
    "section": "Data and mapping",
    "text": "Data and mapping\n\nggplot(data = mtcars, mapping = aes(x = disp, y = mpg))"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#mapping-in-geom_point",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#mapping-in-geom_point",
    "title": "Introduction to ggplot",
    "section": "mapping in geom_point",
    "text": "mapping in geom_point\n\ngg1 &lt;-   ggplot(data = mtcars, mapping = aes(x = disp, y = mpg)) +\n  geom_point()\n\ngg2 &lt;-   ggplot(data = mtcars) +\n  geom_point(mapping = aes(x = disp, y = mpg))\n\nggarrange(gg1, gg2, labels = c(\"mapping = aes in ggplot\", \"mapping = aes in geom_*\"),\n          nrow = 1)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#ggplotdata-mapping-and-geom_pointmapping-data",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#ggplotdata-mapping-and-geom_pointmapping-data",
    "title": "Introduction to ggplot",
    "section": "ggplot(data, mapping, …) and geom_point(mapping, data, …)",
    "text": "ggplot(data, mapping, …) and geom_point(mapping, data, …)\n\nggplot() +\n  #geom_point has mapping as first argument. We have to use named arguments\n  #or switch their order\n  geom_point(data = mtcars, mapping = aes(x = disp, y = mpg))"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#what-happens-if-we-use-both",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#what-happens-if-we-use-both",
    "title": "Introduction to ggplot",
    "section": "What happens if we use both?",
    "text": "What happens if we use both?\n\n## combine aes\ngg3 &lt;-   ggplot(data = mtcars, mapping = aes(x = disp, colour = factor(cyl))) +\n##  geom_point(data = mtcars, mapping = aes(y = mpg), col = 'blue')\n  geom_point(data = mtcars, mapping = aes(y = mpg))\n#inherit.aes    = FALSE, overrides the default aesthetics, rather than combining with them.\ngg4 &lt;-   ggplot(data =  mtcars, mapping = aes(x = disp, colour = factor(cyl))) +\n##  geom_point(data = mtcars, mapping = aes(y = mpg), col = 'blue')\n  geom_point(data = mtcars, mapping = aes(x = qsec, y = mpg), show.legend = TRUE, inherit.aes = FALSE)\n\n\n\n## x = disp removed from ggplot\ngg5 &lt;-   ggplot(data = mtcars, mapping = aes(colour = factor(cyl))) +\n##  geom_point(data = mtcars, mapping = aes(y = mpg), col = 'blue')\n  geom_point(mapping = aes(x = qsec, y = mpg), show.legend = TRUE, inherit.aes = FALSE)\n\nggarrange(gg3, gg4, gg5, labels = c(\"inherit.aes = TRUE\\n(default)\", \"inherit.aes = FALSE\", \"no x = disp\\nin ggplot\"),\n          nrow = 1)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#playing-with-aes",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#playing-with-aes",
    "title": "Introduction to ggplot",
    "section": "Playing with aes()",
    "text": "Playing with aes()\n\nggplot() +\n  geom_point(data = mtcars, mapping = aes(x = disp, y = mpg, colour = factor(cyl), size = qsec))"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#playing-with-aes-1",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#playing-with-aes-1",
    "title": "Introduction to ggplot",
    "section": "Playing with aes()",
    "text": "Playing with aes()\n\nggplot() +\n  geom_point(data = mtcars,\n             mapping = aes(x = disp, y = mpg, colour = factor(cyl), alpha = 3.6*(0.25*1609.347)/qsec,\n                           shape = factor(ifelse(am, \"Man\", \"Aut\"))), size=4) +\n  labs(colour = \"cyl\", alpha = \"speed\\n(km/h)\", shape = \"trans-\\nmission\")"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nExamine if one of the available aesthetics might do a better job at showing differences in speed."
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise-1",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise-1",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nHow do you think the plot below is made?"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#adding-a-geom_smooth-layer",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#adding-a-geom_smooth-layer",
    "title": "Introduction to ggplot",
    "section": "Adding a geom_smooth() layer",
    "text": "Adding a geom_smooth() layer\n\n\n\nggplot() +\n  geom_point(\n    data = mtcars,\n    mapping = aes(\n      x = disp,\n      y = mpg, \n      colour = factor(cyl), \n      size = 3.6*(0.25*1609.347)/qsec, \n      shape = factor(\n        # Note codeing am\n        # 0 automatic, 1 manual\n        ifelse(\n          am, \n          \"Aut\", \n          \"Man\"\n          )\n        )\n      )\n    ) +\n  labs(\n    colour = \"cyl\", \n    size = \"speed\\n(km/h)\", \n    shape = \"trans-\\nmission\"\n    ) +\n  geom_smooth(\n    data = mtcars, \n    mapping = aes(x = disp, y = mpg)\n    )\n\n\n\n\n`geom_smooth()` using method = 'loess' and formula = 'y ~ x'"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise-2",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise-2",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nWhich parameter control the smoothness? Plot again with “half the smoothness”."
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise-3",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise-3",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nChange the confidence interval from 95% to 99%. Will it become narrower or broader? Then draw both the 95% and 99% confidence interval. How can we distinguish them?"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#linear-model-lm",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#linear-model-lm",
    "title": "Introduction to ggplot",
    "section": "Linear model, lm",
    "text": "Linear model, lm\nPractice exercise: How can we get ggplot2 to draw the regression line? (hint! see help for geom_smooth()). Generate the new plot (concentrate on the plain points and the regression line)."
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#linear-model-rlm",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#linear-model-rlm",
    "title": "Introduction to ggplot",
    "section": "Linear model, rlm",
    "text": "Linear model, rlm\n\n\n\nggplot(\n  data = mtcars, \n  mapping = aes(\n    x = disp, \n    y = mpg\n    )\n  ) +\n  geom_point() +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  # robust lm\n  geom_smooth(\n    method = MASS::rlm, \n    colour = 'Red', \n    se = FALSE\n    )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#other-data-in-the-plot",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#other-data-in-the-plot",
    "title": "Introduction to ggplot",
    "section": "Other data in the plot",
    "text": "Other data in the plot\n\n## create tibble from scratch\ndf_mean &lt;-   tibble(\n  cyl = c(\"avg. car 4 cyl.\", \"avg. car 6 cyl.\", \"avg. car 8 cyl.\"), \n  mpg = c(22.66, 17.74, 15.10), \n  disp = c(105.14, 183.31, 353.10)\n  )\n\n\ndf_mean\n\n# A tibble: 3 × 3\n  cyl               mpg  disp\n  &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;\n1 avg. car 4 cyl.  22.7  105.\n2 avg. car 6 cyl.  17.7  183.\n3 avg. car 8 cyl.  15.1  353."
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise-4",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#exercise-4",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nThe first column involved some typing. How can we reduce the required typing? (hint! see paste() and seq())\n\ndf_mean\n\n# A tibble: 3 × 3\n  cyl               mpg  disp\n  &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;\n1 avg. car 4 cyl.  22.7  105.\n2 avg. car 6 cyl.  17.7  183.\n3 avg. car 8 cyl.  15.1  353."
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#two-different-datasets",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#two-different-datasets",
    "title": "Introduction to ggplot",
    "section": "Two different datasets",
    "text": "Two different datasets\n\n\n\nggplot(\n  data = mtcars, \n  mapping = aes(x = disp, y = mpg)\n  ) +\n  geom_point(\n    mapping = aes(colour = factor(cyl))\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  geom_smooth(\n    method = MASS::rlm, \n    colour = 'Red', \n    se = FALSE\n    ) +\n  geom_point(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg), \n    colour = \"black\", \n    size = 3\n    ) +\n  geom_text(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg, label = cyl), \n    colour = \"black\", \n    vjust = 1.5\n    )\n\n\n\n\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\nNote data = df_mean in last geom_point() in the code."
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#two-different-datasets-cont.",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#two-different-datasets-cont.",
    "title": "Introduction to ggplot",
    "section": "Two different datasets cont.",
    "text": "Two different datasets cont.\n\n\n\np_common &lt;- ggplot(\n  data = mtcars, \n  mapping = aes(x = disp, y = mpg)\n  ) +\n  geom_point(\n    aes(colour = factor(cyl))\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  geom_smooth(\n    method = MASS::rlm, \n    colour = 'Red', \n    se = FALSE\n    ) +\n  geom_point(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg), \n    colour = \"black\", \n    size = 3\n    ) +\n  labs(colour = \"cyl\") +\n  theme(legend.position = \"bottom\")\n\n\n\n# update a ggplot object\n\n# add text labels by geom_text\np1 &lt;- p_common +  \n  geom_text(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg, label = cyl),\n    colour = \"black\", \n    vjust = 1.5, \n    hjust = 0.2\n    )\n# add text labels by geom_label\np2 &lt;-   p_common +  \n  geom_label(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg, label = cyl), \n    colour = \"black\", \n    vjust = 1.5, \n    hjust = 0.2, \n    alpha = 0.25\n    ) +\n  theme(legend.position = \"bottom\") +  \n  labs(colour = \"cyl\")"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#plot-two-ggplot-objects-p1-and-p2",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#plot-two-ggplot-objects-p1-and-p2",
    "title": "Introduction to ggplot",
    "section": "Plot two ggplot objects p1 and p2",
    "text": "Plot two ggplot objects p1 and p2\n\n# ggpubr makes it easy to place \n# two objects side by side\nggarrange(\n  p1, \n  p2, \n  ncol = 2, \n  nrow = 1, \n  labels = c(\n    \"geom_text()\",\n    \"geom_label()\"\n    )\n  )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#plot-two-ggplot-objects-p1-and-p2-cont.",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#plot-two-ggplot-objects-p1-and-p2-cont.",
    "title": "Introduction to ggplot",
    "section": "Plot two ggplot objects p1 and p2 cont.",
    "text": "Plot two ggplot objects p1 and p2 cont.\n\n\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#three-variables",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#three-variables",
    "title": "Introduction to ggplot",
    "section": "Three variables",
    "text": "Three variables\n\npseudo 3-d plot (not to usefull)\n2-d + aesthetics"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#three-variables-cont.",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#three-variables-cont.",
    "title": "Introduction to ggplot",
    "section": "Three variables cont.",
    "text": "Three variables cont.\n\n\n\ncp1 &lt;-   ggplot() +\n  geom_point(\n    data = mtcars, \n    mapping = aes(\n      x = hp, \n      y = wt,\n      colour = 1609.347/(2*qsec^2)\n      ),\n    size = 4) +\n  geom_text(\n    data = mtcars, \n    mapping = aes(x = hp, y = wt, label = rownames(mtcars)),\n    colour = \"black\", \n    size = 2, \n    hjust = 0.7, \n    vjust = 3\n    ) +\n  labs(\n    size = \"Average\\nacceleration\", \n    colour = \"Average\\nacceleration\"\n    ) +\n  geom_smooth(\n    data = mtcars, \n    mapping = aes(x = hp, y = wt), \n    method = \"lm\", \n    se = FALSE\n    ) +\n  theme_classic()\n#  scale_size_continuous(range = c(3, 12), \n#  breaks = seq(1, 5, by=0.25)) +\n\n\n\n\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#three-variables-cont.-1",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#three-variables-cont.-1",
    "title": "Introduction to ggplot",
    "section": "Three variables cont.",
    "text": "Three variables cont.\n\n\n\nbp1 &lt;- ggplot() +\n  geom_point(\n    data = mtcars, \n    mapping = aes(x = hp, y = wt, size = 1609.347/(2*qsec^2)), \n    colour = \"blue\", \n    alpha = 0.25\n    ) +\n  geom_text(\n    data = mtcars, \n    mapping = aes(x = hp, y = wt, label = rownames(mtcars)),\n    colour = \"black\", \n    size = 2, \n    hjust = 0.5, \n    vjust = 3\n    ) +\n  labs(size = \"Average\\nacceleration\") +\n  scale_size_continuous(\n    range = c(1, 10),\n    breaks = seq(1, 5, by = 0.25)\n    ) +\n  theme_classic()"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#another-strategy-facets",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#another-strategy-facets",
    "title": "Introduction to ggplot",
    "section": "Another strategy; facets",
    "text": "Another strategy; facets\n\n\n\nggplot(\n  data = mtcars, \n  mapping = aes(\n    x = hp, \n    y = 1609.347/(2*qsec^2)\n    )\n  ) +\n  facet_wrap(~cut_number(wt, n =3)) +\n  geom_point(\n    aes(colour = cut_number(\n      wt, \n      n = 3)\n      )\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    )\n\n\n\n\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#facets-whole-dataset-in-background",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#facets-whole-dataset-in-background",
    "title": "Introduction to ggplot",
    "section": "Facets, whole dataset in background",
    "text": "Facets, whole dataset in background\n\n#new dataframe to use for the grey points\nhp_acc &lt;- data.frame(\n  hp = mtcars$hp, \n  acc = 1609.347/(2*mtcars$qsec^2)\n  )\n\nggplot(\n  data = mtcars, \n  mapping = aes(x = hp, y = 1609.347/(2*qsec^2))\n  ) +\n  geom_point(\n    data = hp_acc, \n    mapping = aes(x = hp, y = acc), colour = \"grey80\"\n    ) +\n  facet_wrap(\n    ~cut_number(\n      wt, \n      n =3 , \n      labels = c(\"Light\", \"Medium\", \"Heavy\")\n      )\n    ) +\n  geom_point(\n    mapping = aes(colour = cut_number(\n      wt, \n      n = 3, \n      labels = c(\"Light\", \"Medium\", \"Heavy\")\n      )\n      ),\n    show.legend = FALSE\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  labs(\n    y = \"Mean acceleration (m/s^2)\", \n    colour = \"Weight\"\n    )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#facets-whole-dataset-in-background-1",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#facets-whole-dataset-in-background-1",
    "title": "Introduction to ggplot",
    "section": "Facets, whole dataset in background",
    "text": "Facets, whole dataset in background\n\n\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#two-facet-variables",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#two-facet-variables",
    "title": "Introduction to ggplot",
    "section": "Two facet variables",
    "text": "Two facet variables\n\nggplot(\n  data = mtcars, \n  mapping = aes(x = hp, y = 1609.347/(2*qsec^2))\n  ) +\n  geom_point(\n    data = hp_acc, \n    mapping = aes(x = hp, y = acc), \n    colour = \"grey80\"\n    ) +\n  facet_grid(\n    factor(cyl)~cut_number(\n      wt, \n      n =3 , \n      labels = c(\"Light\", \"Medium\", \"Heavy\"))\n    ) +\n  geom_point(\n    mapping = aes(\n      colour = cut_number(\n        wt, \n        n = 3, \n        labels = c(\"Light\", \"Medium\", \"Heavy\")\n        )\n      ),\n    show.legend = FALSE\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  labs(\n    y = \"Mean acceleration\", \n    colour = \"Weight\"\n    )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#two-facet-variables-1",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#two-facet-variables-1",
    "title": "Introduction to ggplot",
    "section": "Two facet variables",
    "text": "Two facet variables\n\n\n`geom_smooth()` using formula = 'y ~ x'"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#other-graphical-systems-in-r",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#other-graphical-systems-in-r",
    "title": "Introduction to ggplot",
    "section": "Other graphical systems in R",
    "text": "Other graphical systems in R\n\nClassic (plot())\nLattice package\nmany more"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#lattice",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#lattice",
    "title": "Introduction to ggplot",
    "section": "Lattice",
    "text": "Lattice\n\nlibrary(lattice)\nhistogram(\n  x = ~mpg | factor(cyl),  \n  type = \"density\", \n  data = mtcars\n  )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#classic",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#classic",
    "title": "Introduction to ggplot",
    "section": "Classic",
    "text": "Classic\n\n\n\n#save old par values\nold.par &lt;-   par(no.readonly = TRUE)\n#set par\nlayout(\n  matrix(\n    c(1,2,3), \n    nrow = 1, \n    ncol = 3, \n    byrow = TRUE\n    )\n  )\nwith(\n  subset(\n    mtcars, \n    cyl == 4), \n  hist(\n    mpg, \n    breaks = c(7, 12, 17, 22, 27, 32, 37), \n    freq = FALSE\n    )\n  )\nwith(\n  subset(mtcars, cyl == 6), \n  hist(\n    mpg, \n    breaks = c(7, 12, 18, 23, 27, 32, 37), \n    freq = FALSE\n    )\n  )\nwith(\n  subset(\n    mtcars, \n    cyl == 8\n    ), \n  hist(\n    mpg, \n    breaks = c(9, 14, 19, 24, 27, 32, 37), \n    freq = FALSE\n    )\n  )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#classic-cont.",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#classic-cont.",
    "title": "Introduction to ggplot",
    "section": "Classic cont.",
    "text": "Classic cont.\n\n# reset pat to old values\npar(old.par)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#one-variable",
    "href": "explore-data/intro-ggplot2/intro-ggplot2-doc.html#one-variable",
    "title": "Introduction to ggplot",
    "section": "One variable",
    "text": "One variable\n\nHistogram\nBoxplot\nDensity plot\nViolin plot\nand more"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#load-packages",
    "href": "explore-data/intro-ggplot2/index.html#load-packages",
    "title": "Introduction to ggplot",
    "section": "Load packages",
    "text": "Load packages\n\nWe start by loading some packages\n\n\n\n\nCode\nlibrary(ggplot2)\nlibrary(tinytex)\nlibrary(tidyverse)\nlibrary(ggpubr)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#empty-plot",
    "href": "explore-data/intro-ggplot2/index.html#empty-plot",
    "title": "Introduction to ggplot",
    "section": "Empty plot",
    "text": "Empty plot\n\n\nCode\nggplot(data = mtcars)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#data-and-mapping",
    "href": "explore-data/intro-ggplot2/index.html#data-and-mapping",
    "title": "Introduction to ggplot",
    "section": "Data and mapping",
    "text": "Data and mapping\n\n\nCode\nggplot(data = mtcars, mapping = aes(x = disp, y = mpg))"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#mapping-in-geom_point",
    "href": "explore-data/intro-ggplot2/index.html#mapping-in-geom_point",
    "title": "Introduction to ggplot",
    "section": "mapping in geom_point",
    "text": "mapping in geom_point\n\n\nCode\ngg1 &lt;-   ggplot(data = mtcars, mapping = aes(x = disp, y = mpg)) +\n  geom_point()\n\ngg2 &lt;-   ggplot(data = mtcars) +\n  geom_point(mapping = aes(x = disp, y = mpg))\n\nggarrange(gg1, gg2, labels = c(\"mapping = aes in ggplot\", \"mapping = aes in geom_*\"),\n          nrow = 1)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#ggplotdata-mapping-and-geom_pointmapping-data",
    "href": "explore-data/intro-ggplot2/index.html#ggplotdata-mapping-and-geom_pointmapping-data",
    "title": "Introduction to ggplot",
    "section": "ggplot(data, mapping, …) and geom_point(mapping, data, …)",
    "text": "ggplot(data, mapping, …) and geom_point(mapping, data, …)\n\n\nCode\nggplot() +\n  #geom_point has mapping as first argument. We have to use named arguments\n  #or switch their order\n  geom_point(data = mtcars, mapping = aes(x = disp, y = mpg))"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#what-happens-if-we-use-both",
    "href": "explore-data/intro-ggplot2/index.html#what-happens-if-we-use-both",
    "title": "Introduction to ggplot",
    "section": "What happens if we use both?",
    "text": "What happens if we use both?\n\n\nCode\n## combine aes\ngg3 &lt;-   ggplot(data = mtcars, mapping = aes(x = disp, colour = factor(cyl))) +\n##  geom_point(data = mtcars, mapping = aes(y = mpg), col = 'blue')\n  geom_point(data = mtcars, mapping = aes(y = mpg))\n#inherit.aes    = FALSE, overrides the default aesthetics, rather than combining with them.\ngg4 &lt;-   ggplot(data =  mtcars, mapping = aes(x = disp, colour = factor(cyl))) +\n##  geom_point(data = mtcars, mapping = aes(y = mpg), col = 'blue')\n  geom_point(data = mtcars, mapping = aes(x = qsec, y = mpg), show.legend = TRUE, inherit.aes = FALSE)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#playing-with-aes",
    "href": "explore-data/intro-ggplot2/index.html#playing-with-aes",
    "title": "Introduction to ggplot",
    "section": "Playing with aes()",
    "text": "Playing with aes()\n\n\nCode\nggplot() +\n  geom_point(data = mtcars, mapping = aes(x = disp, y = mpg, colour = factor(cyl), size = qsec))"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#playing-with-aes-1",
    "href": "explore-data/intro-ggplot2/index.html#playing-with-aes-1",
    "title": "Introduction to ggplot",
    "section": "Playing with aes()",
    "text": "Playing with aes()\n\n\nCode\nggplot() +\n  geom_point(data = mtcars,\n             mapping = aes(x = disp, y = mpg, colour = factor(cyl), alpha = 3.6*(0.25*1609.347)/qsec,\n                           shape = factor(ifelse(am, \"Man\", \"Aut\"))), size=4) +\n  labs(colour = \"cyl\", alpha = \"speed\\n(km/h)\", shape = \"trans-\\nmission\")"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#exercise",
    "href": "explore-data/intro-ggplot2/index.html#exercise",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nExamine if one of the available aesthetics might do a better job at showing differences in speed."
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#exercise-1",
    "href": "explore-data/intro-ggplot2/index.html#exercise-1",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nHow do you think the plot below is made?"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#adding-a-geom_smooth-layer",
    "href": "explore-data/intro-ggplot2/index.html#adding-a-geom_smooth-layer",
    "title": "Introduction to ggplot",
    "section": "Adding a geom_smooth() layer",
    "text": "Adding a geom_smooth() layer\n\n\n\n\nCode\nggplot() +\n  geom_point(\n    data = mtcars,\n    mapping = aes(\n      x = disp,\n      y = mpg, \n      colour = factor(cyl), \n      size = 3.6*(0.25*1609.347)/qsec, \n      shape = factor(\n        # Note codeing am\n        # 0 automatic, 1 manual\n        ifelse(\n          am, \n          \"Aut\", \n          \"Man\"\n          )\n        )\n      )\n    ) +\n  labs(\n    colour = \"cyl\", \n    size = \"speed\\n(km/h)\", \n    shape = \"trans-\\nmission\"\n    ) +\n  geom_smooth(\n    data = mtcars, \n    mapping = aes(x = disp, y = mpg)\n    )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#exercise-2",
    "href": "explore-data/intro-ggplot2/index.html#exercise-2",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nWhich parameter control the smoothness? Plot again with “half the smoothness”."
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#exercise-3",
    "href": "explore-data/intro-ggplot2/index.html#exercise-3",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nChange the confidence interval from 95% to 99%. Will it become narrower or broader? Then draw both the 95% and 99% confidence interval. How can we distinguish them?"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#linear-model-lm",
    "href": "explore-data/intro-ggplot2/index.html#linear-model-lm",
    "title": "Introduction to ggplot",
    "section": "Linear model, lm",
    "text": "Linear model, lm\nPractice exercise: How can we get ggplot2 to draw the regression line? (hint! see help for geom_smooth()). Generate the new plot (concentrate on the plain points and the regression line)."
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#linear-model-rlm",
    "href": "explore-data/intro-ggplot2/index.html#linear-model-rlm",
    "title": "Introduction to ggplot",
    "section": "Linear model, rlm",
    "text": "Linear model, rlm\n\n\n\n\nCode\nggplot(\n  data = mtcars, \n  mapping = aes(\n    x = disp, \n    y = mpg\n    )\n  ) +\n  geom_point() +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  # robust lm\n  geom_smooth(\n    method = MASS::rlm, \n    colour = 'Red', \n    se = FALSE\n    )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#other-data-in-the-plot",
    "href": "explore-data/intro-ggplot2/index.html#other-data-in-the-plot",
    "title": "Introduction to ggplot",
    "section": "Other data in the plot",
    "text": "Other data in the plot\n\n\nCode\n## create tibble from scratch\ndf_mean &lt;-   tibble(\n  cyl = c(\"avg. car 4 cyl.\", \"avg. car 6 cyl.\", \"avg. car 8 cyl.\"), \n  mpg = c(22.66, 17.74, 15.10), \n  disp = c(105.14, 183.31, 353.10)\n  )\n\n\n\n\nCode\ndf_mean\n\n\n# A tibble: 3 × 3\n  cyl               mpg  disp\n  &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;\n1 avg. car 4 cyl.  22.7  105.\n2 avg. car 6 cyl.  17.7  183.\n3 avg. car 8 cyl.  15.1  353."
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#exercise-4",
    "href": "explore-data/intro-ggplot2/index.html#exercise-4",
    "title": "Introduction to ggplot",
    "section": "Exercise:",
    "text": "Exercise:\nThe first column involved some typing. How can we reduce the required typing? (hint! see paste() and seq())\n\n\nCode\ndf_mean\n\n\n# A tibble: 3 × 3\n  cyl               mpg  disp\n  &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt;\n1 avg. car 4 cyl.  22.7  105.\n2 avg. car 6 cyl.  17.7  183.\n3 avg. car 8 cyl.  15.1  353."
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#two-different-datasets",
    "href": "explore-data/intro-ggplot2/index.html#two-different-datasets",
    "title": "Introduction to ggplot",
    "section": "Two different datasets",
    "text": "Two different datasets\n\n\n\n\nCode\nggplot(\n  data = mtcars, \n  mapping = aes(x = disp, y = mpg)\n  ) +\n  geom_point(\n    mapping = aes(colour = factor(cyl))\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  geom_smooth(\n    method = MASS::rlm, \n    colour = 'Red', \n    se = FALSE\n    ) +\n  geom_point(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg), \n    colour = \"black\", \n    size = 3\n    ) +\n  geom_text(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg, label = cyl), \n    colour = \"black\", \n    vjust = 1.5\n    )\n\n\n\n\n\n\n\n\n\nNote data = df_mean in last geom_point() in the code."
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#two-different-datasets-cont.",
    "href": "explore-data/intro-ggplot2/index.html#two-different-datasets-cont.",
    "title": "Introduction to ggplot",
    "section": "Two different datasets cont.",
    "text": "Two different datasets cont.\n\n\n\n\nCode\np_common &lt;- ggplot(\n  data = mtcars, \n  mapping = aes(x = disp, y = mpg)\n  ) +\n  geom_point(\n    aes(colour = factor(cyl))\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  geom_smooth(\n    method = MASS::rlm, \n    colour = 'Red', \n    se = FALSE\n    ) +\n  geom_point(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg), \n    colour = \"black\", \n    size = 3\n    ) +\n  labs(colour = \"cyl\") +\n  theme(legend.position = \"bottom\")\n\n\n\n\n\nCode\n# update a ggplot object\n\n# add text labels by geom_text\np1 &lt;- p_common +  \n  geom_text(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg, label = cyl),\n    colour = \"black\", \n    vjust = 1.5, \n    hjust = 0.2\n    )\n# add text labels by geom_label\np2 &lt;-   p_common +  \n  geom_label(\n    data = df_mean, \n    mapping = aes(x = disp, y = mpg, label = cyl), \n    colour = \"black\", \n    vjust = 1.5, \n    hjust = 0.2, \n    alpha = 0.25\n    ) +\n  theme(legend.position = \"bottom\") +  \n  labs(colour = \"cyl\")"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#plot-two-ggplot-objects-p1-and-p2",
    "href": "explore-data/intro-ggplot2/index.html#plot-two-ggplot-objects-p1-and-p2",
    "title": "Introduction to ggplot",
    "section": "Plot two ggplot objects p1 and p2",
    "text": "Plot two ggplot objects p1 and p2\n\n\nCode\n# ggpubr makes it easy to place \n# two objects side by side\nggarrange(\n  p1, \n  p2, \n  ncol = 2, \n  nrow = 1, \n  labels = c(\n    \"geom_text()\",\n    \"geom_label()\"\n    )\n  )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#plot-two-ggplot-objects-p1-and-p2-cont.",
    "href": "explore-data/intro-ggplot2/index.html#plot-two-ggplot-objects-p1-and-p2-cont.",
    "title": "Introduction to ggplot",
    "section": "Plot two ggplot objects p1 and p2 cont.",
    "text": "Plot two ggplot objects p1 and p2 cont."
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#three-variables",
    "href": "explore-data/intro-ggplot2/index.html#three-variables",
    "title": "Introduction to ggplot",
    "section": "Three variables",
    "text": "Three variables\n\npseudo 3-d plot (not to usefull)\n2-d + aesthetics"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#three-variables-cont.",
    "href": "explore-data/intro-ggplot2/index.html#three-variables-cont.",
    "title": "Introduction to ggplot",
    "section": "Three variables cont.",
    "text": "Three variables cont.\n\n\n\n\nCode\ncp1 &lt;-   ggplot() +\n  geom_point(\n    data = mtcars, \n    mapping = aes(\n      x = hp, \n      y = wt,\n      colour = 1609.347/(2*qsec^2)\n      ),\n    size = 4) +\n  geom_text(\n    data = mtcars, \n    mapping = aes(x = hp, y = wt, label = rownames(mtcars)),\n    colour = \"black\", \n    size = 2, \n    hjust = 0.7, \n    vjust = 3\n    ) +\n  labs(\n    size = \"Average\\nacceleration\", \n    colour = \"Average\\nacceleration\"\n    ) +\n  geom_smooth(\n    data = mtcars, \n    mapping = aes(x = hp, y = wt), \n    method = \"lm\", \n    se = FALSE\n    ) +\n  theme_classic()\n#  scale_size_continuous(range = c(3, 12), \n#  breaks = seq(1, 5, by=0.25)) +"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#three-variables-cont.-1",
    "href": "explore-data/intro-ggplot2/index.html#three-variables-cont.-1",
    "title": "Introduction to ggplot",
    "section": "Three variables cont.",
    "text": "Three variables cont.\n\n\n\n\nCode\nbp1 &lt;- ggplot() +\n  geom_point(\n    data = mtcars, \n    mapping = aes(x = hp, y = wt, size = 1609.347/(2*qsec^2)), \n    colour = \"blue\", \n    alpha = 0.25\n    ) +\n  geom_text(\n    data = mtcars, \n    mapping = aes(x = hp, y = wt, label = rownames(mtcars)),\n    colour = \"black\", \n    size = 2, \n    hjust = 0.5, \n    vjust = 3\n    ) +\n  labs(size = \"Average\\nacceleration\") +\n  scale_size_continuous(\n    range = c(1, 10),\n    breaks = seq(1, 5, by = 0.25)\n    ) +\n  theme_classic()"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#another-strategy-facets",
    "href": "explore-data/intro-ggplot2/index.html#another-strategy-facets",
    "title": "Introduction to ggplot",
    "section": "Another strategy; facets",
    "text": "Another strategy; facets\n\n\n\n\nCode\nggplot(\n  data = mtcars, \n  mapping = aes(\n    x = hp, \n    y = 1609.347/(2*qsec^2)\n    )\n  ) +\n  facet_wrap(~cut_number(wt, n =3)) +\n  geom_point(\n    aes(colour = cut_number(\n      wt, \n      n = 3)\n      )\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#facets-whole-dataset-in-background",
    "href": "explore-data/intro-ggplot2/index.html#facets-whole-dataset-in-background",
    "title": "Introduction to ggplot",
    "section": "Facets, whole dataset in background",
    "text": "Facets, whole dataset in background\n\n\nCode\n#new dataframe to use for the grey points\nhp_acc &lt;- data.frame(\n  hp = mtcars$hp, \n  acc = 1609.347/(2*mtcars$qsec^2)\n  )\n\nggplot(\n  data = mtcars, \n  mapping = aes(x = hp, y = 1609.347/(2*qsec^2))\n  ) +\n  geom_point(\n    data = hp_acc, \n    mapping = aes(x = hp, y = acc), colour = \"grey80\"\n    ) +\n  facet_wrap(\n    ~cut_number(\n      wt, \n      n =3 , \n      labels = c(\"Light\", \"Medium\", \"Heavy\")\n      )\n    ) +\n  geom_point(\n    mapping = aes(colour = cut_number(\n      wt, \n      n = 3, \n      labels = c(\"Light\", \"Medium\", \"Heavy\")\n      )\n      ),\n    show.legend = FALSE\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  labs(\n    y = \"Mean acceleration (m/s^2)\", \n    colour = \"Weight\"\n    )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#facets-whole-dataset-in-background-1",
    "href": "explore-data/intro-ggplot2/index.html#facets-whole-dataset-in-background-1",
    "title": "Introduction to ggplot",
    "section": "Facets, whole dataset in background",
    "text": "Facets, whole dataset in background"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#two-facet-variables",
    "href": "explore-data/intro-ggplot2/index.html#two-facet-variables",
    "title": "Introduction to ggplot",
    "section": "Two facet variables",
    "text": "Two facet variables\n\n\nCode\nggplot(\n  data = mtcars, \n  mapping = aes(x = hp, y = 1609.347/(2*qsec^2))\n  ) +\n  geom_point(\n    data = hp_acc, \n    mapping = aes(x = hp, y = acc), \n    colour = \"grey80\"\n    ) +\n  facet_grid(\n    factor(cyl)~cut_number(\n      wt, \n      n =3 , \n      labels = c(\"Light\", \"Medium\", \"Heavy\"))\n    ) +\n  geom_point(\n    mapping = aes(\n      colour = cut_number(\n        wt, \n        n = 3, \n        labels = c(\"Light\", \"Medium\", \"Heavy\")\n        )\n      ),\n    show.legend = FALSE\n    ) +\n  geom_smooth(\n    method = \"lm\", \n    se = FALSE\n    ) +\n  labs(\n    y = \"Mean acceleration\", \n    colour = \"Weight\"\n    )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#two-facet-variables-1",
    "href": "explore-data/intro-ggplot2/index.html#two-facet-variables-1",
    "title": "Introduction to ggplot",
    "section": "Two facet variables",
    "text": "Two facet variables"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#other-graphical-systems-in-r",
    "href": "explore-data/intro-ggplot2/index.html#other-graphical-systems-in-r",
    "title": "Introduction to ggplot",
    "section": "Other graphical systems in R",
    "text": "Other graphical systems in R\n\nClassic (plot())\nLattice package\nmany more"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#lattice",
    "href": "explore-data/intro-ggplot2/index.html#lattice",
    "title": "Introduction to ggplot",
    "section": "Lattice",
    "text": "Lattice\n\n\nCode\nlibrary(lattice)\nhistogram(\n  x = ~mpg | factor(cyl),  \n  type = \"density\", \n  data = mtcars\n  )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#classic",
    "href": "explore-data/intro-ggplot2/index.html#classic",
    "title": "Introduction to ggplot",
    "section": "Classic",
    "text": "Classic\n\n\n\n\nCode\n#save old par values\nold.par &lt;-   par(no.readonly = TRUE)\n#set par\nlayout(\n  matrix(\n    c(1,2,3), \n    nrow = 1, \n    ncol = 3, \n    byrow = TRUE\n    )\n  )\nwith(\n  subset(\n    mtcars, \n    cyl == 4), \n  hist(\n    mpg, \n    breaks = c(7, 12, 17, 22, 27, 32, 37), \n    freq = FALSE\n    )\n  )\nwith(\n  subset(mtcars, cyl == 6), \n  hist(\n    mpg, \n    breaks = c(7, 12, 18, 23, 27, 32, 37), \n    freq = FALSE\n    )\n  )\nwith(\n  subset(\n    mtcars, \n    cyl == 8\n    ), \n  hist(\n    mpg, \n    breaks = c(9, 14, 19, 24, 27, 32, 37), \n    freq = FALSE\n    )\n  )"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#classic-cont.",
    "href": "explore-data/intro-ggplot2/index.html#classic-cont.",
    "title": "Introduction to ggplot",
    "section": "Classic cont.",
    "text": "Classic cont.\n\n\nCode\n# reset pat to old values\npar(old.par)"
  },
  {
    "objectID": "explore-data/intro-ggplot2/index.html#one-variable",
    "href": "explore-data/intro-ggplot2/index.html#one-variable",
    "title": "Introduction to ggplot",
    "section": "One variable",
    "text": "One variable\n\nHistogram\nBoxplot\nDensity plot\nViolin plot\nand more\n\n\n\nMSB105"
  },
  {
    "objectID": "explore-data/branch-merge/branch-merge.html#branching-and-merging",
    "href": "explore-data/branch-merge/branch-merge.html#branching-and-merging",
    "title": "Branching and Merging",
    "section": "Branching and Merging",
    "text": "Branching and Merging\n\n\nMSB105"
  },
  {
    "objectID": "explore-data/explore-data.html",
    "href": "explore-data/explore-data.html",
    "title": "Explore Data",
    "section": "",
    "text": "In this section we will learn to explore our data. We will learn how to use the R package ggplot2 to plot our data, how to reorder data with a few powerful verbs from tidyverse and some general advices for how to explore our data. It’s all about getting to know our data.\nWe will also set up the workflow we are going to use. All our work will be done in a Quarto document in an RStudio project, version controlled by git and connected to Github.\nWe will for the most part follow R for Data Science."
  },
  {
    "objectID": "explore-data/explore-data.html#presentations",
    "href": "explore-data/explore-data.html#presentations",
    "title": "Explore Data",
    "section": "Presentations",
    "text": "Presentations\n\nOur Workflow (chap. 4, 6 and 8 r4ds)\nImport and Export Data\nUsing Graphics to Explore Data (chap. 3 r4ds)\n\nUsing Graphics to Explore Data (chap. 3 r4ds) as document\n\nTransforming Data (chap. 5 r4ds) Essential chapter\nGit/Github Braching and Merging repetition from Introduction\nExploratory Data Analysis (chap. 7 r4ds)\n\nExploratory Data Analysis (chap. 7 r4ds) as Document"
  },
  {
    "objectID": "explore-data/explore-data.html#other-resources",
    "href": "explore-data/explore-data.html#other-resources",
    "title": "Explore Data",
    "section": "Other Resources",
    "text": "Other Resources\n\nggplot2 and Grapchics:\n\nGraphics for communication; chap. 28 inr4ds by Hadley Wickham and Garret Grolemund\nGgplot2 Tutorial for Beautiful Plotting in R by Cédric Scherer\nData Visualization; A practical introduction by Kieran Healy\nFundamentals of Data Visualization by Claus O. Wilke\nData Visualization with R by Rob Kabacoff\nggplot2: elegant graphics for data analysis by Hadley Wickham, Danielle Navarro and Thomas Lin Pedersen\n\ngit and Github:\n\nHappy Git and GitHub for the useR by Jennifer Bryan\n\nEDA in R:\n\nExploratory Data Analysis in R for beginners (Part 1) by Joe Tran\nExploratory Data Analysis in R for beginners (Part 2) by Joe Tran\nData Analysis in R; chap. 4 by Steve Midway\nExploratory Data Analysis in R by Andrew Bray"
  },
  {
    "objectID": "explore-data/wf/wf.html#introduction-workflow",
    "href": "explore-data/wf/wf.html#introduction-workflow",
    "title": "Our Workflow",
    "section": "Introduction Workflow",
    "text": "Introduction Workflow\n\nWe allways start by defining a new repository at Github\n\nRemember to choose an R .gitignore\n.gitignore specifies the files in our project that Git should ignore\n\nThen we create a new project in RStudio with git version control\nThen we do a Pull from Github\n\nThis will copy the files automatically generated at Github down to our local project\nEdit the .gitignore file\n\nThen we create a new Quarto Document from File &gt; New File menu in RStudio\n\nJust save the template into your project\nDo a Commit, Pull, Push\n\nRemeber to write an informative commit message (be kind to others and a future self)"
  },
  {
    "objectID": "explore-data/wf/wf.html#introduction-workflow-1",
    "href": "explore-data/wf/wf.html#introduction-workflow-1",
    "title": "Our Workflow",
    "section": "Introduction Workflow",
    "text": "Introduction Workflow\n\nStart editing your Quarto Document\n\nSave when you have done some work\nDo a Commit, Pull, Push"
  },
  {
    "objectID": "explore-data/wf/wf.html#creating-a-new-repository-on-github",
    "href": "explore-data/wf/wf.html#creating-a-new-repository-on-github",
    "title": "Our Workflow",
    "section": "Creating a New Repository on Github",
    "text": "Creating a New Repository on Github\n\nCreate new repository at github."
  },
  {
    "objectID": "explore-data/wf/wf.html#give-repo-a-name",
    "href": "explore-data/wf/wf.html#give-repo-a-name",
    "title": "Our Workflow",
    "section": "Give repo a name",
    "text": "Give repo a name\n\nGive the repo a name"
  },
  {
    "objectID": "explore-data/wf/wf.html#configure-repo",
    "href": "explore-data/wf/wf.html#configure-repo",
    "title": "Our Workflow",
    "section": "Configure repo",
    "text": "Configure repo\n\nConfigure repo"
  },
  {
    "objectID": "explore-data/wf/wf.html#select-r-.gitignore",
    "href": "explore-data/wf/wf.html#select-r-.gitignore",
    "title": "Our Workflow",
    "section": "Select R .gitignore",
    "text": "Select R .gitignore\n\nSelect R .gitignore"
  },
  {
    "objectID": "explore-data/wf/wf.html#create-repo",
    "href": "explore-data/wf/wf.html#create-repo",
    "title": "Our Workflow",
    "section": "Create repo",
    "text": "Create repo\n\nCeate repo"
  },
  {
    "objectID": "explore-data/wf/wf.html#copy-repo-address",
    "href": "explore-data/wf/wf.html#copy-repo-address",
    "title": "Our Workflow",
    "section": "Copy repo address",
    "text": "Copy repo address\n\nCopy repo address"
  },
  {
    "objectID": "explore-data/wf/wf.html#rstudio-new-project-from-file-menu",
    "href": "explore-data/wf/wf.html#rstudio-new-project-from-file-menu",
    "title": "Our Workflow",
    "section": "RStudio New Project… from File menu",
    "text": "RStudio New Project… from File menu\n\nSelect new project from File menu"
  },
  {
    "objectID": "explore-data/wf/wf.html#choose-version-control",
    "href": "explore-data/wf/wf.html#choose-version-control",
    "title": "Our Workflow",
    "section": "Choose Version Control",
    "text": "Choose Version Control\n\nNew Project with Version Control"
  },
  {
    "objectID": "explore-data/wf/wf.html#choose-git-version-control",
    "href": "explore-data/wf/wf.html#choose-git-version-control",
    "title": "Our Workflow",
    "section": "Choose Git Version Control",
    "text": "Choose Git Version Control\n\nSelect Git for version Control"
  },
  {
    "objectID": "explore-data/wf/wf.html#paste-in-repo-address",
    "href": "explore-data/wf/wf.html#paste-in-repo-address",
    "title": "Our Workflow",
    "section": "Paste in Repo Address",
    "text": "Paste in Repo Address\n\nPaste Repo Address"
  },
  {
    "objectID": "explore-data/wf/wf.html#edit-.gitignore",
    "href": "explore-data/wf/wf.html#edit-.gitignore",
    "title": "Our Workflow",
    "section": "Edit .gitignore",
    "text": "Edit .gitignore\n\nEdit the .gitignore File"
  },
  {
    "objectID": "explore-data/wf/wf.html#rstudio-new-quarto-document",
    "href": "explore-data/wf/wf.html#rstudio-new-quarto-document",
    "title": "Our Workflow",
    "section": "RStudio New Quarto Document",
    "text": "RStudio New Quarto Document\n\nSelect File &gt; New File &gt; Quarto Document…"
  },
  {
    "objectID": "explore-data/wf/wf.html#rstudio-name-new-quarto-document",
    "href": "explore-data/wf/wf.html#rstudio-name-new-quarto-document",
    "title": "Our Workflow",
    "section": "RStudio Name new Quarto Document",
    "text": "RStudio Name new Quarto Document\n\nGive Title of Quarto Document"
  },
  {
    "objectID": "explore-data/wf/wf.html#save-new-quarto-document",
    "href": "explore-data/wf/wf.html#save-new-quarto-document",
    "title": "Our Workflow",
    "section": "Save New Quarto document",
    "text": "Save New Quarto document\n\n\n\nSave New Quarto Document. You might add some text yourself before saving.\n\n\nRStudio Name File\n\n\n\nGive Document File a name"
  },
  {
    "objectID": "explore-data/wf/wf.html#select-git-tab",
    "href": "explore-data/wf/wf.html#select-git-tab",
    "title": "Our Workflow",
    "section": "Select Git Tab",
    "text": "Select Git Tab\n\nFiles Changed since we Created Project"
  },
  {
    "objectID": "explore-data/wf/wf.html#press-commit-button",
    "href": "explore-data/wf/wf.html#press-commit-button",
    "title": "Our Workflow",
    "section": "Press Commit Button",
    "text": "Press Commit Button\n\nPress Commit Button"
  },
  {
    "objectID": "explore-data/wf/wf.html#commit",
    "href": "explore-data/wf/wf.html#commit",
    "title": "Our Workflow",
    "section": "Commit",
    "text": "Commit\n\nStage Files, write commit message and Press Commit Button"
  },
  {
    "objectID": "explore-data/wf/wf.html#commit-results",
    "href": "explore-data/wf/wf.html#commit-results",
    "title": "Our Workflow",
    "section": "Commit Results",
    "text": "Commit Results\n\nCommit Results. Click Close Button."
  },
  {
    "objectID": "explore-data/wf/wf.html#click-pull-button",
    "href": "explore-data/wf/wf.html#click-pull-button",
    "title": "Our Workflow",
    "section": "Click Pull Button",
    "text": "Click Pull Button\n\nPull Down from Github. We know that there have been no changes, but Commit, Pull, Push is a nice habit."
  },
  {
    "objectID": "explore-data/wf/wf.html#click-push-button",
    "href": "explore-data/wf/wf.html#click-push-button",
    "title": "Our Workflow",
    "section": "Click Push Button",
    "text": "Click Push Button\n\nResult of Push. Two files Pushed to Github without any problems."
  },
  {
    "objectID": "explore-data/wf/wf.html#updated-repo-on-github",
    "href": "explore-data/wf/wf.html#updated-repo-on-github",
    "title": "Our Workflow",
    "section": "Updated Repo on Github",
    "text": "Updated Repo on Github\n\nThe new File at Github."
  },
  {
    "objectID": "explore-data/wf/wf.html#rstudio-file-save-all",
    "href": "explore-data/wf/wf.html#rstudio-file-save-all",
    "title": "Our Workflow",
    "section": "RStudio File > Save All",
    "text": "RStudio File &gt; Save All\n\nSave All Changes in Project."
  },
  {
    "objectID": "explore-data/wf/wf.html#rstudio-close-project",
    "href": "explore-data/wf/wf.html#rstudio-close-project",
    "title": "Our Workflow",
    "section": "RStudio Close Project",
    "text": "RStudio Close Project\n\nClose your Project."
  },
  {
    "objectID": "explore-data/wf/wf.html#work-flow-projects-chap.-8-r4ds",
    "href": "explore-data/wf/wf.html#work-flow-projects-chap.-8-r4ds",
    "title": "Our Workflow",
    "section": "Work flow Projects chap. 8 r4ds",
    "text": "Work flow Projects chap. 8 r4ds"
  },
  {
    "objectID": "explore-data/wf/wf.html#workflow-projects-chap.-8",
    "href": "explore-data/wf/wf.html#workflow-projects-chap.-8",
    "title": "Our Workflow",
    "section": "Workflow: projects (chap. 8)",
    "text": "Workflow: projects (chap. 8)\n\nNot to much new, but some points\nRemember un-check these options\n\n\nDo not restore .Rdata and never Save .Rdate. We’ll create our R objects by code."
  },
  {
    "objectID": "explore-data/wf/wf.html#workflow-projects-chap.-8-1",
    "href": "explore-data/wf/wf.html#workflow-projects-chap.-8-1",
    "title": "Our Workflow",
    "section": "Workflow: projects (chap. 8)",
    "text": "Workflow: projects (chap. 8)\n\nNice short-cuts to restart R\nPress Cmd/Ctrl + Shift + F10 to restart RStudio.\nPress Cmd/Ctrl + Shift + S to rerun the current script.\nRemember that ‘working directory’ for us is the directory where our .qmd file is located. Everything is relative to current Quarto Document.\nYou should never have to set you working directory."
  },
  {
    "objectID": "explore-data/wf/wf.html#workflow-projects-chap.-8-2",
    "href": "explore-data/wf/wf.html#workflow-projects-chap.-8-2",
    "title": "Our Workflow",
    "section": "Workflow: projects (chap. 8)",
    "text": "Workflow: projects (chap. 8)\n\nWorking directory for Project.\n\n\n\n\n\nWorking Directory for Project is top Directory where the .Rproj file is located.\n\n\n\nWorking directory for current Quarto Document is the directory where the Quarto Document is situated.\n\n\n\n\n\nCode\ngetwd()\n\n\n[1] \"/Users/ag/Dev/QQ_MSB105/explore-data/wf\"\n\n\n\nIn the sub-dir wf of the sub-dir explore-data in the project folder"
  },
  {
    "objectID": "explore-data/wf/wf.html#relative-paths",
    "href": "explore-data/wf/wf.html#relative-paths",
    "title": "Our Workflow",
    "section": "Relative Paths",
    "text": "Relative Paths\n\n“..” is one directory up in unix parlour.\n“.” is current directory\nIf I want to read the first 7 lines of a file intro.qmd in a sub-dir intro in a directory called introduction at the to level of my project I could do:\n\n\n\n\nCode\n# relative part\nmy_file &lt;- \"./../../introduction/intro/intro.qmd\"\nmy_text &lt;- readLines(con = file(my_file, encoding = \"UTF-8\"), n = 7)\n#close(con)\n\n\n\n\nCode\ncat(my_text, sep = \"\\n\")\n\n\n---\ntitle: Introduksjon Data Science\nformat:\n  revealjs:\n        theme: simple\n        footer: '[MSB105](/index.html)'\n        reveal_options:"
  },
  {
    "objectID": "explore-data/wf/wf.html#relative-paths-cont.",
    "href": "explore-data/wf/wf.html#relative-paths-cont.",
    "title": "Our Workflow",
    "section": "Relative Paths cont.",
    "text": "Relative Paths cont.\n\nRelative paths work best for stuff located below the current document.\nEx. sample1.csv in Data directory in current directory.\nWe can access with “./Data/sample1.csv”.\n\n“./” not really needed\n\nWe can move current directory, with sub-directories, to a new location and everything will still work."
  },
  {
    "objectID": "explore-data/wf/wf.html#absolute-path",
    "href": "explore-data/wf/wf.html#absolute-path",
    "title": "Our Workflow",
    "section": "Absolute Path",
    "text": "Absolute Path\n\nDo not use absolute paths in code you will share\n\nYou should also try to avoid it in code you don’t intend to share\nRemember: “Be kind to future self”\n\nRead from file with absolute path (this time only 4 lines read):\n\n\n\n\nCode\n# Absolute path\n# Works just on one machine, hence eval: false\nmy_file &lt;- \"/Users/agwd/Dev/QQ_MSB105/introduction/intro/intro.qmd\"\nmy_text &lt;- readLines(con = file(my_file, encoding = \"UTF-8\"), n = 4)\n#close(con)\n\n\n\n\nCode\ncat(my_text, sep = \"\\n\")\n\n\n\n\nMSB105"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "MSB105",
    "section": "",
    "text": "Dette er websidene til kurset MSB105 Data Science ved HVL."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  },
  {
    "objectID": "model/model.html",
    "href": "model/model.html",
    "title": "Model",
    "section": "",
    "text": "Model Introduction (r4ds chap. 22)\nModel basics (r4ds chap. 23)\nModel building (r4ds chap. 24)\nMany models (r4ds chap. 25)"
  },
  {
    "objectID": "model/model.html#presentations",
    "href": "model/model.html#presentations",
    "title": "Model",
    "section": "",
    "text": "Model Introduction (r4ds chap. 22)\nModel basics (r4ds chap. 23)\nModel building (r4ds chap. 24)\nMany models (r4ds chap. 25)"
  },
  {
    "objectID": "model/model-basics/model-basics.html#introduction",
    "href": "model/model-basics/model-basics.html#introduction",
    "title": "Model basics",
    "section": "Introduction",
    "text": "Introduction\n\nr4ds has somewhat different perspective than econometrics\n\nmore concerned with making predictions\neconometrics more concerned with testing a theoretical model on data\nchp. 23 contains a lot of code meant to build intuition around linear models\nwe will skip most of it\n\nCalculate the estimated coefficients with some matrix algebra instead"
  },
  {
    "objectID": "model/model-basics/model-basics.html#linear-model",
    "href": "model/model-basics/model-basics.html#linear-model",
    "title": "Model basics",
    "section": "Linear model",
    "text": "Linear model\n\nThe model is specified with a formula notation\n\ny ~ x represents the model\n\\[y = a_1 + a_2 · x\\]\nFit the model on some simulated data from modelr package, sim1\n\n\n\n\n\nCode\ns1_mod &lt;- lm(y ~ x, data = sim1)\n# Pick out the coefficients\ncoef(s1_mod)\n\n\n(Intercept)           x \n   4.220822    2.051533"
  },
  {
    "objectID": "model/model-basics/model-basics.html#predictions",
    "href": "model/model-basics/model-basics.html#predictions",
    "title": "Model basics",
    "section": "Predictions",
    "text": "Predictions\n\n\nCode\ng1 &lt;- sim1 %&gt;% \nggplot(mapping = aes(x = x, y = y)) + \n  geom_point() +\n  geom_smooth(formula = \"y ~ x\", method = \"lm\", se = FALSE)\ng1"
  },
  {
    "objectID": "model/model-basics/model-basics.html#predictions-1",
    "href": "model/model-basics/model-basics.html#predictions-1",
    "title": "Model basics",
    "section": "Predictions",
    "text": "Predictions"
  },
  {
    "objectID": "model/model-basics/model-basics.html#adding-predictions-to-sim1",
    "href": "model/model-basics/model-basics.html#adding-predictions-to-sim1",
    "title": "Model basics",
    "section": "Adding predictions to sim1",
    "text": "Adding predictions to sim1\n\nEstimated linear model \\[y = 4.2208 + 2.0515 · x\\]\nWhat values of y does our model predict for our x values?"
  },
  {
    "objectID": "model/model-basics/model-basics.html#adding-predictions-to-sim1-1",
    "href": "model/model-basics/model-basics.html#adding-predictions-to-sim1-1",
    "title": "Model basics",
    "section": "Adding predictions to sim1",
    "text": "Adding predictions to sim1\n\nEstimated linear model \\[y = 4.2208 + 2.0515 · x\\]\nWhat values of y does our model predict for our x values?\n\n\n\n\nCode\nsim1a &lt;- sim1 %&gt;% \n  add_predictions(model = s1_mod)\n\ng1 + geom_point(data = sim1a, mapping = aes(x = x, y = pred), colour = \"red\", size = 3)"
  },
  {
    "objectID": "model/model-basics/model-basics.html#adding-predictions-to-sim1-2",
    "href": "model/model-basics/model-basics.html#adding-predictions-to-sim1-2",
    "title": "Model basics",
    "section": "Adding predictions to sim1",
    "text": "Adding predictions to sim1"
  },
  {
    "objectID": "model/model-basics/model-basics.html#adding-residuals-to-sim1a",
    "href": "model/model-basics/model-basics.html#adding-residuals-to-sim1a",
    "title": "Model basics",
    "section": "Adding residuals to sim1a",
    "text": "Adding residuals to sim1a\n\n\nCode\nsim1a &lt;- sim1a %&gt;% \n  add_residuals(s1_mod)\nhead(sim1a, n = 3)\n\n\n# A tibble: 3 × 4\n      x     y  pred resid\n  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1     1  4.20  6.27 -2.07\n2     1  7.51  6.27  1.24\n3     1  2.13  6.27 -4.15"
  },
  {
    "objectID": "model/model-basics/model-basics.html#plotting-x-values-against-residuals-points",
    "href": "model/model-basics/model-basics.html#plotting-x-values-against-residuals-points",
    "title": "Model basics",
    "section": "Plotting x-values against residuals; points",
    "text": "Plotting x-values against residuals; points\n\n\nCode\nsim1a %&gt;% \n  ggplot(mapping = aes(x = x, y = resid)) +\n  geom_point() +\n  geom_hline(yintercept = 0)"
  },
  {
    "objectID": "model/model-basics/model-basics.html#plotting-x-values-against-residuals-points-1",
    "href": "model/model-basics/model-basics.html#plotting-x-values-against-residuals-points-1",
    "title": "Model basics",
    "section": "Plotting x-values against residuals; points",
    "text": "Plotting x-values against residuals; points"
  },
  {
    "objectID": "model/model-basics/model-basics.html#plotting-x-values-against-residuals-frequency",
    "href": "model/model-basics/model-basics.html#plotting-x-values-against-residuals-frequency",
    "title": "Model basics",
    "section": "Plotting x-values against residuals; frequency",
    "text": "Plotting x-values against residuals; frequency\n\n\nCode\nsim1a %&gt;% \n  ggplot(mapping = aes(x = resid)) +\n  # experiment with binwidth = 1 and binwidth = 0.25\n  geom_freqpoly(binwidth = 0.5)"
  },
  {
    "objectID": "model/model-basics/model-basics.html#plotting-x-values-against-residuals-frequency-1",
    "href": "model/model-basics/model-basics.html#plotting-x-values-against-residuals-frequency-1",
    "title": "Model basics",
    "section": "Plotting x-values against residuals; frequency",
    "text": "Plotting x-values against residuals; frequency"
  },
  {
    "objectID": "model/model-basics/model-basics.html#matrix-multiplication",
    "href": "model/model-basics/model-basics.html#matrix-multiplication",
    "title": "Model basics",
    "section": "Matrix multiplication",
    "text": "Matrix multiplication\n\\[\nM= \\begin{bmatrix} a_{1,1} & a_{1,2} \\\\ a_{2,1} & a_{2,2} \\\\ a_{3,1} & a_{3,2} \\end{bmatrix} \\quad\nt(M) = \\begin{bmatrix}a_{1,1} & a_{2,1} & a_{3,1}\\\\\na_{1,2} & a_{2,2} & a_{3,2}\\end{bmatrix}\\quad \\boldsymbol{M'M}\n\\]\n\n\nRow 1 in t(m) is to be multiplied pairwise with column 1 in M and summed. This sum gives the new value at place (1,1) in the resulting matrix.\nRow 1 in t(m) is to be multiplied pairwise with column 2 in M and summed. This sum gives the new value at place (1,2) in the resulting matrix.\nRow 2 in t(m) is to be multiplied pairwise with column 1 in M and summed. This sum gives the new value at place (2,1) in the resulting matrix.\nRow 2 in t(m) is to be multiplied pairwise with column 2 in M and summed. This sum gives the new value at place (2,2) in the resulting matrix.\n\n\n\n\\[\nt(M) * M =\n\\]\n\\[\\begin{bmatrix}a_{1,1}·a_{1,1} + a_{2,1} · a_{2,1} + a_{3,1} · a_{3,1} & a_{1,1}·a_{1,2} + a_{2,1} · a_{2,2} + a_{3,1} · a_{3,2} \\\\ a_{1,2}·a_{1,1} + a_{2,2} · a_{2,1} + a_{3,2} · a_{3,1} & a_{1,2}·a_{1,2} + a_{2,2} · a_{2,2} + a_{3,2} · a_{3,2}\\end{bmatrix}\\]"
  },
  {
    "objectID": "model/model-basics/model-basics.html#matrix-multiplication-1",
    "href": "model/model-basics/model-basics.html#matrix-multiplication-1",
    "title": "Model basics",
    "section": "Matrix multiplication",
    "text": "Matrix multiplication\n\\[t(M) = \\begin{bmatrix}1 & 9 & 8\\\\3 & 7 & 4\\end{bmatrix} \\quad M = \\begin{bmatrix}1 & 3\\\\9 & 7\\\\8 & 4\\end{bmatrix}\\]\n\\[t(M) * M = \\begin{bmatrix}1·1 + 9·9 + 8·8 & 1·3 + 9·7+8·4\\\\3·1+7·9+4·8 & 3·3+7·7+4·4\\end{bmatrix} = \\begin{bmatrix}146 & 98\\\\98 & 74 \\end{bmatrix}\\]\n\n\nThe rules for X · Y\n\nX, m rows, n columns\nY, s rows, t columns\n\nFor X · Y to be possible:\n\nn = s and the dimension of the result will be\nm x t, i.e. m rows and t columns."
  },
  {
    "objectID": "model/model-basics/model-basics.html#matrix-multiplication-2",
    "href": "model/model-basics/model-basics.html#matrix-multiplication-2",
    "title": "Model basics",
    "section": "Matrix multiplication",
    "text": "Matrix multiplication\n\nMatrix multiplication in R are done with %*%\n\n\n\n\nCode\nM &lt;- matrix(c(1, 3, 9, 7, 8, 4), nrow = 3, ncol = 2, byrow = TRUE)\nt(M) %*% M # 2 X 3 3 x 2, 3 3 ok, result 2 x 2\n\n\n     [,1] [,2]\n[1,]  146   98\n[2,]   98   74"
  },
  {
    "objectID": "model/model-basics/model-basics.html#matrix-multiplication-3",
    "href": "model/model-basics/model-basics.html#matrix-multiplication-3",
    "title": "Model basics",
    "section": "Matrix multiplication",
    "text": "Matrix multiplication\n\\[M * t(M)\\quad 3 x 2\\quad 2 x 3\\]\n\nM * t(M) is possible since we have 2’s in the middle. The dimension of the result will be 3x3.\n\n\n\\[M * t(M) =\n\\begin{bmatrix}1·1+3·3 & 1·9+3·7&1·8+3·4\\\\\n9·1+7·3&9·9+7·7&9·8+7·4\\\\\n8·1+4·3&8·9+4·7&8·8+4·4\n\\end{bmatrix}\\]"
  },
  {
    "objectID": "model/model-basics/model-basics.html#matrix-multiplication-4",
    "href": "model/model-basics/model-basics.html#matrix-multiplication-4",
    "title": "Model basics",
    "section": "Matrix multiplication",
    "text": "Matrix multiplication\n\\[\\begin{bmatrix}\n10 & 30 & 20 \\\\\n30 & 130 & 100\\\\\n20 & 100 & 80\n\\end{bmatrix}\\]\n\n\nCode\nM %*% t(M)\n\n\n     [,1] [,2] [,3]\n[1,]   10   30   20\n[2,]   30  130  100\n[3,]   20  100   80"
  },
  {
    "objectID": "model/model-basics/model-basics.html#multiplication-by-vector",
    "href": "model/model-basics/model-basics.html#multiplication-by-vector",
    "title": "Model basics",
    "section": "Multiplication by vector",
    "text": "Multiplication by vector\n\nJust like multiplying by a matrix with 1 row or 1 column\n\n\n\\[y = \\begin{bmatrix}7\\\\2\\\\4\\end{bmatrix}\\] \\[(\\boldsymbol{M} · t(\\boldsymbol{M})) · \\boldsymbol{y}\\]\n\n\n\n(M %*% t(M)) is 3x3\ny is 3x1\n(M · t(M)) · y, 3x3 3x1\nPossible, since 3x3 in the middle, and dimension of result will be 3x1, 3 rows and 1 column"
  },
  {
    "objectID": "model/model-basics/model-basics.html#multiplication-by-vector-1",
    "href": "model/model-basics/model-basics.html#multiplication-by-vector-1",
    "title": "Model basics",
    "section": "Multiplication by vector",
    "text": "Multiplication by vector\n\n(M %*% t(M)) is 3x3\ny is 3x1\n(M · t(M)) · y, 3x3 3x1\nPossible, since 3x3 in the middle, and dimension of result will be 3x1, 3 rows and 1 column\n\n\n\\[(M · t(M)) · y = \\begin{bmatrix}\n10 & 30 & 20 \\\\\n30 & 130 & 100\\\\\n20 & 100 & 80\n\\end{bmatrix} · \\begin{bmatrix}7\\\\2\\\\4\\end{bmatrix} =\n\\begin{bmatrix}\n10·7+30·2+20·4\\\\\n30·7+130·2+100·4\\\\\n20·7+100·2+80·4\n\\end{bmatrix}\\]\n\\[=\\begin{bmatrix}\n210\\\\\n870\\\\\n660\n\\end{bmatrix}\\]"
  },
  {
    "objectID": "model/model-basics/model-basics.html#multiplication-by-vector-2",
    "href": "model/model-basics/model-basics.html#multiplication-by-vector-2",
    "title": "Model basics",
    "section": "Multiplication by vector",
    "text": "Multiplication by vector\n\n\nCode\ny &lt;- matrix(c(7, 2, 4), nrow = 3)\ny\n\n\n     [,1]\n[1,]    7\n[2,]    2\n[3,]    4\n\n\n\n\nCode\n(M %*% t(M)) %*% y\n\n\n     [,1]\n[1,]  210\n[2,]  870\n[3,]  660"
  },
  {
    "objectID": "model/model-basics/model-basics.html#model-matrix",
    "href": "model/model-basics/model-basics.html#model-matrix",
    "title": "Model basics",
    "section": "Model matrix",
    "text": "Model matrix\n\nOLS: . . .\n\n\\[\\hat{\\beta} = (X^T X)^{-1} X^T y\\]\n\nX above is the model_matrix\n\n\n\n\nCode\nX_mod &lt;- model_matrix(data = sim1a, formula = y ~ x)\nX_mod &lt;- X_mod %&gt;% rename(\"a_1\" = \"(Intercept)\")\ndim(X_mod)\n\n\n[1] 30  2"
  },
  {
    "objectID": "model/model-basics/model-basics.html#model-matrix-1",
    "href": "model/model-basics/model-basics.html#model-matrix-1",
    "title": "Model basics",
    "section": "Model matrix",
    "text": "Model matrix\n\n\nCode\nhead(X_mod, n = 4)\n\n\n# A tibble: 4 × 2\n    a_1     x\n  &lt;dbl&gt; &lt;dbl&gt;\n1     1     1\n2     1     1\n3     1     1\n4     1     2\n\n\nCode\ntail(X_mod, n = 4)\n\n\n# A tibble: 4 × 2\n    a_1     x\n  &lt;dbl&gt; &lt;dbl&gt;\n1     1     9\n2     1    10\n3     1    10\n4     1    10"
  },
  {
    "objectID": "model/model-basics/model-basics.html#model-matrix-2",
    "href": "model/model-basics/model-basics.html#model-matrix-2",
    "title": "Model basics",
    "section": "Model matrix",
    "text": "Model matrix\n\nUse \\[\\hat{\\beta} = (X^T X)^{-1} X^T y\\] to calculate the two coefficients\n\n\n\n\nCode\nX &lt;- as.matrix(X_mod)\ny &lt;- sim1a$y\n(XTX &lt;- t(X) %*% X) # 2 x 30 * 30 x 2, result 2 x 2\n\n\n    a_1    x\na_1  30  165\nx   165 1155\n\n\nCode\n(XTXinv &lt;- solve(t(X) %*% X)) # invert\n\n\n            a_1            x\na_1  0.15555556 -0.022222222\nx   -0.02222222  0.004040404\n\n\nCode\n# check, should give I 2 x 2\nround(XTX %*% XTXinv, 2)\n\n\n    a_1 x\na_1   1 0\nx     0 1"
  },
  {
    "objectID": "model/model-basics/model-basics.html#model-matrix-3",
    "href": "model/model-basics/model-basics.html#model-matrix-3",
    "title": "Model basics",
    "section": "Model matrix",
    "text": "Model matrix\n\n\nCode\nM &lt;- solve(t(X) %*% X) %*% t(X) # 2 x 2 * 2 x 30, result 2 x 30\nround(M, 3)\n\n\n      [,1]   [,2]   [,3]   [,4]   [,5]   [,6]   [,7]   [,8]   [,9]  [,10]\na_1  0.133  0.133  0.133  0.111  0.111  0.111  0.089  0.089  0.089  0.067\nx   -0.018 -0.018 -0.018 -0.014 -0.014 -0.014 -0.010 -0.010 -0.010 -0.006\n     [,11]  [,12]  [,13]  [,14]  [,15] [,16] [,17] [,18] [,19] [,20] [,21]\na_1  0.067  0.067  0.044  0.044  0.044 0.022 0.022 0.022 0.000 0.000 0.000\nx   -0.006 -0.006 -0.002 -0.002 -0.002 0.002 0.002 0.002 0.006 0.006 0.006\n     [,22]  [,23]  [,24]  [,25]  [,26]  [,27]  [,28]  [,29]  [,30]\na_1 -0.022 -0.022 -0.022 -0.044 -0.044 -0.044 -0.067 -0.067 -0.067\nx    0.010  0.010  0.010  0.014  0.014  0.014  0.018  0.018  0.018\n\n\n\n\nCode\nsolve(t(X) %*% X) %*% t(X) %*% y # 2 x 30 * 30 x 1 result 2 x 1\n\n\n        [,1]\na_1 4.220822\nx   2.051533\n\n\n\n\nThe same coefficients we found earlier by using the lm() function.\nNote! Finding the inverse of \\(X^T·X\\), i.e. \\((X^T·X)^{-1}\\) is not trivial for larger models. The lm() uses many clever tricks to calculate it quickly while also avoiding numerical problems. So the calculations above are to show what’s going on and should not be used on real models."
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset",
    "href": "model/model-basics/model-basics.html#small-dataset",
    "title": "Model basics",
    "section": "Small dataset",
    "text": "Small dataset\n\nSmall dataset with 6 obs.\nMakes it easier to see what’s going on\n\n\n\n\nCode\nset.seed(444)\ns &lt;- seq_along(t(sim1$x))\nsim1b &lt;- sim1[sample(s,size = 6),]\nsim1b\n\n\n# A tibble: 6 × 2\n      x     y\n  &lt;int&gt; &lt;dbl&gt;\n1     2 11.3 \n2     1  2.13\n3    10 23.3 \n4     6 16.0 \n5    10 25.0 \n6     4 12.4"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-1",
    "href": "model/model-basics/model-basics.html#small-dataset-1",
    "title": "Model basics",
    "section": "Small dataset",
    "text": "Small dataset\n\n\nCode\nX_mod &lt;- model_matrix(data = sim1b, formula = y ~ x)\nX_mod &lt;- X_mod %&gt;% rename(\"a_1\" = \"(Intercept)\")\nX &lt;- as.matrix(X_mod)\nX\n\n\n     a_1  x\n[1,]   1  2\n[2,]   1  1\n[3,]   1 10\n[4,]   1  6\n[5,]   1 10\n[6,]   1  4\n\n\n\n\nCode\nround(solve(t(X) %*% X), 4)\n\n\n        a_1       x\na_1  0.5673 -0.0728\nx   -0.0728  0.0132"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-2",
    "href": "model/model-basics/model-basics.html#small-dataset-2",
    "title": "Model basics",
    "section": "Small dataset",
    "text": "Small dataset\n\n\nCode\nround(solve(t(X) %*% X) %*% t(X), 4)\n\n\n       [,1]    [,2]    [,3]   [,4]    [,5]    [,6]\na_1  0.4216  0.4945 -0.1611 0.1302 -0.1611  0.2759\nx   -0.0464 -0.0596  0.0596 0.0066  0.0596 -0.0199\n\n\n\n\nCode\n(y &lt;- as.matrix(sim1b$y, nrow = 6))\n\n\n          [,1]\n[1,] 11.296823\n[2,]  2.125473\n[3,] 23.346422\n[4,] 15.955975\n[5,] 24.968099\n[6,] 12.434589"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-3",
    "href": "model/model-basics/model-basics.html#small-dataset-3",
    "title": "Model basics",
    "section": "Small dataset",
    "text": "Small dataset\n\n\nCode\nround(solve(t(X) %*% X) %*% t(X) %*% y, 4)\n\n\n      [,1]\na_1 3.5377\nx   2.0879\n\n\n\n\nCode\ncoefficients(lm(y ~ x, data = sim1b))\n\n\n(Intercept)           x \n   3.537672    2.087920"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-no-constant",
    "href": "model/model-basics/model-basics.html#small-dataset-no-constant",
    "title": "Model basics",
    "section": "small dataset, no constant",
    "text": "small dataset, no constant\n\nIn lm() we specifies that we do not want to estimate a constant with lm(y ~ x - 1), i.e. by adding -1 to the formula.\nThis gives us the following model matrix\n\n\n\n\nCode\nX_mod &lt;- model_matrix(data = sim1b, formula = y ~ x - 1)\nX &lt;- as.matrix(X_mod)\nX\n\n\n      x\n[1,]  2\n[2,]  1\n[3,] 10\n[4,]  6\n[5,] 10\n[6,]  4"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-no-constant-1",
    "href": "model/model-basics/model-basics.html#small-dataset-no-constant-1",
    "title": "Model basics",
    "section": "small dataset, no constant",
    "text": "small dataset, no constant\n\n\nCode\nround(solve(t(X) %*% X) %*% t(X), 4)\n\n\n    [,1]   [,2]   [,3]   [,4]   [,5]   [,6]\nx 0.0078 0.0039 0.0389 0.0233 0.0389 0.0156\n\n\n\n\nCode\nround(solve(t(X) %*% X) %*% t(X) %*% y, 4)\n\n\n    [,1]\nx 2.5422\n\n\n\n\nCode\ncoefficients(lm(y ~ x - 1, data = sim1b))\n\n\n       x \n2.542173"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-perfect-multicolinearity",
    "href": "model/model-basics/model-basics.html#small-dataset-perfect-multicolinearity",
    "title": "Model basics",
    "section": "Small dataset, perfect multicolinearity",
    "text": "Small dataset, perfect multicolinearity\n\n\nCode\nsim1c &lt;- sim1b %&gt;% \nrename(x_1 = x) %&gt;% \nmutate(x_2 = 2.25 * x_1)\n\n\n\n\nCode\nX_mod &lt;- model_matrix(data = sim1c, formula = y ~ x_1 + x_2)\nX &lt;- as.matrix(X_mod)\nX\n\n\n     (Intercept) x_1   x_2\n[1,]           1   2  4.50\n[2,]           1   1  2.25\n[3,]           1  10 22.50\n[4,]           1   6 13.50\n[5,]           1  10 22.50\n[6,]           1   4  9.00\n\n\n\n\nCode\nt(X) %*% X\n\n\n            (Intercept)    x_1      x_2\n(Intercept)        6.00  33.00   74.250\nx_1               33.00 257.00  578.250\nx_2               74.25 578.25 1301.062"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-perfect-multicolinearity-1",
    "href": "model/model-basics/model-basics.html#small-dataset-perfect-multicolinearity-1",
    "title": "Model basics",
    "section": "Small dataset, perfect multicolinearity",
    "text": "Small dataset, perfect multicolinearity\n\n\nCode\nsolve(t(X) %*% X)\n\n\n\n\nResult: Error in solve.default(t(X) %*% X) : Lapack routine dgesv: system is exactly singular: U[3,3] = 0\nThe matrix don’t have an inverse. The reason is that x_1 and x_2 essentially contains the same information.\nX has less than full rank."
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-near-multicolinearity-case-1",
    "href": "model/model-basics/model-basics.html#small-dataset-near-multicolinearity-case-1",
    "title": "Model basics",
    "section": "Small dataset, near multicolinearity, case 1",
    "text": "Small dataset, near multicolinearity, case 1\n\nadd small amount of white noise to x_3\n\n\n\n\nCode\nl = length(sim1c$x_2)\nsim1c$x_3  = sim1c$x_2 + rnorm(n = l, mean = 0, sd = 0.001)\nrm(l)\n\n\n\n\nCode\nX_mod &lt;- model_matrix(data = sim1c, formula = y ~ x_1 + x_3)\nX &lt;- as.matrix(X_mod)\nX\n\n\n     (Intercept) x_1       x_3\n[1,]           1   2  4.500150\n[2,]           1   1  2.251032\n[3,]           1  10 22.499488\n[4,]           1   6 13.499080\n[5,]           1  10 22.499040\n[6,]           1   4  9.001334"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-near-multicolinearity-case-1-1",
    "href": "model/model-basics/model-basics.html#small-dataset-near-multicolinearity-case-1-1",
    "title": "Model basics",
    "section": "Small dataset, near multicolinearity, case 1",
    "text": "Small dataset, near multicolinearity, case 1\n\n\nCode\nsolve(t(X) %*% X)\n\n\n            (Intercept)          x_1           x_3\n(Intercept)    1.076135     1080.807     -480.4311\nx_1         1080.806542  2296162.380 -1020602.2377\nx_3         -480.431149 -1020602.238   453639.0556\n\n\n\n\nCode\nround(solve(t(X) %*% X) %*% t(X) %*% y, 4)\n\n\n                  [,1]\n(Intercept)     4.6093\nx_1          2278.6099\nx_3         -1011.8724"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-near-multicolinearity-case-2",
    "href": "model/model-basics/model-basics.html#small-dataset-near-multicolinearity-case-2",
    "title": "Model basics",
    "section": "Small dataset, near multicolinearity, case 2",
    "text": "Small dataset, near multicolinearity, case 2\n\nadd small amount of white noise to x_3\n\n\n\n\nCode\nl = length(sim1c$x_2)\nsim1c$x_3  = sim1c$x_2 + rnorm(n = l, mean = 0, sd = 0.001)\nrm(l)\n\n\n\n\nCode\nX_mod &lt;- model_matrix(data = sim1c, formula = y ~ x_1 + x_3)\nX &lt;- as.matrix(X_mod)\nX\n\n\n     (Intercept) x_1       x_3\n[1,]           1   2  4.500082\n[2,]           1   1  2.248922\n[3,]           1  10 22.499646\n[4,]           1   6 13.499613\n[5,]           1  10 22.500897\n[6,]           1   4  9.000650"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-near-multicolinearity-case-2-1",
    "href": "model/model-basics/model-basics.html#small-dataset-near-multicolinearity-case-2-1",
    "title": "Model basics",
    "section": "Small dataset, near multicolinearity, case 2",
    "text": "Small dataset, near multicolinearity, case 2\n\n\nCode\nsolve(t(X) %*% X)\n\n\n            (Intercept)           x_1           x_3\n(Intercept)    0.661639     -464.5769      206.4392\nx_1         -464.576937  2287815.5109 -1016771.9424\nx_3          206.439167 -1016771.9424   451883.1103\n\n\n\n\nCode\nround(solve(t(X) %*% X) %*% t(X) %*% y, 4)\n\n\n                  [,1]\n(Intercept)     4.6397\nx_1         -5425.5196\nx_3          2412.1871"
  },
  {
    "objectID": "model/model-basics/model-basics.html#conclusion-case-1-and-2",
    "href": "model/model-basics/model-basics.html#conclusion-case-1-and-2",
    "title": "Model basics",
    "section": "Conclusion case 1 and 2",
    "text": "Conclusion case 1 and 2\n\nJust tiny changes in x_3 gives dramatic changes in the coefficient estimates\nWell known consequence of multicollinearity"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-factor-variable",
    "href": "model/model-basics/model-basics.html#small-dataset-factor-variable",
    "title": "Model basics",
    "section": "Small dataset, factor variable",
    "text": "Small dataset, factor variable\n\n\nCode\nsim1c &lt;- sim1c %&gt;% \nmutate(x_4 = sample(c(\"M\", \"F\"),\n                    size = 6, \n                    prob = c(0.5, 0.5), \n                    replace = TRUE\n                    )\n       )\nsim1c[1:3,]\n\n\n# A tibble: 3 × 5\n    x_1     y   x_2   x_3 x_4  \n  &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;\n1     2 11.3   4.5   4.50 M    \n2     1  2.13  2.25  2.25 M    \n3    10 23.3  22.5  22.5  F"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-factor-variable-1",
    "href": "model/model-basics/model-basics.html#small-dataset-factor-variable-1",
    "title": "Model basics",
    "section": "Small dataset, factor variable",
    "text": "Small dataset, factor variable\n\n\nCode\nX_mod &lt;- model_matrix(data = sim1c, formula = y ~ x_1 + x_4)\nX &lt;- as.matrix(X_mod)\nX\n\n\n     (Intercept) x_1 x_4M\n[1,]           1   2    1\n[2,]           1   1    1\n[3,]           1  10    0\n[4,]           1   6    1\n[5,]           1  10    0\n[6,]           1   4    0"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-factor-variable-2",
    "href": "model/model-basics/model-basics.html#small-dataset-factor-variable-2",
    "title": "Model basics",
    "section": "Small dataset, factor variable",
    "text": "Small dataset, factor variable\n\n\nCode\nsolve(t(X) %*% X)\n\n\n            (Intercept)         x_1       x_4M\n(Intercept)   2.0175439 -0.21052632 -1.3859649\nx_1          -0.2105263  0.02631579  0.1315789\nx_4M         -1.3859649  0.13157895  1.3245614\n\n\n\n\nCode\nround(solve(t(X) %*% X) %*% t(X) %*% y, 4)\n\n\n               [,1]\n(Intercept)  3.5737\nx_1          2.0845\nx_4M        -0.0345\n\n\n\n\nCode\ncoefficients(lm(y ~ x_1 + x_4, data = sim1c))\n\n\n(Intercept)         x_1        x_4M \n 3.57373665  2.08449586 -0.03446724"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-interaction",
    "href": "model/model-basics/model-basics.html#small-dataset-interaction",
    "title": "Model basics",
    "section": "Small dataset, interaction",
    "text": "Small dataset, interaction\n\nformula y ~ x_1 * x_4\nequation: y = a_0 + a_1 * x_1 + a_4 * x_4 + a_14 * x_1 * x_4\n\n\n\n\nCode\nX_mod &lt;- model_matrix(data = sim1c, formula = y ~ x_1 * x_4)\nX_mod\n\n\n# A tibble: 6 × 4\n  `(Intercept)`   x_1  x_4M `x_1:x_4M`\n          &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;\n1             1     2     1          2\n2             1     1     1          1\n3             1    10     0          0\n4             1     6     1          6\n5             1    10     0          0\n6             1     4     0          0\n\n\nCode\nX &lt;- as.matrix(X_mod)"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-interaction-1",
    "href": "model/model-basics/model-basics.html#small-dataset-interaction-1",
    "title": "Model basics",
    "section": "Small dataset, interaction",
    "text": "Small dataset, interaction\n\n\nCode\nsolve(t(X) %*% X)\n\n\n            (Intercept)         x_1       x_4M    x_1:x_4M\n(Intercept)   3.0000000 -0.33333333 -3.0000000  0.33333333\nx_1          -0.3333333  0.04166667  0.3333333 -0.04166667\nx_4M         -3.0000000  0.33333333  3.9761905 -0.54761905\nx_1:x_4M      0.3333333 -0.04166667 -0.5476190  0.11309524\n\n\n\n\nCode\nbeta &lt;- solve(t(X) %*% X) %*% t(X) %*% y\nround(beta, 4)\n\n\n               [,1]\n(Intercept)  4.6195\nx_1          1.9538\nx_4M        -1.7525\nx_1:x_4M     0.3548"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-interaction-2",
    "href": "model/model-basics/model-basics.html#small-dataset-interaction-2",
    "title": "Model basics",
    "section": "Small dataset, interaction",
    "text": "Small dataset, interaction\n\n\nCode\nmod &lt;- lm(y ~ x_1 * x_4, data = sim1c)\ncoefficients(mod)\n\n\n(Intercept)         x_1        x_4M    x_1:x_4M \n   4.619475    1.953779   -1.752465    0.354804 \n\n\nCode\nsim1c &lt;- sim1c %&gt;% \n    select(y, x_1, x_2, x_4) %&gt;% \n  add_predictions(mod)\n\n\n\n\nCode\n# Predicton for x_1 = 0 and x_1 = 10\nx_0 &lt;- c(1, 1, 1, 1); x_1 &lt;- c(0, 10, 0, 10); x_4 &lt;-  c(0, 0, 1, 1)\nnew_data &lt;- matrix(c(x_0, x_1, x_4, x_1*x_4), ncol = 4)\nnew_data\n\n\n     [,1] [,2] [,3] [,4]\n[1,]    1    0    0    0\n[2,]    1   10    0    0\n[3,]    1    0    1    0\n[4,]    1   10    1   10"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-interaction-3",
    "href": "model/model-basics/model-basics.html#small-dataset-interaction-3",
    "title": "Model basics",
    "section": "Small dataset, interaction",
    "text": "Small dataset, interaction\n\n\nCode\nnew_pred &lt;- new_data %*% beta\nt(new_pred)\n\n\n         [,1]     [,2]     [,3]     [,4]\n[1,] 4.619475 24.15726 2.867009 25.95284\n\n\nCode\nnew_pred_data &lt;- data.frame(x_1 = new_data[,2], x_4 = c(\"F\", \"F\", \"M\", \"M\"), pred = new_pred)\nnew_pred_data\n\n\n  x_1 x_4      pred\n1   0   F  4.619475\n2  10   F 24.157261\n3   0   M  2.867009\n4  10   M 25.952835\n\n\n\n\nPlotting our interaction mode\nFemale: \\(y_F = 4.6195 + 1.9538· x_1 -1.7525 · x_4 + 0.3548 · x_1 · x_4\\) \\(= 4.6195 + 1.9538· x_1 -1.7525 · 0 + 0.3548 · x_1 · 0\\) \\(= 4.6195 + 1.9538· x_1\\)\nMale: \\(y_M = 4.6195 + 1.9538· x_1 -1.7525 · x_4 + 0.3548 · x_1 · x_4\\) \\(= 4.6195 + 1.9538· x_1 -1.7525 · 1 + 0.3548 · x_1 · 1\\) \\(= 2.867 + 2.3086 · x_1\\)"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-interaction-4",
    "href": "model/model-basics/model-basics.html#small-dataset-interaction-4",
    "title": "Model basics",
    "section": "Small dataset, interaction",
    "text": "Small dataset, interaction\n\n\nCode\nggplot(mapping = aes(x = x_1, y = y, colour = x_4), data = sim1c) +\n  geom_point() +\n  geom_point(mapping = aes(y = pred), size = 2) +\n  geom_line(data = new_pred_data, mapping = aes(x = x_1, y = pred), lwd = 1)"
  },
  {
    "objectID": "model/model-basics/model-basics.html#small-dataset-interaction-5",
    "href": "model/model-basics/model-basics.html#small-dataset-interaction-5",
    "title": "Model basics",
    "section": "Small dataset, interaction",
    "text": "Small dataset, interaction"
  },
  {
    "objectID": "model/model-basics/model-basics.html#transformations",
    "href": "model/model-basics/model-basics.html#transformations",
    "title": "Model basics",
    "section": "Transformations",
    "text": "Transformations\n\nRemember to put +, *,^,- into I() function\nElse use transformations freely\nNo need to make a new transformed variable before using it in model\n\n\n\n\nCode\n# log transform x_2\nmod2 &lt;- lm(y ~ x_1 + log(x_2), data = sim1c)\nsim1c %&gt;% \n  ggplot(mapping = aes(x = x_1, y = log(x_2))) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE, formula = 'y ~ x')"
  },
  {
    "objectID": "model/model-basics/model-basics.html#transformations-1",
    "href": "model/model-basics/model-basics.html#transformations-1",
    "title": "Model basics",
    "section": "Transformations",
    "text": "Transformations"
  },
  {
    "objectID": "model/model-basics/model-basics.html#missing-values",
    "href": "model/model-basics/model-basics.html#missing-values",
    "title": "Model basics",
    "section": "Missing values",
    "text": "Missing values\n\nDefault R behaviour; drop missing values silently in models.\nCan turn on warnings through setting an option.\n\noptions(na.action = na.warn)\nwill give warnings when observations are dropped\n\nGet rid of warnings\n\nna.action = na.exclude as model function argument\nor reset option, options(na.action = na.exclude)\n\n\n\n\n\nCode\noptions(na.action = na.warn)\noptions(na.action = na.exclude)"
  },
  {
    "objectID": "model/model-basics/model-basics.html#references",
    "href": "model/model-basics/model-basics.html#references",
    "title": "Model basics",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nWickham, Hadley. 2023a. Modelr: Modelling Functions That Work with the Pipe. https://CRAN.R-project.org/package=modelr.\n\n\n———. 2023b. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "model/many-models/many-models.html#introduction",
    "href": "model/many-models/many-models.html#introduction",
    "title": "Many models",
    "section": "Introduction",
    "text": "Introduction\n\nMany simple models on complex datasets\nList-columns to store arbitrary data structures in a data frame\nbroom package to turn models into tidy data.\nExample gapminder, we will use newgapminder our updated version of the dataset from last assignment"
  },
  {
    "objectID": "model/many-models/many-models.html#read-in-newgapminder",
    "href": "model/many-models/many-models.html#read-in-newgapminder",
    "title": "Many models",
    "section": "Read in newgapminder",
    "text": "Read in newgapminder\n\nOur dataset is somewhat smaller than the one in gapminder, but have more updated data\n\n\n\n\nCode\nnewgapminder &lt;- read_csv(file = \"./newgapminder.csv\")"
  },
  {
    "objectID": "model/many-models/many-models.html#newgapminder",
    "href": "model/many-models/many-models.html#newgapminder",
    "title": "Many models",
    "section": "newgapminder",
    "text": "newgapminder\n\n\nCode\nprint(head(newgapminder, n = 20))\n\n\n# A tibble: 20 × 6\n   country   continent year       lifeExp      pop gdpPercap\n   &lt;chr&gt;     &lt;chr&gt;     &lt;date&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;\n 1 Argentina Americas  1962-01-01    64.4 21153042     5711.\n 2 Argentina Americas  1967-01-01    64.9 22828872     6255.\n 3 Argentina Americas  1972-01-01    66.2 24653172     7369.\n 4 Argentina Americas  1977-01-01    68.4 26661397     7744.\n 5 Argentina Americas  1982-01-01    70.8 28794550     7210.\n 6 Argentina Americas  1987-01-01    72.0 31184411     7294.\n 7 Argentina Americas  1992-01-01    72.6 33529320     7157.\n 8 Argentina Americas  1997-01-01    73.5 35657438     8543.\n 9 Argentina Americas  2002-01-01    74.2 37681743     6854.\n10 Argentina Americas  2007-01-01    75.1 39684303     9902.\n11 Argentina Americas  2012-01-01    76.0 41755188    10650.\n12 Argentina Americas  2017-01-01    76.7 43937143    10404.\n13 Australia Oceania   1962-01-01    71.2 10643420    19246.\n14 Australia Oceania   1967-01-01    71.3 11899644    22965.\n15 Australia Oceania   1972-01-01    71.6 13244163    26794.\n16 Australia Oceania   1977-01-01    73.3 14092545    28625.\n17 Australia Oceania   1982-01-01    74.8 14979203    30912.\n18 Australia Oceania   1987-01-01    76.0 16183159    33127.\n19 Australia Oceania   1992-01-01    77.4 17402179    35035.\n20 Australia Oceania   1997-01-01    78.6 18387205    40154."
  },
  {
    "objectID": "model/many-models/many-models.html#plotting-the-data-for-each-country",
    "href": "model/many-models/many-models.html#plotting-the-data-for-each-country",
    "title": "Many models",
    "section": "Plotting the data for each country",
    "text": "Plotting the data for each country\n\n\nCode\nnewgapminder %&gt;% \n  ggplot(aes(year, lifeExp, group = country, colour = continent)) +\n    geom_line(alpha = 1/3)"
  },
  {
    "objectID": "model/many-models/many-models.html#plotting-the-data-for-each-country-1",
    "href": "model/many-models/many-models.html#plotting-the-data-for-each-country-1",
    "title": "Many models",
    "section": "Plotting the data for each country",
    "text": "Plotting the data for each country"
  },
  {
    "objectID": "model/many-models/many-models.html#plotting-the-data-for-africa",
    "href": "model/many-models/many-models.html#plotting-the-data-for-africa",
    "title": "Many models",
    "section": "Plotting the data for Africa",
    "text": "Plotting the data for Africa\n\n\nCode\nnewgapminder %&gt;% \n  filter(continent == \"Africa\")  %&gt;% \n  ggplot(aes(year, lifeExp, group = country)) +\n    geom_line()"
  },
  {
    "objectID": "model/many-models/many-models.html#plotting-the-data-for-africa-1",
    "href": "model/many-models/many-models.html#plotting-the-data-for-africa-1",
    "title": "Many models",
    "section": "Plotting the data for Africa",
    "text": "Plotting the data for Africa"
  },
  {
    "objectID": "model/many-models/many-models.html#simple-model",
    "href": "model/many-models/many-models.html#simple-model",
    "title": "Many models",
    "section": "Simple model",
    "text": "Simple model\n\nRemove growth\nProblem: 90 different countries\nStart with one: Norway\n\n\n\n\nCode\nno &lt;- newgapminder %&gt;% filter(country == \"Norway\")\nno_mod = lm(lifeExp ~ year, data = no)\nno1 &lt;- no %&gt;%\n  ggplot(mapping = aes(x = year, y = lifeExp)) +\n  geom_line() +\n  ggtitle(\"Full data =\")\nno2 &lt;- no %&gt;% \n  add_predictions(no_mod, var = \"pred_no\") %&gt;% \n  ggplot(mapping = aes(x = year, y = pred_no)) +\n  geom_line() +\n  ggtitle(\"Linear trend + \")\nno3 &lt;- no %&gt;% \n  add_residuals(no_mod, var = \"res_no\") %&gt;% \n  ggplot(mapping = aes(x = year, y = res_no)) +\n  geom_line() +\n  ggtitle(\" Residuals\")\n# since we use package patchwork\nno1 + no2 + no3"
  },
  {
    "objectID": "model/many-models/many-models.html#simple-model-1",
    "href": "model/many-models/many-models.html#simple-model-1",
    "title": "Many models",
    "section": "Simple model",
    "text": "Simple model"
  },
  {
    "objectID": "model/many-models/many-models.html#only-89-left-to-do",
    "href": "model/many-models/many-models.html#only-89-left-to-do",
    "title": "Many models",
    "section": "Only 89 left to do!",
    "text": "Only 89 left to do!\n\nWhat can one do?\n\nnest() the data\nCommon code in a function, map onto each country\n\nUsed to apply function on new variables, now subset of rows (1962 -2017 for 90 different countries)\nNested data frame: group_by()first, then nest()\n\n\n\n\nCode\nby_country &lt;- newgapminder %&gt;% \n  # next a trick to bring with us continent variable\n  # not needed for the grouping (no two countries with same name)\n  group_by(country, continent) %&gt;% \n  nest()"
  },
  {
    "objectID": "model/many-models/many-models.html#nested-dataframes",
    "href": "model/many-models/many-models.html#nested-dataframes",
    "title": "Many models",
    "section": "Nested dataframes",
    "text": "Nested dataframes\n\nThat was easy!\nWhat’s in by_country?\n\n\n\n\nCode\nby_country\n\n\n# A tibble: 90 × 3\n# Groups:   country, continent [90]\n   country      continent data             \n   &lt;chr&gt;        &lt;chr&gt;     &lt;list&gt;           \n 1 Argentina    Americas  &lt;tibble [12 × 4]&gt;\n 2 Australia    Oceania   &lt;tibble [12 × 4]&gt;\n 3 Austria      Europe    &lt;tibble [12 × 4]&gt;\n 4 Burundi      Africa    &lt;tibble [12 × 4]&gt;\n 5 Belgium      Europe    &lt;tibble [12 × 4]&gt;\n 6 Benin        Africa    &lt;tibble [12 × 4]&gt;\n 7 Burkina Faso Africa    &lt;tibble [12 × 4]&gt;\n 8 Bangladesh   Asia      &lt;tibble [12 × 4]&gt;\n 9 Bahamas      Americas  &lt;tibble [12 × 4]&gt;\n10 Belize       Americas  &lt;tibble [12 × 4]&gt;\n# ℹ 80 more rows"
  },
  {
    "objectID": "model/many-models/many-models.html#nested-dataframes-1",
    "href": "model/many-models/many-models.html#nested-dataframes-1",
    "title": "Many models",
    "section": "Nested dataframes",
    "text": "Nested dataframes\n\ncountry and continent just two normal character vectors.\ndata is something new\n\nIt’s a vector of tibbles\nIs that even permissible after R rules?\n\nIt is. It’s just a vector of lists of vectors of equal length\nRemember, a tibble (and dataframe) is nothing but a list of vectors of equal length\nA list is a permissible vector type, and data contains nothing but lists.\nData is also of the same length as country and continent.\nEverything is in order.\nEvery tibble in data has 12 rows and 4 columns"
  },
  {
    "objectID": "model/many-models/many-models.html#nested-dataframes-2",
    "href": "model/many-models/many-models.html#nested-dataframes-2",
    "title": "Many models",
    "section": "Nested dataframes",
    "text": "Nested dataframes\n\nThis kind of structure is quite “new”\nNo good tools to inspect it\nstr() tends to give to much info\nThe best solution is to inspect a single element with [[]]\n\n\n\n\nCode\nby_country %&gt;% \n  # pick Norway\n  filter(country == \"Norway\") %&gt;%\n  # pick the data variable for norway\n  .$data %&gt;% \n  # we want the content\n  .[[1]]"
  },
  {
    "objectID": "model/many-models/many-models.html#nested-dataframes-3",
    "href": "model/many-models/many-models.html#nested-dataframes-3",
    "title": "Many models",
    "section": "Nested dataframes",
    "text": "Nested dataframes\n\n\n# A tibble: 12 × 4\n   year       lifeExp     pop gdpPercap\n   &lt;date&gt;       &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;\n 1 1962-01-01    73.2 3639213    24912.\n 2 1967-01-01    73.8 3784867    30311.\n 3 1972-01-01    74.2 3933726    35368.\n 4 1977-01-01    75.1 4044335    43237.\n 5 1982-01-01    75.8 4111650    49046.\n 6 1987-01-01    76.0 4186972    59392.\n 7 1992-01-01    77.1 4292685    63630.\n 8 1997-01-01    78.3 4420266    77045.\n 9 2002-01-01    79.0 4546017    83674.\n10 2007-01-01    80.6 4719403    91566.\n11 2012-01-01    81.5 5013716    88605.\n12 2017-01-01    82.3 5296324    91549."
  },
  {
    "objectID": "model/many-models/many-models.html#nested-dataframes-4",
    "href": "model/many-models/many-models.html#nested-dataframes-4",
    "title": "Many models",
    "section": "Nested dataframes",
    "text": "Nested dataframes\n\nStandard grouped dataframe\n\nEach row is an observation\n\nNested grouped dataframe\n\nEach row is a group of observations"
  },
  {
    "objectID": "model/many-models/many-models.html#more-on-list-columns",
    "href": "model/many-models/many-models.html#more-on-list-columns",
    "title": "Many models",
    "section": "More on list-columns",
    "text": "More on list-columns\n\nDefine a model function\n\n\n\n\nCode\ncountry_model &lt;- function(a_df) {\n  # same simple model for each country\n  lm(lifeExp ~ year, data = a_df)\n}\n\n\n\nWant to map this function onto the data for each country\nStore it in by_country as the variable model\n\n\n\n\n\nCode\nby_country &lt;- by_country %&gt;% \n  # remember map(data, function), our data named data\n  mutate(model = map(data, .f = country_model))\n\n\n\n\nCode\nprint(by_country, n = 3)\n\n\n# A tibble: 90 × 4\n# Groups:   country, continent [90]\n  country   continent data              model \n  &lt;chr&gt;     &lt;chr&gt;     &lt;list&gt;            &lt;list&gt;\n1 Argentina Americas  &lt;tibble [12 × 4]&gt; &lt;lm&gt;  \n2 Australia Oceania   &lt;tibble [12 × 4]&gt; &lt;lm&gt;  \n3 Austria   Europe    &lt;tibble [12 × 4]&gt; &lt;lm&gt;  \n# ℹ 87 more rows"
  },
  {
    "objectID": "model/many-models/many-models.html#summary-of-the-model-for-norway",
    "href": "model/many-models/many-models.html#summary-of-the-model-for-norway",
    "title": "Many models",
    "section": "Summary of the model for Norway",
    "text": "Summary of the model for Norway\n\n\nCode\nby_country %&gt;% \n  # pick Norway\n  filter(country == \"Norway\") %&gt;%\n  # pick the data variable for norway\n  .$model %&gt;% \n  # we want the content\n  .[[1]] %&gt;% \n  summary()\n\n\n\nCall:\nlm(formula = lifeExp ~ year, data = a_df)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.78146 -0.26734 -0.08243  0.39243  0.63660 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 7.396e+01  2.033e-01  363.76  &lt; 2e-16 ***\nyear        4.619e-04  2.138e-05   21.61 1.01e-09 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4668 on 10 degrees of freedom\nMultiple R-squared:  0.979, Adjusted R-squared:  0.9769 \nF-statistic:   467 on 1 and 10 DF,  p-value: 1.005e-09"
  },
  {
    "objectID": "model/many-models/many-models.html#coefficients-of-the-model-for-norway",
    "href": "model/many-models/many-models.html#coefficients-of-the-model-for-norway",
    "title": "Many models",
    "section": "Coefficients of the model for Norway",
    "text": "Coefficients of the model for Norway\n\n\nCode\nby_country %&gt;% \n  # pick Norway\n  filter(country == \"Norway\") %&gt;%\n  # pick the data variable for norway\n  .$model %&gt;% \n  # we want the content\n  .[[1]] %&gt;% \n  coefficients()\n\n\n (Intercept)         year \n7.396322e+01 4.619491e-04"
  },
  {
    "objectID": "model/many-models/many-models.html#more-by_country",
    "href": "model/many-models/many-models.html#more-by_country",
    "title": "Many models",
    "section": "More by_country",
    "text": "More by_country\n\nby_country now contains both data and models for each of the 90 countries\nEasy to filter on country or continent\nWill always be kept in sync, just like observations"
  },
  {
    "objectID": "model/many-models/many-models.html#adding-residuals-and-predictions-if-we-want-to",
    "href": "model/many-models/many-models.html#adding-residuals-and-predictions-if-we-want-to",
    "title": "Many models",
    "section": "Adding residuals (and predictions if we want to)",
    "text": "Adding residuals (and predictions if we want to)\n\n\nCode\nby_country &lt;- by_country %&gt;% \n  mutate(\n    # remember map2(var1, var2, function)\n    # we want to vary data and model\n    # one combination for each country\n    #add_residuals(data, model)\n    res = map2(data, model, add_residuals)\n  )\n\n\n\nThen we have added the residuals for each country to by_country"
  },
  {
    "objectID": "model/many-models/many-models.html#how-to-get-things-out-of-their-nest",
    "href": "model/many-models/many-models.html#how-to-get-things-out-of-their-nest",
    "title": "Many models",
    "section": "How to get things out of their nest?",
    "text": "How to get things out of their nest?\n\nunnest()\nSay we want to see the residuals. How will we get them?\n\n\n\n\nCode\nres_90c &lt;- by_country %&gt;% \n  unnest(res)\nprint(res_90c, n = 4)\n\n\n# A tibble: 1,080 × 9\n# Groups:   country, continent [90]\n  country   continent data     model  year       lifeExp    pop gdpPercap  resid\n  &lt;chr&gt;     &lt;chr&gt;     &lt;list&gt;   &lt;list&gt; &lt;date&gt;       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;\n1 Argentina Americas  &lt;tibble&gt; &lt;lm&gt;   1962-01-01    64.4 2.12e7     5711. -0.365\n2 Argentina Americas  &lt;tibble&gt; &lt;lm&gt;   1967-01-01    64.9 2.28e7     6255. -1.06 \n3 Argentina Americas  &lt;tibble&gt; &lt;lm&gt;   1972-01-01    66.2 2.47e7     7369. -0.945\n4 Argentina Americas  &lt;tibble&gt; &lt;lm&gt;   1977-01-01    68.4 2.67e7     7744.  0.105\n# ℹ 1,076 more rows"
  },
  {
    "objectID": "model/many-models/many-models.html#residuals-and-the-variables-for-norway",
    "href": "model/many-models/many-models.html#residuals-and-the-variables-for-norway",
    "title": "Many models",
    "section": "Residuals and the variables for Norway",
    "text": "Residuals and the variables for Norway\n\n\nCode\nres_90c %&gt;% \n  filter(country == \"Norway\") %&gt;% \n  print(n = 5)\n\n\n# A tibble: 12 × 9\n# Groups:   country, continent [1]\n  country continent data     model  year       lifeExp     pop gdpPercap   resid\n  &lt;chr&gt;   &lt;chr&gt;     &lt;list&gt;   &lt;list&gt; &lt;date&gt;       &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;\n1 Norway  Europe    &lt;tibble&gt; &lt;lm&gt;   1962-01-01    73.2 3639213    24912.  0.637 \n2 Norway  Europe    &lt;tibble&gt; &lt;lm&gt;   1967-01-01    73.8 3784867    30311.  0.383 \n3 Norway  Europe    &lt;tibble&gt; &lt;lm&gt;   1972-01-01    74.2 3933726    35368. -0.110 \n4 Norway  Europe    &lt;tibble&gt; &lt;lm&gt;   1977-01-01    75.1 4044335    43237. -0.0544\n5 Norway  Europe    &lt;tibble&gt; &lt;lm&gt;   1982-01-01    75.8 4111650    49046. -0.148 \n# ℹ 7 more rows"
  },
  {
    "objectID": "model/many-models/many-models.html#plot-of-residuals-against-year-for-norway",
    "href": "model/many-models/many-models.html#plot-of-residuals-against-year-for-norway",
    "title": "Many models",
    "section": "Plot of residuals against year for Norway",
    "text": "Plot of residuals against year for Norway\n\n\nCode\nres_90c %&gt;% \n  filter(country == \"Norway\") %&gt;% \n  ggplot(mapping = aes(x = year, y = resid)) + \n  geom_point() +\n  geom_line() +\n  geom_hline(yintercept = 0)"
  },
  {
    "objectID": "model/many-models/many-models.html#plot-of-residuals-against-year-for-norway-1",
    "href": "model/many-models/many-models.html#plot-of-residuals-against-year-for-norway-1",
    "title": "Many models",
    "section": "Plot of residuals against year for Norway",
    "text": "Plot of residuals against year for Norway\n\n\nShows clear signs of autocorrelation"
  },
  {
    "objectID": "model/many-models/many-models.html#plot-residuals-for-all-countries",
    "href": "model/many-models/many-models.html#plot-residuals-for-all-countries",
    "title": "Many models",
    "section": "Plot residuals for all countries",
    "text": "Plot residuals for all countries\n\n\nCode\nres_90c %&gt;% \n  ggplot(mapping = aes(x = year, y = resid)) + \n  # because of group = country one line for each country\n  geom_line(aes(group = country), alpha = 1/6) +\n  # general smooth for all countries\n  geom_smooth(se = FALSE) +\n  geom_hline(yintercept = 0)"
  },
  {
    "objectID": "model/many-models/many-models.html#plot-residuals-for-all-countries-1",
    "href": "model/many-models/many-models.html#plot-residuals-for-all-countries-1",
    "title": "Many models",
    "section": "Plot residuals for all countries",
    "text": "Plot residuals for all countries"
  },
  {
    "objectID": "model/many-models/many-models.html#facetting-by-continent",
    "href": "model/many-models/many-models.html#facetting-by-continent",
    "title": "Many models",
    "section": "Facetting by continent",
    "text": "Facetting by continent\n\n\nCode\nres_90c %&gt;% \n  ggplot(mapping = aes(x = year, y = resid)) + \n  # because of group = country one line for each country\n  geom_line(aes(group = country), alpha = 1/3) +\n  geom_hline(yintercept = 0, colour = \"white\") +\n  facet_wrap(~continent)"
  },
  {
    "objectID": "model/many-models/many-models.html#facetting-by-continent-1",
    "href": "model/many-models/many-models.html#facetting-by-continent-1",
    "title": "Many models",
    "section": "Facetting by continent",
    "text": "Facetting by continent\n\n\nEurope is dull, all the action is in Africa."
  },
  {
    "objectID": "model/many-models/many-models.html#mean-lifeexp-over-country-not-population-per-continent",
    "href": "model/many-models/many-models.html#mean-lifeexp-over-country-not-population-per-continent",
    "title": "Many models",
    "section": "Mean lifeExp (over country not population) per continent",
    "text": "Mean lifeExp (over country not population) per continent\n\n\nCode\nby_country %&gt;% \n  unnest(c(data)) %&gt;% \n  group_by(continent, year) %&gt;% \n  summarise(mean_lifeExp = mean(lifeExp)\n           ) %&gt;% \n  ggplot(aes(x = year, y = mean_lifeExp, colour = continent)) +\n    geom_line(lwd = 1)"
  },
  {
    "objectID": "model/many-models/many-models.html#mean-lifeexp-over-country-not-population-per-continent-1",
    "href": "model/many-models/many-models.html#mean-lifeexp-over-country-not-population-per-continent-1",
    "title": "Many models",
    "section": "Mean lifeExp (over country not population) per continent",
    "text": "Mean lifeExp (over country not population) per continent"
  },
  {
    "objectID": "model/many-models/many-models.html#model-quality",
    "href": "model/many-models/many-models.html#model-quality",
    "title": "Many models",
    "section": "Model quality",
    "text": "Model quality\n\nFilter on a country\nGet model from tibble\nPick out the lm object and send it to summary\n\n\n\n\nCode\nby_country %&gt;% \n  filter(country %in% c(\"Norway\")) %&gt;% \n  .$model %&gt;%\n  .[[1]] %&gt;% \n  summary()"
  },
  {
    "objectID": "model/many-models/many-models.html#model-quality-cont.",
    "href": "model/many-models/many-models.html#model-quality-cont.",
    "title": "Many models",
    "section": "Model quality cont.",
    "text": "Model quality cont.\n\n\nCode\nby_country %&gt;% \n  filter(country %in% c(\"Norway\")) %&gt;% \n  .$model %&gt;%\n  .[[1]] %&gt;% \n  summary()  \n\n\n\nCall:\nlm(formula = lifeExp ~ year, data = a_df)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.78146 -0.26734 -0.08243  0.39243  0.63660 \n\nCoefficients:\n             Estimate Std. Error t value Pr(&gt;|t|)    \n(Intercept) 7.396e+01  2.033e-01  363.76  &lt; 2e-16 ***\nyear        4.619e-04  2.138e-05   21.61 1.01e-09 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.4668 on 10 degrees of freedom\nMultiple R-squared:  0.979, Adjusted R-squared:  0.9769 \nF-statistic:   467 on 1 and 10 DF,  p-value: 1.005e-09\n\n\n\nCumbersome\nPackage broom is your friend"
  },
  {
    "objectID": "model/many-models/many-models.html#model-quality-broomglance",
    "href": "model/many-models/many-models.html#model-quality-broomglance",
    "title": "Many models",
    "section": "Model quality; broom::glance()",
    "text": "Model quality; broom::glance()\n\n\nCode\noptions(tibble.width = 60)\nby_country %&gt;% \n  filter(\n    country %in% c(\"Norway\", \"Sweden\", \n                        \"Denmark\", \"Finland\")\n    ) %&gt;% \n  .$model %&gt;% \n  map_df(glance) %&gt;% \n  print()\n\n\n# A tibble: 4 × 12\n  r.squared adj.r.squared sigma statistic  p.value    df\n      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;\n1     0.952         0.948 0.641      200. 6.20e- 8     1\n2     0.994         0.994 0.345     1702. 1.68e-12     1\n3     0.979         0.977 0.467      467. 1.01e- 9     1\n4     0.998         0.998 0.152     4524. 1.28e-14     1\n# ℹ 6 more variables: logLik &lt;dbl&gt;, AIC &lt;dbl&gt;, BIC &lt;dbl&gt;,\n#   deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;"
  },
  {
    "objectID": "model/many-models/many-models.html#model-quality-broomglance-1",
    "href": "model/many-models/many-models.html#model-quality-broomglance-1",
    "title": "Many models",
    "section": "Model quality; broom::glance()",
    "text": "Model quality; broom::glance()\n\nBetter solution\n\nPut model summaries in by_country with mutate(mod_summary = )\nThen unnest(mod_summary)\n\n\n\n\n\nCode\nby_country %&gt;%\n    filter(\n    country %in% c(\n      \"Norway\", \"Sweden\",\n      \"Denmark\", \"Finland\"\n    )\n  ) %&gt;% \n  mutate(mod_summary = map(.x = model, .f = glance)) %&gt;%\n  unnest(mod_summary) %&gt;% \n  # don't want too many rows in the slide\n  print(n = 4)"
  },
  {
    "objectID": "model/many-models/many-models.html#model-quality-broomglance-2",
    "href": "model/many-models/many-models.html#model-quality-broomglance-2",
    "title": "Many models",
    "section": "Model quality; broom::glance()",
    "text": "Model quality; broom::glance()\n\n\nCode\nby_country %&gt;%\n    filter(\n    country %in% c(\n      \"Norway\", \"Sweden\",\n      \"Denmark\", \"Finland\"\n    )\n  ) %&gt;% \n  mutate(mod_summary = map(.x = model, .f = glance)) %&gt;%\n  unnest(mod_summary) %&gt;% \n  # don't want to may rows in the slide\n  print(n = 4)\n\n\n# A tibble: 4 × 17\n# Groups:   country, continent [4]\n  country continent data     model  res      r.squared\n  &lt;chr&gt;   &lt;chr&gt;     &lt;list&gt;   &lt;list&gt; &lt;list&gt;       &lt;dbl&gt;\n1 Denmark Europe    &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt;     0.952\n2 Finland Europe    &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt;     0.994\n3 Norway  Europe    &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt;     0.979\n4 Sweden  Europe    &lt;tibble&gt; &lt;lm&gt;   &lt;tibble&gt;     0.998\n# ℹ 11 more variables: adj.r.squared &lt;dbl&gt;, sigma &lt;dbl&gt;,\n#   statistic &lt;dbl&gt;, p.value &lt;dbl&gt;, df &lt;dbl&gt;, logLik &lt;dbl&gt;,\n#   AIC &lt;dbl&gt;, BIC &lt;dbl&gt;, deviance &lt;dbl&gt;,\n#   df.residual &lt;int&gt;, nobs &lt;int&gt;"
  },
  {
    "objectID": "model/many-models/many-models.html#model-quality-1",
    "href": "model/many-models/many-models.html#model-quality-1",
    "title": "Many models",
    "section": "Model quality",
    "text": "Model quality\n\n\nCode\nby_country %&gt;%\n  mutate(mod_summary = map(.x = model, .f = glance)) %&gt;%\n  unnest(mod_summary) %&gt;% \n  group_by(continent) %&gt;% \n  summarise(mean_r_adj = mean(adj.r.squared))\n\n\n# A tibble: 5 × 2\n  continent mean_r_adj\n  &lt;chr&gt;          &lt;dbl&gt;\n1 Africa         0.655\n2 Americas       0.918\n3 Asia           0.951\n4 Europe         0.982\n5 Oceania        0.686\n\n\n\nThe model seems to have the best fit in Europe\nThe worst fit in Africa"
  },
  {
    "objectID": "model/many-models/many-models.html#model-quality-preserve-mod_summary",
    "href": "model/many-models/many-models.html#model-quality-preserve-mod_summary",
    "title": "Many models",
    "section": "Model quality, preserve mod_summary",
    "text": "Model quality, preserve mod_summary\n\n\nCode\nby_country &lt;- by_country %&gt;%\n  mutate(mod_summary = map(.x = model, .f = glance))\n\n\n\n\nCode\nby_country %&gt;% \n  # drop = TRUE, deprecated, use select() instead\n  select(-data, -model, -res) %&gt;% \n  # new interface, wrap in c()\n  unnest(c(mod_summary)) %&gt;% \n  print(n = 4)\n\n\n# A tibble: 90 × 14\n# Groups:   country, continent [90]\n  country  continent r.squared adj.r.squared sigma statistic\n  &lt;chr&gt;    &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;\n1 Argenti… Americas      0.962         0.958 0.882    252.  \n2 Austral… Oceania       0.983         0.981 0.589    581.  \n3 Austria  Europe        0.991         0.990 0.441   1052.  \n4 Burundi  Africa        0.456         0.402 8.32       8.40\n# ℹ 86 more rows\n# ℹ 8 more variables: p.value &lt;dbl&gt;, df &lt;dbl&gt;,\n#   logLik &lt;dbl&gt;, AIC &lt;dbl&gt;, BIC &lt;dbl&gt;, deviance &lt;dbl&gt;,\n#   df.residual &lt;int&gt;, nobs &lt;int&gt;"
  },
  {
    "objectID": "model/many-models/many-models.html#the-10-best-models",
    "href": "model/many-models/many-models.html#the-10-best-models",
    "title": "Many models",
    "section": "The 10 best models",
    "text": "The 10 best models\n\n\nCode\nby_country %&gt;% \n  # drop = TRUE, deprecated, use select() instead\n  select(-data, -model, -res) %&gt;% \n  # new interface, wrap in c()\n  unnest(c(mod_summary)) %&gt;% \n  arrange(desc(adj.r.squared)) %&gt;% \n  print(n = 10)\n\n\n# A tibble: 90 × 14\n# Groups:   country, continent [90]\n   country continent r.squared adj.r.squared sigma statistic\n   &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;\n 1 France  Europe        0.998         0.998 0.168     6500.\n 2 Sweden  Europe        0.998         0.998 0.152     4524.\n 3 Singap… Asia          0.997         0.997 0.353     3183.\n 4 Italy   Europe        0.997         0.996 0.274     3076.\n 5 Bolivia Americas      0.996         0.995 0.634     2215.\n 6 Belgium Europe        0.995         0.994 0.293     1866.\n 7 Finland Europe        0.994         0.994 0.345     1702.\n 8 Luxemb… Europe        0.993         0.993 0.370     1486.\n 9 Haiti   Americas      0.993         0.993 0.613     1483.\n10 Maurit… Africa        0.993         0.992 0.590     1453.\n# ℹ 80 more rows\n# ℹ 8 more variables: p.value &lt;dbl&gt;, df &lt;dbl&gt;,\n#   logLik &lt;dbl&gt;, AIC &lt;dbl&gt;, BIC &lt;dbl&gt;, deviance &lt;dbl&gt;,\n#   df.residual &lt;int&gt;, nobs &lt;int&gt;"
  },
  {
    "objectID": "model/many-models/many-models.html#the-10-worst-models",
    "href": "model/many-models/many-models.html#the-10-worst-models",
    "title": "Many models",
    "section": "The 10 worst models",
    "text": "The 10 worst models\n\n\nCode\nby_country %&gt;% \n  # drop = TRUE, deprecated, use select() instead\n  select(-data, -model, -res) %&gt;% \n  # new interface, wrap in c()\n  unnest(c(mod_summary)) %&gt;% \n  arrange(adj.r.squared) %&gt;% \n  print(n = 10)\n\n\n# A tibble: 90 × 14\n# Groups:   country, continent [90]\n   country continent r.squared adj.r.squared sigma statistic\n   &lt;chr&gt;   &lt;chr&gt;         &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;\n 1 Zambia  Africa       0.0574       -0.0369  5.17     0.609\n 2 Zimbab… Africa       0.0585       -0.0357  5.80     0.621\n 3 South … Africa       0.0633       -0.0304  4.50     0.675\n 4 Lesotho Africa       0.233         0.157   4.66     3.04 \n 5 Botswa… Africa       0.256         0.181   4.70     3.43 \n 6 Kenya   Africa       0.262         0.188   3.38     3.55 \n 7 Centra… Africa       0.271         0.199   2.49     3.73 \n 8 Fiji    Oceania      0.386         0.325   1.22     6.30 \n 9 Burundi Africa       0.456         0.402   8.32     8.40 \n10 Malawi  Africa       0.613         0.575   4.20    15.9  \n# ℹ 80 more rows\n# ℹ 8 more variables: p.value &lt;dbl&gt;, df &lt;dbl&gt;,\n#   logLik &lt;dbl&gt;, AIC &lt;dbl&gt;, BIC &lt;dbl&gt;, deviance &lt;dbl&gt;,\n#   df.residual &lt;int&gt;, nobs &lt;int&gt;"
  },
  {
    "objectID": "model/many-models/many-models.html#plot-adj.r.square-and-sigma-by-continent",
    "href": "model/many-models/many-models.html#plot-adj.r.square-and-sigma-by-continent",
    "title": "Many models",
    "section": "Plot adj.r.square and sigma by continent",
    "text": "Plot adj.r.square and sigma by continent\n\n\nCode\nby_country %&gt;% \n  # unnest data to get to pop\n  unnest(c(data, mod_summary)) %&gt;% \n  ggplot(mapping = aes(x = sigma, y = adj.r.squared, \n                       colour = continent, size = pop)) +\n  geom_point(alpha = 0.3) +\n  theme(legend.position = \"bottom\")"
  },
  {
    "objectID": "model/many-models/many-models.html#plot-adj.r.square-and-sigma-by-continent-1",
    "href": "model/many-models/many-models.html#plot-adj.r.square-and-sigma-by-continent-1",
    "title": "Many models",
    "section": "Plot adj.r.square and sigma by continent",
    "text": "Plot adj.r.square and sigma by continent"
  },
  {
    "objectID": "model/many-models/many-models.html#plot-of-the-worst-fits",
    "href": "model/many-models/many-models.html#plot-of-the-worst-fits",
    "title": "Many models",
    "section": "Plot of the worst fits",
    "text": "Plot of the worst fits\n\n\nCode\n# Special case Rwanda\nrw &lt;- by_country %&gt;% filter(country == \"Rwanda\") %&gt;% unnest(c(data,mod_summary))\nby_country %&gt;% \n    # unnest data to get to pop\n  unnest(c(data, mod_summary)) %&gt;% \n  filter(continent == \"Africa\") %&gt;% \n  filter(adj.r.squared &lt; 0.25) %&gt;% \n  ggplot(mapping = aes(x = year, y = lifeExp, colour = country)) +\n  geom_line(lwd=1) + \n  geom_line(data = rw, mapping = aes(x = year, y = lifeExp), colour = \"black\", lwd=1) +\n  ggtitle(\"AIDS and genocide in Rwanda 1994\")"
  },
  {
    "objectID": "model/many-models/many-models.html#plot-of-the-worst-fits-1",
    "href": "model/many-models/many-models.html#plot-of-the-worst-fits-1",
    "title": "Many models",
    "section": "Plot of the worst fits",
    "text": "Plot of the worst fits"
  },
  {
    "objectID": "model/many-models/many-models.html#difference-2007-2017",
    "href": "model/many-models/many-models.html#difference-2007-2017",
    "title": "Many models",
    "section": "Difference 2007 2017",
    "text": "Difference 2007 2017\n\nCompare previous figure with a similar one in r4ds 25.2.4\nWhat do we see?\n\nThe effect of cheap and available AIDS drugs (from 2000-)"
  },
  {
    "objectID": "model/many-models/many-models.html#details-list-columns",
    "href": "model/many-models/many-models.html#details-list-columns",
    "title": "Many models",
    "section": "Details list-columns",
    "text": "Details list-columns\n\ndata frame: a named list of equal length vectors\nA list is one of Rs vector types\nAlways been permissible to have a list of dataframes as a vector in a dataframe\nNot easy in classic R\nNew tools make it a lot easier"
  },
  {
    "objectID": "model/many-models/many-models.html#how-classic-rs-data.frame-function-handles-a-list-of-vectors",
    "href": "model/many-models/many-models.html#how-classic-rs-data.frame-function-handles-a-list-of-vectors",
    "title": "Many models",
    "section": "How classic Rs data.frame() function handles a list of vectors",
    "text": "How classic Rs data.frame() function handles a list of vectors\n\n\nCode\n# we want a list with two vectors\ndata.frame(x = list(1:3, 3:5))\n\n\n  x.1.3 x.3.5\n1     1     3\n2     2     4\n3     3     5\n\n\n\nGet two columns\nCan force the matter with I()\n\n\n\n\nCode\n# I() Inhibit Interpretation/Conversion of Objects\na_df &lt;- data.frame(x = I(list(1:3, 3:5)))\na_df\n\n\n        x\n1 1, 2, 3\n2 3, 4, 5\n\n\nCode\na_df$x[[1]]\n\n\n[1] 1 2 3\n\n\nCode\na_df$x[[2]]\n\n\n[1] 3 4 5"
  },
  {
    "objectID": "model/many-models/many-models.html#not-a-problem-with-tribblestibbels",
    "href": "model/many-models/many-models.html#not-a-problem-with-tribblestibbels",
    "title": "Many models",
    "section": "Not a problem with tribbles/tibbels",
    "text": "Not a problem with tribbles/tibbels\n\n\nCode\ntibble(x = list(1:3, 3:5))\n\n\n# A tibble: 2 × 1\n  x        \n  &lt;list&gt;   \n1 &lt;int [3]&gt;\n2 &lt;int [3]&gt;\n\n\n\n\nCode\ntribble(\n  ~x,\n  1:3,\n  3:5\n)\n\n\n# A tibble: 2 × 1\n  x        \n  &lt;list&gt;   \n1 &lt;int [3]&gt;\n2 &lt;int [3]&gt;\n\n\n\ntribble() even makes a list for us\nList-columns handy for storing things, but we typically need to “unpack” them before use\nRemember: Most R functions work with vectors and/or dataframes"
  },
  {
    "objectID": "model/many-models/many-models.html#list-column-pipe-line",
    "href": "model/many-models/many-models.html#list-column-pipe-line",
    "title": "Many models",
    "section": "List-column pipe line",
    "text": "List-column pipe line\n\nCreate\n\nnest()\nsummarise() + list()\nmutate() + map()\n\nMake additional list-columns by transforming existing list-columns with\n\nmap(),\nmap2() or\npmap().\n\nEx. transforming a list-column of dataframes (with data) to a list-column of models."
  },
  {
    "objectID": "model/many-models/many-models.html#list-column-pipe-line-cont.",
    "href": "model/many-models/many-models.html#list-column-pipe-line-cont.",
    "title": "Many models",
    "section": "List-column pipe line cont.",
    "text": "List-column pipe line cont.\n\nThen further transforming a list-column of models to a listcolumn of model summaries\nFinally one simplify list-columns back to vector or dataframes ready to use by regular R functions mutate() with\n\nmap_chr(),\nmap_lgl(),\nmap_int() and\nmap_dbl()\n\nunnest(c(list-column1, list-column2, etc.)). - Note you now have to use c() even with one list-column.\n\n\n-   Option `drop = TRUE` is now depricated.\n\n-   Use `select(-list-column, etc)` before `unnest()` if you want to\n    drop some columns."
  },
  {
    "objectID": "model/many-models/many-models.html#list-to-vector",
    "href": "model/many-models/many-models.html#list-to-vector",
    "title": "Many models",
    "section": "List to vector",
    "text": "List to vector\n\nGet type and length, always works\nUseful for filter()\n\n\n\n\nCode\n# all sorts\na_trib &lt;- tribble(\n  ~x,\n  letters[1:5],\n  1:3,\n  runif(5)\n)\n\na_trib %&gt;% mutate(\n  # if we use plain map we get a list. NOT what we want.\n  type = map_chr(.x = x, .f = typeof),\n  length = map_int(.x = x, .f = length)\n)\n\n\n# A tibble: 3 × 3\n  x         type      length\n  &lt;list&gt;    &lt;chr&gt;      &lt;int&gt;\n1 &lt;chr [5]&gt; character      5\n2 &lt;int [3]&gt; integer        3\n3 &lt;dbl [5]&gt; double         5"
  },
  {
    "objectID": "model/many-models/many-models.html#list-to-vector-1",
    "href": "model/many-models/many-models.html#list-to-vector-1",
    "title": "Many models",
    "section": "List to vector",
    "text": "List to vector\n\n\nCode\na_trib %&gt;% mutate(\n  # if we use plain map we get a list. NOT what we want.\n  type = map_chr(.x = x, .f = typeof),\n  length = map_int(.x = x, .f = length)\n) %&gt;% \n  filter(length == 5)\n\n\n# A tibble: 2 × 3\n  x         type      length\n  &lt;list&gt;    &lt;chr&gt;      &lt;int&gt;\n1 &lt;chr [5]&gt; character      5\n2 &lt;dbl [5]&gt; double         5\n\n\nCode\na_trib %&gt;% mutate(\n  # if we use plain map we get a list. NOT what we want.\n  type = map_chr(.x = x, .f = typeof),\n  length = map_int(.x = x, .f = length)\n) %&gt;% \n  filter(type == \"double\")\n\n\n# A tibble: 1 × 3\n  x         type   length\n  &lt;list&gt;    &lt;chr&gt;   &lt;int&gt;\n1 &lt;dbl [5]&gt; double      5"
  },
  {
    "objectID": "model/many-models/many-models.html#list-to-vector-2",
    "href": "model/many-models/many-models.html#list-to-vector-2",
    "title": "Many models",
    "section": "List to vector",
    "text": "List to vector\n\nUse argument .null = to provide for missing values\n\n\n\n\nCode\na_trib &lt;- tribble(\n  ~x,\n  list(a = 1, b = 2),\n  list(a = 2, c = 4)\n)\na_trib\n\n\n# A tibble: 2 × 1\n  x               \n  &lt;list&gt;          \n1 &lt;named list [2]&gt;\n2 &lt;named list [2]&gt;"
  },
  {
    "objectID": "model/many-models/many-models.html#list-to-vector-3",
    "href": "model/many-models/many-models.html#list-to-vector-3",
    "title": "Many models",
    "section": "List to vector",
    "text": "List to vector\n\n\nCode\na_trib  %&gt;% mutate(\n  # pick the values for a's\n  a = map_dbl(x, \"a\"),\n  #pick the values b's, NA_real_ if missing. \n  # No b in the second list\n  b = map_dbl(x, \"b\", .null = NA_real_)\n)\n\n\n# A tibble: 2 × 3\n  x                    a     b\n  &lt;list&gt;           &lt;dbl&gt; &lt;dbl&gt;\n1 &lt;named list [2]&gt;     1     2\n2 &lt;named list [2]&gt;     2    NA"
  },
  {
    "objectID": "model/many-models/many-models.html#unnest",
    "href": "model/many-models/many-models.html#unnest",
    "title": "Many models",
    "section": "unnest()",
    "text": "unnest()\n\nRepeats the regular columns once for each element of the list-column.\n\n\n\n\nCode\na_tib &lt;- tibble(x = 1:2, y = list(1:4, 1))\na_tib\n\n\n# A tibble: 2 × 2\n      x y        \n  &lt;int&gt; &lt;list&gt;   \n1     1 &lt;int [4]&gt;\n2     2 &lt;dbl [1]&gt;\n\n\nCode\na_tib %&gt;% unnest(c(y))\n\n\n# A tibble: 5 × 2\n      x     y\n  &lt;int&gt; &lt;dbl&gt;\n1     1     1\n2     1     2\n3     1     3\n4     1     4\n5     2     1"
  },
  {
    "objectID": "model/many-models/many-models.html#unnest-1",
    "href": "model/many-models/many-models.html#unnest-1",
    "title": "Many models",
    "section": "unnest()",
    "text": "unnest()\n\n\nCode\na_tib &lt;- tibble(x = list(1:2, 1:5), y = list(1:4, 1))\na_tib\n\n\n# A tibble: 2 × 2\n  x         y        \n  &lt;list&gt;    &lt;list&gt;   \n1 &lt;int [2]&gt; &lt;int [4]&gt;\n2 &lt;int [5]&gt; &lt;dbl [1]&gt;\n\n\nCode\na_tib %&gt;% unnest(c(y))\n\n\n# A tibble: 5 × 2\n  x             y\n  &lt;list&gt;    &lt;dbl&gt;\n1 &lt;int [2]&gt;     1\n2 &lt;int [2]&gt;     2\n3 &lt;int [2]&gt;     3\n4 &lt;int [2]&gt;     4\n5 &lt;int [5]&gt;     1"
  },
  {
    "objectID": "model/many-models/many-models.html#unnest-2",
    "href": "model/many-models/many-models.html#unnest-2",
    "title": "Many models",
    "section": "unnest()",
    "text": "unnest()\n\n\nCode\na_tib %&gt;% unnest(c(x))\n\n\n# A tibble: 7 × 2\n      x y        \n  &lt;int&gt; &lt;list&gt;   \n1     1 &lt;int [4]&gt;\n2     2 &lt;int [4]&gt;\n3     1 &lt;dbl [1]&gt;\n4     2 &lt;dbl [1]&gt;\n5     3 &lt;dbl [1]&gt;\n6     4 &lt;dbl [1]&gt;\n7     5 &lt;dbl [1]&gt;\n\n\n\n\nCode\n# Does not work, different number of elements in rows\na_tib %&gt;% unnest(c(x, y))\n\n\nReturns: Error: Incompatible lengths: 2, 4. Run rlang::last_error() to see where the error occurred."
  },
  {
    "objectID": "model/many-models/many-models.html#unnest-3",
    "href": "model/many-models/many-models.html#unnest-3",
    "title": "Many models",
    "section": "unnest()",
    "text": "unnest()\n\n\nCode\na_tib &lt;- tibble(x = list(1:2, 1:3), y = list(10:11, 1))\na_tib\n\n\n# A tibble: 2 × 2\n  x         y        \n  &lt;list&gt;    &lt;list&gt;   \n1 &lt;int [2]&gt; &lt;int [2]&gt;\n2 &lt;int [3]&gt; &lt;dbl [1]&gt;\n\n\n\n\nCode\n# same number of elemets or vector of length 1\na_tib %&gt;% unnest(c(x, y))\n\n\n# A tibble: 5 × 2\n      x     y\n  &lt;int&gt; &lt;dbl&gt;\n1     1    10\n2     2    11\n3     1     1\n4     2     1\n5     3     1\n\n\n\nSame with list-columns of dataframes. You can unnest multiple list columns, but the data frames in each row must have the same number of rows."
  },
  {
    "objectID": "model/many-models/many-models.html#more-from-broom",
    "href": "model/many-models/many-models.html#more-from-broom",
    "title": "Many models",
    "section": "More from broom",
    "text": "More from broom\n\nWe used broom::glance(model) above.\nWe also have: broom::tidy(model) and broom:augment(model, data)"
  },
  {
    "objectID": "model/many-models/many-models.html#tidy-data-with-broom",
    "href": "model/many-models/many-models.html#tidy-data-with-broom",
    "title": "Many models",
    "section": "Tidy data with broom",
    "text": "Tidy data with broom\n\nGives us model coefficients and accompanying statistics\n\n\n\n\nCode\nby_country &lt;- by_country %&gt;%\n  mutate(mod_tidy = map(.x = model, .f = tidy))\n\n\n\n\nCode\nby_country %&gt;%\n  select(-data, -res, -mod_summary) %&gt;% \n  unnest(mod_tidy) %&gt;% \n  print(n = 4)\n\n\n# A tibble: 180 × 8\n# Groups:   country, continent [90]\n  country continent model term  estimate std.error statistic\n  &lt;chr&gt;   &lt;chr&gt;     &lt;lis&gt; &lt;chr&gt;    &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 Argent… Americas  &lt;lm&gt;  (Int…  6.67e+1 0.384         174. \n2 Argent… Americas  &lt;lm&gt;  year   6.41e-4 0.0000404      15.9\n3 Austra… Oceania   &lt;lm&gt;  (Int…  7.21e+1 0.256         281. \n4 Austra… Oceania   &lt;lm&gt;  year   6.50e-4 0.0000270      24.1\n# ℹ 176 more rows\n# ℹ 1 more variable: p.value &lt;dbl&gt;"
  },
  {
    "objectID": "model/many-models/many-models.html#tidy-data-with-broom-1",
    "href": "model/many-models/many-models.html#tidy-data-with-broom-1",
    "title": "Many models",
    "section": "Tidy data with broom",
    "text": "Tidy data with broom\n\nNow we can do things like\n\n\n\n\nCode\nby_country &lt;- by_country %&gt;%\n  mutate(\n new18 = map(c(ymd(\"2018-01-01\")), as_tibble_col, column_name = \"year\"),\n pred18 = map2(model, new18, predict.lm)\n) \n\nby_country %&gt;% \n  group_by(continent) %&gt;% \n  unnest(pred18 ) %&gt;% \n  summarise(mean_p18 = mean(pred18),\n            sd_p18 = sd(pred18),\n            min_p18 = min(pred18),\n            max_p18 = max(pred18))\n\n\n# A tibble: 5 × 5\n  continent mean_p18 sd_p18 min_p18 max_p18\n  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;\n1 Africa        62.5  7.01     49.2    81.1\n2 Americas      77.2  4.26     65.1    84.8\n3 Asia          77.6  6.23     67.0    85.7\n4 Europe        82.2  0.962    80.1    83.9\n5 Oceania       70.2 12.4      58.9    83.5"
  },
  {
    "objectID": "model/many-models/many-models.html#broomaugment",
    "href": "model/many-models/many-models.html#broomaugment",
    "title": "Many models",
    "section": "broom:augment()",
    "text": "broom:augment()\n\naugment() gives us a lot of goodies regarding the model\n\n\n\n\nCode\nby_country &lt;- by_country %&gt;%\n  mutate(mod_aug = map(.x = model, .f = augment))\n\n\n\n\nCode\nby_country %&gt;%\n  select(-data, -res, -mod_summary, -mod_tidy, -c(model:pred18)) %&gt;% \n  unnest(mod_aug) %&gt;% \n  print(n = 4)\n\n\n# A tibble: 1,080 × 10\n# Groups:   country, continent [90]\n  country  continent lifeExp year       .fitted .resid  .hat\n  &lt;chr&gt;    &lt;chr&gt;       &lt;dbl&gt; &lt;date&gt;       &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;\n1 Argenti… Americas     64.4 1962-01-01    64.8 -0.365 0.295\n2 Argenti… Americas     64.9 1967-01-01    66.0 -1.06  0.225\n3 Argenti… Americas     66.2 1972-01-01    67.1 -0.945 0.169\n4 Argenti… Americas     68.4 1977-01-01    68.3  0.105 0.127\n# ℹ 1,076 more rows\n# ℹ 3 more variables: .sigma &lt;dbl&gt;, .cooksd &lt;dbl&gt;,\n#   .std.resid &lt;dbl&gt;"
  },
  {
    "objectID": "model/many-models/many-models.html#still-more-broom",
    "href": "model/many-models/many-models.html#still-more-broom",
    "title": "Many models",
    "section": "Still more broom!",
    "text": "Still more broom!\n\nTo learn more have a look at the broom package vignettes.\n\nFind broom under packages and click the link\nLinks to the vignettes are at the top of the page"
  },
  {
    "objectID": "model/many-models/many-models.html#references",
    "href": "model/many-models/many-models.html#references",
    "title": "Many models",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nCarr, Dan, Nicholas Lewin-Koh, and Martin Maechler. 2023. Hexbin: Hexagonal Binning Routines. https://github.com/edzer/hexbin.\n\n\nGrolemund, Garrett, and Hadley Wickham. 2011. “Dates and Times Made Easy with lubridate.” Journal of Statistical Software 40 (3): 1–25. https://www.jstatsoft.org/v40/i03/.\n\n\nPedersen, Thomas Lin. 2022. Patchwork: The Composer of Plots. https://CRAN.R-project.org/package=patchwork.\n\n\nSpinu, Vitalie, Garrett Grolemund, and Hadley Wickham. 2023. Lubridate: Make Dealing with Dates a Little Easier. https://CRAN.R-project.org/package=lubridate.\n\n\nTrapletti, Adrian, and Kurt Hornik. 2023. Tseries: Time Series Analysis and Computational Finance. https://CRAN.R-project.org/package=tseries.\n\n\nWickham, Hadley. 2021. Nycflights13: Flights That Departed NYC in 2013. https://github.com/hadley/nycflights13.\n\n\n———. 2023a. Modelr: Modelling Functions That Work with the Pipe. https://CRAN.R-project.org/package=modelr.\n\n\n———. 2023b. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "model/model-building/model-building.html#introduction",
    "href": "model/model-building/model-building.html#introduction",
    "title": "Model building",
    "section": "Introduction",
    "text": "Introduction\n\nWill look at two models\n\nDiamonds (data in ggplot2)\nNYCflights13 (data in nycflights13) also needs lubridate\n\nWill follow r4ds"
  },
  {
    "objectID": "model/model-building/model-building.html#diamonds",
    "href": "model/model-building/model-building.html#diamonds",
    "title": "Model building",
    "section": "Diamonds",
    "text": "Diamonds\n\nIn the dataset diamonds of lower quality seems to obtain higher prices\nWorse cut higher price\n\n\n\n\nCode\nggplot(diamonds, aes(cut, price)) + geom_boxplot() +\n  ggtitle(\"The connection between quality of cut and price\")"
  },
  {
    "objectID": "model/model-building/model-building.html#diamonds-1",
    "href": "model/model-building/model-building.html#diamonds-1",
    "title": "Model building",
    "section": "Diamonds",
    "text": "Diamonds"
  },
  {
    "objectID": "model/model-building/model-building.html#diamonds-2",
    "href": "model/model-building/model-building.html#diamonds-2",
    "title": "Model building",
    "section": "Diamonds",
    "text": "Diamonds\n\n\nCode\nggplot(diamonds, aes(color, price)) + geom_boxplot() +\n  ggtitle(\"The connection between quality of colour and price\")"
  },
  {
    "objectID": "model/model-building/model-building.html#diamonds-3",
    "href": "model/model-building/model-building.html#diamonds-3",
    "title": "Model building",
    "section": "Diamonds",
    "text": "Diamonds"
  },
  {
    "objectID": "model/model-building/model-building.html#diamonds-4",
    "href": "model/model-building/model-building.html#diamonds-4",
    "title": "Model building",
    "section": "Diamonds",
    "text": "Diamonds\n\n\nCode\nggplot(diamonds, aes(clarity, price)) + geom_boxplot() +\n  ggtitle(\"The connection between clarity and price\")"
  },
  {
    "objectID": "model/model-building/model-building.html#diamonds-5",
    "href": "model/model-building/model-building.html#diamonds-5",
    "title": "Model building",
    "section": "Diamonds",
    "text": "Diamonds"
  },
  {
    "objectID": "model/model-building/model-building.html#whats-going-on",
    "href": "model/model-building/model-building.html#whats-going-on",
    "title": "Model building",
    "section": "What’s going on?",
    "text": "What’s going on?\n\nConfounding variable\nA missing variable that is negatively correlated with the variables above\n\nSize, bigger diamonds are often of less quality, but\nlarge diamonds sell for a higher price\nsize often measured by weight, carats"
  },
  {
    "objectID": "model/model-building/model-building.html#diamonds-2-exclude-big-diamonds",
    "href": "model/model-building/model-building.html#diamonds-2-exclude-big-diamonds",
    "title": "Model building",
    "section": "Diamonds 2; exclude big diamonds",
    "text": "Diamonds 2; exclude big diamonds\n\n\nCode\ndiamonds2 &lt;- diamonds %&gt;% \n  filter(carat &lt;= 2.5)"
  },
  {
    "objectID": "model/model-building/model-building.html#connection-between-size-and-price",
    "href": "model/model-building/model-building.html#connection-between-size-and-price",
    "title": "Model building",
    "section": "Connection between size and price",
    "text": "Connection between size and price\n\n\nCode\ng1 &lt;- ggplot(data = diamonds2) + \n  geom_point(mapping = aes(x = carat, y = price), \n             size = 0.3,\n             alpha = 0.05\n             )\ng2 &lt;- ggplot(diamonds2, aes(x = carat, y = price)) + \n  geom_hex(bins = 50)\n# made possible by patchwork\ng1 + g2"
  },
  {
    "objectID": "model/model-building/model-building.html#connection-between-size-and-price-1",
    "href": "model/model-building/model-building.html#connection-between-size-and-price-1",
    "title": "Model building",
    "section": "Connection between size and price",
    "text": "Connection between size and price"
  },
  {
    "objectID": "model/model-building/model-building.html#non-linear-relationship-between-carat-and-price",
    "href": "model/model-building/model-building.html#non-linear-relationship-between-carat-and-price",
    "title": "Model building",
    "section": "Non-linear relationship between carat and price",
    "text": "Non-linear relationship between carat and price\n\nTransform the two variables to get rid of the non-linearity\nUse ln (log()) instead of log2,since the former is a more common transformation in econometrics\nlog log gives us an elasticity (norsk: elastisitet)\np percentage change in size (carat) gives \\(e^{ln((100+p)/100)\\hat{\\beta}}\\) percentage change in price."
  },
  {
    "objectID": "model/model-building/model-building.html#non-linear-relationship-between-carat-and-price-1",
    "href": "model/model-building/model-building.html#non-linear-relationship-between-carat-and-price-1",
    "title": "Model building",
    "section": "Non-linear relationship between carat and price",
    "text": "Non-linear relationship between carat and price\n\n\nCode\ng3 &lt;- ggplot(data = diamonds2) + \n  geom_point(mapping = aes(x = log(carat), y = log(price)), \n             size = 0.3,\n             alpha = 0.05\n  )\ng4 &lt;- ggplot(diamonds2, aes(x = log(carat), y = log(price))) + \n  geom_hex(bins = 50)\ng3 + g4"
  },
  {
    "objectID": "model/model-building/model-building.html#non-linear-relationship-between-carat-and-price-2",
    "href": "model/model-building/model-building.html#non-linear-relationship-between-carat-and-price-2",
    "title": "Model building",
    "section": "Non-linear relationship between carat and price",
    "text": "Non-linear relationship between carat and price"
  },
  {
    "objectID": "model/model-building/model-building.html#model-log-log",
    "href": "model/model-building/model-building.html#model-log-log",
    "title": "Model building",
    "section": "Model log log",
    "text": "Model log log\n\n\nCode\nmod_ll &lt;- 'log(price) ~ log(carat)'\nlm_ll &lt;- lm(formula = mod_ll, data = diamonds2)\ncoefficients(lm_ll)\n\n\n(Intercept)  log(carat) \n   8.452142    1.681371"
  },
  {
    "objectID": "model/model-building/model-building.html#model-log-log-cont.",
    "href": "model/model-building/model-building.html#model-log-log-cont.",
    "title": "Model building",
    "section": "Model log log cont.",
    "text": "Model log log cont.\n\nHow much will a 10% increase in size on average increase price?\n\n\\(e^{ln((100+s)/100)\\hat{\\beta}} = e^{ln((100+10)/100)·1.6814} \\approx 0,16\\), dvs 10% økning i størrelse gir 16% økning i pris (husk at log() er ln i R)\n\nHow much will a 1% increase in size on average increase price?\n\n\\(e^{ln((100+s)/100)\\hat{\\beta}} = e^{ln((100+1)/100)·1.6814} \\approx 0,01673\\), dvs 1% økning i størrelse gir 1,67% økning i pris. For small changes in size the relative price change is approximately equal to the coefficient (1.6814)."
  },
  {
    "objectID": "model/model-building/model-building.html#checking-residuals-for-normality",
    "href": "model/model-building/model-building.html#checking-residuals-for-normality",
    "title": "Model building",
    "section": "Checking residuals for normality",
    "text": "Checking residuals for normality\n\n\nCode\ndiamonds2 &lt;- diamonds2 %&gt;% \n  add_residuals(lm_ll, var = \"resid_lm_ll\")\n\nres_m &lt;- mean(diamonds2$resid_lm_ll)\nres_sd &lt;- sd(diamonds2$resid_lm_ll)\n\ndiamonds2 %&gt;% \n  ggplot() +\n  geom_histogram(mapping = aes(x = resid_lm_ll, y = ..density..),\n    alpha = 0.3, binwidth = 0.01) +\n  stat_function(fun = dnorm, args = list(mean = res_m, sd = res_sd))"
  },
  {
    "objectID": "model/model-building/model-building.html#checking-residuals-for-normality-1",
    "href": "model/model-building/model-building.html#checking-residuals-for-normality-1",
    "title": "Model building",
    "section": "Checking residuals for normality",
    "text": "Checking residuals for normality"
  },
  {
    "objectID": "model/model-building/model-building.html#checking-residuals-for-normality-2",
    "href": "model/model-building/model-building.html#checking-residuals-for-normality-2",
    "title": "Model building",
    "section": "Checking residuals for normality",
    "text": "Checking residuals for normality\n\n\nCode\njarque.bera.test(diamonds2$resid_lm_ll)\n\n\n\n    Jarque Bera Test\n\ndata:  diamonds2$resid_lm_ll\nX-squared = 1345.4, df = 2, p-value &lt; 2.2e-16\n\n\n\nVisual inspection: The assumption of normal distribution of residuals not to bad.\njarque-bera-test: The residuals are not normally distributed."
  },
  {
    "objectID": "model/model-building/model-building.html#problems-with-the-model",
    "href": "model/model-building/model-building.html#problems-with-the-model",
    "title": "Model building",
    "section": "Problems with the model",
    "text": "Problems with the model\n\nMissing variable bias.\n\nWhen important variables are missing from the model the coefficients estimated in the model will be biased\nsize (carat) is probably correlated with cut, colour and clarity and will draw with it some of the effects that are in reality caused by the latter three variables.\nWe will underestimate the importance of size, since on average larger diamonds seems to be of lower quality.\nIf we compare diamonds of equal quality size will have a bigger effect than what is implied by the simple model.\n\nNaive backtransformation bias"
  },
  {
    "objectID": "model/model-building/model-building.html#problems-with-the-model-cont.",
    "href": "model/model-building/model-building.html#problems-with-the-model-cont.",
    "title": "Model building",
    "section": "Problems with the model cont.",
    "text": "Problems with the model cont.\n\nNaive backtransformation exp(log_price_p) will also introduce bias.\n\nMiller 1984\nDuan 1983\nNewman 1993"
  },
  {
    "objectID": "model/model-building/model-building.html#problems-with-the-model-cont.-1",
    "href": "model/model-building/model-building.html#problems-with-the-model-cont.-1",
    "title": "Model building",
    "section": "Problems with the model cont.",
    "text": "Problems with the model cont.\n\nThere is mixed results on how munch better these more advanced backtransformations are in practice.\nIn this case, I tried them, it seems that the naive backtransformation works as well (RMSE; Root Mean Square Error), if not better, than the more advanced alternatives.\nThe reason might be that the two biases work in different directions. &gt; - The bias caused by missing variables will lower the estimate of the size (carat) coefficient.\n\nThe bias caused by the naive backtransformation tend to heighten the same estimate."
  },
  {
    "objectID": "model/model-building/model-building.html#checking-correlations-between-carat-cut-colour-and-clarity-pairs",
    "href": "model/model-building/model-building.html#checking-correlations-between-carat-cut-colour-and-clarity-pairs",
    "title": "Model building",
    "section": "Checking correlations between carat, cut, colour and clarity (pairs())",
    "text": "Checking correlations between carat, cut, colour and clarity (pairs())\n\npairs() is a nice tool, but doesn’t work so well with big datasets (we drawn a sample of 200 observation from 53814) and categorical variables.\n\n\n\n\nCode\ndiamonds2 %&gt;% \n  select(carat, cut, color, clarity) %&gt;%\n  slice_sample(n = 200) %&gt;% \n  pairs()"
  },
  {
    "objectID": "model/model-building/model-building.html#checking-correlations-between-carat-cut-colour-and-clarity-pairs-1",
    "href": "model/model-building/model-building.html#checking-correlations-between-carat-cut-colour-and-clarity-pairs-1",
    "title": "Model building",
    "section": "Checking correlations between carat, cut, colour and clarity (pairs())",
    "text": "Checking correlations between carat, cut, colour and clarity (pairs())"
  },
  {
    "objectID": "model/model-building/model-building.html#checking-correlations-between-carat-cut-colour-and-clarity",
    "href": "model/model-building/model-building.html#checking-correlations-between-carat-cut-colour-and-clarity",
    "title": "Model building",
    "section": "Checking correlations between carat, cut, colour and clarity",
    "text": "Checking correlations between carat, cut, colour and clarity\n\nNegative correlation between carat and cut, carat and clarity\nPositive correlation between carat and (bad) colour\nThe bigger the diamond the worse cut, colour and clarity on average.\n\n\n\n\nCode\ng7 &lt;- ggplot(diamonds2, aes(cut, carat)) + geom_boxplot()\ng8 &lt;- ggplot(diamonds2, aes(color, carat)) + geom_boxplot()\ng9 &lt;- ggplot(diamonds2, aes(clarity, carat)) + geom_boxplot()\ng7 + g8 + g9"
  },
  {
    "objectID": "model/model-building/model-building.html#checking-correlations-between-carat-cut-colour-and-clarity-1",
    "href": "model/model-building/model-building.html#checking-correlations-between-carat-cut-colour-and-clarity-1",
    "title": "Model building",
    "section": "Checking correlations between carat, cut, colour and clarity",
    "text": "Checking correlations between carat, cut, colour and clarity"
  },
  {
    "objectID": "model/model-building/model-building.html#grid",
    "href": "model/model-building/model-building.html#grid",
    "title": "Model building",
    "section": "Grid",
    "text": "Grid\n\nA grid is used to generate values to later draw the “model line”\nHere 20 points, grid same size as later plot\nThe geom_line() function in the next plot uses data from grid to draw the line\n\n\n\n\nCode\n# generate 20 data points on a grid\n# to be used to draw the predictions\ngrid &lt;- diamonds2 %&gt;% \n  data_grid(carat = seq_range(carat, 20))  %&gt;% \n  add_predictions(lm_ll, \"log_price_p\") %&gt;% \n  mutate(price = exp(log_price_p))\n#View(grid)"
  },
  {
    "objectID": "model/model-building/model-building.html#plot-of-price-against-carat-model-line-added",
    "href": "model/model-building/model-building.html#plot-of-price-against-carat-model-line-added",
    "title": "Model building",
    "section": "Plot of price against carat, model line added",
    "text": "Plot of price against carat, model line added\n\n\nCode\ng5 &lt;- ggplot(diamonds2, aes(x = carat, y = price)) + \n  geom_point(size = 0.5, alpha = 0.05) + \n  geom_line(data = grid,  colour = \"red\", size = 1)\ng6 &lt;- ggplot(diamonds2, aes(carat, price)) + \n  geom_hex(bins = 50) + \n  geom_line(data = grid,  colour = \"red\", size = 1)\ng5 + g6"
  },
  {
    "objectID": "model/model-building/model-building.html#plot-of-price-against-carat-model-line-added-1",
    "href": "model/model-building/model-building.html#plot-of-price-against-carat-model-line-added-1",
    "title": "Model building",
    "section": "Plot of price against carat, model line added",
    "text": "Plot of price against carat, model line added"
  },
  {
    "objectID": "model/model-building/model-building.html#is-the-linear-trend-removed",
    "href": "model/model-building/model-building.html#is-the-linear-trend-removed",
    "title": "Model building",
    "section": "Is the linear trend removed?",
    "text": "Is the linear trend removed?\n\nPlotting the residuals against log(carat)\n\n\n\n\nCode\ndiamonds2 &lt;- diamonds2 %&gt;% \n  add_residuals(lm_ll, \"log_resid\")\nggplot(diamonds2, aes(log(carat), log_resid)) + \n  geom_hex(bins = 50)"
  },
  {
    "objectID": "model/model-building/model-building.html#is-the-linear-trend-removed-1",
    "href": "model/model-building/model-building.html#is-the-linear-trend-removed-1",
    "title": "Model building",
    "section": "Is the linear trend removed?",
    "text": "Is the linear trend removed?\n\nPlotting the residuals against log(carat)"
  },
  {
    "objectID": "model/model-building/model-building.html#boxplot-carat-effect-removed",
    "href": "model/model-building/model-building.html#boxplot-carat-effect-removed",
    "title": "Model building",
    "section": "Boxplot, carat effect removed",
    "text": "Boxplot, carat effect removed\n\nCut and price\n\n\n\n\nCode\nggplot(diamonds2, aes(cut, log_resid)) + geom_boxplot() +\n  ggtitle(\"Better cuts have higher prices (as we would suspect)\")"
  },
  {
    "objectID": "model/model-building/model-building.html#boxplot-carat-effect-removed-1",
    "href": "model/model-building/model-building.html#boxplot-carat-effect-removed-1",
    "title": "Model building",
    "section": "Boxplot, carat effect removed",
    "text": "Boxplot, carat effect removed\n\nCut and price"
  },
  {
    "objectID": "model/model-building/model-building.html#boxplot-carat-effect-removed-2",
    "href": "model/model-building/model-building.html#boxplot-carat-effect-removed-2",
    "title": "Model building",
    "section": "Boxplot, carat effect removed",
    "text": "Boxplot, carat effect removed\n\nColour and price\n\n\n\n\nCode\nggplot(diamonds2, aes(color, log_resid)) + geom_boxplot() +\n  ggtitle(\"Better colour gives a higher price (as we would suspect)\")"
  },
  {
    "objectID": "model/model-building/model-building.html#boxplot-carat-effect-removed-3",
    "href": "model/model-building/model-building.html#boxplot-carat-effect-removed-3",
    "title": "Model building",
    "section": "Boxplot, carat effect removed",
    "text": "Boxplot, carat effect removed"
  },
  {
    "objectID": "model/model-building/model-building.html#boxplot-carat-effect-removed-4",
    "href": "model/model-building/model-building.html#boxplot-carat-effect-removed-4",
    "title": "Model building",
    "section": "Boxplot, carat effect removed",
    "text": "Boxplot, carat effect removed\n\nClarity and price\n\n\n\n\nCode\nggplot(diamonds2, aes(clarity, log_resid)) + geom_boxplot() +\n  ggtitle(\"Better clarity give a higher price (as we would suspect)\")"
  },
  {
    "objectID": "model/model-building/model-building.html#boxplot-carat-effect-removed-5",
    "href": "model/model-building/model-building.html#boxplot-carat-effect-removed-5",
    "title": "Model building",
    "section": "Boxplot, carat effect removed",
    "text": "Boxplot, carat effect removed"
  },
  {
    "objectID": "model/model-building/model-building.html#full-model",
    "href": "model/model-building/model-building.html#full-model",
    "title": "Model building",
    "section": "Full model",
    "text": "Full model\n\nAlso use the variables cut, colour and clarity.\n\nOrdered categorical variables\nNote that colour is ordered according to increasing “badness”\n\nD best colour, J worst colour\n\n\n\n\n\n\nCode\nmod2_ll &lt;- 'log(price) ~ log(carat) + cut + color + clarity'\nlm2_ll &lt;- lm(mod2_ll, data = diamonds2)\ndiamonds2 &lt;- diamonds2 %&gt;% \n  add_residuals(lm2_ll, var = \"res_lm2\")"
  },
  {
    "objectID": "model/model-building/model-building.html#residuals-full-model",
    "href": "model/model-building/model-building.html#residuals-full-model",
    "title": "Model building",
    "section": "Residuals full model",
    "text": "Residuals full model\n\n\nCode\ng10 &lt;- diamonds2 %&gt;% \n  ggplot(mapping = aes(x = log(price), y = res_lm2)) +\n  geom_point(size = 0.5, alpha = 0.05)\ng11 &lt;- diamonds2 %&gt;% \n  ggplot(mapping = aes(x = log(carat), y = res_lm2)) +\n  geom_point(size = 0.5, alpha = 0.05)\ng10 + g11"
  },
  {
    "objectID": "model/model-building/model-building.html#residuals-full-model-1",
    "href": "model/model-building/model-building.html#residuals-full-model-1",
    "title": "Model building",
    "section": "Residuals full model",
    "text": "Residuals full model"
  },
  {
    "objectID": "model/model-building/model-building.html#comments-full-model",
    "href": "model/model-building/model-building.html#comments-full-model",
    "title": "Model building",
    "section": "Comments full model",
    "text": "Comments full model\n\nStill plenty to play with.\nUsing coefficient estimate for carat in full model to remove linear trend.\nFurther investigations of alternative backtransformations.\nWhat is really the association between cut and size? It might look like cut quality is sacrificed to get the finished diamonds over some size thresholds.\nWhat characterize the diamonds with big residuals?"
  },
  {
    "objectID": "model/model-building/model-building.html#nyc-flight-data",
    "href": "model/model-building/model-building.html#nyc-flight-data",
    "title": "Model building",
    "section": "NYC flight data",
    "text": "NYC flight data\n\nLoad data (nycflights13 must be loaded via library(nycflights13))\nmake a date from year, mont and day\nthen summarise and count observations for each date\n\n\n\n\nCode\n# uses nycflights13, lubridate and tidyverse packages\n# options get rid of the warning about ungrouping, waste space here\noptions(dplyr.summarise.inform = FALSE)\ndaily &lt;- flights %&gt;% \n  mutate(date = make_date(year, month, day)) %&gt;% \n  group_by(date) %&gt;% \n  summarise(n = n())"
  },
  {
    "objectID": "model/model-building/model-building.html#nyc-flight-data-cont.",
    "href": "model/model-building/model-building.html#nyc-flight-data-cont.",
    "title": "Model building",
    "section": "NYC flight data cont.",
    "text": "NYC flight data cont.\n\n\nCode\n# OK in slide output\noptions(tibble.print_min = 3)\nprint(daily, n = 3)\n\n\n# A tibble: 365 × 2\n  date           n\n  &lt;date&gt;     &lt;int&gt;\n1 2013-01-01   842\n2 2013-01-02   943\n3 2013-01-03   914\n# ℹ 362 more rows"
  },
  {
    "objectID": "model/model-building/model-building.html#plotting-daily",
    "href": "model/model-building/model-building.html#plotting-daily",
    "title": "Model building",
    "section": "Plotting daily",
    "text": "Plotting daily\n\n\nCode\ndaily %&gt;% \n  ggplot(mapping = aes(x = date, y = n)) +\n  geom_line()"
  },
  {
    "objectID": "model/model-building/model-building.html#plotting-daily-1",
    "href": "model/model-building/model-building.html#plotting-daily-1",
    "title": "Model building",
    "section": "Plotting daily",
    "text": "Plotting daily"
  },
  {
    "objectID": "model/model-building/model-building.html#day-of-week-norwegian-week",
    "href": "model/model-building/model-building.html#day-of-week-norwegian-week",
    "title": "Model building",
    "section": "Day of week (Norwegian week)",
    "text": "Day of week (Norwegian week)\n\nwday() function in lubridate gives us the day of the week for a date. Remember Sunday first day of the week in the US. Here it is Monday.\nCan be controlled by week_start = getOption(\"lubridate.week.start\", 7) and locale\n\n\n\n\nCode\ndaily_no &lt;- daily %&gt;%\n  mutate(wday = wday(date, label = TRUE, week_start = 1))\n\nggplot(daily_no, mapping = aes(x = wday, n)) +\n  geom_boxplot()\nrm(daily_no)"
  },
  {
    "objectID": "model/model-building/model-building.html#day-of-week-norwegian-week-1",
    "href": "model/model-building/model-building.html#day-of-week-norwegian-week-1",
    "title": "Model building",
    "section": "Day of week (Norwegian week)",
    "text": "Day of week (Norwegian week)"
  },
  {
    "objectID": "model/model-building/model-building.html#day-of-week",
    "href": "model/model-building/model-building.html#day-of-week",
    "title": "Model building",
    "section": "Day of week",
    "text": "Day of week\n\nFollow r4ds\n\n\n\n\nCode\ndaily &lt;- daily %&gt;% \n  mutate(wday = wday(date, label = TRUE))\nggplot(daily, aes(wday, n)) + \n  geom_boxplot()"
  },
  {
    "objectID": "model/model-building/model-building.html#day-of-week-1",
    "href": "model/model-building/model-building.html#day-of-week-1",
    "title": "Model building",
    "section": "Day of week",
    "text": "Day of week"
  },
  {
    "objectID": "model/model-building/model-building.html#simple-model",
    "href": "model/model-building/model-building.html#simple-model",
    "title": "Model building",
    "section": "Simple model",
    "text": "Simple model\n\nSimple model with wday as a category variable\n\n\n\n\nCode\nmod &lt;- lm(n ~ wday, data = daily)\ndaily %&gt;% \n  model_matrix(n ~ wday) %&gt;% \n  .[1:3, ] # 3 first rows\n\n\n# A tibble: 3 × 7\n  `(Intercept)`    wday.L wday.Q    wday.C `wday^4`  `wday^5` `wday^6`\n          &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;\n1             1 -1.89e- 1 -0.327  4.08e- 1   0.0806 -5.46e- 1    0.493\n2             1  2.86e-17 -0.436  5.78e-17   0.483  -1.23e-15   -0.658\n3             1  1.89e- 1 -0.327 -4.08e- 1   0.0806  5.46e- 1    0.493"
  },
  {
    "objectID": "model/model-building/model-building.html#simple-model-grid",
    "href": "model/model-building/model-building.html#simple-model-grid",
    "title": "Model building",
    "section": "Simple model; grid",
    "text": "Simple model; grid\n\nmake a grid\n\n\n\n\nCode\ngrid &lt;- daily %&gt;% \n  data_grid(wday) %&gt;% \n  add_predictions(mod, \"n\")\ngrid\n\n\n# A tibble: 7 × 2\n  wday      n\n  &lt;ord&gt; &lt;dbl&gt;\n1 Sun    891.\n2 Mon    975.\n3 Tue    951.\n4 Wed    963.\n5 Thu    966.\n6 Fri    967.\n7 Sat    745."
  },
  {
    "objectID": "model/model-building/model-building.html#plot-predicted-flights",
    "href": "model/model-building/model-building.html#plot-predicted-flights",
    "title": "Model building",
    "section": "Plot predicted flights",
    "text": "Plot predicted flights\n\nModel prediction is red dots\n\n\n\n\nCode\nggplot(daily, aes(wday, n)) + \n  geom_boxplot() +\n  geom_point(data = grid, colour = \"red\", size = 4)"
  },
  {
    "objectID": "model/model-building/model-building.html#plot-predicted-flights-1",
    "href": "model/model-building/model-building.html#plot-predicted-flights-1",
    "title": "Model building",
    "section": "Plot predicted flights",
    "text": "Plot predicted flights"
  },
  {
    "objectID": "model/model-building/model-building.html#plot-residuals",
    "href": "model/model-building/model-building.html#plot-residuals",
    "title": "Model building",
    "section": "Plot residuals",
    "text": "Plot residuals\n\nModel remove most of day-of-week effect\nEasier to see special events\n\n\n\n\nCode\ndaily &lt;- daily %&gt;% \n  add_residuals(mod)\ndaily %&gt;% \n  ggplot(aes(date, resid)) + \n  geom_ref_line(h = 0) + \n  geom_line()"
  },
  {
    "objectID": "model/model-building/model-building.html#plot-residuals-1",
    "href": "model/model-building/model-building.html#plot-residuals-1",
    "title": "Model building",
    "section": "Plot residuals",
    "text": "Plot residuals"
  },
  {
    "objectID": "model/model-building/model-building.html#residuals-for-each-week-day",
    "href": "model/model-building/model-building.html#residuals-for-each-week-day",
    "title": "Model building",
    "section": "Residuals for each week day",
    "text": "Residuals for each week day\n\n\nCode\nggplot(daily, aes(date, resid, colour = wday)) + \n  geom_ref_line(h = 0) + \n  geom_line()"
  },
  {
    "objectID": "model/model-building/model-building.html#residuals-for-each-week-day-1",
    "href": "model/model-building/model-building.html#residuals-for-each-week-day-1",
    "title": "Model building",
    "section": "Residuals for each week day",
    "text": "Residuals for each week day"
  },
  {
    "objectID": "model/model-building/model-building.html#residual-for-saturday",
    "href": "model/model-building/model-building.html#residual-for-saturday",
    "title": "Model building",
    "section": "Residual for Saturday",
    "text": "Residual for Saturday\n\n\nCode\ndaily %&gt;% \n  filter(wday == \"Sat\") %&gt;% \nggplot(mapping = aes(x = date, y = resid)) + \n  geom_ref_line(h = 0) + \n  geom_line()"
  },
  {
    "objectID": "model/model-building/model-building.html#residual-for-saturday-1",
    "href": "model/model-building/model-building.html#residual-for-saturday-1",
    "title": "Model building",
    "section": "Residual for Saturday",
    "text": "Residual for Saturday"
  },
  {
    "objectID": "model/model-building/model-building.html#comments-regarding-residuals",
    "href": "model/model-building/model-building.html#comments-regarding-residuals",
    "title": "Model building",
    "section": "Comments regarding residuals",
    "text": "Comments regarding residuals\n\nThe model under-estimate traffic on Saturdays in the spring and summer and over-estimate the Saturday traffic in the autumn and late winter.\nThere is a spike in late December. Wonder what that might be? ;-)\nDates with low traffic."
  },
  {
    "objectID": "model/model-building/model-building.html#comments-regarding-residuals-cont.",
    "href": "model/model-building/model-building.html#comments-regarding-residuals-cont.",
    "title": "Model building",
    "section": "Comments regarding residuals cont.",
    "text": "Comments regarding residuals cont.\n\n\nCode\ndaily %&gt;% \n  filter(resid &lt; -100)\n\n\n# A tibble: 11 × 4\n   date           n wday  resid\n   &lt;date&gt;     &lt;int&gt; &lt;ord&gt; &lt;dbl&gt;\n 1 2013-01-01   842 Tue   -109.\n 2 2013-01-20   786 Sun   -105.\n 3 2013-05-26   729 Sun   -162.\n 4 2013-07-04   737 Thu   -229.\n 5 2013-07-05   822 Fri   -145.\n 6 2013-09-01   718 Sun   -173.\n 7 2013-11-28   634 Thu   -332.\n 8 2013-11-29   661 Fri   -306.\n 9 2013-12-24   761 Tue   -190.\n10 2013-12-25   719 Wed   -244.\n11 2013-12-31   776 Tue   -175.\n\n\n\nNew years, Thanksgiving, Christmas"
  },
  {
    "objectID": "model/model-building/model-building.html#comments-regarding-residuals-cont.-1",
    "href": "model/model-building/model-building.html#comments-regarding-residuals-cont.-1",
    "title": "Model building",
    "section": "Comments regarding residuals cont.",
    "text": "Comments regarding residuals cont.\n\nTraffic seems to be more spread out before an event than after.\nHigher traffic than predicted on Saturdays during the summer.\nHigher traffic before and after Thanksgiving and Christmas."
  },
  {
    "objectID": "model/model-building/model-building.html#comments-regarding-residuals-cont.-2",
    "href": "model/model-building/model-building.html#comments-regarding-residuals-cont.-2",
    "title": "Model building",
    "section": "Comments regarding residuals cont.",
    "text": "Comments regarding residuals cont.\n\n\nCode\ndaily %&gt;% \n  filter(resid &gt; 50)\n\n\n# A tibble: 14 × 4\n   date           n wday  resid\n   &lt;date&gt;     &lt;int&gt; &lt;ord&gt; &lt;dbl&gt;\n 1 2013-06-15   801 Sat    56.4\n 2 2013-06-22   812 Sat    67.4\n 3 2013-06-29   812 Sat    67.4\n 4 2013-07-06   805 Sat    60.4\n 5 2013-07-13   811 Sat    66.4\n 6 2013-07-20   810 Sat    65.4\n 7 2013-07-27   811 Sat    66.4\n 8 2013-08-03   809 Sat    64.4\n 9 2013-08-10   807 Sat    62.4\n10 2013-11-27  1014 Wed    51.3\n11 2013-11-30   857 Sat   112. \n12 2013-12-01   987 Sun    95.5\n13 2013-12-21   811 Sat    66.4\n14 2013-12-28   814 Sat    69.4"
  },
  {
    "objectID": "model/model-building/model-building.html#further-development-of-the-model",
    "href": "model/model-building/model-building.html#further-development-of-the-model",
    "title": "Model building",
    "section": "Further development of the model",
    "text": "Further development of the model\n\nOne might add a variable taking care of the seasonal effect\nOne might add variables for the special holidays, i.e Thanksgiving and Christmas\nWe will not elaborate further on the model, see r4ds chapter 24 for more on the model"
  },
  {
    "objectID": "model/model-building/model-building.html#references",
    "href": "model/model-building/model-building.html#references",
    "title": "Model building",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nCarr, Dan, Nicholas Lewin-Koh, and Martin Maechler. 2023. Hexbin: Hexagonal Binning Routines. https://github.com/edzer/hexbin.\n\n\nGrolemund, Garrett, and Hadley Wickham. 2011. “Dates and Times Made Easy with lubridate.” Journal of Statistical Software 40 (3): 1–25. https://www.jstatsoft.org/v40/i03/.\n\n\nPedersen, Thomas Lin. 2022. Patchwork: The Composer of Plots. https://CRAN.R-project.org/package=patchwork.\n\n\nSpinu, Vitalie, Garrett Grolemund, and Hadley Wickham. 2023. Lubridate: Make Dealing with Dates a Little Easier. https://CRAN.R-project.org/package=lubridate.\n\n\nTrapletti, Adrian, and Kurt Hornik. 2023. Tseries: Time Series Analysis and Computational Finance. https://CRAN.R-project.org/package=tseries.\n\n\nWickham, Hadley. 2021. Nycflights13: Flights That Departed NYC in 2013. https://github.com/hadley/nycflights13.\n\n\n———. 2023a. Modelr: Modelling Functions That Work with the Pipe. https://CRAN.R-project.org/package=modelr.\n\n\n———. 2023b. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#load-tidyverse-and-magrittr",
    "href": "program/pipes-cont/pipes-cont.html#load-tidyverse-and-magrittr",
    "title": "Pipes",
    "section": "Load tidyverse and magrittr",
    "text": "Load tidyverse and magrittr\n\n\nCode\n# get tidyverse to shut up\nsuppressPackageStartupMessages({\n  library(tidyverse)\n  library(lubridate)\n  library(magrittr)\n})\n\n\n\n\nCode\n# create a bib file for the R packages\n# used in this document\n# Note! Needs to do a touch(ag_factors.bib) in terminal before first run\n# else stops when bibliography: \"ag_factors.bib\" not found in YAML\nknitr::write_bib(\n  c(\n    \"tidyverse\",\n    \"lubridate\",\n    \"magrittr\"\n    ),\n  file = \"ag_pipes.bib\"\n  )"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#pipes",
    "href": "program/pipes-cont/pipes-cont.html#pipes",
    "title": "Pipes",
    "section": "Pipes",
    "text": "Pipes\n\nWe already know a lot about pipes\nComes from the package magrittr\n\n%&gt;% also defined in tidyverse\nmagrittr also define %$% and %T&gt;% (must do libray(magrittr) to use them)"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#define-my_df",
    "href": "program/pipes-cont/pipes-cont.html#define-my_df",
    "title": "Pipes",
    "section": "Define my_df",
    "text": "Define my_df\n\n\nCode\nset.seed(333)\nmy_df &lt;- tibble(\n  x = rnorm(10, mean = 100, sd = 10),\n  y = runif(10, min = 30, max = 130),\n  z = rlnorm(10, 2, 2)\n)"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#define-my_dates",
    "href": "program/pipes-cont/pipes-cont.html#define-my_dates",
    "title": "Pipes",
    "section": "Define my_dates",
    "text": "Define my_dates\n\nalso define my_dates from previous lecture\n\n\n\n\nCode\nset.seed(1234)\nmy_dates &lt;- tibble(\n  y = 1999:2008,\n  m = sample(1:12, size = 10, replace = TRUE),\n  # make it simple, seed 1234 gives no impossible date\n  d = sample(1:31, size = 10, replace = TRUE),\n  date = make_date(year = y, month = m, day = d)\n)"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#exploding-pipe",
    "href": "program/pipes-cont/pipes-cont.html#exploding-pipe",
    "title": "Pipes",
    "section": "“Exploding pipe” %$%",
    "text": "“Exploding pipe” %$%\n\nGives access to variables in dataframe/tibble\nUse with functions that don’t have a data argument\n\n\n\n\nCode\nargs(cor)\n\n\nfunction (x, y = NULL, use = \"everything\", method = c(\"pearson\", \n    \"kendall\", \"spearman\")) \nNULL\n\n\n\n\nCode\n# cor can't find y\nmy_df %&gt;% cor(x,y)\n\n\n\nError message: Error in pmatch(use, c(“all.obs”, “complete.obs”, “pairwise.complete.obs”, : object ‘y’ not found"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#with-exploding-pipe-it-works",
    "href": "program/pipes-cont/pipes-cont.html#with-exploding-pipe-it-works",
    "title": "Pipes",
    "section": "With exploding pipe it works",
    "text": "With exploding pipe it works\n\n\nCode\n# %$% exposes the names in my_df\nmy_df %$% cor(x,y)\n\n\n[1] -0.3750568"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#from-last-lecture",
    "href": "program/pipes-cont/pipes-cont.html#from-last-lecture",
    "title": "Pipes",
    "section": "From last lecture",
    "text": "From last lecture\n\nDid not work\nmy_dates %&gt;% floor_date(date, \"month\")\nGives error: Error in as.character(unit) : cannot coerce type ‘closure’ to vector of type ‘character’\nR speak for “Never heard about a variable called ‘date’”.\nUse %$% from magrittr\n\n\n\n\nCode\n# Dosn't work\n# my_dates %&gt;% floor_date(date, \"month\")\n# Explodes out the names in my_dates\nmy_dates %$% floor_date(date, \"month\")\n\n\n [1] \"1999-12-01\" \"2000-10-01\" \"2001-06-01\" \"2002-05-01\" \"2003-12-01\"\n [6] \"2004-09-01\" \"2005-05-01\" \"2006-06-01\" \"2007-04-01\" \"2008-02-01\""
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#t-pipe-t",
    "href": "program/pipes-cont/pipes-cont.html#t-pipe-t",
    "title": "Pipes",
    "section": "T-pipe %T>%",
    "text": "T-pipe %T&gt;%\n\nT-pipe sends data along left side also\nmakes plot() in the middle of a pipe possible\nwithout T-pipe\n\n\n\n\nCode\nmy_df %&gt;% \n  select(x,y) %&gt;% \n  plot() %&gt;% \n  glimpse()\n\n\n\n\n\n NULL"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#t-pipe-t-1",
    "href": "program/pipes-cont/pipes-cont.html#t-pipe-t-1",
    "title": "Pipes",
    "section": "T-pipe %T>%",
    "text": "T-pipe %T&gt;%\n\nOut from plot() in a normal pipe we get a plot object\n\nNo glimpse of the variables (x and y)\n\nIf we put in a %T&gt;% (a T-pipe) before the plot() the output from select(x, y) will also flow on the left hand side down to glimpse."
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#t-pipe-t-2",
    "href": "program/pipes-cont/pipes-cont.html#t-pipe-t-2",
    "title": "Pipes",
    "section": "T-pipe %T>%",
    "text": "T-pipe %T&gt;%\n\n\nCode\nmy_df %&gt;% \n  select(x,y) %T&gt;% \n  plot() %&gt;% \n  glimpse()\n\n\n\nRows: 10\nColumns: 2\n$ x &lt;dbl&gt; 99.17188, 119.34681, 79.48710, 102.77739, 84.74039, 97.30836, 112.33…\n$ y &lt;dbl&gt; 43.03157, 37.14962, 49.09765, 56.76554, 81.74926, 43.17230, 57.96185…"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#general-advice-regarding-pipes",
    "href": "program/pipes-cont/pipes-cont.html#general-advice-regarding-pipes",
    "title": "Pipes",
    "section": "General advice regarding pipes",
    "text": "General advice regarding pipes\n\nDon’t use with many inputs\n\nDesigned for one tibble/dataframe to be poured into the pipe\nIt is possible to refer to values defined outside of pipe (like we did for heights when we needed mean and sd for males and females to draw the distributions)\nTry to calculate such values right before the pipe or write a comment indicating where they are calculated. Remember to be kind to your future self.\n\nLong pipes should be broken up\n\nNo more than 10 steps\nBreak up, output first pipe input second pipe etc.\n\nDo not use pipes for complex data structures (not relevant for us at this stage)"
  },
  {
    "objectID": "program/pipes-cont/pipes-cont.html#references",
    "href": "program/pipes-cont/pipes-cont.html#references",
    "title": "Pipes",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nBache, Stefan Milton, and Hadley Wickham. 2022. Magrittr: A Forward-Pipe Operator for r. https://CRAN.R-project.org/package=magrittr.\n\n\nGrolemund, Garrett, and Hadley Wickham. 2011. “Dates and Times Made Easy with lubridate.” Journal of Statistical Software 40 (3): 1–25. https://www.jstatsoft.org/v40/i03/.\n\n\nSpinu, Vitalie, Garrett Grolemund, and Hadley Wickham. 2023. Lubridate: Make Dealing with Dates a Little Easier. https://CRAN.R-project.org/package=lubridate.\n\n\nWickham, Hadley. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "program/vectors/vectors.html#load-tidyverse",
    "href": "program/vectors/vectors.html#load-tidyverse",
    "title": "Vectors",
    "section": "Load tidyverse",
    "text": "Load tidyverse\n\n\nCode\n# get tidyverse to shut up\nsuppressPackageStartupMessages({\n  library(tidyverse)\n  library(lubridate)\n  library(magrittr)\n})\n\n\n\n\nCode\n# create a bib file for the R packages\n# used in this document\n# Note! Needs to do a touch ag_functions.bib in terminal before first run\n# else stops when bibliography: \"ag_functions.bib\" not found in YAML\nknitr::write_bib(\n  c(\n    \"tidyverse\",\n    \"lubridate\",\n    \"magrittr\"\n    ),\n  file = \"ag_vectors.bib\"\n  )"
  },
  {
    "objectID": "program/vectors/vectors.html#define-my_df-and-my_dates",
    "href": "program/vectors/vectors.html#define-my_df-and-my_dates",
    "title": "Vectors",
    "section": "Define my_df and my_dates",
    "text": "Define my_df and my_dates\n\ndefine my_df and my_dates from previous lecture (code not shown)\n\n\n\n\nCode\nset.seed(333)\nmy_df &lt;- tibble(\n  x = rnorm(10, mean = 100, sd = 10),\n  y = runif(10, min = 30, max = 130),\n  z = rlnorm(10, 2, 2)\n)\nset.seed(1234)\nmy_dates &lt;- tibble(\n  y = 1999:2008,\n  m = sample(1:12, size = 10, replace = TRUE),\n  # make it simple, seed 1234 gives no impossible date\n  d = sample(1:31, size = 10, replace = TRUE),\n  date = make_date(year = y, month = m, day = d)\n)"
  },
  {
    "objectID": "program/vectors/vectors.html#vectors",
    "href": "program/vectors/vectors.html#vectors",
    "title": "Vectors",
    "section": "Vectors",
    "text": "Vectors\n\n6 types of atomic vectors, 4 of importance to us\n\nlogical\ninteger (numeric)\ndouble (numeric)\ncharacter\n\nAll data in an atomic vector is of the same type\nLists, can contain data of different kinds including other lists\nNULL, absence of vector\n\nbehaves like a vector of length 0\n\nNA, absence of element in vector"
  },
  {
    "objectID": "program/vectors/vectors.html#vector-properties",
    "href": "program/vectors/vectors.html#vector-properties",
    "title": "Vectors",
    "section": "Vector properties",
    "text": "Vector properties\n\ntype, check type with typeof(my_df$x)\nlength, get length with length(my_df$x) &gt; - has no dimension so dim(my_df$x) will give an error\naugmented vectors, attributes used to give additional behaviour\n\nfactors built on integer\nDate and date-times built on double\ndataframes/tibbles built on lists\n\ndataframes/tibbles are lists of vectors of the same length. The vectors can be of different type"
  },
  {
    "objectID": "program/vectors/vectors.html#vector-properties-code",
    "href": "program/vectors/vectors.html#vector-properties-code",
    "title": "Vectors",
    "section": "Vector properties; code",
    "text": "Vector properties; code\n\n\nCode\nclass(my_df)\n\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\nCode\ntypeof(my_df)\n\n\n[1] \"list\"\n\n\nCode\nstr(my_df)\n\n\ntibble [10 × 3] (S3: tbl_df/tbl/data.frame)\n $ x: num [1:10] 99.2 119.3 79.5 102.8 84.7 ...\n $ y: num [1:10] 43 37.1 49.1 56.8 81.7 ...\n $ z: num [1:10] 9.22 15.32 8.23 114.13 3.45 ..."
  },
  {
    "objectID": "program/vectors/vectors.html#more-about-vectors",
    "href": "program/vectors/vectors.html#more-about-vectors",
    "title": "Vectors",
    "section": "More about vectors",
    "text": "More about vectors\n\nCoercion, conversion from one type to another\nExplicit: we convert with functions lik as.logical(), as.integer(), as.numeric(), as.double() and as.character()\n\nNote! Many also have a new implementation in tidyverse.\ntidyverse versions start with as_, i.e. _ instead of .\n\nImplicit: use a vector in a context that demands a certain type of vector.\n\nClassic example: sum(is.na(x)). is.na(x) returns TRUE or FALSE. sum() expect numeric input. TRUE and FALSE are converted on the fly to their numeric representations 1 and 0.\n\nDo not use implicit conversion from integer to logical.\n\nExample: if (length(x)) {}\nMeans: do something if length of x is not 0\nIt works, but harder to understand\nInstead use: if (length(x) &gt; 0) {}\n\nGeneral rule: The most complex type wins."
  },
  {
    "objectID": "program/vectors/vectors.html#some-exsamples",
    "href": "program/vectors/vectors.html#some-exsamples",
    "title": "Vectors",
    "section": "Some exsamples",
    "text": "Some exsamples\n\nGeneral rule: The most complex type wins.\n\n\n\n\nCode\n(x &lt;- c(1, 4, 7, TRUE, \"a\"))\n\n\n[1] \"1\"    \"4\"    \"7\"    \"TRUE\" \"a\"   \n\n\nCode\ntypeof(x)\n\n\n[1] \"character\"\n\n\nCode\n(y &lt;- c(1L, 1.5))\n\n\n[1] 1.0 1.5\n\n\nCode\ntypeof(y)\n\n\n[1] \"double\""
  },
  {
    "objectID": "program/vectors/vectors.html#naming-elements-in-vector",
    "href": "program/vectors/vectors.html#naming-elements-in-vector",
    "title": "Vectors",
    "section": "Naming elements in vector",
    "text": "Naming elements in vector\n\nClassic R names()\nMore modern: purrr:set_names() (imported from rlang)\n\n\n\n\nCode\n(x &lt;- 1:4)\n\n\n[1] 1 2 3 4\n\n\nCode\n# set names by naming the element\nx &lt;- c(a = 1, b = 2, c = 3, d = 4)\nx\n\n\na b c d \n1 2 3 4 \n\n\nCode\n# remove the names with set_names\nx &lt;- purrr::set_names(x, nm = NULL)\nx\n\n\n[1] 1 2 3 4\n\n\nCode\n# set names again\nx &lt;- purrr::set_names(x, nm = c(\"a\", \"b\", \"c\", \"d\"))\nx\n\n\na b c d \n1 2 3 4"
  },
  {
    "objectID": "program/vectors/vectors.html#naming-elements-in-vector-1",
    "href": "program/vectors/vectors.html#naming-elements-in-vector-1",
    "title": "Vectors",
    "section": "Naming elements in vector",
    "text": "Naming elements in vector\n\n\nCode\n# remove names\nnames(x) &lt;- NULL\nx\n\n\n[1] 1 2 3 4\n\n\nCode\n# set names again\nx &lt;- set_names(x, letters[1:4])\nx\n\n\na b c d \n1 2 3 4 \n\n\nCode\nnames(x) # get the names\n\n\n[1] \"a\" \"b\" \"c\" \"d\"\n\n\nCode\n# change one name\nnames(x)[[2]] &lt;- \"B\"\nx\n\n\na B c d \n1 2 3 4"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-vectors",
    "href": "program/vectors/vectors.html#subsetting-vectors",
    "title": "Vectors",
    "section": "Subsetting vectors",
    "text": "Subsetting vectors\n\n\nCode\nx &lt;- letters[10:15]\nx\n\n\n[1] \"j\" \"k\" \"l\" \"m\" \"n\" \"o\"\n\n\nCode\n# pick elements 3 and 5\nx[c(3,5)]\n\n\n[1] \"l\" \"n\"\n\n\nCode\n# name with capital letters\nx &lt;- purrr::set_names(x, nm = LETTERS[10:15])\nx\n\n\n  J   K   L   M   N   O \n\"j\" \"k\" \"l\" \"m\" \"n\" \"o\" \n\n\nCode\n# subset by name\nx[c(\"J\", \"L\", \"M\")]\n\n\n  J   L   M \n\"j\" \"l\" \"m\" \n\n\nCode\n# replicate elements\nx[c(\"L\", \"L\", \"J\", \"L\", rep(\"M\", 4))]\n\n\n  L   L   J   L   M   M   M   M \n\"l\" \"l\" \"j\" \"l\" \"m\" \"m\" \"m\" \"m\""
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-vectors-by-dropping-elements",
    "href": "program/vectors/vectors.html#subsetting-vectors-by-dropping-elements",
    "title": "Vectors",
    "section": "Subsetting vectors by dropping elements",
    "text": "Subsetting vectors by dropping elements\n\n\nCode\nx\n\n\n  J   K   L   M   N   O \n\"j\" \"k\" \"l\" \"m\" \"n\" \"o\" \n\n\nCode\n# Drop elements, 1, 4 and 5\nx[c(-1, -4, -5)]\n\n\n  K   L   O \n\"k\" \"l\" \"o\" \n\n\nCode\n# subsetting with logicals\nx[c(TRUE, rep(FALSE,3), TRUE, FALSE)]\n\n\n  J   N \n\"j\" \"n\" \n\n\nCode\n(y &lt;- c(TRUE, rep(FALSE,3), TRUE, FALSE))\n\n\n[1]  TRUE FALSE FALSE FALSE  TRUE FALSE\n\n\nCode\nx[y]\n\n\n  J   N \n\"j\" \"n\""
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-vectors-by-dropping-elements-1",
    "href": "program/vectors/vectors.html#subsetting-vectors-by-dropping-elements-1",
    "title": "Vectors",
    "section": "Subsetting vectors by dropping elements",
    "text": "Subsetting vectors by dropping elements\n\n\nCode\n# we can not mix + and -\nx[c(1, -4, 5)]\n\n\n`Returns: Error in x[c(1, -4, 5)] : only 0’s may be mixed with negative subscripts"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-with-and",
    "href": "program/vectors/vectors.html#subsetting-with-and",
    "title": "Vectors",
    "section": "Subsetting with [[ and [",
    "text": "Subsetting with [[ and [\n\n[[ extract only a single element\n\n\n\n\nCode\ntypeof(`[[`)\n\n\n[1] \"special\"\n\n\nCode\ntypeof(`[`)\n\n\n[1] \"special\"\n\n\nCode\nx\n\n\n  J   K   L   M   N   O \n\"j\" \"k\" \"l\" \"m\" \"n\" \"o\" \n\n\nCode\nx[1]\n\n\n  J \n\"j\" \n\n\nCode\nx[[1]]\n\n\n[1] \"j\""
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-with-and-1",
    "href": "program/vectors/vectors.html#subsetting-with-and-1",
    "title": "Vectors",
    "section": "Subsetting with [[ and [",
    "text": "Subsetting with [[ and [\n\n\nCode\nstr(x[1])\n\n\n Named chr \"j\"\n - attr(*, \"names\")= chr \"J\"\n\n\nCode\nstr(x[[1]])\n\n\n chr \"j\"\n\n\nCode\ntypeof(x[1])\n\n\n[1] \"character\"\n\n\nCode\ntypeof(x[[1]])\n\n\n[1] \"character\"\n\n\nCode\nnames(x[1])\n\n\n[1] \"J\"\n\n\nCode\nnames(x[[1]])\n\n\nNULL"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-dataframe-with-and",
    "href": "program/vectors/vectors.html#subsetting-dataframe-with-and",
    "title": "Vectors",
    "section": "Subsetting dataframe with [[ and [",
    "text": "Subsetting dataframe with [[ and [\n\n`df[row(s), column(s)]\nOne dimension not given returns all rows or columns\n\n\n\n\nCode\nmy_df1 &lt;- my_df[1:3, ]\n# column 1 all rows\nmy_df1[, 1]\n\n\n# A tibble: 3 × 1\n      x\n  &lt;dbl&gt;\n1  99.2\n2 119. \n3  79.5\n\n\nCode\n# row 3, all columns\nmy_df1[3, ]\n\n\n# A tibble: 1 × 3\n      x     y     z\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1  79.5  49.1  8.23"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-dataframe-with-and-1",
    "href": "program/vectors/vectors.html#subsetting-dataframe-with-and-1",
    "title": "Vectors",
    "section": "Subsetting dataframe with [[ and [",
    "text": "Subsetting dataframe with [[ and [\n\n\nCode\n# element in row 3, column 3\nmy_df1[3, 3]\n\n\n# A tibble: 1 × 1\n      z\n  &lt;dbl&gt;\n1  8.23\n\n\nCode\nmy_df1[[3,3]]\n\n\n[1] 8.22684\n\n\nCode\nclass(my_df1[3, 3])\n\n\n[1] \"tbl_df\"     \"tbl\"        \"data.frame\"\n\n\nCode\ntypeof(my_df1[3, 3])\n\n\n[1] \"list\"\n\n\nCode\nclass(my_df1[[3,3]])\n\n\n[1] \"numeric\""
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-dataframe-with-and-2",
    "href": "program/vectors/vectors.html#subsetting-dataframe-with-and-2",
    "title": "Vectors",
    "section": "Subsetting dataframe with [[ and [",
    "text": "Subsetting dataframe with [[ and [\n\n\nCode\ntypeof(my_df1[[3,3]])\n\n\n[1] \"double\"\n\n\n\n\nCode\n# multiple elements [[]] gives an error\nmy_df1[[3,1:3]]\n\n\n\nError: Must extract column with a single valid subscript. x Subscript 1:3 has size 3 but must be size 1. Run rlang::last_error() to see where the error occurred."
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-list-with-and",
    "href": "program/vectors/vectors.html#subsetting-list-with-and",
    "title": "Vectors",
    "section": "Subsetting list with [[ and [",
    "text": "Subsetting list with [[ and [\n\nNote the difference between [[ and [\n\n[[ returns a single value\n[ also returns a single value, but inside a dataframe/tibble\n\nVery important for lists\n\n\n\n\nCode\nmy_list &lt;- list(letters[1:4], 1:3, \"a\", 1.25, TRUE)\nstr(my_list)\n\n\nList of 5\n $ : chr [1:4] \"a\" \"b\" \"c\" \"d\"\n $ : int [1:3] 1 2 3\n $ : chr \"a\"\n $ : num 1.25\n $ : logi TRUE"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-list-with-and-cont.",
    "href": "program/vectors/vectors.html#subsetting-list-with-and-cont.",
    "title": "Vectors",
    "section": "Subsetting list with [[ and [ cont.",
    "text": "Subsetting list with [[ and [ cont.\n\n\n\n\n\n\nNote\n\n\nBelow list() in second and third element.\n\n\n\n\n\nCode\nmy_list &lt;- list(letters[1:4], list(1:3), list(\"a\", 1.25, TRUE))\nstr(my_list)\n\n\nList of 3\n $ : chr [1:4] \"a\" \"b\" \"c\" \"d\"\n $ :List of 1\n  ..$ : int [1:3] 1 2 3\n $ :List of 3\n  ..$ : chr \"a\"\n  ..$ : num 1.25\n  ..$ : logi TRUE"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-list-with-and-cont.-1",
    "href": "program/vectors/vectors.html#subsetting-list-with-and-cont.-1",
    "title": "Vectors",
    "section": "Subsetting list with [[ and [ cont.",
    "text": "Subsetting list with [[ and [ cont.\n\n\nCode\nmy_list[2]\n\n\n[[1]]\n[[1]][[1]]\n[1] 1 2 3\n\n\nCode\nmy_list[[2]]\n\n\n[[1]]\n[1] 1 2 3\n\n\nCode\nstr(my_list[2])\n\n\nList of 1\n $ :List of 1\n  ..$ : int [1:3] 1 2 3\n\n\nCode\nstr(my_list[[2]])\n\n\nList of 1\n $ : int [1:3] 1 2 3"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-list-with-and-cont.-2",
    "href": "program/vectors/vectors.html#subsetting-list-with-and-cont.-2",
    "title": "Vectors",
    "section": "Subsetting list with [[ and [ cont.",
    "text": "Subsetting list with [[ and [ cont.\n\nnamed components\n\n\n\n\n\n\n\nNote\n\n\nBelow A is a vector, while B and C are lists.\n\n\n\n\n\n\nCode\nmy_list &lt;- list(A = letters[1:4], B = list(1, 2, 3), C = list(\"a\", 1.25, TRUE))\nstr(my_list)\n\n\nList of 3\n $ A: chr [1:4] \"a\" \"b\" \"c\" \"d\"\n $ B:List of 3\n  ..$ : num 1\n  ..$ : num 2\n  ..$ : num 3\n $ C:List of 3\n  ..$ : chr \"a\"\n  ..$ : num 1.25\n  ..$ : logi TRUE"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-list-with-and-cont.-3",
    "href": "program/vectors/vectors.html#subsetting-list-with-and-cont.-3",
    "title": "Vectors",
    "section": "Subsetting list with [[ and [ cont.",
    "text": "Subsetting list with [[ and [ cont.\n\n\nCode\nl &lt;- my_list[[\"C\"]]\nstr(l)\n\n\nList of 3\n $ : chr \"a\"\n $ : num 1.25\n $ : logi TRUE\n\n\n\n\nCode\n# Pick first element of list l\nl[[1]]\n\n\n[1] \"a\""
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-list-with-and-cont.-4",
    "href": "program/vectors/vectors.html#subsetting-list-with-and-cont.-4",
    "title": "Vectors",
    "section": "Subsetting list with [[ and [ cont.",
    "text": "Subsetting list with [[ and [ cont.\n\n[[ trekker elementer opp av listen\n\n\n\n\nCode\nl &lt;- my_list[[\"B\"]]\nstr(l)\n\n\nList of 3\n $ : num 1\n $ : num 2\n $ : num 3\n\n\nCode\n# The value\nl[[1]]\n\n\n[1] 1\n\n\nCode\n# The value\nmy_list[[\"C\"]][[2]]\n\n\n[1] 1.25\n\n\nCode\n# The value\nmy_list$C[[2]]\n\n\n[1] 1.25"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-list-with-and-cont.-5",
    "href": "program/vectors/vectors.html#subsetting-list-with-and-cont.-5",
    "title": "Vectors",
    "section": "Subsetting list with [[ and [ cont.",
    "text": "Subsetting list with [[ and [ cont.\n\nSee r4ds 20.5.3 Lists of condiments for a famous explanation of the difference between [[ and [.\n\n\n\n\nCode\n# notice the difference\nlist(1:3)\n\n\n[[1]]\n[1] 1 2 3\n\n\nCode\nlist(c(1:3))\n\n\n[[1]]\n[1] 1 2 3\n\n\nCode\nlist(c(1, 2, 3))\n\n\n[[1]]\n[1] 1 2 3\n\n\nCode\nlist(c(1, 2, 3))[[1]]\n\n\n[1] 1 2 3\n\n\nCode\nlist(1, 2, 3)[[1]]\n\n\n[1] 1"
  },
  {
    "objectID": "program/vectors/vectors.html#subsetting-list-with-and-cont.-6",
    "href": "program/vectors/vectors.html#subsetting-list-with-and-cont.-6",
    "title": "Vectors",
    "section": "Subsetting list with [[ and [ cont.",
    "text": "Subsetting list with [[ and [ cont.\n\n\nCode\nlist(1, 2, 3)\n\n\n[[1]]\n[1] 1\n\n[[2]]\n[1] 2\n\n[[3]]\n[1] 3\n\n\nCode\nlist(1:3)[[1]][[2]]\n\n\n[1] 2\n\n\nCode\nlist(1, 2, 3)[[2]]\n\n\n[1] 2\n\n\nCode\nunlist(my_list)\n\n\n    A1     A2     A3     A4     B1     B2     B3     C1     C2     C3 \n   \"a\"    \"b\"    \"c\"    \"d\"    \"1\"    \"2\"    \"3\"    \"a\" \"1.25\" \"TRUE\" \n\n\nCode\ntypeof(unlist(my_list))\n\n\n[1] \"character\""
  },
  {
    "objectID": "program/vectors/vectors.html#references",
    "href": "program/vectors/vectors.html#references",
    "title": "Vectors",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nBache, Stefan Milton, and Hadley Wickham. 2022. Magrittr: A Forward-Pipe Operator for r. https://CRAN.R-project.org/package=magrittr.\n\n\nGrolemund, Garrett, and Hadley Wickham. 2011. “Dates and Times Made Easy with lubridate.” Journal of Statistical Software 40 (3): 1–25. https://www.jstatsoft.org/v40/i03/.\n\n\nSpinu, Vitalie, Garrett Grolemund, and Hadley Wickham. 2023. Lubridate: Make Dealing with Dates a Little Easier. https://CRAN.R-project.org/package=lubridate.\n\n\nWickham, Hadley. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "program/program.html",
    "href": "program/program.html",
    "title": "Program",
    "section": "",
    "text": "Introduction (r4ds chap. 17)\nMore on Pipes (r4ds chap. 18)\nFunctions (r4ds chap. 19)\nVectors (r4ds chap. 20)\nIteration (r4ds chap. 21)"
  },
  {
    "objectID": "program/program.html#presentations",
    "href": "program/program.html#presentations",
    "title": "Program",
    "section": "",
    "text": "Introduction (r4ds chap. 17)\nMore on Pipes (r4ds chap. 18)\nFunctions (r4ds chap. 19)\nVectors (r4ds chap. 20)\nIteration (r4ds chap. 21)"
  },
  {
    "objectID": "program/functions/functions.html#load-tidyverse-and-magrittr",
    "href": "program/functions/functions.html#load-tidyverse-and-magrittr",
    "title": "Functions",
    "section": "Load tidyverse and magrittr",
    "text": "Load tidyverse and magrittr\n\n\nCode\n# get tidyverse to shut up\nsuppressPackageStartupMessages({\n  library(tidyverse)\n})\n\n\n\n\nCode\n# create a bib file for the R packages\n# used in this document\n# Note! Needs to do a touch ag_functions.bib in terminal before first run\n# else stops when bibliography: \"ag_functions.bib\" not found in YAML\nknitr::write_bib(\n  c(\n    \"tidyverse\"\n    ),\n  file = \"ag_functions.bib\"\n  )"
  },
  {
    "objectID": "program/functions/functions.html#functions-chp.-19",
    "href": "program/functions/functions.html#functions-chp.-19",
    "title": "Functions",
    "section": "Functions, chp. 19",
    "text": "Functions, chp. 19\nr4ds: “You should consider writing a function whenever you’ve copied and pasted a block of code more than twice”\n\nSound advice\nWhy?\n\nReduces the risk of bugs\nEasier to change (only need to change the function code)\n\nStarting to write functions in R is easy\nUse verb as name (functions verbs, objects nouns)"
  },
  {
    "objectID": "program/functions/functions.html#naming",
    "href": "program/functions/functions.html#naming",
    "title": "Functions",
    "section": "Naming",
    "text": "Naming\n\nx, y, z: vectors.\nw: a vector of weights.\ndf: a data frame.\n\nNote df, density of F distribution, is a function in R package stats. Maybe my_df or a_df is better.\n\ni, j: numeric indices (typically rows and columns).\nn: length, or number of rows.\np: number of columns.\nMatch names of existing functions\n\ni.e. use na.rm for option to remove NAs, not rm.na, remove etc."
  },
  {
    "objectID": "program/functions/functions.html#inputs",
    "href": "program/functions/functions.html#inputs",
    "title": "Functions",
    "section": "Inputs",
    "text": "Inputs\n\nOmit the data argument (data, x etc.), write the others out in full length (R support partial matching).\n\nRstudio has completion so not much extra to write.\n\nWe should check input values.\nHow thoroughly?\n\nstopifnot() reasonable compromise.\nAt least for functions that are not ment to have a wide distribution.\n\n...: Arbitrary number of inputs.\n\nCan also be sent to another function (passing on arguments)"
  },
  {
    "objectID": "program/functions/functions.html#output",
    "href": "program/functions/functions.html#output",
    "title": "Functions",
    "section": "Output",
    "text": "Output\n\nUsually last statement evaluated\nReturn early with return()\nUse invisible()to make functions pipeable\n\nIf only side-effect (save, print etc.) no data out\nThe pipe ends\nCan send data past print() with invisible()"
  },
  {
    "objectID": "program/functions/functions.html#environment",
    "href": "program/functions/functions.html#environment",
    "title": "Functions",
    "section": "Environment",
    "text": "Environment\n\nInside function all variables defined are local\nIf variable is not defined R will look outside function (the environment where function was defined)\n\nMost programming language would give an error\nWhy we in the heights assignment could calculate mean and sd for male and female and then use them in a pipe to draw different distributions for male and female.\nThe values for mean and sd was not available in the pipe, but when R could not find them it looked outside the pipe."
  },
  {
    "objectID": "program/functions/functions.html#if-else-if-and-else",
    "href": "program/functions/functions.html#if-else-if-and-else",
    "title": "Functions",
    "section": "if(), else if() and else",
    "text": "if(), else if() and else\n\nConditions\nThe structure\n\n\n\n\nCode\nmy_verb &lt;- function(x) {\n  if(some condition on x) {\n    do alternative 1\n  } else if(another condition on x) {\n    do alternative 2\n  } else if(another condition on x) {\n    do alternative 3\n  } else {\n    If none of the conditions is TRUE, do\n    alternative 4\n  }\n}"
  },
  {
    "objectID": "program/functions/functions.html#to-sum-up",
    "href": "program/functions/functions.html#to-sum-up",
    "title": "Functions",
    "section": "To sum up",
    "text": "To sum up\n\n\nCode\nmy_verb &lt;- function(my_arguments) {\n  My code\n}\n\n\n\n\nPick a name for the function (verb).\nList the inputs, or arguments, to the function inside function(), i.e. function(x, y, z).\nThe code in body of the function, i.e in {code} after function(...).\nTry to follow the tidyverse rules for nice code.\n\nRstudio warns you if you fail to comply.\nAddin Styler and function Style selection is an invaluable tool for writing nice code."
  },
  {
    "objectID": "program/functions/functions.html#to-sum-up-cont.",
    "href": "program/functions/functions.html#to-sum-up-cont.",
    "title": "Functions",
    "section": "To sum up cont.",
    "text": "To sum up cont.\n\nDon’t do things like + &lt;- function(x, y) {x - y}.\n\nWhat we just did was to give a new definition of the function +.\nEven operators are functions in R.\nThe new + is defined in our current environment (“workspace”).\nIf we delete it, R will find the normal version.\nIf you just had to try it, remove with rm(+).\n\nThe + has to be enclosed in tick marks."
  },
  {
    "objectID": "program/functions/functions.html#simple-example",
    "href": "program/functions/functions.html#simple-example",
    "title": "Functions",
    "section": "Simple example",
    "text": "Simple example\n\n\nCode\ndecide_number &lt;- function(x) {\n#  stopifnot(is.numeric(x) & length(x) == 1)\n  if (x &gt; 0) {\n    paste(x, \"is greater than zero\")\n  } else if (x &lt; 0) {\n    paste(x, \"is less than zero\")\n  } else {\n    paste(x, \"is zero\")\n  }\n}"
  },
  {
    "objectID": "program/functions/functions.html#simple-example-1",
    "href": "program/functions/functions.html#simple-example-1",
    "title": "Functions",
    "section": "Simple example",
    "text": "Simple example\n\n\nCode\ndecide_number &lt;- function(x) {\n#  stopifnot(is.numeric(x) & length(x) == 1)\n  if (x &gt; 0) {\n    paste(x, \"is greater than zero\")\n  } else if (x &lt; 0) {\n    paste(x, \"is less than zero\")\n  } else {\n    paste(x, \"is zero\")\n  }\n}\n\n\n\n\nCode\n# testing\ndecide_number(10)\n\n\n[1] \"10 is greater than zero\"\n\n\nCode\ndecide_number(-2)\n\n\n[1] \"-2 is less than zero\""
  },
  {
    "objectID": "program/functions/functions.html#testing-simple-function",
    "href": "program/functions/functions.html#testing-simple-function",
    "title": "Functions",
    "section": "Testing simple function",
    "text": "Testing simple function\n\n\nCode\ndecide_number(0)\n\n\n[1] \"0 is zero\"\n\n\n\n\nCode\ndecide_number(c(-2, 5))\n\n\nReturns: the condition has length &gt; 1 and only the first element will be usedthe condition has length &gt; 1 and only the first element will be used[1] \"-2 is less than zero\" \"5 is less than zero\""
  },
  {
    "objectID": "program/functions/functions.html#simple-function-on-vectors",
    "href": "program/functions/functions.html#simple-function-on-vectors",
    "title": "Functions",
    "section": "Simple function on vectors",
    "text": "Simple function on vectors\n\nDoing it the R way (with vectors)\n\n\n\n\nCode\ndecide_numvec &lt;- function(x) {\n  stopifnot(is.numeric(x))\n  x_g &lt;- x &gt; 0\n  x_l &lt;- x &lt; 0\n  x_ans &lt;- case_when(\n    x_g == TRUE~ paste(x, \"is greater than zero\"),\n    x_l == TRUE ~ paste(x, \"is less than zero\"),\n    !(x_g | x_l) == TRUE ~ paste(x, \"is zero\")\n  )\n  x_ans\n}"
  },
  {
    "objectID": "program/functions/functions.html#testing-with-vectors",
    "href": "program/functions/functions.html#testing-with-vectors",
    "title": "Functions",
    "section": "Testing with vectors",
    "text": "Testing with vectors\n\n\nCode\n# testing\ndecide_numvec(10)\n\n\n[1] \"10 is greater than zero\"\n\n\nCode\ndecide_numvec(-2)\n\n\n[1] \"-2 is less than zero\"\n\n\nCode\ndecide_numvec(0)\n\n\n[1] \"0 is zero\"\n\n\nCode\ndecide_numvec(c(10, -2, 0))\n\n\n[1] \"10 is greater than zero\" \"-2 is less than zero\"   \n[3] \"0 is zero\""
  },
  {
    "objectID": "program/functions/functions.html#example-show_head_tail",
    "href": "program/functions/functions.html#example-show_head_tail",
    "title": "Functions",
    "section": "Example; show_head_tail()",
    "text": "Example; show_head_tail()\n\nFunction that gives us head, tail, and NAs\nStart with a very simple function\nAdd features only when we have the simple one working"
  },
  {
    "objectID": "program/functions/functions.html#define-my_df",
    "href": "program/functions/functions.html#define-my_df",
    "title": "Functions",
    "section": "Define my_df",
    "text": "Define my_df\n\n\nCode\nset.seed(333)\nmy_df &lt;- tibble(\n  x = rnorm(10, mean = 100, sd = 10),\n  y = runif(10, min = 30, max = 130),\n  z = rlnorm(10, 2, 2)\n)"
  },
  {
    "objectID": "program/functions/functions.html#example-show_head_tail-1",
    "href": "program/functions/functions.html#example-show_head_tail-1",
    "title": "Functions",
    "section": "Example; show_head_tail()",
    "text": "Example; show_head_tail()\n\n\nCode\n# head and tail for dataframes\nshow_head_tail &lt;- function(a_df) {\n  h = head(a_df, n = 3)\n  t = tail(a_df, n = 3)\n  rbind(h, t)\n}\nshow_head_tail(my_df)\n\n\n# A tibble: 6 × 3\n      x     y     z\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1  99.2  43.0  9.22\n2 119.   37.1 15.3 \n3  79.5  49.1  8.23\n4 106.   48.7  1.79\n5 104.   50.5  6.56\n6  94.4 115.   4.66"
  },
  {
    "objectID": "program/functions/functions.html#example-show_head_tail-2",
    "href": "program/functions/functions.html#example-show_head_tail-2",
    "title": "Functions",
    "section": "Example; show_head_tail()",
    "text": "Example; show_head_tail()\n\nAdd support for vectors\n\n\n\n\nCode\nshow_head_tail &lt;- function(df_or_vec) {\n  stopifnot(is.data.frame(df_or_vec) | is.vector(df_or_vec))\n  h = head(df_or_vec, n = 3)\n  t = tail(df_or_vec, n = 3)\n  rbind(vec_head = h, vec_tail = t)\n}\nshow_head_tail(my_df$x)\n\n\n              [,1]     [,2]     [,3]\nvec_head  99.17188 119.3468 79.48710\nvec_tail 106.33608 103.5272 94.39518"
  },
  {
    "objectID": "program/functions/functions.html#example-show_head_tail-3",
    "href": "program/functions/functions.html#example-show_head_tail-3",
    "title": "Functions",
    "section": "Example; show_head_tail()",
    "text": "Example; show_head_tail()\n\nAdd support for selecting n\nStart better printing for df\n\nPrinting of vectors ok\nFor df we have to indicate what is head and what is tail\nHow should we report number of NAs?"
  },
  {
    "objectID": "program/functions/functions.html#example-show_head_tail-4",
    "href": "program/functions/functions.html#example-show_head_tail-4",
    "title": "Functions",
    "section": "Example; show_head_tail()",
    "text": "Example; show_head_tail()\n\n\nCode\nshow_head_tail &lt;- function(df_or_vec, n = 3) {\n  stopifnot(is.data.frame(df_or_vec) | is.vector(df_or_vec))\n  h = head(df_or_vec, n = n)\n  t = tail(df_or_vec, n = n)\n  if(is.vector(df_or_vec)){\n    rbind(vec_head = h, vec_tail = t)\n  } else {\n        rbind(h, t)\n  }\n}"
  },
  {
    "objectID": "program/functions/functions.html#testing",
    "href": "program/functions/functions.html#testing",
    "title": "Functions",
    "section": "Testing",
    "text": "Testing\n\n\nCode\nshow_head_tail(my_df$x, n = 2)\n\n\n              [,1]      [,2]\nvec_head  99.17188 119.34681\nvec_tail 103.52717  94.39518\n\n\nCode\nshow_head_tail(my_df, n = 5)\n\n\n# A tibble: 10 × 3\n       x     y      z\n   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;\n 1  99.2  43.0   9.22\n 2 119.   37.1  15.3 \n 3  79.5  49.1   8.23\n 4 103.   56.8 114.  \n 5  84.7  81.7   3.45\n 6  97.3  43.2   1.80\n 7 112.   58.0  51.1 \n 8 106.   48.7   1.79\n 9 104.   50.5   6.56\n10  94.4 115.    4.66"
  },
  {
    "objectID": "program/functions/functions.html#example-full-show_head_tail",
    "href": "program/functions/functions.html#example-full-show_head_tail",
    "title": "Functions",
    "section": "Example; Full show_head_tail()",
    "text": "Example; Full show_head_tail()\n\nIndicates head and tail for df\nImplement count of NAs\nNumber the elements for both head and tail"
  },
  {
    "objectID": "program/functions/functions.html#example-full-show_head_tail-1",
    "href": "program/functions/functions.html#example-full-show_head_tail-1",
    "title": "Functions",
    "section": "Example; Full show_head_tail()",
    "text": "Example; Full show_head_tail()\n\n\nCode\nshow_head_tail &lt;- function(df_or_vec, n = 3) {\n    stopifnot(is.data.frame(df_or_vec) | is.vector(df_or_vec))\n  h = head(df_or_vec, n = n)\n  t = tail(df_or_vec, n = n)\n  if(is.vector(df_or_vec)) {\n    # vectors\n    c = length(df_or_vec)\n    snr_na = sum(is.na(df_or_vec))\n    nh = as.character(1:n)\n    nt = as.character((c-(n-1)):c)\n    rbind(element_head = nh, vec_head = h, \n          element_tail = nt, vec_tail = t, num._of_NAs = c(snr_na, rep(\"-\", n - 1)))\n  } else {\n    # dataframes\n    c = dim(df_or_vec)[2]\n    l = dim(df_or_vec)[1]\n    rh = rep(\"Head\", c)\n    rt = rep(\"Tail\", c)\n    nna = rep(\"NAs\", c)\n    snr_na = apply(df_or_vec, MARGIN = 2, FUN = function(x) sum(is.na(x)))\n    ht = rbind(rh, h, rt, t, nna, snr_na)\n    ht_row = c(\"\", 1:n, \"\", (l - (n - 1)):l, \"\", \"\")\n    cbind(ht_row, ht)\n  }\n}"
  },
  {
    "objectID": "program/functions/functions.html#testing-1",
    "href": "program/functions/functions.html#testing-1",
    "title": "Functions",
    "section": "Testing",
    "text": "Testing\n\n\nCode\ntmp &lt;- my_df\ntmp[3, 1] = NA; tmp[2, 2] = NA; tmp[3, 2] = NA; tmp[8, 2] = NA\nshow_head_tail(tmp$y, n = 2)\n\n\n             [,1]               [,2]              \nelement_head \"1\"                \"2\"               \nvec_head     \"43.0315650254488\" NA                \nelement_tail \"9\"                \"10\"              \nvec_tail     \"50.5169109860435\" \"114.789783554152\"\nnum._of_NAs  \"3\"                \"-\""
  },
  {
    "objectID": "program/functions/functions.html#testing-2",
    "href": "program/functions/functions.html#testing-2",
    "title": "Functions",
    "section": "Testing",
    "text": "Testing\n\n\nCode\nshow_head_tail(tmp, n = 7)\n\n\n   ht_row                x                y                z\n1                     Head             Head             Head\n2       1 99.1718835922188 43.0315650254488 9.21825357823283\n3       2 119.346809931093             &lt;NA&gt; 15.3245414351788\n4       3             &lt;NA&gt;             &lt;NA&gt; 8.22684017970637\n5       4 102.777389710092 56.7655442701653 114.130747157911\n6       5 84.7403940420975 81.7492646584287 3.45245479981737\n7       6 97.3083638218034  43.172302627936 1.79923085477392\n8       7 112.330538819689 57.9618517495692 51.0983968181822\n9                     Tail             Tail             Tail\n10      4 102.777389710092 56.7655442701653 114.130747157911\n11      5 84.7403940420975 81.7492646584287 3.45245479981737\n12      6 97.3083638218034  43.172302627936 1.79923085477392\n13      7 112.330538819689 57.9618517495692 51.0983968181822\n14      8 106.336077373601             &lt;NA&gt; 1.78544384223553\n15      9 103.527174614708 50.5169109860435 6.56434481220229\n16     10 94.3951752119365 114.789783554152 4.65579727424833\n17                     NAs              NAs              NAs\n18                       1                3                0"
  },
  {
    "objectID": "program/functions/functions.html#testing-3",
    "href": "program/functions/functions.html#testing-3",
    "title": "Functions",
    "section": "Testing",
    "text": "Testing\n\n\nCode\n# input something that is not vector or datafarme\nshow_head_tail(show_head_tail)\nshow_head_tail(plot(x = c(1, 2), y = c(3, 4)))\n\n\nGives: Error in show_head_tail(show_head_tail) : is.data.frame(df_or_vec) | is.vector(df_or_vec) is not TRUE"
  },
  {
    "objectID": "program/functions/functions.html#example-splitting-the-function",
    "href": "program/functions/functions.html#example-splitting-the-function",
    "title": "Functions",
    "section": "Example; Splitting the function",
    "text": "Example; Splitting the function\n\nshow_head_tail_vec() for vectors\n\n\n\n\nCode\nshow_head_tail_vec &lt;- function(df_or_vec, n) {\n  # vectors\n  h &lt;- head(df_or_vec, n = n)\n  t &lt;- tail(df_or_vec, n = n)\n  c &lt;- length(df_or_vec)\n  snr_na &lt;- sum(is.na(df_or_vec))\n  nh &lt;- as.character(1:n)\n  nt &lt;- as.character((c - (n - 1)):c)\n  rbind(\n    element_head = nh, vec_head = h,\n    element_tail = nt, vec_tail = t, num._of_NAs = c(snr_na, rep(\"-\", n - 1))\n  )\n}"
  },
  {
    "objectID": "program/functions/functions.html#example-splitting-the-function-1",
    "href": "program/functions/functions.html#example-splitting-the-function-1",
    "title": "Functions",
    "section": "Example; Splitting the function",
    "text": "Example; Splitting the function\n\nshow_head_tail_df() for dataframes\n\n\n\n\nCode\nshow_head_tail_df &lt;- function(df_or_vec, n) {\n  # dataframes\n  h &lt;- head(df_or_vec, n = n)\n  t &lt;- tail(df_or_vec, n = n)\n  c &lt;- dim(df_or_vec)[2]\n  l &lt;- dim(df_or_vec)[1]\n  rh &lt;- rep(\"Head\", c)\n  rt &lt;- rep(\"Tail\", c)\n  nna &lt;- rep(\"NAs\", c)\n  snr_na &lt;- apply(df_or_vec, MARGIN = 2, FUN = function(x) sum(is.na(x)))\n  ht &lt;- rbind(rh, h, rt, t, nna, snr_na)\n  ht_row &lt;- c(\"\", 1:n, \"\", (l - (n - 1)):l, \"\", \"\")\n  cbind(ht_row, ht)\n}"
  },
  {
    "objectID": "program/functions/functions.html#example-splitting-the-function-2",
    "href": "program/functions/functions.html#example-splitting-the-function-2",
    "title": "Functions",
    "section": "Example; Splitting the function",
    "text": "Example; Splitting the function\n\nshow_head_tail() for dataframes and vectors\n\n\n\n\nCode\nshow_head_tail &lt;- function(df_or_vec, n = 3) {\n  if (is.vector(df_or_vec)) {\n    show_head_tail_vec(df_or_vec, n)\n  } else if(is.data.frame(df_or_vec)) {\n    show_head_tail_df(df_or_vec, n)\n  } else {\n    paste(\"Input is of type \", class(df_or_vec), \". Only know\n          how to handle dataframes and vectors.\", sep = \"\")\n  }\n}"
  },
  {
    "objectID": "program/functions/functions.html#final-testing",
    "href": "program/functions/functions.html#final-testing",
    "title": "Functions",
    "section": "Final testing",
    "text": "Final testing\n\n\nCode\nshow_head_tail_vec(tmp$y, n = 2)\n\n\n             [,1]               [,2]              \nelement_head \"1\"                \"2\"               \nvec_head     \"43.0315650254488\" NA                \nelement_tail \"9\"                \"10\"              \nvec_tail     \"50.5169109860435\" \"114.789783554152\"\nnum._of_NAs  \"3\"                \"-\"               \n\n\nCode\nshow_head_tail_df(tmp, n = 2)\n\n\n  ht_row                x                y                z\n1                    Head             Head             Head\n2      1 99.1718835922188 43.0315650254488 9.21825357823283\n3      2 119.346809931093             &lt;NA&gt; 15.3245414351788\n4                    Tail             Tail             Tail\n5      9 103.527174614708 50.5169109860435 6.56434481220229\n6     10 94.3951752119365 114.789783554152 4.65579727424833\n7                     NAs              NAs              NAs\n8                       1                3                0"
  },
  {
    "objectID": "program/functions/functions.html#final-testing-1",
    "href": "program/functions/functions.html#final-testing-1",
    "title": "Functions",
    "section": "Final testing",
    "text": "Final testing\n\n\nCode\nshow_head_tail(tmp, n = 4)\n\n\n   ht_row                x                y                z\n1                     Head             Head             Head\n2       1 99.1718835922188 43.0315650254488 9.21825357823283\n3       2 119.346809931093             &lt;NA&gt; 15.3245414351788\n4       3             &lt;NA&gt;             &lt;NA&gt; 8.22684017970637\n5       4 102.777389710092 56.7655442701653 114.130747157911\n6                     Tail             Tail             Tail\n7       7 112.330538819689 57.9618517495692 51.0983968181822\n8       8 106.336077373601             &lt;NA&gt; 1.78544384223553\n9       9 103.527174614708 50.5169109860435 6.56434481220229\n10     10 94.3951752119365 114.789783554152 4.65579727424833\n11                     NAs              NAs              NAs\n12                       1                3                0"
  },
  {
    "objectID": "program/functions/functions.html#references",
    "href": "program/functions/functions.html#references",
    "title": "Functions",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nWickham, Hadley. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  },
  {
    "objectID": "program/iteration/iteration.html#define-my_df",
    "href": "program/iteration/iteration.html#define-my_df",
    "title": "Iteration",
    "section": "Define my_df",
    "text": "Define my_df\n\ndefine my_df from previous lecture (code not shown)\n\n\n\n\nCode\nset.seed(333)\nmy_df &lt;- tibble(\n  x = rnorm(10, mean = 100, sd = 10),\n  y = runif(10, min = 30, max = 130),\n  z = rlnorm(10, 2, 2)\n)\nmy_df1 &lt;- my_df[1:3, 1:3]"
  },
  {
    "objectID": "program/iteration/iteration.html#iteration",
    "href": "program/iteration/iteration.html#iteration",
    "title": "Iteration",
    "section": "Iteration",
    "text": "Iteration\n\nFor loops, used to be quite slow in R, but not any more\n\nNot “The R way”, but OK to use if it gives an easy solution\nOften there is a cleaner R way, if one can just recognise it\n\nThe R way\n\nUsing vectors\nUsing the classic apply family of functions\nApply a function to every row, column or element in a dataframe\n\nWe will use the tidyverses reimplementation of the apply family\n\nMore consistent"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loop",
    "href": "program/iteration/iteration.html#for-loop",
    "title": "Iteration",
    "section": "For loop",
    "text": "For loop\n\nOutput: allocate space for result before the loop starts (very important) and fill in with values. Building the output sequentially is very inefficient (your code will be slow)\nSequence: What to loop over, i.e. for (i in 1:n) {} or for (i in seq_along(df) {})\nBody: What you do for each iteration"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loop-vector",
    "href": "program/iteration/iteration.html#for-loop-vector",
    "title": "Iteration",
    "section": "For loop, vector",
    "text": "For loop, vector\nAdd 5 to sequence 1, 2, …, 10\n\n\nCode\n# allocate empty vector for output\nout &lt;- vector(mode = \"integer\", length = 10)\nfor (i in 1L:10L) {\n  out[[i]] &lt;- 5L + i\n}\n\n\n\n\nCode\nout\n\n\n [1]  6  7  8  9 10 11 12 13 14 15"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loop-tibble",
    "href": "program/iteration/iteration.html#for-loop-tibble",
    "title": "Iteration",
    "section": "For loop, tibble",
    "text": "For loop, tibble\n\nNested loop\n\nloop over columns\n\nfor each column loop over all rows\n\n\n\n\n\nCode\nmy_df1\n\n\n# A tibble: 3 × 3\n      x     y     z\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1  99.2  43.0  9.22\n2 119.   37.1 15.3 \n3  79.5  49.1  8.23\n\n\nCode\n# allocate empty vector for output\nout &lt;- tibble(x = vector(mode = \"double\", length = 3),\n              y = vector(mode = \"double\", length = 3),\n              z = vector(mode = \"double\", length = 3))\n# i row, j column\n# column\nfor (j in 1:ncol(my_df1)) {\n# row\n  for (i in 1:nrow(my_df1)) {\n    out[[i, j]] &lt;-  my_df1[[i, j]] + 5\n  }\n}\n\n\n\n\nCode\nout\n\n\n# A tibble: 3 × 3\n      x     y     z\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 104.   48.0  14.2\n2 124.   42.1  20.3\n3  84.5  54.1  13.2"
  },
  {
    "objectID": "program/iteration/iteration.html#the-r-way",
    "href": "program/iteration/iteration.html#the-r-way",
    "title": "Iteration",
    "section": "The R way",
    "text": "The R way\n\n\nCode\nmy_df1 + 5\n\n\n         x        y        z\n1 104.1719 48.03157 14.21825\n2 124.3468 42.14962 20.32454\n3  84.4871 54.09765 13.22684"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loop-tibble-rows-to-columns",
    "href": "program/iteration/iteration.html#for-loop-tibble-rows-to-columns",
    "title": "Iteration",
    "section": "For loop, tibble, rows to columns",
    "text": "For loop, tibble, rows to columns\n\n\nCode\nmy_df1\n\n\n# A tibble: 3 × 3\n      x     y     z\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1  99.2  43.0  9.22\n2 119.   37.1 15.3 \n3  79.5  49.1  8.23\n\n\n\n\nCode\n# allocate empty vector for output\nout &lt;- tibble(x = vector(mode = \"double\", length = 3),\n              y = vector(mode = \"double\", length = 3),\n              z = vector(mode = \"double\", length = 3))\n# i row, j column\n# column\nfor (j in 1:ncol(my_df1)) {\n# row\n  for (i in 1:nrow(my_df1)) {\n    out[[i, j]] &lt;-  my_df1[[j, i]]\n  }\n}\n\n\n\n\nCode\nout\n\n\n# A tibble: 3 × 3\n      x     y     z\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;\n1 99.2  119.  79.5 \n2 43.0   37.1 49.1 \n3  9.22  15.3  8.23"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loop-tibble-1",
    "href": "program/iteration/iteration.html#for-loop-tibble-1",
    "title": "Iteration",
    "section": "For loop, tibble",
    "text": "For loop, tibble\n\nHome made transpose, for any dataframe\nPreallocate with matrix()\n\n\n\n\nCode\nmyT &lt;- function(df) {\n# allocate empty tibble for transposed df\nout &lt;- matrix(ncol = nrow(df), nrow = ncol(df))\n# i row, j column\n# column\nfor (j in 1:ncol(df)) {\n# row\n  for (i in 1:nrow(df)) {\n    out[[j, i]] &lt;-  df[[i, j]]\n  }\n}\n# have to set colnames on matrix to keep as_tibble happy\ncolnames(out) &lt;- paste(\"V\", 1:nrow(df), sep = \"_\")\nas_tibble(out)\n}"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loop-tibble-2",
    "href": "program/iteration/iteration.html#for-loop-tibble-2",
    "title": "Iteration",
    "section": "For loop, tibble",
    "text": "For loop, tibble\n\ntesting\n\n\n\n\nCode\nmyT(my_df)\n\n\n# A tibble: 3 × 10\n    V_1   V_2   V_3   V_4   V_5   V_6   V_7    V_8    V_9   V_10\n  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;\n1 99.2  119.  79.5  103.  84.7  97.3  112.  106.   104.    94.4 \n2 43.0   37.1 49.1   56.8 81.7  43.2   58.0  48.7   50.5  115.  \n3  9.22  15.3  8.23 114.   3.45  1.80  51.1   1.79   6.56   4.66\n\n\nCode\ntest &lt;- matrix(sample(1:10, 10000, replace = TRUE), \n               nrow = 100, ncol = 100)\n# checking speed\nmicrobenchmark(myT(test), t(test))\n\n\nUnit: microseconds\n      expr     min       lq      mean  median       uq     max neval\n myT(test) 601.019 608.6655 624.17416 619.920 636.2585 762.846   100\n   t(test)  16.072  16.6870  19.09616  17.056  18.0605  56.826   100\n\n\n\nOur routine is about 40 times slower than Rs t(). Why so much slower? See Efficient R programming."
  },
  {
    "objectID": "program/iteration/iteration.html#myt-with-other-input",
    "href": "program/iteration/iteration.html#myt-with-other-input",
    "title": "Iteration",
    "section": "myT() with other input",
    "text": "myT() with other input\n\nNote that now all columns are character since all contains one element from previous column 2 which was changed into character.\n\n\n\n\nCode\ntmp &lt;- my_df\n# change values in column 2 to character\n# tmp[, 2] &lt;- apply(tmp[,2], MARGIN = 1, FUN = \"as.character\")\n# does not work\ntmp[, 2] &lt;- as.character(tmp[,2])\ntypeof(tmp[, 2])\n\n\n[1] \"list\"\n\n\n\n\nCode\n# works, more elegant\ntmp &lt;- my_df\ntmp$y &lt;- as.character(tmp$y)\n\n\n\n\nCode\ntmp\n\n\n# A tibble: 10 × 3\n       x y                     z\n   &lt;dbl&gt; &lt;chr&gt;             &lt;dbl&gt;\n 1  99.2 43.0315650254488   9.22\n 2 119.  37.1496164659038  15.3 \n 3  79.5 49.0976467449218   8.23\n 4 103.  56.7655442701653 114.  \n 5  84.7 81.7492646584287   3.45\n 6  97.3 43.172302627936    1.80\n 7 112.  57.9618517495692  51.1 \n 8 106.  48.704940751195    1.79\n 9 104.  50.5169109860435   6.56\n10  94.4 114.789783554152   4.66\n\n\n\n\nCode\ntmp[3, 2] &lt;- \"some text\"\n# or\ntmp[3, \"y\"] &lt;- \"some text\"\n# or\ntmp$y[[3]] &lt;- \"some text\"\n\n\n\n\nCode\nmyT(tmp)\n\n\n# A tibble: 3 × 10\n  V_1              V_2           V_3   V_4   V_5   V_6   V_7   V_8   V_9   V_10 \n  &lt;chr&gt;            &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;\n1 99.1718835922188 119.34680993… 79.4… 102.… 84.7… 97.3… 112.… 106.… 103.… 94.3…\n2 43.0315650254488 37.149616465… some… 56.7… 81.7… 43.1… 57.9… 48.7… 50.5… 114.…\n3 9.21825357823283 15.324541435… 8.22… 114.… 3.45… 1.79… 51.0… 1.78… 6.56… 4.65…"
  },
  {
    "objectID": "program/iteration/iteration.html#example-for-loop-and-decide_number",
    "href": "program/iteration/iteration.html#example-for-loop-and-decide_number",
    "title": "Iteration",
    "section": "Example; for loop and decide_number()",
    "text": "Example; for loop and decide_number()\n\nOur function from earlier. Didn’t support vectors.\n\n\n\n\nCode\ndecide_number &lt;- function(x) {\n#  stopifnot(is.numeric(x) & length(x) == 1)\n  if (x &gt; 0) {\n    paste(x, \"is greater than zero\")\n  } else if (x &lt; 0) {\n    paste(x, \"is less than zero\")\n  } else {\n    paste(x, \"is zero\")\n  }\n}"
  },
  {
    "objectID": "program/iteration/iteration.html#example-for-loop-and-decide_number-1",
    "href": "program/iteration/iteration.html#example-for-loop-and-decide_number-1",
    "title": "Iteration",
    "section": "Example; for loop and decide_number()",
    "text": "Example; for loop and decide_number()\n\nadd support for vectors\nInput the vector, preallocate space for result vec\nThe for loop spin through the elements of x (input vector)\nFor each element our previously defined function decide_number() is called. The result is placed in vec\n\n\n\n\nCode\ndecide_number &lt;- function(x) {\n#  stopifnot(is.numeric(x) & length(x) == 1)\n  if (x &gt; 0) {\n    paste(x, \"is greater than zero\")\n  } else if (x &lt; 0) {\n    paste(x, \"is less than zero\")\n  } else {\n    paste(x, \"is zero\")\n  }\n}"
  },
  {
    "objectID": "program/iteration/iteration.html#example-for-loop-and-decide_number-2",
    "href": "program/iteration/iteration.html#example-for-loop-and-decide_number-2",
    "title": "Iteration",
    "section": "Example; for loop and decide_number()",
    "text": "Example; for loop and decide_number()\n\n\nCode\ndecide_number_vec &lt;- function(x) {\n  vec &lt;- vector(mode = \"character\", length = length(x))\n  for (i in seq_along(x)) {\n    vec[i] &lt;- decide_number(x[i])\n  }\n  vec\n}\n\n\n\n\nCode\ndecide_number_vec(c(1.25, 0, -0.1, 20, -17.5))\n\n\n[1] \"1.25 is greater than zero\" \"0 is zero\"                \n[3] \"-0.1 is less than zero\"    \"20 is greater than zero\"  \n[5] \"-17.5 is less than zero\""
  },
  {
    "objectID": "program/iteration/iteration.html#example-the-r-way-decide_num_vec",
    "href": "program/iteration/iteration.html#example-the-r-way-decide_num_vec",
    "title": "Iteration",
    "section": "Example; The R way decide_num_vec()",
    "text": "Example; The R way decide_num_vec()\n\nWe solved this the R way under functions\nNeater, and probably faster\n\n\n\n\nCode\ndecide_numvec &lt;- function(x) {\n  stopifnot(is.numeric(x))\n  x_g &lt;- x &gt; 0\n  x_l &lt;- x &lt; 0\n  x_ans &lt;- case_when(\n    x_g == TRUE~ paste(x, \"is greater than zero\"),\n    x_l == TRUE ~ paste(x, \"is less than zero\"),\n    !(x_g | x_l) == TRUE ~ paste(x, \"is zero\")\n  )\n  x_ans\n}"
  },
  {
    "objectID": "program/iteration/iteration.html#testing",
    "href": "program/iteration/iteration.html#testing",
    "title": "Iteration",
    "section": "Testing",
    "text": "Testing\n\n\nCode\n# checking speed\nset.seed(444)\ntest_vec &lt;- sample(1:10, 10000, replace = TRUE)\n# Unit: milliseconds\n# commented out to run document\n# fix error\n#microbenchmark::microbenchmark(decide_number_vec(test), decide_numvec(test))\n\n\n\nvector version about 7 times faster"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loop-variations",
    "href": "program/iteration/iteration.html#for-loop-variations",
    "title": "Iteration",
    "section": "For loop variations",
    "text": "For loop variations\nModifying an existing object, instead of creating a new object. Looping over names or values, instead of indices. Handling outputs of unknown length. Handling sequences of unknown length."
  },
  {
    "objectID": "program/iteration/iteration.html#modifying-an-existing-object",
    "href": "program/iteration/iteration.html#modifying-an-existing-object",
    "title": "Iteration",
    "section": "Modifying an existing object",
    "text": "Modifying an existing object\n\nSimple, we already have the output allocated (it’ s the input). We only have to modify elements in input and return as output.\n\nWorking on elements, so very important to use [[]]\n\nLooping patterns\n\nLoop over elements (for (x in xs))\nLoop over names (for (nm in names(xs)))\nLoop over index, most general. Can extract both name and value.\n\n\n\n\n\nCode\nfor (i in seq_along(x)) {\n  name &lt;- names(x)[[i]]\n  value &lt;- x[[i]]\n}"
  },
  {
    "objectID": "program/iteration/iteration.html#unknown-output-length",
    "href": "program/iteration/iteration.html#unknown-output-length",
    "title": "Iteration",
    "section": "Unknown output length",
    "text": "Unknown output length\n\nSolution: put results in a list and then flatten the list to a vector before returning the result\nOutput will be values generated from different normal distributions\nTry to generalise to also take different sd\n\n\n\n\nCode\n# rnorm with different means\nuol_list  &lt;- function(means) {\n  out &lt;- vector(\"list\", length = length(means))\n  for(i in seq_along(means)) {\n    n &lt;- sample(50:100, 1)\n    out[[i]] &lt;- rnorm(n, means[i])\n  }\nstr(out)\n}\n\n\n\n\nCode\nuol_list(c(0.5, -2, 1.25))\n\n\nList of 3\n $ : num [1:83] 0.7953 0.0884 0.6312 0.8431 0.8186 ...\n $ : num [1:69] -3.043 -2.794 -2.705 -0.447 -2.245 ...\n $ : num [1:60] 1.23 1.8 2.5 1.01 1.88 ..."
  },
  {
    "objectID": "program/iteration/iteration.html#unknown-output-length-1",
    "href": "program/iteration/iteration.html#unknown-output-length-1",
    "title": "Iteration",
    "section": "Unknown output length",
    "text": "Unknown output length\n\nunlist() output\n\n\n\n\nCode\n# rnorm with different means\nuol_list  &lt;- function(means) {\n  out &lt;- vector(\"list\", length = length(means))\n  for(i in seq_along(means)) {\n    n &lt;- sample(50:100, 1)\n    out[[i]] &lt;- rnorm(n, means[i])\n  }\nunlist(out)\n}\n\n\n\n\nCode\ndata &lt;- uol_list(c(0.5, -2, 1.25))\nlength(data)\n\n\n[1] 223\n\n\n\n\nCode\nhead(data, n = 15)\n\n\n [1]  1.67154282  1.84833568 -1.08315203  0.64754992  0.60342554  1.13099430\n [7] -0.22300472 -0.11778435  0.63859228  0.16408998  0.08550823 -0.65944969\n[13]  1.36350123  0.72197258 -0.31774508"
  },
  {
    "objectID": "program/iteration/iteration.html#unknown-output-length-2",
    "href": "program/iteration/iteration.html#unknown-output-length-2",
    "title": "Iteration",
    "section": "Unknown output length",
    "text": "Unknown output length\n\nBuilding long strings.\n\nDo not use incremental paste.\nPut results in a list instead.\nFlatten before output with paste(list, collapse = \"\")\n\nBuilding dataframe.\n\nDo not use incremental rbind for each iteration.\nInstead put intermediate results into a list (a_list).\nUse dplyr::bind_rows(a_list) as last statement."
  },
  {
    "objectID": "program/iteration/iteration.html#unknown-sequence-length",
    "href": "program/iteration/iteration.html#unknown-sequence-length",
    "title": "Iteration",
    "section": "Unknown sequence length",
    "text": "Unknown sequence length\n\nUse while()\nNice for simulations (“continue until something happens”)\nStructure\n\n\n\n\nCode\nwhile (condition) {\n  body\n}\n\n\n\nBe aware of infinite loops.\n\nYou must make sure that the condition is met eventually, otherwise it will run forever (or until you stop it)"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loops-vs.-functionals",
    "href": "program/iteration/iteration.html#for-loops-vs.-functionals",
    "title": "Iteration",
    "section": "For loops vs. functionals",
    "text": "For loops vs. functionals\n\nfor loops essential in most programming languages\nNot as essential i R\n\nR functional programming language\nWrap up for loops in functions and call the function instead\nSee r4ds 21.4 for details\n\na tibble/dataframe is a list of equal length vectors. The length() function used on a list will return the number of elements, i.e. the number of vectors in df which is also the number of columns.\n\n\n\n\nCode\ndf2 &lt;- tibble(a = rnorm(5), b = rnorm(5), c = rnorm(5))\nlength(df2)\n\n\n[1] 3\n\n\nCode\n# column 3 in df\ndf2[[3]]\n\n\n[1]  0.83564855 -0.14929530  0.06544449  1.46357073 -1.21567248"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loops-vs.-functionals-1",
    "href": "program/iteration/iteration.html#for-loops-vs.-functionals-1",
    "title": "Iteration",
    "section": "For loops vs. functionals",
    "text": "For loops vs. functionals\n\nseq_along() is very handy.\n\n\n\n\nCode\nv &lt;- 7:11\nseq_along(v)\n\n\n[1] 1 2 3 4 5\n\n\nCode\ndim(my_df)\n\n\n[1] 10  3\n\n\nCode\n# remember my_df is a list of three vectors\nseq_along(my_df)\n\n\n[1] 1 2 3"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loops-vs.-functionals-2",
    "href": "program/iteration/iteration.html#for-loops-vs.-functionals-2",
    "title": "Iteration",
    "section": "For loops vs. functionals",
    "text": "For loops vs. functionals\n\nNote how we get hold of function name in stopifnot().\n\nstopifnot(fun %in% c(mean, median, sd, min, max)) will not work\nOne of those tricks it’s nice to know\n\nBeing able to pass a function to another function is very powerful\n\n\n\nCode\ncol_summary &lt;- function(df, fun) {\n  stopifnot(deparse(substitute(fun)) %in% \n              c(\"mean\", \"median\", \"sd\", \"min\", \"max\"))\n  out &lt;- vector(\"double\", length(df))\n#for every column in df\n  for (i in seq_along(df)) {\n#call fun on column i in df\n    out[i] &lt;- fun(df[[i]])\n  }\n  out\n}\n\n\n\n\nCode\nglimpse(df2)\n\n\nRows: 5\nColumns: 3\n$ a &lt;dbl&gt; -1.2357764, 0.5376555, -0.2991544, 0.1894264, 1.1801106\n$ b &lt;dbl&gt; -1.16501414, 0.07473311, -1.14710551, -0.72844258, 0.55147961\n$ c &lt;dbl&gt; 0.83564855, -0.14929530, 0.06544449, 1.46357073, -1.21567248"
  },
  {
    "objectID": "program/iteration/iteration.html#for-loops-vs.-functionals-3",
    "href": "program/iteration/iteration.html#for-loops-vs.-functionals-3",
    "title": "Iteration",
    "section": "For loops vs. functionals",
    "text": "For loops vs. functionals\n\nNote the use of df[[i]]\n\nWhy not df[, i]?\n\n\n\n\n\nCode\n# just content\nmy_df[[2]]\n\n\n [1]  43.03157  37.14962  49.09765  56.76554  81.74926  43.17230  57.96185\n [8]  48.70494  50.51691 114.78978\n\n\n\n\nCode\n# with wrapping\nmy_df[, 2]\n\n\n# A tibble: 10 × 1\n       y\n   &lt;dbl&gt;\n 1  43.0\n 2  37.1\n 3  49.1\n 4  56.8\n 5  81.7\n 6  43.2\n 7  58.0\n 8  48.7\n 9  50.5\n10 115."
  },
  {
    "objectID": "program/iteration/iteration.html#testing-1",
    "href": "program/iteration/iteration.html#testing-1",
    "title": "Iteration",
    "section": "Testing",
    "text": "Testing\n\n\nCode\ncol_summary(df2, median)\n\n\n[1]  0.18942642 -0.72844258  0.06544449\n\n\nCode\ncol_summary(df2, max)\n\n\n[1] 1.1801106 0.5514796 1.4635707\n\n\nCode\ncol_summary(df2, sd)\n\n\n[1] 0.9091944 0.7660998 1.0179515"
  },
  {
    "objectID": "program/iteration/iteration.html#function-name-in-front-of-result",
    "href": "program/iteration/iteration.html#function-name-in-front-of-result",
    "title": "Iteration",
    "section": "Function name in front of result",
    "text": "Function name in front of result\n\n\nCode\ncol_summary &lt;- function(df, fun) {\n  stopifnot(deparse(substitute(fun)) %in% \n              c(\"mean\", \"median\", \"sd\", \"min\", \"max\"))\n  out &lt;- vector(\"double\", length(df))\n#for every column in df\n  for (i in seq_along(df)) {\n#call fun on column i in df\n    out[i] &lt;- fun(df[[i]])\n  }\n  c(deparse(substitute(fun)), round(out, 4))\n}\n\n\n\n\nCode\ncol_summary(df2, median)\n\n\n[1] \"median\"  \"0.1894\"  \"-0.7284\" \"0.0654\" \n\n\nCode\ncol_summary(df2, max)\n\n\n[1] \"max\"    \"1.1801\" \"0.5515\" \"1.4636\"\n\n\nCode\ncol_summary(df2, sd)\n\n\n[1] \"sd\"     \"0.9092\" \"0.7661\" \"1.018\""
  },
  {
    "objectID": "program/iteration/iteration.html#map-functions",
    "href": "program/iteration/iteration.html#map-functions",
    "title": "Iteration",
    "section": "Map functions",
    "text": "Map functions\n\nFrom the purrr package. Part of core tidyverse\ntidyverse reimplementation of the classic apply family of functions\nLoop over a vector, do something to the elements, save output\nmap() makes a list.\nmap_lgl() makes a logical vector.\nmap_int() makes an integer vector.\nmap_dbl() makes a double vector.\nmap_chr() makes a character vector."
  },
  {
    "objectID": "program/iteration/iteration.html#map-family",
    "href": "program/iteration/iteration.html#map-family",
    "title": "Iteration",
    "section": "map family",
    "text": "map family\n\nTakes a vector as input\napplies a function\nreturn vector of same length as the input\nThe type of the output is decided by map_*() suffix (the asterisk bit)\nThis is more the R way than for-loops.\n\nIf you havn’t done any programming before (c, fortran etc.) this is the way to go.\n\nThe map-functions makes the code easier to read and understand\nWhy map_* when we have the apply family?\n\nThe map_* family is more consistent. Easier to transfer skills from one function to another."
  },
  {
    "objectID": "program/iteration/iteration.html#map-family-examples",
    "href": "program/iteration/iteration.html#map-family-examples",
    "title": "Iteration",
    "section": "map family examples",
    "text": "map family examples\n\n\nCode\nmap_dbl(my_df, mean)\n\n\n       x        y        z \n99.94209 58.29394 21.62561 \n\n\nCode\nmap_dbl(my_df, sum)\n\n\n       x        y        z \n999.4209 582.9394 216.2561 \n\n\nCode\n# returns the sums as type character\nmap_chr(my_df, sum)\n\n\n           x            y            z \n\"999.420909\" \"582.939427\" \"216.256051\" \n\n\n\nRead as: “use the mean function on every column in my_df and return result as type double”\nEasy to see what function is used, not so much indexes and other stuff as in the for-loop\nWill the following code work?\n\n\n\n\nCode\nmap_int(my_df, mean)\n\n\n\nNo\n\n\n\n\nWill this work?\n\n\n\nCode\nas.integer(map_dbl(my_df, mean))\n\n\n[1] 99 58 21\n\n\n\nNo truncates double values\nMust do\n\n\n\n\n\nCode\nround(map_dbl(my_df, mean), digits = 0)\n\n\n  x   y   z \n100  58  22"
  },
  {
    "objectID": "program/iteration/iteration.html#map-family-examples-1",
    "href": "program/iteration/iteration.html#map-family-examples-1",
    "title": "Iteration",
    "section": "map family examples",
    "text": "map family examples\n\nmapfunctions works great in a pipe\n\n\n\n\nCode\nmy_df %&gt;% \n  map_dbl(median)\n\n\n         x          y          z \n100.974637  49.807279   7.395592 \n\n\n\nmap functions are fast (important for large dataframes)\nargument 2 (.f) do not have to be a function name as above\n\ncan be formula\ninteger vector\n\nmap functions usees …, makes it possible to send argument to the function"
  },
  {
    "objectID": "program/iteration/iteration.html#map-family-examples-2",
    "href": "program/iteration/iteration.html#map-family-examples-2",
    "title": "Iteration",
    "section": "map family examples",
    "text": "map family examples\n\nmap preserves variable names from dataframe\n\n\n\n\nCode\n# trim 0.1 removes 10% of data each side\nmy_df %&gt;%  map_dbl(mean, trim = 0.1, na.rm = TRUE)\n\n\n        x         y         z \n100.07337  53.87500  12.54248 \n\n\nCode\n# manual trim lowest and highest\nmean(sort(my_df$x)[2:9])\n\n\n[1] 100.0734"
  },
  {
    "objectID": "program/iteration/iteration.html#shortcut-for-anonymouse-functions-in-map-functions",
    "href": "program/iteration/iteration.html#shortcut-for-anonymouse-functions-in-map-functions",
    "title": "Iteration",
    "section": "Shortcut for anonymouse functions in map functions",
    "text": "Shortcut for anonymouse functions in map functions\n\nwith normal anonymous function\n\n\n\n\nCode\nmy_df &lt;- my_df %&gt;% mutate(w = c(rep(\"A\", 5), rep(\"B\", 5)))\nmy_df %&gt;% \n  split(.$w) %&gt;% \n  map(function(df) lm(x ~ y, data = df))\n\n\n$A\n\nCall:\nlm(formula = x ~ y, data = df)\n\nCoefficients:\n(Intercept)            y  \n   125.4851      -0.5299  \n\n\n$B\n\nCall:\nlm(formula = x ~ y, data = df)\n\nCoefficients:\n(Intercept)            y  \n   110.6841      -0.1254"
  },
  {
    "objectID": "program/iteration/iteration.html#shortcut-for-anonymouse-functions-in-map-functions-1",
    "href": "program/iteration/iteration.html#shortcut-for-anonymouse-functions-in-map-functions-1",
    "title": "Iteration",
    "section": "Shortcut for anonymouse functions in map functions",
    "text": "Shortcut for anonymouse functions in map functions\n\nwith short for anonymous function\n\n~ for the function(x) bit\n. for the data (current list element, “A” list then “B” list)\n\n\n\n\n\nCode\nmy_df &lt;- my_df %&gt;% mutate(w = c(rep(\"A\", 5), rep(\"B\", 5)))\nmy_models &lt;- my_df %&gt;% \n  split(.$w) %&gt;% \n  map(~lm(x ~ y, data = .))"
  },
  {
    "objectID": "program/iteration/iteration.html#shortcut-for-anonymouse-functions-in-map-functions-2",
    "href": "program/iteration/iteration.html#shortcut-for-anonymouse-functions-in-map-functions-2",
    "title": "Iteration",
    "section": "Shortcut for anonymouse functions in map functions",
    "text": "Shortcut for anonymouse functions in map functions\n\nPicking info from summary (see ?summary.lm for the availabe statistics)\n\n\n\n\nCode\nmy_models %&gt;% \n  map(summary) %&gt;% \n  map_dbl(~.$adj.r.squared)\n\n\n         A          B \n0.12031860 0.02129301 \n\n\nCode\n#or\nmy_models %&gt;% \n  map(summary) %&gt;% \n  map_dbl(\"adj.r.squared\")\n\n\n         A          B \n0.12031860 0.02129301"
  },
  {
    "objectID": "program/iteration/iteration.html#errors",
    "href": "program/iteration/iteration.html#errors",
    "title": "Iteration",
    "section": "Errors",
    "text": "Errors\n\nsafely()\npossibly()\nquietly()"
  },
  {
    "objectID": "program/iteration/iteration.html#map-and-multiple-arguments-map2",
    "href": "program/iteration/iteration.html#map-and-multiple-arguments-map2",
    "title": "Iteration",
    "section": "map and multiple arguments; map2()",
    "text": "map and multiple arguments; map2()\n\nMore advanced, check r4ds 21.7 and 21.8 when you need this\nmap2(); `map2(arg_vary1,arg_vary2, function, args_not_vary)\npmap(); list of arguments (arguments should be named)\n\n\n\n\nCode\n# normal dist. with mu=0, sd=1, mu=0.5 sd=1.25 etc.\nmu &lt;- c(0, 0.5, 1, 2, 3)\nsd &lt;- c(1, 1.25, 2, 5, 2)\nnorm_df &lt;- map2(mu, sd, rnorm, n = 10) %&gt;%\n  set_names(., paste(\"rnorm_mu\", mu, \"_sd\", sd, sep = \"\")) %&gt;% \n  as_tibble()\nhead(norm_df, n = 3)\n\n\n# A tibble: 3 × 5\n  rnorm_mu0_sd1 rnorm_mu0.5_sd1.25 rnorm_mu1_sd2 rnorm_mu2_sd5 rnorm_mu3_sd2\n          &lt;dbl&gt;              &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;\n1        0.0369             1.45            5.72          7.93          3.75\n2       -0.208              2.17            4.02          3.63          4.08\n3        0.977              0.0603          2.99         -1.44          3.75"
  },
  {
    "objectID": "program/iteration/iteration.html#map-and-multiple-arguments-pmap",
    "href": "program/iteration/iteration.html#map-and-multiple-arguments-pmap",
    "title": "Iteration",
    "section": "map and multiple arguments; pmap()",
    "text": "map and multiple arguments; pmap()\n\npmap(): also accepts a list of functions to apply\nPut arguments in a tribble\nnice to know about, but try to use easier structures for now\n\n\n\n\nCode\nmy_args &lt;- tribble(\n  ~.f, ~params,\n  \"rnorm\", list(mean = 1, sd = 2),\n  \"runif\", list(min = -2, max = 2)\n)\n\ntmp &lt;- my_args %&gt;%\n  mutate(\n    # Note! invoke functions retired, use exec() from rlang package\n    my_data = invoke_map(.f, params, n = 10)\n  ) %&gt;%\n  select(my_data)"
  },
  {
    "objectID": "program/iteration/iteration.html#map-and-multiple-arguments-pmap-1",
    "href": "program/iteration/iteration.html#map-and-multiple-arguments-pmap-1",
    "title": "Iteration",
    "section": "map and multiple arguments; pmap()",
    "text": "map and multiple arguments; pmap()\n\n\nCode\ntmp$my_data\n\n\n[[1]]\n [1] -2.8793183  1.3171609  1.5156787  0.5202997  2.2592611  0.8367168\n [7]  0.5917038  4.7874023  4.0342070  4.7042279\n\n[[2]]\n [1] -1.9523789  1.4733311 -0.9920479 -0.5070250  0.6595940  1.6317772\n [7] -1.8112032  1.4864376  1.0832318  1.9872676\n\n\nCode\ntmp &lt;- tibble(\n  rnorm_1_2 = tmp$my_data[[1]],\n  runif_m2_2 = tmp$my_data[[2]]\n)\nhead(tmp, n = 3)\n\n\n# A tibble: 3 × 2\n  rnorm_1_2 runif_m2_2\n      &lt;dbl&gt;      &lt;dbl&gt;\n1     -2.88     -1.95 \n2      1.32      1.47 \n3      1.52     -0.992"
  },
  {
    "objectID": "program/iteration/iteration.html#references",
    "href": "program/iteration/iteration.html#references",
    "title": "Iteration",
    "section": "References",
    "text": "References\n\n\nMSB105\n\n\n\nBache, Stefan Milton, and Hadley Wickham. 2022. Magrittr: A Forward-Pipe Operator for r. https://CRAN.R-project.org/package=magrittr.\n\n\nGrolemund, Garrett, and Hadley Wickham. 2011. “Dates and Times Made Easy with lubridate.” Journal of Statistical Software 40 (3): 1–25. https://www.jstatsoft.org/v40/i03/.\n\n\nMersmann, Olaf. 2023. Microbenchmark: Accurate Timing Functions. https://github.com/joshuaulrich/microbenchmark/.\n\n\nSpinu, Vitalie, Garrett Grolemund, and Hadley Wickham. 2023. Lubridate: Make Dealing with Dates a Little Easier. https://CRAN.R-project.org/package=lubridate.\n\n\nWickham, Hadley. 2023. Tidyverse: Easily Install and Load the Tidyverse. https://CRAN.R-project.org/package=tidyverse.\n\n\nWickham, Hadley, Mara Averick, Jennifer Bryan, Winston Chang, Lucy D’Agostino McGowan, Romain François, Garrett Grolemund, et al. 2019. “Welcome to the tidyverse.” Journal of Open Source Software 4 (43): 1686. https://doi.org/10.21105/joss.01686."
  }
]